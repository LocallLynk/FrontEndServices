{"version":3,"file":"ej2-image-editor.umd.min.js","sources":["../src/image-editor/action/crop.js","../src/image-editor/action/draw.js","../src/image-editor/action/export.js","../src/image-editor/action/filter.js","../src/image-editor/action/freehand-draw.js","../src/image-editor/action/selection.js","../src/image-editor/action/shape.js","../src/image-editor/action/transform.js","../src/image-editor/action/undo-redo.js","../src/image-editor/base/image-editor.js","../src/image-editor/base/enum.js","../src/image-editor/renderer/toolbar.js"],"sourcesContent":["import { Browser, extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nvar Crop = /** @class */ (function () {\n    function Crop(parent) {\n        this.croppedDegree = 0; // Specifies the degree when crop is performed\n        this.cropDestPoints = { startX: 0, startY: 0, width: 0, height: 0 }; // To redraw old image when navigate to crop tab\n        this.tempFlipPanPoint = { x: 0, y: 0 };\n        this.isPreventScaling = false;\n        this.isInitCrop = false;\n        this.isTransformCrop = false;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Crop.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Crop.prototype.addEventListener = function () {\n        this.parent.on('crop', this.cropping, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Crop.prototype.removeEventListener = function () {\n        this.parent.off('crop', this.cropping);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Crop.prototype.cropping = function (args) {\n        this.updateCropPvtVar();\n        switch (args.prop) {\n            case 'cropCircle':\n                this.cropCircle(args.value['context'], args.value['isSave'], args.value['isFlip']);\n                break;\n            case 'setCurrSelPoints':\n                this.setCurrSelPoints(args.value['isSetDimension']);\n                break;\n            case 'updateRotatePan':\n                this.updateRotatePan();\n                break;\n            case 'crop':\n                this.crop(args.value['obj']);\n                break;\n            case 'calcRatio':\n                this.calcRatio(args.value['obj'], args.value['dimension']);\n                break;\n            case 'getCurrFlipState':\n                this.getCurrFlipState(args.value['panObj']);\n                break;\n            case 'getPreviousCropCurrentObj':\n                args.value['obj']['prevObj'] = this.prevCropCurrObj;\n                break;\n            case 'setPreviousCropCurrentObj':\n                this.prevCropCurrObj = args.value['obj'];\n                break;\n            case 'setCropDestPoints':\n                this.cropDestPoints = args.value['point'];\n                break;\n            case 'getTempFlipPanPoint':\n                args.value['obj']['point'] = this.tempFlipPanPoint;\n                break;\n            case 'setTempFlipPanPoint':\n                if (isNullOrUndefined(args.value['isAdd'])) {\n                    this.tempFlipPanPoint = args.value['point'];\n                }\n                else {\n                    this.tempFlipPanPoint.x += args.value['point'].x;\n                    this.tempFlipPanPoint.y += args.value['point'].y;\n                }\n                break;\n            case 'getPreventScaling':\n                args.value['obj']['bool'] = this.isPreventScaling;\n                break;\n            case 'adjustStraightenForShapes':\n                this.adjustStraightenForShapes(args.value['type'], args.value['isInitialRotated']);\n                break;\n            case 'resizeWrapper':\n                this.resizeWrapper();\n                break;\n            case 'setTransformCrop':\n                this.isTransformCrop = args.value['bool'];\n                break;\n            case 'setInitCrop':\n                this.isInitCrop = args.value['bool'];\n                break;\n            case 'resetZoom':\n                this.resetZoom();\n                break;\n            case 'revertTransform':\n                this.revertTransform(args.value['type'], args.value['coll']);\n                break;\n            case 'reset':\n                this.reset();\n                break;\n        }\n    };\n    Crop.prototype.getModuleName = function () {\n        return 'crop';\n    };\n    Crop.prototype.updateCropPvtVar = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n        if (parent.upperCanvas) {\n            this.upperContext = parent.upperCanvas.getContext('2d');\n        }\n    };\n    Crop.prototype.reset = function () {\n        this.prevCropCurrObj = null;\n        this.croppedDegree = 0;\n        this.cropDestPoints = { startX: 0, startY: 0, width: 0, height: 0 };\n        this.tempFlipPanPoint = { x: 0, y: 0 };\n        this.isPreventScaling = false;\n        this.isInitCrop = false;\n        this.isTransformCrop = false;\n    };\n    Crop.prototype.cropImg = function (isRotateCrop) {\n        var parent = this.parent;\n        var isNullCrop = isNullOrUndefined(isRotateCrop);\n        var resizeIcon = parent.element.querySelector('#' + parent.element.id + '_nonaspectratio');\n        var actPoint = parent.activeObj.activePoint;\n        var img = parent.img;\n        var isRotated = false;\n        for (var i = 0, len = parent.rotateFlipColl.length; i < len; i++) {\n            var currentValue = parent.rotateFlipColl[i];\n            if (currentValue === 90 || currentValue === -90) {\n                isRotated = true;\n            }\n        }\n        parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n        if (isNullCrop || resizeIcon) {\n            this.croppedDegree = parent.transform.degree;\n        }\n        if (isNullCrop && (parent.transform.degree !== 0) || isRotated) {\n            this.updateCropObj();\n            var point = { startX: img.destLeft, startY: img.destTop, width: img.destWidth, height: img.destHeight };\n            parent.notify('transform', { prop: 'setCurrDestinationPoint', onPropertyChange: false, value: { point: point } });\n            this.rotateCrop();\n        }\n        else if (isNullCrop && parent.transform.currFlipState !== '') {\n            this.updateCropObj();\n            var point = { startX: img.destLeft, startY: img.destTop, width: img.destWidth, height: img.destHeight };\n            parent.notify('transform', { prop: 'setCurrDestinationPoint', onPropertyChange: false, value: { point: point } });\n            this.flipCrop();\n        }\n        else {\n            this.adjustStraightenForShapes('initial', false);\n            parent.notify('draw', { prop: 'setTempZoomFactor', onPropertyChange: false, value: { tempZoomFactor: parent.transform.zoomFactor } });\n            var ratio = this.calcRatio();\n            if (isNullCrop || !isRotateCrop) { // isRotateCrop is NULL or False\n                this.updateCropObj();\n                parent.notify('draw', { prop: 'resetPanPoints', onPropertyChange: false });\n                parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n                var point = { startX: img.destLeft, startY: img.destTop, width: img.destWidth, height: img.destHeight };\n                parent.notify('transform', { prop: 'setCurrDestinationPoint', onPropertyChange: false, value: { point: point } });\n                parent.currSelectionPoint = extend({}, parent.activeObj, {}, true);\n                this.cropDestPoints = { startX: img.destLeft, startY: img.destTop, width: img.destWidth, height: img.destHeight };\n            }\n            var obj = { width: 0, height: 0 };\n            parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false, value: { width: actPoint.width * ratio.width,\n                    height: actPoint.height * ratio.height, obj: obj, isImgShape: null } });\n            var maxDimension = obj;\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            parent.img = { srcLeft: (actPoint.startX * ratio.width) - (img.destLeft * ratio.width),\n                srcTop: (actPoint.startY * ratio.height) - (img.destTop * ratio.height),\n                srcWidth: (actPoint.width * ratio.width), srcHeight: (actPoint.height * ratio.height),\n                destLeft: (parent.lowerCanvas.clientWidth - maxDimension.width) / 2,\n                destTop: (parent.lowerCanvas.clientHeight - maxDimension.height + 1) / 2,\n                destWidth: maxDimension.width, destHeight: maxDimension.height };\n            var temp = this.lowerContext.filter;\n            parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n            this.lowerContext.filter = 'none';\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            this.cropObjColl();\n            parent.transform.straighten = 0;\n            parent.activeObj = activeObj;\n            this.cropFreehandDrawColl();\n            parent.shapeColl = [];\n            parent.notify('shape', { prop: 'updateShapeColl', onPropertyChange: false });\n            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n            parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n            parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n            if (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') {\n                this.cropCircle(this.lowerContext);\n            }\n            else {\n                parent.isCircleCrop = false;\n            }\n            this.lowerContext.filter = temp;\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.currObjType.isCustomCrop = false;\n            parent.pan(false);\n            parent.transform.defaultZoomFactor = 0;\n        }\n    };\n    Crop.prototype.adjustStraightenForShapes = function (type, isInitialRotated) {\n        var parent = this.parent;\n        var center = {\n            x: parent.img.destLeft + parent.img.destWidth / 2,\n            y: parent.img.destTop + parent.img.destHeight / 2\n        };\n        for (var _i = 0, _a = parent.objColl; _i < _a.length; _i++) {\n            var obj = _a[_i];\n            if (['rectangle', 'ellipse', 'text', 'image', 'redact'].indexOf(obj.shape) !== -1) {\n                if (isInitialRotated || obj.rotatedAngle !== 0) {\n                    var _b = obj.activePoint, startX = _b.startX, startY = _b.startY, width = _b.width, height = _b.height;\n                    var angle = type === 'initial' ? obj.rotatedAngle : -obj.rotatedAngle;\n                    var diffX = startX + width / 2 - center.x;\n                    var diffY = startY + height / 2 - center.y;\n                    var cosAngle = Math.cos(angle);\n                    var sinAngle = Math.sin(angle);\n                    var centerX = cosAngle * diffX - sinAngle * diffY + center.x;\n                    var centerY = sinAngle * diffX + cosAngle * diffY + center.y;\n                    var diffXUpdated = centerX - startX - width / 2;\n                    var diffYUpdated = centerY - startY - height / 2;\n                    obj.activePoint.startX += diffXUpdated;\n                    obj.activePoint.startY += diffYUpdated;\n                    obj.activePoint.endX += diffXUpdated;\n                    obj.activePoint.endY += diffYUpdated;\n                }\n            }\n        }\n    };\n    Crop.prototype.updateCropObj = function () {\n        this.parent.afterCropActions = [];\n        var object = { currObj: {} };\n        this.parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var obj = object['currObj'];\n        obj.straighten = this.parent.transform.straighten;\n        this.parent.cropObj = extend({}, obj, {}, true);\n    };\n    Crop.prototype.rotateCrop = function () {\n        var parent = this.parent;\n        var flipState = this.getCurrFlipState();\n        var shape = parent.activeObj.shape || '';\n        parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n        parent.currSelectionPoint = extend({}, parent.activeObj, {}, true);\n        parent.objColl.push(parent.activeObj);\n        parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n        var activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n        var tempCurrSelObj = extend({}, parent.currSelectionPoint, {}, true);\n        var preventSelObj = { bool: null };\n        parent.notify('transform', { prop: 'getPreventSelect', onPropertyChange: false, value: { obj: preventSelObj } });\n        parent.notify('transform', { prop: 'setPreventSelect', onPropertyChange: false, value: { bool: true } });\n        var coll = extend([], parent.rotateFlipColl, [], true);\n        this.panToSelRangle(true);\n        activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: activeObj } });\n        parent.objColl.pop();\n        parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n        parent.objColl.push(parent.activeObj);\n        // For reverse straightening\n        var straighten = parent.transform.straighten;\n        if (straighten !== 0) {\n            parent.transform.straighten = 0;\n            parent.straightenBaseImageCanvas();\n            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n        }\n        this.resetZoom();\n        var afterCropActions = extend([], parent.afterCropActions, [], true);\n        this.revertTransform('initial', coll);\n        // Perform straighten\n        if (straighten !== 0) {\n            parent.transform.straighten = (flipState === 'horizontal' || flipState === 'vertical') ? -straighten : straighten;\n            parent.straightenBaseImageCanvas();\n            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n            parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n        }\n        activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: activeObj } });\n        parent.objColl.pop();\n        parent.transform.degree = 0;\n        // Checking for selection inside image\n        var object = { isIntersect: null };\n        parent.notify('draw', { prop: 'updateImgCanvasPoints', onPropertyChange: false });\n        parent.notify('draw', { prop: 'isLinesIntersect', onPropertyChange: false, value: { obj: object } });\n        var count = 0;\n        while (straighten !== 0 && object['isIntersect']) {\n            count++;\n            if (count === 50) {\n                break;\n            }\n            parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: 0.025, zoomPoint: null }, isResize: null });\n            parent.notify('draw', { prop: 'updateImgCanvasPoints', onPropertyChange: false });\n            parent.notify('draw', { prop: 'isLinesIntersect', onPropertyChange: false, value: { obj: object } });\n        }\n        this.cropImg(true);\n        this.revertTransform('reverse', coll);\n        parent.afterCropActions = afterCropActions;\n        parent.currSelectionPoint = tempCurrSelObj;\n        parent.notify('transform', { prop: 'setPreventSelect', onPropertyChange: false, value: { bool: preventSelObj['bool'] } });\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n        if (shape === 'crop-circle') {\n            this.cropCircle(this.lowerContext);\n        }\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.notify('draw', { prop: 'resetPanPoints', onPropertyChange: false });\n    };\n    Crop.prototype.revertTransform = function (type, coll) {\n        var parent = this.parent;\n        var obj = { isRotate: false };\n        if (type === 'initial') {\n            for (var i = coll.length - 1; i >= 0; i--) {\n                var value = coll[i];\n                switch (value) {\n                    case 90:\n                        parent.notify('transform', { prop: 'rotate', value: { degree: -90, obj: obj } });\n                        break;\n                    case -90:\n                        parent.notify('transform', { prop: 'rotate', value: { degree: 90, obj: obj } });\n                        break;\n                    default:\n                        parent.notify('transform', { prop: 'flipImage', value: { direction: parent.toPascalCase(value.toString()) } });\n                        break;\n                }\n            }\n        }\n        else {\n            this.updateFlipState();\n            for (var i = 0, len = coll.length; i < len; i++) {\n                var value = coll[i];\n                switch (value) {\n                    case 90:\n                        parent.notify('transform', { prop: 'rotate', value: { degree: 90, obj: obj } });\n                        break;\n                    case -90:\n                        parent.notify('transform', { prop: 'rotate', value: { degree: -90, obj: obj } });\n                        break;\n                    default:\n                        parent.notify('transform', { prop: 'flipImage', value: { direction: parent.toPascalCase(value.toString()) } });\n                        break;\n                }\n            }\n        }\n    };\n    Crop.prototype.updateFlipState = function () {\n        var parent = this.parent;\n        var objColl = parent.objColl;\n        for (var i = 0, len = objColl.length; i < len; i++) {\n            objColl[i].shapeFlip = '';\n        }\n        // eslint-disable-next-line\n        var pointColl = parent.pointColl;\n        for (var i = 0; i < parent.freehandCounter; i++) {\n            pointColl[i].shapeFlip = '';\n        }\n    };\n    Crop.prototype.resetZoom = function () {\n        var parent = this.parent;\n        if (parent.transform.zoomFactor > 0) {\n            var zoomFactor = parent.transform.zoomFactor;\n            var isUndoRedo = parent.isUndoRedo;\n            parent.setProperties({ zoomSettings: { zoomFactor: (zoomFactor * 10) } }, true);\n            parent.notify('transform', { prop: 'setPreviousZoomValue', onPropertyChange: false,\n                value: { previousZoomValue: parent.zoomSettings.zoomFactor } });\n            for (var i = 0; i < (zoomFactor * 10); i++) {\n                parent.isUndoRedo = true;\n                parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                    value: { zoomFactor: -0.1, zoomPoint: null }, isResize: null });\n            }\n            parent.isUndoRedo = isUndoRedo;\n            parent.notify('draw', { prop: 'resetPanPoints', onPropertyChange: false });\n        }\n    };\n    Crop.prototype.flipCrop = function () {\n        var parent = this.parent;\n        parent.notify('transform', { prop: 'setReverseFlip', onPropertyChange: false, value: { isReverseFlip: true } });\n        parent.panPoint.totalPannedPoint.x += this.tempFlipPanPoint.x;\n        parent.panPoint.totalPannedPoint.y += this.tempFlipPanPoint.y;\n        var tempCurrFlipState = parent.transform.currFlipState;\n        var obj = { flipColl: null };\n        parent.notify('transform', { prop: 'getFlipColl', onPropertyChange: false, value: { obj: obj } });\n        var tempFlipColl = obj['flipColl'];\n        parent.notify('transform', { prop: 'setFlipColl', onPropertyChange: false, value: { flipColl: [] } });\n        parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n        parent.objColl.push(parent.activeObj);\n        if (parent.transform.degree === 0) {\n            var panX = -parent.cropObj.totalPannedPoint.x;\n            var panY = -parent.cropObj.totalPannedPoint.y;\n            parent.img.destLeft += panX;\n            parent.img.destTop += panY;\n            parent.notify('transform', { prop: 'drawPannImage', value: { point: { x: panX, y: panY } } });\n            parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n            parent.objColl.pop();\n            parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n            parent.objColl.push(parent.activeObj);\n        }\n        this.resetZoom();\n        parent.currSelectionPoint = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        var temp = this.lowerContext.filter;\n        parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n        this.updateFlipState();\n        parent.notify('shape', { prop: 'redrawObj', onPropertyChange: false, value: { degree: this.getCurrFlipState() } });\n        parent.notify('freehand-draw', { prop: 'flipFHDColl', onPropertyChange: false,\n            value: { value: this.getCurrFlipState() } });\n        parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n        parent.objColl.pop();\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        this.cropImg(true);\n        parent.notify('transform', { prop: 'setReverseRotate', onPropertyChange: false, value: { bool: true } });\n        this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n        parent.notify('draw', { prop: 'setDestPoints', onPropertyChange: false });\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, context: null, isPreventCircleCrop: null } });\n        parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: false } });\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: null, context: null, isPreventCircleCrop: null } });\n        parent.transform.currFlipState = tempCurrFlipState;\n        parent.notify('transform', { prop: 'setFlipColl', onPropertyChange: false, value: { flipColl: tempFlipColl } });\n        this.lowerContext.filter = 'none';\n        this.updateFlipState();\n        parent.notify('shape', { prop: 'redrawObj', onPropertyChange: false, value: { degree: this.getCurrFlipState() } });\n        parent.notify('freehand-draw', { prop: 'flipFHDColl', onPropertyChange: false,\n            value: { value: this.getCurrFlipState() } });\n        parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n            value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n        this.lowerContext.filter = temp;\n        if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n            this.cropCircle(this.lowerContext);\n        }\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.notify('transform', { prop: 'setReverseFlip', onPropertyChange: false, value: { isReverseFlip: false } });\n        parent.notify('draw', { prop: 'resetPanPoints', onPropertyChange: false });\n        this.tempFlipPanPoint = { x: 0, y: 0 };\n    };\n    Crop.prototype.cropObjColl = function () {\n        var parent = this.parent;\n        var point;\n        var shape;\n        var obj;\n        if (parent.objColl.length > 0) {\n            for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                obj = parent.objColl[i];\n                point = obj.activePoint;\n                var _a = parent.activeObj.activePoint, startX = _a.startX, startY = _a.startY, width = _a.width, height = _a.height;\n                shape = obj.shape;\n                obj.imageRatio = { startX: ((point.startX - startX) / width),\n                    startY: ((point.startY - startY) / height),\n                    endX: ((point.endX - startX) / width), endY: ((point.endY - startY) / height),\n                    width: width / point.width, height: height / point.height };\n                var degree = void 0;\n                var size = void 0;\n                switch (shape) {\n                    case 'text':\n                        degree = (obj.shapeDegree === 0) ? parent.transform.degree : parent.transform.degree - obj.shapeDegree;\n                        size = (degree === 0 || Math.abs(degree) === 180) ? point.width : point.height;\n                        obj.textSettings.fontRatio = size / obj.textSettings.fontSize;\n                        break;\n                    case 'line':\n                    case 'arrow':\n                        this.cropPointCollection(i);\n                        if (shape === 'arrow') {\n                            parent.notify('shape', { prop: 'updateArrowRatio', onPropertyChange: false, value: { obj: obj } });\n                        }\n                        break;\n                    case 'path':\n                        this.cropPointCollection(i);\n                        break;\n                }\n            }\n        }\n    };\n    Crop.prototype.cropPointCollection = function (i) {\n        var parent = this.parent;\n        var shape = parent.objColl[i].shape;\n        var x;\n        var y;\n        var width;\n        var height;\n        var point = parent.activeObj.activePoint;\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        if (shape === 'path') {\n            x = point.startX;\n            y = point.startY;\n            width = point.width;\n            height = point.height;\n        }\n        else {\n            x = destLeft;\n            y = destTop;\n            width = destWidth;\n            height = destHeight;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var pointColl = parent.objColl[i].pointColl;\n        for (var n = 0, len = pointColl.length; n < len; n++) {\n            pointColl[n].ratioX = (pointColl[n].x - x) / width;\n            pointColl[n].ratioY = (pointColl[n].y - y) / height;\n        }\n    };\n    Crop.prototype.cropFreehandDrawColl = function () {\n        var parent = this.parent;\n        var _a = parent.activeObj.activePoint, startX = _a.startX, startY = _a.startY, width = _a.width, height = _a.height;\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            parent.points = extend([], parent.pointColl[n].points, []);\n            parent.notify('freehand-draw', { prop: 'setPointCounter', onPropertyChange: false, value: { value: 0 } });\n            var len = parent.points.length;\n            for (var l = 0; l < len; l++) {\n                parent.points[l].ratioX = (parent.points[l].x - startX) / width;\n                parent.points[l].ratioY = (parent.points[l].y - startY) / height;\n            }\n        }\n        parent.notify('freehand-draw', { prop: 'updateCropPtsForSel', onPropertyChange: false });\n    };\n    Crop.prototype.resetAnnotations = function () {\n        var parent = this.parent;\n        parent.objColl = [];\n        parent.pointColl = [];\n        parent.freehandCounter = 0;\n        parent.notify('freehand-draw', { prop: 'resetStraightenPoint' });\n    };\n    Crop.prototype.setCurrSelPoints = function (isSetDimension) {\n        var parent = this.parent;\n        parent.allowDownScale = false;\n        var destPoint = this.cropDestPoints;\n        var filter = this.lowerContext.filter;\n        var isCropTab = parent.isCropTab;\n        parent.img = { srcLeft: 0, srcTop: 0, srcWidth: parent.baseImgCanvas.width, srcHeight: parent.baseImgCanvas.height,\n            destLeft: destPoint.startX, destTop: destPoint.startY, destWidth: destPoint.width, destHeight: destPoint.height };\n        var img = parent.img;\n        var currSelPoint = parent.currSelectionPoint;\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        if (isSetDimension) {\n            parent.notify('draw', { prop: 'setDestPoints', onPropertyChange: false });\n        }\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, context: null, isPreventCircleCrop: null } });\n        if (this.croppedDegree === 0 && parent.transform.degree === 0 && currSelPoint\n            && currSelPoint.shape !== 'crop-circle' && currSelPoint.shape !== 'crop-square') {\n            img.destLeft = destPoint.startX;\n            img.destTop = destPoint.startY;\n            img.destWidth = destPoint.width;\n            img.destHeight = destPoint.height;\n        }\n        if (parent.transform.degree === 0) {\n            img.destLeft += parent.panPoint.totalPannedInternalPoint.x;\n            img.destTop += parent.panPoint.totalPannedInternalPoint.y;\n        }\n        parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n        this.lowerContext.filter = filter;\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: null, context: null, isPreventCircleCrop: true } });\n        var cropObjColl = extend([], parent.objColl, null, true);\n        var cropPointColl = extend([], parent.pointColl, null, true);\n        var straightenObj = { straightenPoint: null };\n        parent.notify('freehand-draw', { prop: 'getStraightenPoint', onPropertyChange: false,\n            value: { obj: straightenObj } });\n        this.resetAnnotations();\n        if (isNullOrUndefined(parent.activeObj.shape) && parent.cropObj.activeObj.shape) {\n            parent.activeObj = extend({}, parent.cropObj.activeObj, null, true);\n        }\n        this.panToSelRangle();\n        parent.isCropTab = isCropTab;\n        parent.objColl = cropObjColl;\n        parent.pointColl = cropPointColl;\n        parent.freehandCounter = parent.pointColl.length;\n        if (straightenObj['straightenPoint']['x'] && straightenObj['straightenPoint']['y']) {\n            parent.notify('freehand-draw', { prop: 'setStraightenPoint', onPropertyChange: false,\n                value: { x: straightenObj['straightenPoint']['x'], y: straightenObj['straightenPoint']['y'],\n                    ratioX: straightenObj['straightenPoint']['ratioX'], ratioY: straightenObj['straightenPoint']['ratioY'] } });\n        }\n        if (parent.cropObj.activeObj.shape) {\n            var destPoints = { startX: img.destLeft, startY: img.destTop, width: img.destWidth, height: img.destHeight };\n            if (currSelPoint && currSelPoint.activePoint) {\n                var _a = currSelPoint.activePoint, startX = _a.startX, startY = _a.startY, width = _a.width, height = _a.height;\n                img.destLeft = startX;\n                img.destTop = startY;\n                img.destWidth = width;\n                img.destHeight = height;\n            }\n            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n            img.destLeft = destPoints.startX;\n            img.destTop = destPoints.startY;\n            img.destWidth = destPoints.width;\n            img.destHeight = destPoints.height;\n            parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n            cropObjColl = extend([], parent.objColl, null, true);\n            cropPointColl = extend([], parent.pointColl, null, true);\n            parent.notify('freehand-draw', { prop: 'getStraightenPoint', onPropertyChange: false, value: { obj: straightenObj } });\n            this.resetAnnotations();\n            var object = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false, value: { obj: object } });\n            var cropSelPointColl = object['selPointColl'];\n            parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false, value: { obj: { selPointColl: [] } } });\n            parent.cropObj.filter = this.lowerContext.filter;\n            var actObj = extend({}, parent.currSelectionPoint, null, true);\n            parent.notify('draw', { prop: 'setCurrentObj', onPropertyChange: false, value: { obj: null } });\n            parent.activeObj = extend({}, actObj, null, true);\n            var activeObj = extend({}, parent.activeObj, null, true);\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.currSelectionPoint = null;\n            parent.isCircleCrop = false;\n            if (parent.transform.degree !== 0) {\n                if (isNullOrUndefined(parent.activeObj.shape) && parent.cropObj.activeObj.shape) {\n                    parent.activeObj = extend({}, parent.cropObj.activeObj, null, true);\n                }\n                parent.notify('transform', { prop: 'drawPannedImage', value: { xDiff: 0, yDiff: 0 } });\n                parent.panPoint.currentPannedPoint = { x: 0, y: 0 };\n            }\n            parent.objColl = cropObjColl;\n            parent.pointColl = cropPointColl;\n            parent.freehandCounter = parent.pointColl.length;\n            if (straightenObj['straightenPoint']['x'] && straightenObj['straightenPoint']['y']) {\n                parent.notify('freehand-draw', { prop: 'setStraightenPoint', onPropertyChange: false,\n                    value: { x: straightenObj['straightenPoint']['x'], y: straightenObj['straightenPoint']['y'],\n                        ratioX: straightenObj['straightenPoint']['ratioX'], ratioY: straightenObj['straightenPoint']['ratioY'] } });\n            }\n            parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                value: { obj: { selPointColl: cropSelPointColl } } });\n            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'iterate', pen: 'iterate', isPreventApply: null } });\n            this.adjustStraightenForShapes('reverse', false);\n            parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false, value: { isPreventApply: true } });\n            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n            if (parent.transform.degree === 0) {\n                parent.notify('transform', { prop: 'drawPannImage', onPropertyChange: false,\n                    value: { point: { x: 0, y: 0 } } });\n            }\n            else {\n                if (isNullOrUndefined(parent.activeObj.shape) && parent.cropObj.activeObj.shape) {\n                    parent.activeObj = extend({}, parent.cropObj.activeObj, null, true);\n                }\n                parent.notify('transform', { prop: 'drawPannedImage', value: { xDiff: 0, yDiff: 0 } });\n                parent.panPoint.currentPannedPoint = { x: 0, y: 0 };\n            }\n            parent.activeObj = activeObj;\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n            parent.notify('transform', { prop: 'setTempPanMove', onPropertyChange: false,\n                value: { point: null } });\n            if (!this.isInitCrop && parent.transform.degree === 0 && parent.cropObj.currFlipState !== '' &&\n                parent.cropObj.cropZoom !== 0) {\n                this.isInitCrop = true;\n                var obj = { activeObj: null };\n                parent.notify('draw', { prop: 'getStraightenActObj', onPropertyChange: false, value: { obj: obj } });\n                parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n                parent.notify('draw', { prop: 'setStraightenActObj', onPropertyChange: false, value: { activeObj: obj['activeObj'] } });\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'croptransform',\n                        isApplyBtn: false, isCropping: null, isZooming: null, cType: null } });\n            }\n            else {\n                this.isInitCrop = false;\n            }\n        }\n        else {\n            this.adjustStraightenForShapes('reverse', true);\n            parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false, value: { isPreventApply: true } });\n            var temp = this.lowerContext.filter;\n            this.lowerContext.filter = 'none';\n            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'iterate', pen: 'iterate', isPreventApply: null } });\n            this.lowerContext.filter = temp;\n            parent.currSelectionPoint = null;\n        }\n        if (document.querySelector('.e-ie-straighten-value-span')) {\n            document.querySelector('.e-ie-straighten-value-span').innerHTML = parent.transform.straighten.toString() + '&#176';\n        }\n    };\n    Crop.prototype.panToSelRangle = function (isReverse) {\n        var parent = this.parent;\n        var pannedPoint = parent.cropObj.totalPannedClientPoint;\n        var panX = parent.transform.degree !== 0 ? isReverse ? -pannedPoint.x : pannedPoint.x : 0;\n        var panY = parent.transform.degree !== 0 ? isReverse ? -pannedPoint.y : pannedPoint.y : 0;\n        if (parent.transform.degree !== 0) {\n            parent.panPoint.currentPannedPoint = { x: panX, y: panY };\n            parent.notify('transform', { prop: 'drawPannedImage', value: { xDiff: panX, yDiff: panY } });\n            parent.panPoint.currentPannedPoint = { x: 0, y: 0 };\n        }\n    };\n    Crop.prototype.cropCircle = function (context, isSave, isFlip) {\n        var parent = this.parent;\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        if (isFlip && parent.transform.currFlipState !== '') {\n            parent.notify('draw', { prop: 'setTransform', onPropertyChange: false,\n                value: { context: context, value: parent.transform.currFlipState, isReverse: null } });\n        }\n        var temp = context.filter;\n        context.filter = 'none';\n        context.globalCompositeOperation = 'destination-in';\n        context.beginPath();\n        var centerX = isNullOrUndefined(isSave) ? destLeft + (destWidth / 2) : context.canvas.width / 2;\n        var centerY = isNullOrUndefined(isSave) ? destTop + (destHeight / 2) : context.canvas.height / 2;\n        var radius = isSave ? context.canvas.width / 2 : destWidth / 2;\n        context.arc(centerX, centerY, radius, 0, Math.PI * 2);\n        context.closePath();\n        context.fill();\n        context.restore();\n        context.globalCompositeOperation = 'source-over';\n        parent.currObjType.isActiveObj = parent.isCircleCrop = true;\n        context.filter = temp;\n        if (isFlip && parent.transform.currFlipState !== '') {\n            parent.notify('draw', { prop: 'setTransform', onPropertyChange: false,\n                value: { context: context, value: parent.transform.currFlipState, isReverse: null } });\n        }\n    };\n    Crop.prototype.getCurrCropState = function () {\n        var parent = this.parent;\n        var flipState = '';\n        var obj = { flipColl: null };\n        parent.notify('transform', { prop: 'getFlipColl', onPropertyChange: false, value: { obj: obj } });\n        flipState = this.getCurrFlipState();\n        if (parent.transform.degree === -90 || parent.transform.degree === -270) {\n            if (flipState === 'horizontal') {\n                flipState = 'vertical';\n            }\n            else if (flipState === 'vertical') {\n                flipState = 'horizontal';\n            }\n        }\n        if (flipState === '') {\n            flipState = obj['flipColl'].length > 1 ? this.getCurrFlipState() : parent.transform.currFlipState;\n        }\n        return flipState;\n    };\n    Crop.prototype.updateRotatePan = function () {\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.panPoint.currentPannedPoint)) {\n            return;\n        }\n        var panRegion = '';\n        var degree = parent.transform.degree;\n        var _a = parent.panPoint.currentPannedPoint, x = _a.x, y = _a.y;\n        if (parent.rotateFlipColl.length > 0 && typeof (parent.rotateFlipColl[0]) === 'number'\n            && degree < 0) {\n            panRegion = this.getCurrCropState();\n        }\n        else {\n            panRegion = this.getCurrFlipState();\n        }\n        if (degree % 90 === 0 && degree % 180 !== 0) {\n            if (degree === 90 || (degree === -90 && (panRegion === 'horizontal' || panRegion === 'vertical'))\n                || (degree === -270 && (panRegion === '' || panRegion === 'verticalHorizontal'\n                    || panRegion === 'horizontalVertical'))) {\n                if (panRegion === 'horizontal' || panRegion === '') {\n                    parent.img.destLeft += y;\n                }\n                else {\n                    parent.img.destLeft -= y;\n                }\n                if (panRegion === '' || panRegion === 'vertical') {\n                    parent.img.destTop -= x;\n                }\n                else {\n                    parent.img.destTop += x;\n                }\n            }\n            else if (degree === 270 || (degree === -270 && (panRegion === 'horizontal' || panRegion === 'vertical'))\n                || (degree === -90 && (panRegion === '' || panRegion === 'verticalHorizontal'\n                    || panRegion === 'horizontalVertical'))) {\n                if (panRegion === '' || panRegion === 'horizontal') {\n                    parent.img.destLeft -= y;\n                }\n                else {\n                    parent.img.destLeft += y;\n                }\n                if (panRegion === '' || panRegion === 'vertical') {\n                    parent.img.destTop += x;\n                }\n                else {\n                    parent.img.destTop -= x;\n                }\n            }\n        }\n        else {\n            if (degree === 180 || degree === -180) {\n                if (panRegion === '' || panRegion === 'vertical') {\n                    parent.img.destLeft -= x;\n                }\n                else {\n                    parent.img.destLeft += x;\n                }\n                if (panRegion === '' || panRegion === 'horizontal') {\n                    parent.img.destTop -= y;\n                }\n                else {\n                    parent.img.destTop += y;\n                }\n            }\n        }\n    };\n    Crop.prototype.crop = function (obj) {\n        var parent = this.parent;\n        var _a = parent.activeObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        if (!parent.disabled && parent.isImageLoaded) {\n            var object = { isCropToolbar: parent.isCropToolbar };\n            if (parent.currObjType.isUndoAction && !object['isCropToolbar']) {\n                parent.notify('undo-redo', { prop: 'refreshUrc', value: { bool: null } });\n            }\n            var transitionArgs = { cancel: false, startPoint: { x: startX, y: startY },\n                endPoint: { x: endX, y: endY }, preventScaling: false };\n            if (!object['isCropToolbar']) {\n                parent.trigger('cropping', transitionArgs);\n                parent.editCompleteArgs = transitionArgs;\n            }\n            this.cropEvent(transitionArgs, obj, object);\n        }\n    };\n    Crop.prototype.cropEvent = function (transitionArgs, obj, object) {\n        var parent = this.parent;\n        var splitWords;\n        if (!transitionArgs.cancel) {\n            splitWords = parent.activeObj.shape ? parent.activeObj.shape.split('-') : [];\n            if (!parent.disabled && parent.activeObj.horTopLine && (parent.currObjType.isCustomCrop || (splitWords.length > 0 &&\n                splitWords[0] === 'crop'))) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                obj.isCrop = true;\n                var prevCropObj = extend({}, parent.cropObj, {}, true);\n                var prevObj = extend({}, this.prevCropCurrObj, {}, true);\n                if (transitionArgs.preventScaling) {\n                    this.isPreventScaling = true;\n                }\n                else {\n                    this.isPreventScaling = false;\n                }\n                this.cropImg();\n                if (this.isPreventScaling) {\n                    parent.aspectWidth = parent.img.destWidth;\n                    parent.aspectHeight = parent.img.destHeight;\n                }\n                parent.notify('freehand-draw', { prop: 'resetStraightenPoint' });\n                parent.isCropTab = false;\n                parent.transform.zoomFactor = 0;\n                parent.setProperties({ zoomSettings: { zoomFactor: 1 } }, true);\n                parent.notify('transform', { prop: 'setPreviousZoomValue', onPropertyChange: false,\n                    value: { previousZoomValue: parent.zoomSettings.zoomFactor } });\n                if (!Browser.isDevice) {\n                    this.updateUndoRedoColl(prevObj, prevCropObj, object);\n                }\n                parent.notify('transform', { prop: 'setCropDimension', onPropertyChange: false,\n                    value: { width: parent.cropObj.destPoints.width, height: parent.cropObj.destPoints.height } });\n                var aspectIcon = parent.element.querySelector('#' + parent.element.id + '_aspectratio');\n                var nonAspectIcon = parent.element.querySelector('#' + parent.element.id + '_nonaspectratio');\n                parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n                if (!object['isCropToolbar'] && (isNullOrUndefined(aspectIcon) && isNullOrUndefined(nonAspectIcon))) {\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                            isApplyBtn: false, isCropping: false, isZooming: null, cType: null } });\n                }\n                this.resizeWrapper();\n                if (Browser.isDevice) {\n                    this.updateUndoRedoColl(prevObj, prevCropObj, object);\n                }\n            }\n        }\n    };\n    Crop.prototype.updateUndoRedoColl = function (prevObj, prevCropObj, object) {\n        var parent = this.parent;\n        var currSelPtObj = { prevCurrSelectionPoint: parent.prevCurrSelectionPoint };\n        prevObj.currSelectionPoint = extend({}, currSelPtObj['prevCurrSelectionPoint'], {}, true);\n        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: 'crop', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                previousCropObj: prevCropObj, previousText: null,\n                currentText: null, previousFilter: null, isCircleCrop: parent.isCircleCrop } });\n        if (!object['isCropToolbar']) {\n            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n        }\n    };\n    Crop.prototype.resizeWrapper = function () {\n        var parent = this.parent;\n        if (Browser.isDevice) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var elem = parent.element;\n            var ctxToolbar = elem.querySelector('#' + elem.id + '_contextualToolbarArea');\n            if (ctxToolbar && ctxToolbar.style.position === '' && !this.isTransformCrop) {\n                ctxToolbar.style.position = 'absolute';\n                parent.isStraightening = false;\n                parent.update();\n                parent.notify('filter', { prop: 'setAdjustmentValue', value: { adjustmentValue: parent.canvasFilter } });\n            }\n        }\n    };\n    Crop.prototype.calcRatio = function (obj, dimension) {\n        var parent = this.parent;\n        var degree = parent.transform.degree;\n        var _a = parent.img, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        var _b = dimension || parent.baseImgCanvas, width = _b.width, height = _b.height;\n        var widthRatio = (degree === 0 || degree % 180 === 0) ? width / destWidth : height / destWidth;\n        var heightRatio = (degree === 0 || degree % 180 === 0) ? height / destHeight : width / destHeight;\n        if (obj) {\n            obj['width'] = widthRatio;\n            obj['height'] = heightRatio;\n        }\n        return { width: widthRatio, height: heightRatio };\n    };\n    Crop.prototype.getCurrFlipState = function (panObj) {\n        var parent = this.parent;\n        var obj = { panRegion: '' };\n        var object = { collection: parent.rotateFlipColl };\n        parent.notify('shape', { prop: 'alignRotateFlipColl', onPropertyChange: false,\n            value: { collection: parent.rotateFlipColl, isRotateFlipCollection: true, obj: object } });\n        parent.rotateFlipColl = object['collection'];\n        for (var i = 0, len = parent.rotateFlipColl.length; i < len; i++) {\n            parent.notify('transform', { prop: 'setCurrPanRegion', onPropertyChange: false,\n                value: { region: obj['panRegion'], type: parent.rotateFlipColl[i], obj: obj } });\n        }\n        if (panObj) {\n            panObj['panRegion'] = obj['panRegion'];\n        }\n        return obj['panRegion'];\n    };\n    return Crop;\n}());\nexport { Crop };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n/* eslint-disable no-constant-condition */\n/* eslint-disable radix */\nimport { extend, isNullOrUndefined, Browser, getComponent } from '@syncfusion/ej2-base';\nimport { Dialog, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nvar Draw = /** @class */ (function () {\n    function Draw(parent) {\n        this.isInitialLoading = false; // Specifies whether image is loaded for the first time or not (for applying initial filter)\n        this.fileName = '';\n        this.isErrorImage = false;\n        this.isShapeTextInserted = false;\n        this.isRotateZoom = false; // To restore zoomed image on selection crop selection\n        this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null, outlineColor: '', radius: null, outlineWidth: null }; // restore stroke settings on cancel\n        this.tempTextSettings = { text: 'Enter Text', fontFamily: '', fontSize: null, fontRatio: null, bold: false, italic: false, underline: false }; // restore text settings on cancel\n        this.tempAdjValue = ''; // for temp internal slider value\n        this.tempFilter = ''; // restore filter style on cancel\n        this.tempUndoRedoStep = 0;\n        this.tempFreehandCounter = 0;\n        this.tempCurrFhdIndex = 0;\n        this.tempZoomFactor = null; // Restore zoom factor on cancel\n        this.isCancelAction = false;\n        this.rotatedFlipCropSel = false;\n        this.zoomCrop = { width: 0, height: 0 };\n        this.isImageEdited = false;\n        this.isFileChanged = false;\n        this.isNewPath = false;\n        this.isResizeSelect = false;\n        this.arrowDimension = { bar: { width: 10, height: 32, ratioX: null, ratioY: null },\n            arrow: { width: 24, height: 24, ratioX: null, ratioY: null }, arrowSolid: { width: 32, height: 32, ratioX: null, ratioY: null },\n            circle: { width: 10, height: 10, ratioX: null, ratioY: null }, square: { width: 20, height: 20, ratioX: null, ratioY: null } };\n        this.origDim = { width: 0, height: 0 };\n        this.isImageApply = false;\n        this.imgCanvasPoints = [];\n        this.isCropSelect = false;\n        this.isDownScale = false;\n        this.preventStraightening = false;\n        this.tempObjColl = [];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.tempPointColl = {};\n        this.imageBackgroundColor = '';\n        this.allowRedactStraighten = true;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Draw.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Draw.prototype.addEventListener = function () {\n        this.parent.on('draw', this.draw, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Draw.prototype.removeEventListener = function () {\n        this.parent.off('draw', this.draw);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Draw.prototype.draw = function (args) {\n        this.updatePrivateVariables();\n        switch (args.prop) {\n            case 'drawObject':\n                this.drawObject(args.value['canvas'], args.value['obj'], args.value['isCropRatio'], args.value['points'], args.value['isPreventDrag'], args.value['saveContext'], args.value['isPreventSelection']);\n                break;\n            case 'updateActiveObject':\n                this.updateActiveObject(args.value['actPoint'], args.value['obj'], args.value['isMouseMove'], args.value['x'], args.value['y']);\n                break;\n            case 'clearOuterCanvas':\n                this.clearOuterCanvas(args.value['context']);\n                break;\n            case 'setDestPoints':\n                this.setDestPoints();\n                break;\n            case 'updateCurrTransState':\n                this.updateCurrTransState(args.value['type'], args.value['isPreventDestination'], args.value['isRotatePan']);\n                break;\n            case 'currTransState':\n                this.currTransState(args.value['type'], args.value['isPreventDestination'], args.value['context'], args.value['isPreventCircleCrop']);\n                break;\n            case 'setTransform':\n                this.setTransform(args.value['context'], args.value['value'], args.value['isReverse']);\n                break;\n            case 'render-image':\n                this.renderImage(args.value['isMouseWheel'], args.value['isPreventClearRect'], args.value['isFrame'], args.value['isStraighten']);\n                break;\n            case 'draw-image-to-canvas':\n                this.drawImgToCanvas(args.value['dimension']);\n                break;\n            case 'update-canvas':\n                this.updateCanvas();\n                break;\n            case 'performCancel':\n                this.performCancel(args.value['isContextualToolbar'], args.value['isUndoRedo'], args.value['isFinalCancel']);\n                break;\n            case 'updateFlipPan':\n                this.updateFlipPan(args.value['tempSelectionObj']);\n                break;\n            case 'select':\n                this.select(args.value['type'], args.value['startX'], args.value['startY'], args.value['width'], args.value['height']);\n                break;\n            case 'callUpdateCurrTransState':\n                this.callUpdateCurrTransState();\n                break;\n            case 'resetPanPoints':\n                this.resetPanPoints();\n                break;\n            case 'setClientTransDim':\n                this.setClientTransDim(args.value['isPreventDimension']);\n                break;\n            case 'redrawImgWithObj':\n                this.redrawImgWithObj();\n                break;\n            case 'setCurrentObj':\n                this.setCurrentObj(args.value['obj'], args.value['isUndoRedo'], args.value['isCircleCrop']);\n                break;\n            case 'performPointZoom':\n                this.performPointZoom(args.value['x'], args.value['y'], args.value['type'], args.value['isResize']);\n                break;\n            case 'open':\n                this.open(args.value['data']);\n                break;\n            case 'isInitialLoading':\n                this.isInitialLoading = args.value['isInitialLoading'];\n                break;\n            case 'isInitialLoaded':\n                this.getInitialLoaded(args.value['object']);\n                break;\n            case 'fileSelect':\n                this.fileSelect(args.value['inputElement'], args.value['args']);\n                break;\n            case 'getFileName':\n                args.value['obj']['fileName'] = this.fileName;\n                args.value['obj']['fileType'] = this.fileType;\n                break;\n            case 'getErrorImage':\n                args.value['obj']['isErrorImage'] = this.isErrorImage;\n                break;\n            case 'getInitialZoomValue':\n                args.value['obj']['initialZoomValue'] = this.initZoomValue;\n                break;\n            case 'setShapeTextInsert':\n                this.isShapeTextInserted = args.value['bool'];\n                break;\n            case 'resetCurrentSelectionPoint':\n                this.currSelPoint = null;\n                break;\n            case 'setRotateZoom':\n                this.isRotateZoom = args.value['isRotateZoom'];\n                break;\n            case 'setTempStrokeSettings':\n                this.tempStrokeSettings = args.value['tempStrokeSettings'];\n                break;\n            case 'setTempTextSettings':\n                this.tempTextSettings = args.value['tempTextSettings'];\n                break;\n            case 'setTempAdjustmentValue':\n                this.tempAdjValue = args.value['tempAdjustmentValue'];\n                break;\n            case 'getTempAdjustmentValue':\n                args.value['obj']['value'] = this.tempAdjValue;\n                break;\n            case 'setTempFilter':\n                this.tempFilter = args.value['tempFilter'];\n                break;\n            case 'setTempUndoRedoStep':\n                this.tempUndoRedoStep = args.value['tempUndoRedoStep'];\n                break;\n            case 'setTempFreehandCounter':\n                this.tempFreehandCounter = args.value['tempFreehandCounter'];\n                break;\n            case 'setTempCurrentFreehandDrawIndex':\n                this.tempCurrFhdIndex = args.value['tempCurrentFreehandDrawIndex'];\n                break;\n            case 'setTempZoomFactor':\n                this.tempZoomFactor = args.value['tempZoomFactor'];\n                break;\n            case 'setCancelAction':\n                this.isCancelAction = args.value['bool'];\n                break;\n            case 'getRotatedFlipCropSelection':\n                args.value['bool']['isSelected'] = this.rotatedFlipCropSel;\n                break;\n            case 'getPrevActObj':\n                args.value['obj']['prevActObj'] = this.prevActObj;\n                break;\n            case 'setPrevActObj':\n                this.prevActObj = args.value['prevActObj'];\n                break;\n            case 'setZoomCropWidth':\n                this.zoomCrop.width = args.value['width'];\n                this.zoomCrop.height = args.value['height'];\n                break;\n            case 'setImageEdited':\n                this.isImageEdited = true;\n                break;\n            case 'reset':\n                this.reset();\n                break;\n            case 'setNewPath':\n                this.isNewPath = args.value['bool'];\n                break;\n            case 'getNewPath':\n                args.value['obj']['isNewPath'] = this.isNewPath;\n                break;\n            case 'getArrowDimension':\n                args.value['obj']['arrowDimension'] = extend({}, this.arrowDimension, {}, true);\n                break;\n            case 'setArrowDimension':\n                this.arrowDimension = args.value['arrowDimension'];\n                break;\n            case 'moveToSelectionRange':\n                this.moveToSelectionRange(args.value['type'], args.value['activeObj']);\n                break;\n            case 'setResizeSelect':\n                this.isResizeSelect = args.value['bool'];\n                break;\n            case 'applyFrame':\n                this.applyFrame(args.value['ctx'], args.value['frame'], args.value['preventImg']);\n                break;\n            case 'drawImage':\n                this.drawImage();\n                break;\n            case 'downScaleImgCanvas':\n                this.downScaleImgCanvas(args.value['ctx'], args.value['isImgAnnotation'], args.value['isHFlip'], args.value['isVFlip']);\n                break;\n            case 'downScale':\n                this.downScale(args.value['canvas'], args.value['width'], args.value['height']);\n                break;\n            case 'resetFrameZoom':\n                this.resetFrameZoom(args.value['isOk']);\n                break;\n            case 'triggerFrameChange':\n                args.value['obj']['frameChangeEventArgs'] = this.triggerFrameChange(args.value['prevFrameSettings']);\n                break;\n            case 'setImageApply':\n                this.isImageApply = args.value['bool'];\n                break;\n            case 'zoomToSel':\n                this.zoomToSel(args.value['activeObj'], args.value['isToolbar']);\n                break;\n            case 'getStraightenActObj':\n                args.value['obj']['activeObj'] = this.straightenActObj;\n                break;\n            case 'setStraightenActObj':\n                this.straightenActObj = args.value['activeObj'];\n                break;\n            case 'updateImgCanvasPoints':\n                this.updateImgCanvasPoints();\n                break;\n            case 'isLinesIntersect':\n                args.value['obj']['isIntersect'] = this.isLinesIntersect(args.value['obj']);\n                break;\n            case 'getImageCanvasPoints':\n                args.value['obj']['points'] = this.imgCanvasPoints;\n                break;\n            case 'setDestForStraighten':\n                this.setDestForStraighten();\n                break;\n            case 'setTempDestForStraighten':\n                this.tempStraightenDestPoints = extend({}, this.straightenDestPoints, {}, true);\n                break;\n            case 'getStraightenInitZoom':\n                args.value['obj']['zoomFactor'] = this.straightenInitZoom;\n                break;\n            case 'setStraightenInitZoom':\n                this.straightenInitZoom = args.value['zoomFactor'];\n                break;\n            case 'isPointsInsideImg':\n                args.value['obj']['bool'] = this.checkPointPosition(args.value['x'], args.value['y'], this.imgCanvasPoints[0].x, this.imgCanvasPoints[0].y, this.imgCanvasPoints[1].x, this.imgCanvasPoints[1].y, this.imgCanvasPoints[2].x, this.imgCanvasPoints[2].y, this.imgCanvasPoints[3].x, this.imgCanvasPoints[3].y) !== 'inside';\n                break;\n            case 'setIsCropSelect':\n                this.isCropSelect = args.value['bool'];\n                break;\n            case 'updateCropSelection':\n                this.updateCropSelection();\n                break;\n            case 'updateCropSelObj':\n                this.updateCropSelObj();\n                break;\n            case 'redrawDownScale':\n                this.redrawDownScale();\n                break;\n            case 'updateFinetune':\n                this.updateFinetune();\n                break;\n            case 'isSelOutsideImg':\n                args.value['obj']['bool'] = this.isSelOutsideImg();\n                break;\n            case 'resetStraightenDestPoints':\n                this.straightenDestPoints = null;\n                break;\n            case 'checkPointPosition':\n                args.value['obj']['position'] = this.checkPointPosition(args.value['obj']['x'], args.value['obj']['y'], args.value['obj']['x1'], args.value['obj']['y1'], args.value['obj']['x2'], args.value['obj']['y2'], args.value['obj']['x3'], args.value['obj']['y3'], args.value['obj']['x4'], args.value['obj']['y4']);\n                break;\n            case 'updateTempObjColl':\n                this.tempObjColl = extend([], this.parent.objColl, [], true);\n                break;\n            case 'resetTempObjColl':\n                this.tempObjColl = null;\n                break;\n            case 'updateTempPointColl':\n                this.tempPointColl = extend({}, this.parent.pointColl, {}, true);\n                break;\n            case 'resetTempPointColl':\n                this.tempPointColl = {};\n                break;\n            case 'showDialogPopup':\n                this.showDialogPopup();\n                break;\n            case 'imageBackgroundColor':\n                this.imageBackgroundColor = args.value['color'];\n                break;\n            case 'getImageBackgroundColor':\n                args.value['obj']['color'] = this.imageBackgroundColor;\n                break;\n            case 'setTempStrokeWidth':\n                this.tempStrokeWidth = args.value['strokeWidth'];\n                break;\n        }\n    };\n    Draw.prototype.getModuleName = function () {\n        return 'draw';\n    };\n    Draw.prototype.updatePrivateVariables = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n        if (parent.upperCanvas) {\n            this.upperContext = parent.upperCanvas.getContext('2d');\n        }\n        if (isNullOrUndefined(this.tempZoomFactor)) {\n            this.tempZoomFactor = parent.transform.zoomFactor;\n        }\n        if (this.tempTextSettings.fontFamily === '') {\n            this.tempTextSettings.fontFamily = parent.fontFamily.default;\n        }\n    };\n    Draw.prototype.reset = function () {\n        this.isInitialLoading = this.isErrorImage = this.isNewPath = this.isResizeSelect = false;\n        this.isShapeTextInserted = false;\n        this.isImageApply = false;\n        this.initZoomValue = null;\n        this.tempFilter = '';\n        this.origDim = { width: 0, height: 0 };\n        this.currSelPoint = null;\n        this.isRotateZoom = false;\n        this.tempAdjValue = '';\n        this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null, radius: null, outlineColor: '', outlineWidth: null };\n        this.tempTextSettings =\n            { text: 'Enter Text', fontFamily: this.parent.fontFamily.default, fontSize: null, fontRatio: null, bold: false, italic: false, underline: false };\n        this.tempUndoRedoStep = this.tempFreehandCounter = this.tempCurrFhdIndex = 0;\n        this.tempZoomFactor = null;\n        this.isCancelAction = false;\n        this.rotatedFlipCropSel = false;\n        this.prevActObj = null;\n        this.tempStraightenDestPoints = null;\n        this.arrowDimension = { bar: { width: 10, height: 32, ratioX: null, ratioY: null },\n            arrow: { width: 24, height: 24, ratioX: null, ratioY: null }, arrowSolid: { width: 32, height: 32, ratioX: null, ratioY: null },\n            circle: { width: 10, height: 10, ratioX: null, ratioY: null }, square: { width: 20, height: 20, ratioX: null, ratioY: null } };\n        this.straightenActObj = null;\n        this.imgCanvasPoints = [];\n        this.straightenInitZoom = null;\n        this.allowRedactStraighten = true;\n        this.tempObjColl = [];\n        this.tempPointColl = {};\n        this.imageBackgroundColor = '';\n        this.tempStrokeWidth = null;\n        this.straightenDestPoints = null;\n        this.isCropSelect = this.isDownScale = this.preventStraightening = false;\n    };\n    Draw.prototype.redrawDownScale = function () {\n        var parent = this.parent;\n        if (parent.transform.zoomFactor && parent.transform.zoomFactor < 0) {\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.isDownScale = true;\n            this.renderImage();\n            this.isDownScale = false;\n            if (activeObj.shape) {\n                this.drawObject('duplicate', activeObj);\n            }\n        }\n    };\n    Draw.prototype.updateFinetune = function () {\n        var parent = this.parent;\n        if (parent.transform.zoomFactor && parent.transform.zoomFactor < 0) {\n            var filter = this.lowerContext.filter;\n            this.lowerContext.filter = 'none';\n            parent.notify('draw', { prop: 'redrawDownScale' });\n            var inMemoryContext = parent.inMemoryCanvas.getContext('2d');\n            var ctx = this.lowerContext;\n            var imageData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);\n            parent.inMemoryCanvas.width = imageData.width;\n            parent.inMemoryCanvas.height = imageData.height;\n            inMemoryContext.putImageData(imageData, 0, 0);\n            this.lowerContext.filter = filter;\n            parent.notify('draw', { prop: 'redrawDownScale' });\n        }\n    };\n    Draw.prototype.drawImage = function () {\n        this.applyFrame(this.lowerContext, this.parent.frameObj.type);\n    };\n    Draw.prototype.drawObject = function (canvas, obj, isCropRatio, points, isPreventDrag, saveContext, isPreventSelection) {\n        var parent = this.parent;\n        var actObj = parent.activeObj;\n        var actPoint = parent.activeObj.activePoint;\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        var canvasDraw;\n        canvas = canvas.toLowerCase();\n        if (canvas === 'original') {\n            canvasDraw = this.lowerContext;\n        }\n        else if (canvas === 'duplicate') {\n            canvasDraw = this.upperContext;\n        }\n        else if (saveContext) {\n            canvasDraw = saveContext;\n        }\n        if (!isPreventDrag && actObj.shape) {\n            this.setDragLimit();\n        }\n        if (parent.currObjType.shape) {\n            var splitWords = parent.currObjType.shape.split('-');\n            if (splitWords[0].toLowerCase() === 'crop' && isCropRatio) {\n                this.drawCropRatio();\n            }\n        }\n        actObj = parent.activeObj;\n        actPoint = parent.activeObj.activePoint;\n        if (isNullOrUndefined(actObj.strokeSettings)) {\n            var obj_1 = { strokeSettings: {} };\n            parent.notify('shape', { prop: 'getStrokeSettings', onPropertyChange: false, value: { obj: obj_1 } });\n            actObj.strokeSettings = obj_1['strokeSettings'];\n        }\n        if (isNullOrUndefined(actObj.strokeSettings.strokeWidth)) {\n            actObj.strokeSettings.strokeWidth = 2;\n        }\n        if (obj) {\n            parent.activeObj = extend({}, obj, {}, true);\n        }\n        if (points && points.startX && points.startY && points.endX && points.endY && points.width && points.height) {\n            actPoint.startX = points.startX;\n            actPoint.startY = points.startY;\n            actPoint.endX = points.endX;\n            actPoint.endY = points.endY;\n            actPoint.width = points.width;\n            actPoint.height = points.height;\n        }\n        this.updateActiveObject();\n        actObj = parent.activeObj;\n        actPoint = parent.activeObj.activePoint;\n        if (isNullOrUndefined(actPoint.startX) && isNullOrUndefined(actPoint.startY)) {\n            return;\n        }\n        if (parent.currObjType.isText) {\n            var obj_2 = { keyHistory: '' };\n            parent.notify('shape', { prop: 'getKeyHistory', onPropertyChange: false, value: { obj: obj_2 } });\n            actObj.keyHistory = obj_2['keyHistory'];\n        }\n        var isCrop = false;\n        if (canvas !== 'original') {\n            var splitWords = void 0;\n            if (actObj.shape) {\n                splitWords = actObj.shape.split('-');\n                if (splitWords[0] === 'crop') {\n                    isCrop = true;\n                }\n            }\n            if (isCrop) {\n                if (points && points.startX && points.startY && points.endX && points.endY && points.width && points.height) {\n                    actPoint.startX = points.startX;\n                    actPoint.startY = points.startY;\n                    actPoint.endX = points.endX;\n                    actPoint.endY = points.endY;\n                    actPoint.width = points.width;\n                    actPoint.height = points.height;\n                }\n                else {\n                    actPoint = actObj.activePoint;\n                }\n                this.upperContext.fillStyle = 'rgb(0, 0, 0, 0.25)';\n                this.upperContext.fillRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n                this.upperContext.clearRect(actPoint.startX, actPoint.startY, actPoint.width, actPoint.height);\n            }\n            if (isNullOrUndefined(isPreventSelection) && (canvasDraw === this.lowerContext || canvasDraw === this.upperContext)) {\n                this.rotateContext('initial', canvasDraw);\n                this.drawOuterSelection(canvasDraw);\n                this.rotateContext('reverse', canvasDraw);\n            }\n        }\n        parent.currObjType.isActiveObj = true;\n        var object = { keyHistory: '' };\n        parent.notify('shape', { prop: 'getKeyHistory', onPropertyChange: false, value: { obj: object } });\n        if (obj) {\n            this.drawShapeObj(canvas, obj.shape, saveContext, isPreventSelection);\n        }\n        else if (object['keyHistory'] !== '' && parent.currObjType.isText) {\n            this.drawShapeObj(canvas, 'text', saveContext, isPreventSelection);\n        }\n        else if (actObj.shape) {\n            this.drawShapeObj(canvas, actObj.shape, saveContext, isPreventSelection);\n        }\n        else {\n            this.drawShapeObj(canvas, undefined, saveContext, isPreventSelection);\n        }\n        if (canvas === 'duplicate' && isCrop && actObj.shape !== 'crop-circle' && parent.frameObj.type !== 'none') {\n            this.applyFrame(this.upperContext, parent.frameObj.type);\n            this.drawCornerCircles(this.upperContext);\n        }\n    };\n    Draw.prototype.rotateContext = function (type, ctx) {\n        var parent = this.parent;\n        var _a = parent.activeObj, shape = _a.shape, rotatedAngle = _a.rotatedAngle;\n        var _b = parent.img, destLeft = _b.destLeft, destTop = _b.destTop, destWidth = _b.destWidth, destHeight = _b.destHeight;\n        var _c = parent.activeObj.activePoint, startX = _c.startX, startY = _c.startY, width = _c.width, height = _c.height;\n        if (shape === 'line' || shape === 'arrow') {\n            return;\n        }\n        var rotationAngle = (type === 'initial') ? rotatedAngle : -rotatedAngle;\n        var translateX;\n        var translateY;\n        if (parent.transform.straighten === 0 && !parent.isCropTab) {\n            translateX = startX + (width / 2);\n            translateY = startY + (height / 2);\n        }\n        else {\n            translateX = destLeft + (destWidth / 2);\n            translateY = destTop + (destHeight / 2);\n        }\n        ctx.translate(translateX, translateY);\n        ctx.rotate(rotationAngle);\n        ctx.translate(-translateX, -translateY);\n    };\n    Draw.prototype.setDragLimit = function () {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var _a = parent.activeObj, shape = _a.shape, rotatedAngle = _a.rotatedAngle;\n        if (actPoint && shape !== 'image' && shape !== 'line' && rotatedAngle === 0 && parent.activeObj.preventShapeDragOut) {\n            var _b = parent.img, destLeft = _b.destLeft, destTop = _b.destTop, destWidth = _b.destWidth, destHeight = _b.destHeight;\n            if (actPoint.startX < destLeft) {\n                actPoint.startX = destLeft;\n                actPoint.endX = Math.min(actPoint.startX + actPoint.width, destLeft + destWidth);\n            }\n            else if (actPoint.endX > destLeft + destWidth) {\n                actPoint.endX = destLeft + destWidth;\n                actPoint.startX = Math.max(actPoint.endX - actPoint.width, destLeft);\n            }\n            if (actPoint.startY < destTop) {\n                actPoint.startY = destTop;\n            }\n            else if (actPoint.endY > destTop + destHeight) {\n                actPoint.endY = destTop + destHeight;\n                actPoint.startY = Math.max(actPoint.endY - actPoint.height, destTop);\n            }\n            parent.activeObj = this.updateWidthHeight(parent.activeObj);\n        }\n    };\n    Draw.prototype.drawCropRatio = function () {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var x;\n        var y;\n        var width;\n        var height;\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        if (parent.transform.zoomFactor > 0 && this.currSelPoint) {\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            this.drawCustomSelection('crop-custom', null, null, null, null);\n            if (parent.transform.straighten !== 0) {\n                actPoint = parent.activeObj.activePoint;\n            }\n            if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n                width = actPoint.width < actPoint.height ? actPoint.width : actPoint.height;\n                height = width;\n            }\n            else {\n                width = actPoint.width;\n                height = actPoint.height;\n            }\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.activeObj = activeObj;\n            parent.currObjType.shape = activeObj.shape;\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            parent.currObjType.isCustomCrop = false;\n        }\n        else {\n            width = destWidth;\n            height = destHeight;\n            if (destLeft < 0) {\n                width += destLeft;\n            }\n            if (destTop < 0) {\n                height += destTop;\n            }\n            if (destLeft + destWidth > parent.lowerCanvas.width) {\n                width -= (destLeft + destWidth - parent.lowerCanvas.width);\n            }\n            if (destTop + destHeight > parent.lowerCanvas.height) {\n                height -= (destTop + destHeight - parent.lowerCanvas.height);\n            }\n        }\n        switch (parent.currObjType.shape.toLowerCase()) {\n            case 'crop-square':\n            case 'crop-circle':\n                parent.notify('selection', { prop: 'setDragDirection', onPropertyChange: false, value: { width: width, height: height } });\n                actPoint = parent.activeObj.activePoint;\n                if (parent.lowerCanvas.width < (actPoint.endX - actPoint.startX)) {\n                    actPoint.startX = 7.5;\n                    actPoint.endX = parent.lowerCanvas.width - 7.5;\n                }\n                if (parent.lowerCanvas.height < (actPoint.endY - actPoint.startY)) {\n                    actPoint.startY = 7.5;\n                    actPoint.endY = parent.lowerCanvas.height - 7.5;\n                }\n                if (width === destWidth && height === destHeight) {\n                    actPoint.startX += destLeft;\n                    actPoint.startY += destTop;\n                    actPoint.endX += destLeft;\n                    actPoint.endY += destTop;\n                }\n                if (parent.lowerCanvas.width > parent.lowerCanvas.height) {\n                    actPoint.height = actPoint.endY - actPoint.startY;\n                    actPoint.width = actPoint.height;\n                    actPoint.endX = actPoint.startX + actPoint.width;\n                }\n                else {\n                    actPoint.width = actPoint.endX - actPoint.startX;\n                    actPoint.height = actPoint.width;\n                    actPoint.endY = actPoint.startY + actPoint.height;\n                }\n                break;\n            case 'crop-3:2':\n                x = 3;\n                y = 2;\n                break;\n            case 'crop-4:3':\n                x = 4;\n                y = 3;\n                break;\n            case 'crop-5:4':\n                x = 5;\n                y = 4;\n                break;\n            case 'crop-7:5':\n                x = 7;\n                y = 5;\n                break;\n            case 'crop-16:9':\n                x = 16;\n                y = 9;\n                break;\n            case 'crop-2:3':\n                x = 2;\n                y = 3;\n                break;\n            case 'crop-3:4':\n                x = 3;\n                y = 4;\n                break;\n            case 'crop-4:5':\n                x = 4;\n                y = 5;\n                break;\n            case 'crop-5:7':\n                x = 5;\n                y = 7;\n                break;\n            case 'crop-9:16':\n                x = 9;\n                y = 16;\n                break;\n            default:\n                x = parseInt(parent.currObjType.shape.toLowerCase().split('crop-')[1].split(':')[0]);\n                y = parseInt(parent.currObjType.shape.toLowerCase().split('crop-')[1].split(':')[1]);\n                break;\n        }\n        if (x !== undefined && y !== undefined) {\n            parent.notify('selection', { prop: 'calcShapeRatio', onPropertyChange: false,\n                value: { x: x, y: y, imgWidth: width, imgHeight: height } });\n            if (width === destWidth && height === destHeight) {\n                this.updatePoints();\n            }\n            actPoint = parent.activeObj.activePoint;\n        }\n        if (actPoint.startX < destLeft) {\n            var diff = (destLeft - actPoint.startX) + 7.5;\n            actPoint.startX += diff;\n            actPoint.endX += diff;\n        }\n        if (actPoint.startY < destTop) {\n            var diff = (destTop - actPoint.startY) + 7.5;\n            actPoint.startY += diff;\n            actPoint.endY += diff;\n        }\n        parent.activeObj = this.updateWidthHeight(parent.activeObj);\n        this.adjToCenter();\n        this.enlargeToImg();\n        if (parent.transform.straighten !== 0) {\n            this.adjToStraighten();\n            this.updateActiveObject(parent.activeObj.activePoint, parent.activeObj);\n        }\n        var object = { isIntersect: null, arr: null };\n        var count = 0;\n        actPoint = parent.activeObj.activePoint;\n        if (parent.transform.straighten !== 0) {\n            while (this.isLinesIntersect(object) && count < 100) {\n                count++;\n                var diff = (actPoint.width * 1) / 100;\n                actPoint.startX += diff;\n                actPoint.endX -= diff;\n                diff = (actPoint.height * 1) / 100;\n                actPoint.startY += diff;\n                actPoint.endY -= diff;\n                actPoint.width = actPoint.endX - actPoint.startX;\n                actPoint.height = actPoint.endY - actPoint.startY;\n                this.updateActiveObject(actPoint, parent.activeObj);\n            }\n        }\n        this.straightenInitZoom = parent.transform.zoomFactor;\n        this.straightenActObj = extend({}, parent.activeObj, {}, true);\n        parent.notify('draw', { prop: 'resetStraightenDestPoints' });\n        parent.notify('draw', { prop: 'setDestForStraighten' });\n    };\n    Draw.prototype.adjToCenter = function () {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        var diffX = ((parent.lowerCanvas.width) / 2) - (actPoint.endX - actPoint.width / 2);\n        var diffY = ((parent.lowerCanvas.height) / 2) - (actPoint.endY - actPoint.height / 2);\n        actPoint.startX += diffX;\n        actPoint.endX += diffX;\n        actPoint.startY += diffY;\n        actPoint.endY += diffY;\n        if (actPoint.startX < (destLeft >= 7.5 ? destLeft : 7.5)) {\n            var diff = ((destLeft >= 7.5 ? destLeft : 0) - actPoint.startX);\n            actPoint.startX += diff;\n            actPoint.endX += diff;\n        }\n        else if (actPoint.endX > destLeft + destWidth) {\n            var diff = (actPoint.endX - (destLeft + destWidth));\n            actPoint.startX -= diff;\n            actPoint.endX -= diff;\n        }\n        if (actPoint.startY < (destTop >= 7.5 ? destTop : 7.5)) {\n            var diff = ((destTop >= 7.5 ? destTop : 0) - actPoint.startY);\n            actPoint.startY += diff;\n            actPoint.endY += diff;\n        }\n        else if (actPoint.endY > destTop + destHeight) {\n            var diff = (actPoint.endY - (destTop + destHeight));\n            actPoint.startY -= diff;\n            actPoint.endY -= diff;\n        }\n    };\n    Draw.prototype.enlargeToImg = function () {\n        var parent = this.parent;\n        if (parent.transform.straighten === 0) {\n            return;\n        }\n        if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            var actPoint = parent.activeObj.activePoint;\n            var tempActPoint = extend({}, actPoint, {}, true);\n            var count = 0;\n            while (true) {\n                // Increase width and height by 5% from center to enlarge the crop selection\n                count++;\n                var diff = (actPoint.width * 5) / 100;\n                actPoint.startX -= diff;\n                actPoint.endX += diff;\n                diff = (actPoint.height * 5) / 100;\n                actPoint.startY -= diff;\n                actPoint.endY += diff;\n                actPoint.width = actPoint.endX - actPoint.startX;\n                actPoint.height = actPoint.endY - actPoint.startY;\n                this.updateActiveObject(actPoint, parent.activeObj);\n                var object = { isIntersect: null, arr: null };\n                this.updateImgCanvasPoints();\n                this.isLinesIntersect(object);\n                if (object['arr'][0] || object['arr'][1] || object['arr'][2] || object['arr'][3] ||\n                    actPoint.startX < 7.5 || actPoint.startY < 7.5 || count === 100) {\n                    actPoint = extend({}, tempActPoint, {}, true);\n                    diff = (actPoint.width * 1) / 100;\n                    actPoint.startX += diff;\n                    actPoint.endX -= diff;\n                    diff = (actPoint.height * 1) / 100;\n                    actPoint.startY += diff;\n                    actPoint.endY -= diff;\n                    actPoint.width = actPoint.endX - actPoint.startX;\n                    actPoint.height = actPoint.endY - actPoint.startY;\n                    this.updateActiveObject(actPoint, parent.activeObj);\n                    break;\n                }\n                tempActPoint = extend({}, actPoint, {}, true);\n            }\n        }\n    };\n    Draw.prototype.updateActiveObject = function (actPoint, obj, isMouseMove, x, y) {\n        var parent = this.parent;\n        actPoint = actPoint ? actPoint : extend({}, parent.activeObj.activePoint, {}, true);\n        obj = obj ? obj : extend({}, parent.activeObj, {}, true);\n        actPoint.width = actPoint.endX - actPoint.startX;\n        actPoint.height = actPoint.endY - actPoint.startY;\n        var startX = actPoint.startX, startY = actPoint.startY, endX = actPoint.endX, endY = actPoint.endY, width = actPoint.width, height = actPoint.height;\n        x = x ? x : 0;\n        y = y ? y : 0;\n        var horCircleWidth = width / 2;\n        var verCircleHeight = height / 2;\n        var radius = 7.5;\n        obj.horTopLine = { startX: startX + x, startY: startY - y,\n            endX: endX + x, endY: endY + y };\n        obj.horBottomLine = { startX: startX - x, startY: endY - y,\n            endX: endX - x, endY: endY + y };\n        obj.verLeftLine = { startX: startX + x, startY: startY - y,\n            endX: startX - y, endY: endY - y };\n        obj.verRightLine = { startX: endX + x, startY: startY + y,\n            endX: endX - x, endY: endY + y };\n        obj.topLeftCircle = { startX: startX, startY: startY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.topCenterCircle = { startX: startX + horCircleWidth, startY: startY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.topRightCircle = { startX: endX, startY: startY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.centerLeftCircle = { startX: startX, startY: startY + verCircleHeight,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.centerRightCircle = { startX: endX, startY: startY + verCircleHeight,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.bottomLeftCircle = { startX: startX, startY: endY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.bottomCenterCircle = { startX: startX + horCircleWidth, startY: endY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.bottomRightCircle = { startX: endX, startY: endY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        if (obj.rotatedAngle === 0) {\n            obj.rotationCirclePoint = { x: obj.bottomCenterCircle.startX,\n                y: obj.bottomCenterCircle.startY + 25 };\n            obj.rotationCirclePoint.ratioX = (obj.rotationCirclePoint.x - parent.img.destLeft) / parent.img.destWidth;\n            obj.rotationCirclePoint.ratioY = (obj.rotationCirclePoint.y - parent.img.destTop) / parent.img.destHeight;\n        }\n        obj.activePoint = actPoint;\n        if (isNullOrUndefined(isMouseMove)) {\n            parent.activeObj = extend({}, obj, {}, true);\n        }\n    };\n    Draw.prototype.drawOuterSelection = function (canvasDraw, isCropCircle) {\n        var splitWords;\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var actObj = parent.activeObj;\n        canvasDraw.lineWidth = (0.5);\n        var tempObj = extend({}, actObj, {}, true);\n        if (actObj.shape) {\n            splitWords = actObj.shape.split('-');\n        }\n        if (((splitWords && splitWords[0] === 'crop') || actObj.shape === undefined) && !isCropCircle) {\n            this.upperContext.fillStyle = 'rgb(0, 0, 0, 0.25)';\n            this.upperContext.fillRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            this.upperContext.clearRect(actPoint.startX, actPoint.startY, actPoint.width, actPoint.height);\n        }\n        canvasDraw.strokeStyle = parent.themeColl[parent.theme]['primaryColor'];\n        canvasDraw.fillStyle = parent.themeColl[parent.theme]['secondaryColor'];\n        var degree;\n        if (tempObj.shapeDegree === 0) {\n            degree = parent.transform.degree;\n        }\n        else {\n            degree = parent.transform.degree - tempObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        if (actObj.shape === 'arrow' || actObj.shape === 'line') {\n            canvasDraw.beginPath();\n            canvasDraw.moveTo(actPoint.startX, actPoint.startY);\n            canvasDraw.lineTo(actPoint.endX, actPoint.endY);\n            canvasDraw.stroke();\n        }\n        else if (actObj.shape === 'path') {\n            canvasDraw.beginPath();\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            if (activeObj.pointColl[0]) {\n                canvasDraw.moveTo(activeObj.pointColl[0].x, activeObj.pointColl[0].y);\n                if (activeObj.pointColl.length > 1) {\n                    for (var i = 1, len = activeObj.pointColl.length; i < len; i++) {\n                        actPoint.endX = activeObj.pointColl[i].x;\n                        actPoint.endY = activeObj.pointColl[i].y;\n                        canvasDraw.lineTo(actPoint.endX, actPoint.endY);\n                    }\n                }\n            }\n            var obj = { shape: null };\n            parent.notify('selection', { prop: 'getCurrentDrawingShape', value: { obj: obj } });\n            if (obj['shape'] === 'path') {\n                parent.activeObj = actObj = activeObj;\n            }\n            canvasDraw.lineTo(actPoint.endX, actPoint.endY);\n            canvasDraw.stroke();\n        }\n        else {\n            this.drawCornerCircles(canvasDraw);\n        }\n        if (parent.selectionSettings.showCircle && (splitWords === undefined || splitWords[0] !== 'crop')) {\n            var strokeColor = canvasDraw.strokeStyle;\n            var fillColor = canvasDraw.fillStyle;\n            canvasDraw.strokeStyle = parent.selectionSettings.strokeColor;\n            canvasDraw.fillStyle = parent.selectionSettings.fillColor;\n            if (actObj.shape === 'text') {\n                canvasDraw.lineWidth *= 2;\n                canvasDraw.beginPath();\n                this.drawRotationArcLine(canvasDraw);\n                canvasDraw.lineTo(actObj.rotationCirclePoint.x, actObj.rotationCirclePoint.y);\n                canvasDraw.stroke();\n                canvasDraw.fill();\n                canvasDraw.closePath();\n                canvasDraw.beginPath();\n                canvasDraw.moveTo(actObj.rotationCirclePoint.x, actObj.rotationCirclePoint.y);\n                canvasDraw.arc(actObj.rotationCirclePoint.x, actObj.rotationCirclePoint.y, actObj.bottomCenterCircle.radius, 0, 2 * Math.PI);\n                canvasDraw.stroke();\n                canvasDraw.fill();\n                canvasDraw.closePath();\n                canvasDraw.lineWidth /= 2;\n            }\n            else {\n                if (parent.activeObj.shape !== 'redact') {\n                    this.drawCenterCircles(canvasDraw);\n                }\n            }\n            canvasDraw.strokeStyle = strokeColor;\n            canvasDraw.fillStyle = fillColor;\n        }\n        tempObj.rotationCircleLine = actObj.rotationCircleLine;\n        parent.activeObj = extend({}, tempObj, {}, true);\n    };\n    Draw.prototype.drawArrowHead = function (canvasDraw, isStartHead) {\n        var headType = isStartHead ? this.parent.activeObj.start : this.parent.activeObj.end;\n        switch (headType) {\n            case 'arrowSolid':\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                isStartHead ? this.arrowSolid(canvasDraw, true) : this.arrowSolid(canvasDraw, false);\n                break;\n            case 'arrow':\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                isStartHead ? this.arrow(canvasDraw, true) : this.arrow(canvasDraw, false);\n                break;\n            case 'circleSolid':\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                isStartHead ? this.arrowCircleSolid(canvasDraw, true) : this.arrowCircleSolid(canvasDraw, false);\n                break;\n            case 'circle':\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                isStartHead ? this.arrowCircle(canvasDraw, true) : this.arrowCircle(canvasDraw, false);\n                break;\n            case 'bar':\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                isStartHead ? this.arrowBar(canvasDraw, true) : this.arrowBar(canvasDraw, false);\n                break;\n            case 'square':\n            case 'squareSolid':\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                isStartHead ? this.arrowSquareStart(canvasDraw) : this.arrowSquareEnd(canvasDraw);\n                break;\n        }\n    };\n    Draw.prototype.drawShapeObj = function (canvas, shape, saveContext, isPreventSelection) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var actObj = parent.activeObj;\n        var _a = actObj.strokeSettings, strokeColor = _a.strokeColor, fillColor = _a.fillColor, strokeWidth = _a.strokeWidth;\n        var currentShape = shape !== undefined ? shape : parent.currObjType.shape;\n        parent.currObjType.shape = currentShape;\n        var canvasDraw;\n        if (canvas.toLowerCase() === 'original') {\n            canvasDraw = this.lowerContext;\n        }\n        else if (canvas.toLowerCase() === 'duplicate') {\n            canvasDraw = this.upperContext;\n        }\n        else if (saveContext) {\n            canvasDraw = saveContext;\n        }\n        var shapeType = parent.currObjType.shape.toLowerCase();\n        var shapeColl = ['rectangle', 'ellipse', 'line', 'arrow', 'path', 'image', 'redact'];\n        if (shapeColl.indexOf(shapeType) !== -1) {\n            actObj.shape = parent.currObjType.shape;\n        }\n        canvasDraw.strokeStyle = strokeColor;\n        if (shape === 'text' || shape === 'freehanddraw') {\n            canvasDraw.fillStyle = strokeColor;\n        }\n        else {\n            canvasDraw.fillStyle = fillColor;\n        }\n        var horLineWidth = actPoint.width / 3;\n        var verLineHeight = actPoint.height / 3;\n        var selectionWidth = actPoint.endX - actPoint.startX;\n        var selectionHeight = actPoint.endY - actPoint.startY;\n        this.rotateContext('initial', canvasDraw);\n        var degree;\n        var tempFillStyle = canvasDraw.fillStyle;\n        var activeObj;\n        switch (parent.currObjType.shape.toLowerCase()) {\n            case 'rectangle':\n                this.drawSquareLines(canvasDraw);\n                if (isNullOrUndefined(isPreventSelection) && canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'redact':\n                this.drawRedact(canvasDraw, actObj);\n                if (isNullOrUndefined(isPreventSelection) && canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                parent.currObjType.isRedact = true;\n                break;\n            case 'ellipse':\n                selectionWidth = Math.abs(selectionWidth);\n                selectionHeight = Math.abs(selectionHeight);\n                canvasDraw.beginPath();\n                canvasDraw.ellipse(actPoint.startX + (selectionWidth / 2), actPoint.startY + (selectionHeight / 2), selectionWidth / 2, selectionHeight / 2, 0, 0, 2 * Math.PI, false);\n                if (fillColor !== '') {\n                    canvasDraw.fillStyle = fillColor;\n                    canvasDraw.fill();\n                }\n                canvasDraw.ellipse(actPoint.startX + (selectionWidth / 2), actPoint.startY + (selectionHeight / 2), Math.abs((selectionWidth / 2) - (strokeWidth)), Math.abs((selectionHeight / 2) - (strokeWidth)), 0, 0, 2 * Math.PI, false);\n                canvasDraw.fillStyle = strokeColor;\n                canvasDraw.fill('evenodd');\n                canvasDraw.closePath();\n                if (isNullOrUndefined(isPreventSelection) && canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'crop-circle':\n                this.shapeCircle(canvasDraw, selectionWidth, selectionHeight);\n                break;\n            case 'line':\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n                if (isNullOrUndefined(isPreventSelection) && canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'arrow':\n                if (actObj.shapeDegree === 0) {\n                    degree = parent.transform.degree;\n                }\n                else {\n                    degree = parent.transform.degree - actObj.shapeDegree;\n                }\n                if (degree < 0) {\n                    degree = 360 + degree;\n                }\n                canvasDraw.fillStyle = canvasDraw.strokeStyle;\n                if (isNullOrUndefined(actObj.triangleDirection)) {\n                    actObj.triangleDirection = 'right';\n                }\n                if (isNullOrUndefined(actObj.start)) {\n                    actObj.start = 'none';\n                }\n                if (isNullOrUndefined(actObj.end)) {\n                    actObj.end = 'arrowSolid';\n                }\n                this.drawArrowHead(canvasDraw, true);\n                this.drawArrowHead(canvasDraw, false);\n                if (actObj.end === 'none' && actObj.start !== 'circle' && actObj.start !== 'square') {\n                    this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n                }\n                canvasDraw.fillStyle = tempFillStyle;\n                if (isNullOrUndefined(isPreventSelection) && canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'path':\n                activeObj = extend({}, parent.activeObj, {}, true);\n                if (activeObj.pointColl.length > 1) {\n                    var obj = { shape: null };\n                    parent.notify('selection', { prop: 'getCurrentDrawingShape', value: { obj: obj } });\n                    if (obj['shape'] === 'path' && parent.isShapeDrawing) {\n                        var nextPoint = { x: 0, y: 0 };\n                        for (var i = 0, len = activeObj.pointColl.length; i < len; i++) {\n                            if (isNullOrUndefined(activeObj.pointColl[i + 1])) {\n                                nextPoint.x = activeObj.activePoint.endX;\n                                nextPoint.y = activeObj.activePoint.endY;\n                            }\n                            else {\n                                nextPoint.x = activeObj.pointColl[i + 1].x;\n                                nextPoint.y = activeObj.pointColl[i + 1].y;\n                            }\n                            actPoint.startX = activeObj.pointColl[i].x;\n                            actPoint.startY = activeObj.pointColl[i].y;\n                            actPoint.endX = nextPoint.x;\n                            actPoint.endY = nextPoint.y;\n                            parent.activeObj = this.updateWidthHeight(parent.activeObj);\n                            this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n                            if (Browser.isDevice) {\n                                activeObj.activePoint.endX = nextPoint.x;\n                                activeObj.activePoint.endY = nextPoint.y;\n                            }\n                        }\n                    }\n                    else {\n                        for (var i = 1, len = activeObj.pointColl.length; i < len; i++) {\n                            actPoint.startX = activeObj.pointColl[i - 1].x;\n                            actPoint.startY = activeObj.pointColl[i - 1].y;\n                            actPoint.endX = activeObj.pointColl[i].x;\n                            actPoint.endY = activeObj.pointColl[i].y;\n                            parent.activeObj = this.updateWidthHeight(parent.activeObj);\n                            this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n                        }\n                    }\n                    parent.activeObj = actObj = activeObj;\n                }\n                else {\n                    this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n                }\n                if (canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'text':\n                this.shapeText(canvasDraw);\n                break;\n            case 'image':\n                this.shapeImage(canvasDraw);\n                if (isNullOrUndefined(isPreventSelection) && canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'crop-square':\n            case 'crop-3:4':\n            case 'crop-4:3':\n            case 'crop-6:9':\n            case 'crop-9:6':\n            case 'crop-9:16':\n            case 'crop-16:9':\n                if (canvasDraw === this.lowerContext) {\n                    canvasDraw = this.upperContext;\n                }\n                this.drawSelection(horLineWidth, verLineHeight);\n                parent.currObjType.shape = '';\n                break;\n            default:\n                this.drawSelection(horLineWidth, verLineHeight);\n                break;\n        }\n        this.rotateContext('reverse', canvasDraw);\n    };\n    Draw.prototype.updatePoints = function () {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop;\n        actPoint.startX += destLeft;\n        actPoint.startY += destTop;\n        actPoint.endX += destLeft;\n        actPoint.endY += destTop;\n        parent.activeObj = this.updateWidthHeight(parent.activeObj);\n    };\n    Draw.prototype.updateWidthHeight = function (obj) {\n        var _a = obj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        obj.activePoint.width = endX - startX;\n        obj.activePoint.height = endY - startY;\n        return obj;\n    };\n    Draw.prototype.drawCornerCircles = function (canvasDraw) {\n        var parent = this.parent;\n        var tempObj = parent.activeObj;\n        canvasDraw.beginPath();\n        canvasDraw.rect(tempObj.activePoint.startX, tempObj.activePoint.startY, tempObj.activePoint.width, tempObj.activePoint.height);\n        canvasDraw.stroke();\n        canvasDraw.closePath();\n        if (parent.selectionSettings.showCircle) {\n            var strokeColor = canvasDraw.strokeStyle;\n            var fillColor = canvasDraw.fillStyle;\n            canvasDraw.strokeStyle = parent.selectionSettings.strokeColor;\n            canvasDraw.fillStyle = parent.selectionSettings.fillColor;\n            canvasDraw.lineWidth *= 2;\n            canvasDraw.beginPath();\n            canvasDraw.moveTo(tempObj.topLeftCircle.startX, tempObj.topLeftCircle.startY);\n            canvasDraw.arc(tempObj.topLeftCircle.startX, tempObj.topLeftCircle.startY, tempObj.topLeftCircle.radius, 0, 2 * Math.PI);\n            canvasDraw.moveTo(tempObj.topRightCircle.startX, tempObj.topRightCircle.startY);\n            canvasDraw.arc(tempObj.topRightCircle.startX, tempObj.topRightCircle.startY, tempObj.topRightCircle.radius, 0, 2 * Math.PI);\n            canvasDraw.moveTo(tempObj.bottomLeftCircle.startX, tempObj.bottomLeftCircle.startY);\n            canvasDraw.arc(tempObj.bottomLeftCircle.startX, tempObj.bottomLeftCircle.startY, tempObj.bottomLeftCircle.radius, 0, 2 * Math.PI);\n            canvasDraw.moveTo(tempObj.bottomRightCircle.startX, tempObj.bottomRightCircle.startY);\n            canvasDraw.arc(tempObj.bottomRightCircle.startX, tempObj.bottomRightCircle.startY, tempObj.bottomRightCircle.radius, 0, 2 * Math.PI);\n            canvasDraw.stroke();\n            canvasDraw.fill();\n            canvasDraw.closePath();\n            canvasDraw.lineWidth /= 2;\n            canvasDraw.strokeStyle = strokeColor;\n            canvasDraw.fillStyle = fillColor;\n        }\n    };\n    Draw.prototype.drawCenterCircles = function (canvasDraw) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var actObj = parent.activeObj;\n        canvasDraw.lineWidth *= 2;\n        canvasDraw.beginPath();\n        if (actObj.shape === 'arrow' || actObj.shape === 'line') {\n            canvasDraw.moveTo(actPoint.startX, actPoint.startY);\n            canvasDraw.arc(actPoint.startX, actPoint.startY, actObj.topCenterCircle.radius, 0, 2 * Math.PI);\n            canvasDraw.moveTo(actPoint.endX, actPoint.endY);\n            canvasDraw.arc(actPoint.endX, actPoint.endY, actObj.bottomCenterCircle.radius, 0, 2 * Math.PI);\n        }\n        else if (actObj.shape === 'path') {\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            if (activeObj.pointColl.length > 1) {\n                for (var i = 1, len = activeObj.pointColl.length; i < len; i++) {\n                    actPoint.startX = activeObj.pointColl[i - 1].x;\n                    actPoint.startY = activeObj.pointColl[i - 1].y;\n                    actPoint.endX = activeObj.pointColl[i].x;\n                    actPoint.endY = activeObj.pointColl[i].y;\n                    canvasDraw.moveTo(actPoint.startX, actPoint.startY);\n                    canvasDraw.arc(actPoint.startX, actPoint.startY, actObj.topCenterCircle.radius, 0, 2 * Math.PI);\n                    canvasDraw.moveTo(actPoint.endX, actPoint.endY);\n                    canvasDraw.arc(actPoint.endX, actPoint.endY, actObj.bottomCenterCircle.radius, 0, 2 * Math.PI);\n                }\n            }\n            var obj = { shape: null };\n            parent.notify('selection', { prop: 'getCurrentDrawingShape', value: { obj: obj } });\n            if (obj['shape'] === 'path') {\n                parent.activeObj = actObj = activeObj;\n            }\n            canvasDraw.moveTo(actPoint.startX, actPoint.startY);\n            canvasDraw.arc(actPoint.startX, actPoint.startY, actObj.topCenterCircle.radius, 0, 2 * Math.PI);\n            canvasDraw.moveTo(actPoint.endX, actPoint.endY);\n            canvasDraw.arc(actPoint.endX, actPoint.endY, actObj.bottomCenterCircle.radius, 0, 2 * Math.PI);\n        }\n        else {\n            this.drawRotationArcLine(canvasDraw);\n            canvasDraw.lineTo(actObj.rotationCirclePoint.x, actObj.rotationCirclePoint.y);\n        }\n        canvasDraw.stroke();\n        canvasDraw.fill();\n        canvasDraw.closePath();\n        if (actObj.shape !== 'arrow' && actObj.shape !== 'line' && actObj.shape !== 'path') {\n            canvasDraw.beginPath();\n            canvasDraw.moveTo(actObj.rotationCirclePoint.x, actObj.rotationCirclePoint.y);\n            canvasDraw.arc(actObj.rotationCirclePoint.x, actObj.rotationCirclePoint.y, actObj.bottomCenterCircle.radius, 0, 2 * Math.PI);\n            canvasDraw.stroke();\n            canvasDraw.fill();\n            canvasDraw.closePath();\n        }\n        canvasDraw.lineWidth /= 2;\n    };\n    Draw.prototype.drawRotationArcLine = function (canvasDraw) {\n        var parent = this.parent;\n        var actObj = parent.activeObj;\n        if (isNullOrUndefined(actObj.rotationCircleLine)) {\n            actObj.rotationCircleLine = 22.5;\n        }\n        var degree;\n        var isHorizontalflip = false;\n        var isVerticalflip = false;\n        if (actObj.shapeDegree === 0) {\n            degree = parent.transform.degree;\n        }\n        else {\n            degree = parent.transform.degree - actObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        if (actObj.flipObjColl) {\n            for (var i = 0, len = actObj.flipObjColl.length; i < len; i++) {\n                var flipStr = actObj.flipObjColl[i].toLowerCase();\n                if (flipStr === 'horizontal') {\n                    isHorizontalflip = true;\n                }\n                else if (flipStr === 'vertical') {\n                    isVerticalflip = true;\n                }\n            }\n        }\n        switch (degree) {\n            case 0:\n            case 360:\n                if (isVerticalflip) {\n                    actObj.rotationCirclePoint = { x: actObj.topCenterCircle.startX,\n                        y: actObj.topCenterCircle.startY - actObj.rotationCircleLine };\n                    canvasDraw.moveTo(actObj.rotationCirclePoint.x, actObj.rotationCirclePoint.y + actObj.rotationCircleLine);\n                }\n                else {\n                    actObj.rotationCirclePoint = { x: actObj.bottomCenterCircle.startX,\n                        y: actObj.bottomCenterCircle.startY + actObj.rotationCircleLine };\n                    canvasDraw.moveTo(actObj.rotationCirclePoint.x, actObj.rotationCirclePoint.y - actObj.rotationCircleLine);\n                }\n                break;\n            case 90:\n            case -270:\n                if (isHorizontalflip) {\n                    actObj.rotationCirclePoint = { x: actObj.centerRightCircle.startX +\n                            actObj.rotationCircleLine, y: actObj.centerLeftCircle.startY };\n                    canvasDraw.moveTo(actObj.rotationCirclePoint.x - actObj.rotationCircleLine, actObj.rotationCirclePoint.y);\n                }\n                else {\n                    actObj.rotationCirclePoint = { x: actObj.centerLeftCircle.startX -\n                            actObj.rotationCircleLine, y: actObj.centerLeftCircle.startY };\n                    canvasDraw.moveTo(actObj.rotationCirclePoint.x + actObj.rotationCircleLine, actObj.rotationCirclePoint.y);\n                }\n                break;\n            case 180:\n            case -180:\n                if (isVerticalflip) {\n                    actObj.rotationCirclePoint = { x: actObj.bottomCenterCircle.startX,\n                        y: actObj.bottomCenterCircle.startY + actObj.rotationCircleLine };\n                    canvasDraw.moveTo(actObj.rotationCirclePoint.x, actObj.rotationCirclePoint.y - actObj.rotationCircleLine);\n                }\n                else {\n                    actObj.rotationCirclePoint = { x: actObj.topCenterCircle.startX,\n                        y: actObj.topCenterCircle.startY - actObj.rotationCircleLine };\n                    canvasDraw.moveTo(actObj.rotationCirclePoint.x, actObj.rotationCirclePoint.y + actObj.rotationCircleLine);\n                }\n                break;\n            case 270:\n            case -90:\n                if (isHorizontalflip) {\n                    actObj.rotationCirclePoint = { x: actObj.centerLeftCircle.startX -\n                            actObj.rotationCircleLine, y: actObj.centerLeftCircle.startY };\n                    canvasDraw.moveTo(actObj.rotationCirclePoint.x + actObj.rotationCircleLine, actObj.rotationCirclePoint.y);\n                }\n                else {\n                    actObj.rotationCirclePoint = { x: actObj.centerRightCircle.startX +\n                            actObj.rotationCircleLine, y: actObj.centerLeftCircle.startY };\n                    canvasDraw.moveTo(actObj.rotationCirclePoint.x - actObj.rotationCircleLine, actObj.rotationCirclePoint.y);\n                }\n                break;\n        }\n    };\n    Draw.prototype.drawSquareLines = function (canvasDraw) {\n        var splitWords;\n        var parent = this.parent;\n        var actObj = parent.activeObj;\n        var _a = actObj.activePoint, startX = _a.startX, startY = _a.startY, width = _a.width, height = _a.height;\n        var _b = actObj.strokeSettings, fillColor = _b.fillColor, strokeColor = _b.strokeColor, strokeWidth = _b.strokeWidth, radius = _b.radius;\n        if (actObj.shape) {\n            splitWords = actObj.shape.split('-');\n        }\n        if (splitWords[0] === 'crop') {\n            canvasDraw.strokeStyle = '#fff';\n        }\n        else {\n            canvasDraw.strokeStyle = strokeColor;\n        }\n        canvasDraw.beginPath();\n        var obj = { width: 0, height: 0 };\n        var ratio = { width: 1, height: 1 };\n        parent.notify('crop', { prop: 'calcRatio', onPropertyChange: false,\n            value: { obj: obj, dimension: { width: canvasDraw.canvas.width, height: canvasDraw.canvas.height } } });\n        ratio = obj;\n        var isTempCanvas = canvasDraw.canvas.id === parent.element.id + '_tempCanvas';\n        var zoomFactor = parent.transform.zoomFactor;\n        var baseRadius = isTempCanvas ? radius * 10 * ((ratio.width + ratio.height) / 2) : radius * 10;\n        var adjustedRadius = baseRadius + (baseRadius * zoomFactor);\n        if (radius !== null) {\n            if (parent.isSafari) {\n                this.drawRoundedRect(canvasDraw, startX, startY, width, height, adjustedRadius);\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                canvasDraw.roundRect(startX, startY, width, height, adjustedRadius);\n            }\n        }\n        else {\n            canvasDraw.rect(startX, startY, width, height);\n        }\n        if (fillColor !== '') {\n            canvasDraw.fillStyle = fillColor;\n            canvasDraw.fill();\n        }\n        if (radius !== null) {\n            if (parent.isSafari) {\n                this.drawRoundedRect(canvasDraw, startX + strokeWidth, startY + strokeWidth, width - (2 * strokeWidth), height - (2 * strokeWidth), adjustedRadius);\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                canvasDraw.roundRect(startX + strokeWidth, startY + strokeWidth, width - (2 * strokeWidth), height - (2 * strokeWidth), adjustedRadius);\n            }\n        }\n        else {\n            canvasDraw.rect(startX + strokeWidth, startY + strokeWidth, width - (2 * strokeWidth), height - (2 * strokeWidth));\n        }\n        canvasDraw.fillStyle = strokeColor;\n        canvasDraw.fill('evenodd');\n        canvasDraw.closePath();\n    };\n    Draw.prototype.drawRoundedRect = function (canvasDraw, startX, startY, width, height, radius) {\n        var rectRadius = Math.max(0, Math.min(radius, width / 2, height / 2));\n        canvasDraw.moveTo(startX + rectRadius, startY);\n        canvasDraw.arcTo(startX + width, startY, startX + width, startY + height, rectRadius);\n        canvasDraw.arcTo(startX + width, startY + height, startY, startY + height, rectRadius);\n        canvasDraw.arcTo(startX, startY + height, startX, startY, rectRadius);\n        canvasDraw.arcTo(startX, startY, startX + width, startY, rectRadius);\n        canvasDraw.closePath();\n    };\n    Draw.prototype.drawSelection = function (horLineWidth, verLineHeight) {\n        var parent = this.parent;\n        var actObj = parent.activeObj;\n        var _a = actObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        this.upperContext.strokeStyle = parent.themeColl[parent.theme]['primaryColor'];\n        this.upperContext.beginPath();\n        actObj.horTopInnerLine = { startX: startX, startY: startY +\n                verLineHeight, endX: endX, endY: endY + verLineHeight };\n        actObj.horBottomInnerLine = { startX: startX, startY: startY + (2 * verLineHeight), endX: endX, endY: endY + (2 * verLineHeight) };\n        actObj.verLeftInnerLine = { startX: startX + horLineWidth,\n            startY: startY, endX: startX + horLineWidth, endY: endY };\n        actObj.verRightInnerLine = { startX: startX + (2 * horLineWidth),\n            startY: startY, endX: startX + (2 * horLineWidth), endY: endY };\n        this.upperContext.moveTo(actObj.horTopInnerLine.startX, actObj.horTopInnerLine.startY);\n        this.upperContext.lineTo(actObj.horTopInnerLine.endX, actObj.horTopInnerLine.startY);\n        this.upperContext.moveTo(actObj.horBottomInnerLine.startX, actObj.horBottomInnerLine.startY);\n        this.upperContext.lineTo(actObj.horBottomInnerLine.endX, actObj.horBottomInnerLine.startY);\n        this.upperContext.moveTo(actObj.verLeftInnerLine.startX, actObj.verLeftInnerLine.startY);\n        this.upperContext.lineTo(actObj.verLeftInnerLine.endX, actObj.verLeftInnerLine.endY);\n        this.upperContext.moveTo(actObj.verRightInnerLine.startX, actObj.verRightInnerLine.startY);\n        this.upperContext.lineTo(actObj.verRightInnerLine.endX, actObj.verRightInnerLine.endY);\n        this.upperContext.stroke();\n        this.upperContext.closePath();\n    };\n    Draw.prototype.shapeCircle = function (canvasDraw, selectionWidth, selectionHeight) {\n        var parent = this.parent;\n        var _a = parent.activeObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY, width = _a.width;\n        canvasDraw.strokeStyle = parent.themeColl[parent.theme]['primaryColor'];\n        canvasDraw.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        canvasDraw.fillStyle = 'rgb(0, 0, 0, 0.25)';\n        canvasDraw.fillRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        var tempWidth = canvasDraw.lineWidth;\n        canvasDraw.lineWidth = (2);\n        canvasDraw.beginPath();\n        canvasDraw.ellipse(parent.activeObj.horTopLine.startX + (selectionWidth / 2), parent.activeObj.horTopLine.startY\n            + (selectionHeight / 2), selectionWidth / 2, selectionHeight / 2, 0, 0, 2 * Math.PI, false);\n        canvasDraw.stroke();\n        canvasDraw.closePath();\n        canvasDraw.save();\n        canvasDraw.beginPath();\n        canvasDraw.arc(((endX - startX) / 2) + startX, ((endY - startY) / 2) + startY, (width / 2), 0, Math.PI * 2);\n        canvasDraw.closePath();\n        canvasDraw.clip();\n        canvasDraw.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        canvasDraw.restore();\n        canvasDraw.lineWidth = tempWidth;\n        this.drawOuterSelection(canvasDraw, true);\n        parent.currObjType.shape = '';\n    };\n    Draw.prototype.shapeLine = function (canvasDraw, x1, y1, x2, y2) {\n        var tempLineWidth = canvasDraw.lineWidth;\n        canvasDraw.lineWidth = (this.parent.activeObj.strokeSettings.strokeWidth);\n        canvasDraw.beginPath();\n        canvasDraw.moveTo(x1, y1);\n        canvasDraw.lineTo(x2, y2);\n        canvasDraw.stroke();\n        canvasDraw.lineWidth = tempLineWidth;\n    };\n    Draw.prototype.manipulateSaveCtx = function (canvasDraw, x, y) {\n        if (canvasDraw !== this.lowerContext && canvasDraw !== this.upperContext) {\n            var obj = { width: 0, height: 0 };\n            this.parent.notify('crop', { prop: 'calcRatio', onPropertyChange: false,\n                value: { obj: obj, dimension: { width: canvasDraw.canvas.width, height: canvasDraw.canvas.height } } });\n            var ratio = obj;\n            if (x) {\n                x *= (ratio.width);\n            }\n            if (y) {\n                y *= (ratio.height);\n            }\n        }\n        return { x: x, y: y };\n    };\n    Draw.prototype.arrow = function (canvasDraw, start) {\n        var parent = this.parent;\n        var actObj = parent.activeObj;\n        var _a = actObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        var strWidth = actObj.strokeSettings.strokeWidth;\n        canvasDraw.lineWidth = strWidth;\n        var x = this.arrowDimension['arrow']['width'];\n        var y = this.arrowDimension['arrow']['height'];\n        var point = this.manipulateSaveCtx(canvasDraw, x, y);\n        x = point.x + strWidth;\n        y = point.y + strWidth;\n        this.dx = endX - startX;\n        this.dy = endY - startY;\n        canvasDraw.fillStyle = actObj.strokeSettings.strokeColor;\n        var angle = Math.atan2(this.dy, this.dx);\n        var isStartArrow = actObj.start === 'arrow';\n        var isEndArrow = actObj.end === 'arrow';\n        var isEndCircleOrSquare = actObj.end === 'circle' || actObj.end === 'square';\n        var isStartCircleOrSquare = actObj.start === 'circle' || actObj.start === 'square';\n        if ((start && actObj.triangleDirection === 'left' || actObj.triangleDirection === 'right') &&\n            ((isStartArrow && actObj.end === 'none') || (isStartArrow && !isEndCircleOrSquare && !isStartCircleOrSquare)) ||\n            (!start && (isEndArrow && actObj.start === 'none' || !isStartArrow && !isEndCircleOrSquare && !isStartCircleOrSquare))) {\n            this.shapeLine(canvasDraw, startX, startY, endX, endY);\n        }\n        if ((start && actObj.triangleDirection === 'left') || (!start && actObj.triangleDirection === 'right')) {\n            canvasDraw.translate(endX, endY);\n            canvasDraw.rotate(angle);\n            this.shapeLine(canvasDraw, 0, 0, -x, y / 2);\n            this.shapeLine(canvasDraw, 0, 0, -x, -y / 2);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-endX, -endY);\n        }\n        else if ((start && actObj.triangleDirection === 'right') || (!start && actObj.triangleDirection === 'left')) {\n            canvasDraw.translate(startX, startY);\n            canvasDraw.rotate(angle);\n            this.shapeLine(canvasDraw, 0, 0, x, y / 2);\n            this.shapeLine(canvasDraw, 0, 0, x, -y / 2);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-startX, -startY);\n        }\n    };\n    Draw.prototype.arrowSolid = function (canvasDraw, start) {\n        var parent = this.parent;\n        var actObj = parent.activeObj;\n        var strWidth = actObj.strokeSettings.strokeWidth;\n        var _a = actObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        var x = this.arrowDimension['arrowSolid']['width'];\n        var y = this.arrowDimension['arrowSolid']['height'];\n        var point = this.manipulateSaveCtx(canvasDraw, x, y);\n        x = point.x + strWidth;\n        y = point.y + strWidth;\n        this.dx = endX - startX;\n        this.dy = endY - startY;\n        var angle = Math.atan2(this.dy, this.dx);\n        var isStartArrowSolid = actObj.start === 'arrowSolid';\n        var isEndArrowSolid = actObj.end === 'arrowSolid';\n        var isStartCircleOrSquare = actObj.start === 'circle' || actObj.start === 'square';\n        var isEndCircleOrSquare = actObj.end === 'circle' || actObj.end === 'square';\n        if ((start && (isStartArrowSolid && actObj.end === 'none') || (isStartArrowSolid && !isEndCircleOrSquare && !isStartCircleOrSquare)) ||\n            (!start && (isEndArrowSolid && actObj.start === 'none' || !isStartArrowSolid && !isEndCircleOrSquare && !isStartCircleOrSquare))) {\n            this.shapeLine(canvasDraw, startX, startY, endX, endY);\n        }\n        if ((start && actObj.triangleDirection === 'left') || (!start && actObj.triangleDirection === 'right')) {\n            canvasDraw.translate(endX, endY);\n            canvasDraw.rotate(angle);\n            canvasDraw.beginPath();\n            canvasDraw.moveTo(strWidth, 0);\n            canvasDraw.lineTo(-x + y / 2, y / 2);\n            canvasDraw.lineTo(-x + y / 2, -y / 2);\n            canvasDraw.closePath();\n            canvasDraw.fill();\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-endX, -endY);\n            actObj.rotatedAngle = angle;\n        }\n        else if ((start && actObj.triangleDirection === 'right') || (!start && actObj.triangleDirection === 'left')) {\n            canvasDraw.translate(startX, startY);\n            canvasDraw.rotate(angle);\n            canvasDraw.beginPath();\n            canvasDraw.moveTo(0 - strWidth, 0);\n            canvasDraw.lineTo(x - y / 2, y / 2);\n            canvasDraw.lineTo(x - y / 2, -y / 2);\n            canvasDraw.closePath();\n            canvasDraw.fill();\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-startX, -startY);\n            actObj.rotatedAngle = angle;\n        }\n    };\n    Draw.prototype.arrowSquareStart = function (canvasDraw) {\n        var parent = this.parent;\n        var actObj = parent.activeObj;\n        var strWidth = actObj.strokeSettings.strokeWidth;\n        var _a = actObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        var isStartSquare = actObj.start === 'square';\n        var isEndCircle = actObj.end === 'circle';\n        var isStartSquareSolid = actObj.start === 'squareSolid';\n        var isEndCircleSolid = actObj.end === 'circleSolid';\n        if ((isStartSquare && actObj.end === 'none') || (isStartSquare && !isEndCircle && actObj.start !== 'square') ||\n            (isStartSquareSolid && isEndCircleSolid)) {\n            this.shapeLine(canvasDraw, startX, startY, endX, endY);\n        }\n        canvasDraw.lineWidth = (strWidth);\n        canvasDraw.beginPath();\n        canvasDraw.fillStyle = actObj.strokeSettings.strokeColor;\n        var x = this.arrowDimension['square']['width'];\n        var y = this.arrowDimension['square']['height'];\n        var point = this.manipulateSaveCtx(canvasDraw, x, y);\n        x = point.x + strWidth;\n        y = point.y + strWidth;\n        this.dx = endX - startX;\n        this.dy = endY - startY;\n        var angle = Math.atan2(this.dy, this.dx);\n        if (actObj.triangleDirection === 'left') {\n            canvasDraw.translate(endX, endY);\n            canvasDraw.rotate(angle);\n            if (actObj.start === 'squareSolid') {\n                canvasDraw.fillRect(-x + y / 2, -y / 2, x, y);\n            }\n            canvasDraw.strokeRect(-x + y / 2, -y / 2, x, y);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-endX, -endY);\n            this.squareStartIntersectX1 = endX - (y / 2) * Math.cos(angle);\n            this.squareStartIntersectY1 = endY - (y / 2) * Math.sin(angle);\n            if (actObj.start === 'square' && actObj.end !== 'square' && actObj.end !== 'circle') {\n                this.shapeLine(canvasDraw, startX, startY, this.squareStartIntersectX1, this.squareStartIntersectY1);\n            }\n            else if (actObj.start === 'square' && actObj.end === 'circle') {\n                this.shapeLine(canvasDraw, this.endCircleIntersectX1, this.endCircleIntersectY1, this.squareStartIntersectX1, this.squareStartIntersectY1);\n            }\n            else if (actObj.start === 'squareSolid' && actObj.end === 'squareSolid') {\n                this.shapeLine(canvasDraw, startX, startY, endX, endY);\n            }\n        }\n        else if (actObj.triangleDirection === 'right') {\n            canvasDraw.lineWidth = (strWidth);\n            canvasDraw.fillStyle = actObj.strokeSettings.strokeColor;\n            if (actObj.start === 'squareSolid' && actObj.end === 'squareSolid') {\n                this.shapeLine(canvasDraw, startX, startY, endX, endY);\n            }\n            canvasDraw.translate(startX, startY);\n            canvasDraw.rotate(angle);\n            if (actObj.start === 'squareSolid') {\n                canvasDraw.fillRect(y / 2 - x, -y / 2, x, y);\n            }\n            canvasDraw.strokeRect(y / 2 - x, -y / 2, x, y);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-startX, -startY);\n            actObj.rotatedAngle = angle;\n            this.squareStartIntersectX1 = startX + (y / 2) * Math.cos(angle);\n            this.squareStartIntersectY1 = startY + (y / 2) * Math.sin(angle);\n            if (actObj.start === 'square' && actObj.end !== 'square' && actObj.end !== 'circle') {\n                this.shapeLine(canvasDraw, endX, endY, this.squareStartIntersectX1, this.squareStartIntersectY1);\n            }\n            if (actObj.start === 'square' && actObj.end === 'circle') {\n                this.shapeLine(canvasDraw, this.endCircleIntersectX1, this.endCircleIntersectY1, this.squareStartIntersectX1, this.squareStartIntersectY1);\n            }\n        }\n    };\n    Draw.prototype.arrowSquareEnd = function (canvasDraw) {\n        var parent = this.parent;\n        var actObj = parent.activeObj;\n        var _a = actObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        var strWidth = actObj.strokeSettings.strokeWidth;\n        var x = this.arrowDimension['square']['width'];\n        var y = this.arrowDimension['square']['height'];\n        var point = this.manipulateSaveCtx(canvasDraw, x, y);\n        x = point.x + strWidth;\n        y = point.y + strWidth;\n        this.dx = endX - startX;\n        this.dy = endY - startY;\n        var angle = Math.atan2(this.dy, this.dx);\n        canvasDraw.lineWidth = (strWidth);\n        if (actObj.triangleDirection === 'right') {\n            canvasDraw.fillStyle = actObj.strokeSettings.strokeColor;\n            if (actObj.end === 'squareSolid' && actObj.start === 'none') {\n                this.shapeLine(canvasDraw, startX, startY, endX, endY);\n            }\n            canvasDraw.translate(endX, endY);\n            canvasDraw.rotate(angle);\n            if (actObj.end === 'squareSolid') {\n                canvasDraw.fillRect(-x + y / 2, -y / 2, x, y);\n            }\n            canvasDraw.strokeRect(-x + y / 2, -y / 2, x, y);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-endX, -endY);\n            actObj.rotatedAngle = angle;\n            this.squareEndIntersectX1 = endX - (y / 2) * Math.cos(angle);\n            this.squareEndIntersectY1 = endY - (y / 2) * Math.sin(angle);\n            if (actObj.end === 'square' && actObj.start !== 'square' && actObj.start !== 'circle') {\n                this.shapeLine(canvasDraw, startX, startY, this.squareEndIntersectX1, this.squareEndIntersectY1);\n            }\n            else if (actObj.start === 'circle' && actObj.end === 'square') {\n                this.shapeLine(canvasDraw, this.squareEndIntersectX1, this.squareEndIntersectY1, this.startCircleIntersectX1, this.startCircleIntersectY1);\n            }\n            else if (actObj.start === 'square' && actObj.end === 'square') {\n                this.shapeLine(canvasDraw, this.squareEndIntersectX1, this.squareEndIntersectY1, this.squareStartIntersectX1, this.squareStartIntersectY1);\n            }\n        }\n        else if (actObj.triangleDirection === 'left') {\n            canvasDraw.translate(startX, startY);\n            canvasDraw.rotate(angle);\n            if (actObj.end === 'squareSolid') {\n                canvasDraw.fillRect(y / 2 - x, -y / 2, x, y);\n            }\n            canvasDraw.strokeRect(y / 2 - x, -y / 2, x, y);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-startX, -startY);\n            actObj.rotatedAngle = angle;\n            this.squareEndIntersectX1 = startX + (y / 2) * Math.cos(angle);\n            this.squareEndIntersectY1 = startY + (y / 2) * Math.sin(angle);\n            if (actObj.end === 'square' && actObj.start !== 'square' && actObj.start !== 'circle') {\n                this.shapeLine(canvasDraw, endX, endY, this.squareEndIntersectX1, this.squareEndIntersectY1);\n            }\n            else if (actObj.start === 'circle' && actObj.end === 'square') {\n                this.shapeLine(canvasDraw, this.squareEndIntersectX1, this.squareEndIntersectY1, this.startCircleIntersectX1, this.startCircleIntersectY1);\n            }\n            else if (actObj.start === 'square' && actObj.end === 'square') {\n                this.shapeLine(canvasDraw, this.squareEndIntersectX1, this.squareEndIntersectY1, this.squareStartIntersectX1, this.squareStartIntersectY1);\n            }\n            else if (actObj.end === 'squareSolid' && actObj.start === 'none') {\n                this.shapeLine(canvasDraw, startX, startY, endX, endY);\n            }\n        }\n    };\n    Draw.prototype.arrowCircle = function (canvasDraw, start) {\n        var parent = this.parent;\n        var actObj = parent.activeObj;\n        var _a = actObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        var strWidth = actObj.strokeSettings.strokeWidth;\n        if ((start && actObj.triangleDirection === 'left') ||\n            (!start && actObj.triangleDirection === 'right')) {\n            canvasDraw.lineWidth = strWidth;\n            var circleRadius = this.arrowDimension['circle']['width'];\n            var point = this.manipulateSaveCtx(canvasDraw, circleRadius, null);\n            circleRadius = point.x + strWidth;\n            canvasDraw.beginPath();\n            canvasDraw.arc(endX, endY, circleRadius, 0, 2 * Math.PI);\n            canvasDraw.stroke();\n            canvasDraw.closePath();\n            this.dx = endX - startX;\n            this.dy = endY - startY;\n            var a = this.dx * this.dx + this.dy * this.dy;\n            var b = 2 * (this.dx * (startX - endX) + this.dy * (startY - endY));\n            var c = (startX - endX) * (startX - endX) + (startY - endY) *\n                (startY - endY) - circleRadius * circleRadius;\n            var intersect = b * b - 4 * a * c;\n            if (intersect >= 0) {\n                canvasDraw.fillStyle = actObj.strokeSettings.strokeColor;\n                var t2 = (-b - Math.sqrt(intersect)) / (2 * a);\n                var intersectionX1 = startX + this.dx * t2;\n                var intersectionY1 = startY + this.dy * t2;\n                if (start) {\n                    this.startCircleIntersectX1 = intersectionX1;\n                    this.startCircleIntersectY1 = intersectionY1;\n                    this.endCircleIntersectX1 = endX - this.dx * t2;\n                    this.endCircleIntersectY1 = endY - this.dy * t2;\n                    canvasDraw.beginPath();\n                    canvasDraw.fill();\n                    canvasDraw.beginPath();\n                    if (actObj.start === 'circle' && actObj.end === 'circle') {\n                        this.shapeLine(canvasDraw, this.startCircleIntersectX1, this.startCircleIntersectY1, this.endCircleIntersectX1, this.endCircleIntersectY1);\n                    }\n                    else if (actObj.start === 'circle' && actObj.end !== 'circle' && actObj.end !== 'square') {\n                        this.shapeLine(canvasDraw, startX, startY, this.startCircleIntersectX1, this.startCircleIntersectY1);\n                    }\n                    canvasDraw.stroke();\n                    canvasDraw.closePath();\n                }\n                else {\n                    this.endCircleIntersectX1 = intersectionX1;\n                    this.endCircleIntersectY1 = intersectionY1;\n                    if (actObj.end === 'circle' && (actObj.start !== 'circle' && actObj.start !== 'square')) {\n                        this.shapeLine(canvasDraw, startX, startY, this.endCircleIntersectX1, this.endCircleIntersectY1);\n                    }\n                }\n            }\n            var angle = Math.atan2(this.dy, this.dx);\n            parent.activeObj.rotatedAngle = angle;\n        }\n        else if ((start && actObj.triangleDirection === 'right') ||\n            (!start && actObj.triangleDirection === 'left')) {\n            canvasDraw.lineWidth = strWidth;\n            var circleRadius = this.arrowDimension['circle']['width'];\n            var point = this.manipulateSaveCtx(canvasDraw, circleRadius, null);\n            circleRadius = point.x + strWidth;\n            canvasDraw.beginPath();\n            canvasDraw.arc(startX, startY, circleRadius, 0, 2 * Math.PI);\n            canvasDraw.stroke();\n            canvasDraw.closePath();\n            this.dx = startX - endX;\n            this.dy = startY - endY;\n            var a = this.dx * this.dx + this.dy * this.dy;\n            var b = 2 * (this.dx * (endX - startX) + this.dy * (endY - startY));\n            var c = (endX - startX) * (endX - startX) + (endY - startY) *\n                (endY - startY) - circleRadius * circleRadius;\n            var intersect = b * b - 4 * a * c;\n            if (intersect >= 0) {\n                canvasDraw.fillStyle = actObj.strokeSettings.strokeColor;\n                var t2 = (-b - Math.sqrt(intersect)) / (2 * a);\n                var intersectionX1 = endX + this.dx * t2;\n                var intersectionY1 = endY + this.dy * t2;\n                if (start) {\n                    this.startCircleIntersectX1 = intersectionX1;\n                    this.startCircleIntersectY1 = intersectionY1;\n                    this.endCircleIntersectX1 = startX - this.dx * t2;\n                    this.endCircleIntersectY1 = startY - this.dy * t2;\n                    if (actObj.start === 'circle' && actObj.end === 'circle') {\n                        this.shapeLine(canvasDraw, this.endCircleIntersectX1, this.endCircleIntersectY1, this.startCircleIntersectX1, this.startCircleIntersectY1);\n                    }\n                    else if (actObj.start === 'circle' && actObj.end !== 'circle' && actObj.end !== 'square') {\n                        this.shapeLine(canvasDraw, endX, endY, this.startCircleIntersectX1, this.startCircleIntersectY1);\n                    }\n                }\n                else {\n                    this.endCircleIntersectX1 = intersectionX1;\n                    this.endCircleIntersectY1 = intersectionY1;\n                    canvasDraw.beginPath();\n                    canvasDraw.fill();\n                    canvasDraw.beginPath();\n                    if (actObj.end === 'circle' && (actObj.start !== 'circle' && actObj.start !== 'square')) {\n                        this.shapeLine(canvasDraw, endX, endY, this.endCircleIntersectX1, this.endCircleIntersectY1);\n                    }\n                }\n            }\n            var angle = Math.atan2(this.dy, this.dx);\n            parent.activeObj.rotatedAngle = angle;\n        }\n    };\n    Draw.prototype.arrowCircleSolid = function (canvasDraw, start) {\n        var parent = this.parent;\n        var actObj = parent.activeObj;\n        var _a = actObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        var isStartCircleSolid = actObj.start === 'circleSolid';\n        var strWidth = actObj.strokeSettings.strokeWidth;\n        if ((start && actObj.triangleDirection === 'left') || (!start && actObj.triangleDirection === 'right')) {\n            canvasDraw.lineWidth = strWidth;\n            canvasDraw.beginPath();\n            canvasDraw.fillStyle = actObj.strokeSettings.strokeColor;\n            if ((start && (isStartCircleSolid && actObj.end === 'none') ||\n                (isStartCircleSolid && actObj.end !== 'circle' && actObj.end !== 'square')) ||\n                (!start && (actObj.end === 'circleSolid' && actObj.start === 'none'))) {\n                this.shapeLine(canvasDraw, startX, startY, endX, endY);\n            }\n            var circleRadius = this.arrowDimension['circle']['width'];\n            var point = this.manipulateSaveCtx(canvasDraw, circleRadius, null);\n            circleRadius = point.x + strWidth;\n            this.dx = endX - startX;\n            this.dy = endY - startY;\n            canvasDraw.save();\n            canvasDraw.beginPath();\n            canvasDraw.arc(endX, endY, circleRadius, 0, 2 * Math.PI);\n            canvasDraw.stroke();\n            canvasDraw.fill();\n            canvasDraw.closePath();\n            actObj.rotatedAngle = Math.atan2(this.dy, this.dx);\n        }\n        else if ((start && actObj.triangleDirection === 'right') || (!start && actObj.triangleDirection === 'left')) {\n            canvasDraw.lineWidth = strWidth;\n            canvasDraw.beginPath();\n            canvasDraw.fillStyle = actObj.strokeSettings.strokeColor;\n            if ((start && (isStartCircleSolid && actObj.end === 'none') ||\n                (isStartCircleSolid && actObj.end !== 'circle' && actObj.end !== 'square')) ||\n                !start && (actObj.end === 'circleSolid' && actObj.start === 'none')) {\n                this.shapeLine(canvasDraw, startX, startY, endX, endY);\n            }\n            var circleRadius = this.arrowDimension['circle']['width'];\n            var point = this.manipulateSaveCtx(canvasDraw, circleRadius, null);\n            circleRadius = point.x + strWidth;\n            this.dx = endX - startX;\n            this.dy = endY - startY;\n            canvasDraw.save();\n            canvasDraw.beginPath();\n            canvasDraw.arc(startX, startY, circleRadius, 0, 2 * Math.PI);\n            canvasDraw.stroke();\n            canvasDraw.fill();\n            canvasDraw.closePath();\n            actObj.rotatedAngle = Math.atan2(this.dy, this.dx);\n        }\n    };\n    Draw.prototype.arrowBar = function (canvasDraw, start) {\n        var parent = this.parent;\n        var actObj = parent.activeObj;\n        var _a = actObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        var strWidth = actObj.strokeSettings.strokeWidth;\n        if ((start && actObj.triangleDirection === 'left') || (!start && actObj.triangleDirection === 'right')) {\n            canvasDraw.lineWidth = strWidth;\n            canvasDraw.beginPath();\n            canvasDraw.fillStyle = actObj.strokeSettings.strokeColor;\n            if ((start && (actObj.start === 'bar' && actObj.end === 'none') ||\n                (actObj.start === 'bar' && (actObj.end !== 'circle' && actObj.end !== 'square'))) ||\n                (!start && ((actObj.end === 'bar' && actObj.start === 'none') ||\n                    (actObj.end === 'bar' && (actObj.start !== 'circle' && actObj.start !== 'square'))))) {\n                this.shapeLine(canvasDraw, startX, startY, endX, endY);\n            }\n            var x = this.arrowDimension['bar']['width'];\n            var y = this.arrowDimension['bar']['height'];\n            var point = this.manipulateSaveCtx(canvasDraw, x, y);\n            x = point.x + strWidth;\n            y = point.y + strWidth;\n            this.dx = endX - startX;\n            this.dy = endY - startY;\n            var angle = Math.atan2(this.dy, this.dx);\n            canvasDraw.translate(endX, endY);\n            canvasDraw.rotate(angle);\n            canvasDraw.fillRect(-x + y / 4, -y / 2, x, y);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-endX, -endY);\n            actObj.rotatedAngle = angle;\n        }\n        else if ((start && actObj.triangleDirection === 'right') || (!start && actObj.triangleDirection === 'left')) {\n            canvasDraw.lineWidth = strWidth;\n            canvasDraw.beginPath();\n            canvasDraw.fillStyle = actObj.strokeSettings.strokeColor;\n            if ((start && (actObj.start === 'bar' && actObj.end === 'none')\n                || (actObj.start === 'bar' && (actObj.end !== 'circle' && actObj.end !== 'square'))) ||\n                (!start && (actObj.end === 'bar' && actObj.start === 'none'))) {\n                this.shapeLine(canvasDraw, startX, startY, endX, endY);\n            }\n            var x = this.arrowDimension['bar']['width'];\n            var y = this.arrowDimension['bar']['height'];\n            var point = this.manipulateSaveCtx(canvasDraw, x, y);\n            x = point.x + strWidth;\n            y = point.y + strWidth;\n            this.dx = endX - startX;\n            this.dy = endY - startY;\n            var angle = Math.atan2(this.dy, this.dx);\n            canvasDraw.translate(startX, startY);\n            canvasDraw.rotate(angle);\n            canvasDraw.fillRect(y / 4 - x, -y / 2, x, y);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-startX, -startY);\n            parent.activeObj.rotatedAngle = angle;\n        }\n    };\n    Draw.prototype.shapeImage = function (canvasDraw) {\n        var parent = this.parent;\n        var actObj = parent.activeObj;\n        var _a = actObj.activePoint, startX = _a.startX, startY = _a.startY, width = _a.width, height = _a.height;\n        var ctx = actObj.imageCanvas.getContext('2d');\n        if (canvasDraw === this.lowerContext && this.isImageApply) {\n            var dimObj = { width: 0, height: 0 };\n            parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false, value: { width: actObj\n                        .imageElement.width, height: actObj.imageElement.height, obj: dimObj, isImgShape: null } });\n            if (width < (dimObj['width'] / 5) || height < (dimObj['height'] / 5)) {\n                ctx.clearRect(0, 0, actObj.imageCanvas.width, actObj.imageCanvas.height);\n                parent.notify('selection', { prop: 'applyTransformToImg', onPropertyChange: false, value: { ctx: ctx } });\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                parent.notify('selection', { prop: 'setImageClarity', onPropertyChange: false, value: { bool: false } });\n                this.isImageApply = false;\n            }\n        }\n        var imgPoint = { startX: 0, startY: 0, width: 0, height: 0 };\n        imgPoint.width = width;\n        imgPoint.height = height;\n        if (actObj.flipObjColl.length === 4) {\n            actObj.flipObjColl = [];\n            actObj.shapeFlip = '';\n        }\n        imgPoint.startX = ((width - imgPoint.width) / 2) + startX;\n        imgPoint.startY = ((height - imgPoint.height) / 2) + startY;\n        var temp = canvasDraw.globalAlpha;\n        canvasDraw.globalAlpha = actObj.opacity;\n        if (actObj.rotateFlipColl && actObj.rotateFlipColl.length > 0) {\n            this.rotateImage(canvasDraw);\n        }\n        else {\n            canvasDraw.drawImage(actObj.imageCanvas, imgPoint.startX, imgPoint.startY, imgPoint.width, imgPoint.height);\n        }\n        canvasDraw.globalAlpha = temp;\n        parent.currObjType.isText = false;\n    };\n    Draw.prototype.shapeText = function (canvasDraw) {\n        var parent = this.parent;\n        var filter = canvasDraw.filter;\n        var actObj = parent.activeObj;\n        var _a = actObj.activePoint, startX = _a.startX, startY = _a.startY, width = _a.width, height = _a.height;\n        var rows = actObj.keyHistory.split('\\n');\n        var _b = actObj.textSettings, fontFamily = _b.fontFamily, bold = _b.bold, italic = _b.italic;\n        var fontSize = actObj.textSettings.fontSize;\n        var lHeight = fontSize + fontSize * 0.25;\n        var lineHeight = ((lHeight * rows.length) - (fontSize * rows.length)) / rows.length;\n        canvasDraw.filter = 'none';\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var tempFill = canvasDraw.fillStyle;\n        if (actObj.strokeSettings.fillColor !== '') {\n            canvasDraw.fillStyle = actObj.strokeSettings.fillColor;\n            canvasDraw.fillRect(actObj.activePoint.startX, actObj.activePoint.startY, actObj.activePoint.width, actObj.activePoint.height);\n        }\n        canvasDraw.fillStyle = tempFill;\n        for (var i = 0; i < rows.length; i++) {\n            var text = rows[i];\n            var yPoint = ((i + 1) * fontSize * 0.85) + (i * lineHeight);\n            if (parent.transform.degree === -360) {\n                parent.transform.degree = 0;\n            }\n            if (parent.transform.degree === 0 || parent.transform.degree === 180) {\n                if (fontSize > height) {\n                    fontSize = actObj.textSettings.fontSize = height - (height * 0.1);\n                }\n            }\n            else {\n                if (fontSize > width) {\n                    fontSize = actObj.textSettings.fontSize = width - (width * 0.1);\n                }\n            }\n            canvasDraw.strokeStyle = actObj.strokeSettings.outlineColor;\n            canvasDraw.fillStyle = actObj.strokeSettings.strokeColor;\n            var tempWidth = canvasDraw.lineWidth;\n            var obj = { width: 0, height: 0 };\n            var ratio = { width: 1, height: 1 };\n            parent.notify('crop', { prop: 'calcRatio', onPropertyChange: false,\n                value: { obj: obj, dimension: { width: canvasDraw.canvas.width, height: canvasDraw.canvas.height } } });\n            ratio = obj;\n            var isTempCanvas = canvasDraw.canvas.id === parent.element.id + '_tempCanvas';\n            var baseWidth = Math.max(1, actObj.strokeSettings.outlineWidth / 2);\n            if (/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6}|[0-9A-Fa-f]{8})$|^[a-zA-Z]+$/.test(actObj.strokeSettings.outlineColor)) {\n                canvasDraw.lineWidth = baseWidth * ((isTempCanvas ? Math.floor((fontSize - 1) / 60) :\n                    Math.floor((fontSize - 1) / 16)) * 0.5 + 0.5);\n                if (isTempCanvas) {\n                    canvasDraw.lineWidth *= ((ratio.width + ratio.height) / 2);\n                    if (parent.transform.degree !== 0) {\n                        canvasDraw.lineWidth /= 1.8;\n                    }\n                }\n            }\n            else {\n                canvasDraw.lineWidth = 0;\n            }\n            var textStyle = '';\n            if (bold) {\n                textStyle = 'bold ';\n            }\n            if (italic) {\n                textStyle = 'italic ';\n            }\n            if (bold && italic) {\n                textStyle = 'italic bold ';\n            }\n            canvasDraw.font = textStyle + fontSize + 'px' + ' ' + fontFamily;\n            if (actObj.flipObjColl.length === 4) {\n                actObj.flipObjColl = [];\n                actObj.shapeFlip = '';\n            }\n            if (actObj.rotateFlipColl && actObj.rotateFlipColl.length > 0) {\n                this.rotateText(canvasDraw);\n            }\n            else {\n                canvasDraw.strokeText(text, startX + fontSize * 0.1, startY + yPoint);\n                canvasDraw.fillText(text, startX + fontSize * 0.1, startY + yPoint);\n            }\n            canvasDraw.lineWidth = tempWidth;\n        }\n        canvasDraw.filter = filter;\n        parent.currObjType.isText = false;\n        if (this.upperContext === canvasDraw) {\n            this.drawOuterSelection(canvasDraw);\n        }\n    };\n    Draw.prototype.updateActPoint = function (degree, canvasDraw) {\n        var parent = this.parent;\n        var actObj = parent.activeObj;\n        var actPoint = actObj.activePoint;\n        if (degree.toLowerCase() === 'horizontal') {\n            if (actPoint.startX <= canvasDraw.canvas.width / 2) {\n                actPoint.startX = canvasDraw.canvas.width / 2 + ((canvasDraw.canvas.width / 2) - actPoint.endX);\n                actPoint.endX = actPoint.startX + actPoint.width;\n                this.updateActiveObject(actPoint, actObj);\n                parent.activeObj = actObj;\n            }\n            else if (actPoint.startX >= canvasDraw.canvas.width / 2) {\n                actPoint.startX = canvasDraw.canvas.width - actPoint.endX;\n                actPoint.endX = actPoint.startX + actPoint.width;\n                this.updateActiveObject(actPoint, actObj);\n                parent.activeObj = actObj;\n            }\n        }\n        else if (degree.toLowerCase() === 'vertical') {\n            if (actPoint.startY <= canvasDraw.canvas.height / 2) {\n                actPoint.startY = canvasDraw.canvas.height / 2 + ((canvasDraw.canvas.height / 2) - actPoint.endY);\n                actPoint.endY = actPoint.startY + actPoint.height;\n                this.updateActiveObject(actPoint, actObj);\n                parent.activeObj = actObj;\n            }\n            else if (actPoint.startY >= canvasDraw.canvas.height / 2) {\n                actPoint.startY = canvasDraw.canvas.height - actPoint.endY;\n                actPoint.endY = actPoint.startY + actPoint.height;\n                this.updateActiveObject(actPoint, actObj);\n                parent.activeObj = actObj;\n            }\n        }\n        return actPoint;\n    };\n    Draw.prototype.rotateImage = function (canvasDraw) {\n        var parent = this.parent;\n        var degree;\n        var actObj = parent.activeObj;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (actObj.shapeDegree === 0) {\n            degree = parent.transform.degree;\n        }\n        else {\n            degree = parent.transform.degree - actObj.shapeDegree;\n        }\n        if (degree === -450) {\n            degree = -90;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        var imgPoint = { startX: 0, startY: 0, width: 0, height: 0 };\n        imgPoint.width = degree % 90 === 0 && degree % 180 !== 0 ? actObj.activePoint.height : actObj.activePoint.width;\n        imgPoint.height = degree % 90 === 0 && degree % 180 !== 0 ? actObj.activePoint.width :\n            actObj.activePoint.height;\n        imgPoint.startX = actObj.activePoint.startX;\n        imgPoint.startY = actObj.activePoint.startY;\n        var startX = imgPoint.startX;\n        var startY = imgPoint.startY;\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var tempDegree;\n        var tempColl = [];\n        canvasDraw.save();\n        for (var i = 0, len = actObj.rotateFlipColl.length; i < len; i++) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var coll = actObj.rotateFlipColl[i];\n            tempColl.push(coll);\n            if (typeof (coll) === 'number') {\n                tempDegree = coll;\n                if (tempDegree === -450) {\n                    tempDegree = -90;\n                }\n                if (tempDegree < 0) {\n                    tempDegree = 360 + tempDegree;\n                }\n                imgPoint.width = tempDegree % 90 === 0 && tempDegree % 180 !== 0 ? actObj.activePoint.height : actObj.activePoint.width;\n                imgPoint.height = tempDegree % 90 === 0 && tempDegree % 180 !== 0 ? actObj.activePoint.width :\n                    actObj.activePoint.height;\n                canvasDraw.translate(canvasDraw.canvas.width / 2, canvasDraw.canvas.height / 2);\n                canvasDraw.rotate(Math.PI / 180 * coll);\n                canvasDraw.translate(-canvasDraw.canvas.height / 2, -canvasDraw.canvas.width / 2);\n                if ((tempDegree % 90 === 0 && tempDegree % 270 !== 0) || tempDegree === 0) {\n                    startY = canvasDraw.canvas.width - (actObj.activePoint.startX + actObj.activePoint.width);\n                    startY += ((actObj.activePoint.width - imgPoint.height) / 2);\n                    startX = imgPoint.startY;\n                }\n                else if (tempDegree % 270 === 0) {\n                    startX = canvasDraw.canvas.height - (actObj.activePoint.startY + actObj.activePoint.height);\n                    startX += ((actObj.activePoint.height - imgPoint.width) / 2);\n                    startY = imgPoint.startX;\n                }\n                imgPoint.startX = startX;\n                imgPoint.startY = startY;\n                actObj.activePoint.startX = startX;\n                actObj.activePoint.startY = startY;\n                actObj.activePoint.endX = actObj.activePoint.startX + imgPoint.width;\n                actObj.activePoint.endY = actObj.activePoint.startY + imgPoint.height;\n                actObj = this.updateWidthHeight(actObj);\n            }\n            else {\n                if (coll === 'horizontal' && degree % 90 === 0 && degree % 180 !== 0) {\n                    coll = 'vertical';\n                }\n                else if (coll === 'vertical' && degree % 90 === 0 && degree % 180 !== 0) {\n                    coll = 'horizontal';\n                }\n                if (coll === 'horizontal') {\n                    canvasDraw.translate(canvasDraw.canvas.width, 0);\n                    canvasDraw.scale(-1, 1);\n                    actObj.activePoint = this.updateActPoint('horizontal', canvasDraw);\n                }\n                else if (coll === 'vertical') {\n                    canvasDraw.translate(0, canvasDraw.canvas.height);\n                    canvasDraw.scale(1, -1);\n                    actObj.activePoint = this.updateActPoint('vertical', canvasDraw);\n                }\n                imgPoint.startX = actObj.activePoint.startX;\n                imgPoint.startY = actObj.activePoint.startY;\n            }\n            imgPoint.startX = actObj.activePoint.startX;\n            imgPoint.startY = actObj.activePoint.startY;\n            startX = imgPoint.startX;\n            startY = imgPoint.startY;\n        }\n        if (actObj.rotatedAngle !== 0) {\n            parent.notify('shape', { prop: 'setPointCollForShapeRotation', onPropertyChange: false, value: { obj: actObj } });\n        }\n        canvasDraw.drawImage(actObj.imageCanvas, imgPoint.startX, imgPoint.startY, imgPoint.width, imgPoint.height);\n        canvasDraw.restore();\n        parent.activeObj = tempActiveObj;\n        if (parent.transform.degree === 360 || parent.transform.degree === -360) {\n            parent.transform.degree = 0;\n        }\n    };\n    Draw.prototype.rotateText = function (canvasDraw) {\n        var parent = this.parent;\n        var degree;\n        var actObj = parent.activeObj;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        var actPoint = parent.activeObj.activePoint;\n        if (actObj.shapeDegree === 0) {\n            degree = parent.transform.degree;\n        }\n        else {\n            degree = parent.transform.degree - actObj.shapeDegree;\n        }\n        if (degree === -450) {\n            degree = -90;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        var imgPoint = { startX: 0, startY: 0, width: 0, height: 0 };\n        imgPoint.width = degree % 90 === 0 && degree % 180 !== 0 ? actPoint.height : actPoint.width;\n        imgPoint.height = degree % 90 === 0 && degree % 180 !== 0 ? actPoint.width : actPoint.height;\n        imgPoint.startX = actPoint.startX;\n        imgPoint.startY = actPoint.startY;\n        var startX = imgPoint.startX;\n        var startY = imgPoint.startY;\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var tempDegree;\n        var tempColl = [];\n        canvasDraw.save();\n        for (var i = 0, len = actObj.rotateFlipColl.length; i < len; i++) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var coll = actObj.rotateFlipColl[i];\n            tempColl.push(coll);\n            if (typeof (coll) === 'number') {\n                tempDegree = coll;\n                if (tempDegree === -450) {\n                    tempDegree = -90;\n                }\n                if (tempDegree < 0) {\n                    tempDegree = 360 + tempDegree;\n                }\n                imgPoint.width = tempDegree % 90 === 0 && tempDegree % 180 !== 0 ? actPoint.height : actPoint.width;\n                imgPoint.height = tempDegree % 90 === 0 && tempDegree % 180 !== 0 ? actPoint.width : actPoint.height;\n                canvasDraw.translate(canvasDraw.canvas.width / 2, canvasDraw.canvas.height / 2);\n                canvasDraw.rotate(Math.PI / 180 * coll);\n                canvasDraw.translate(-canvasDraw.canvas.height / 2, -canvasDraw.canvas.width / 2);\n                if ((tempDegree % 90 === 0 && tempDegree % 270 !== 0) || tempDegree === 0) {\n                    startY = (canvasDraw.canvas.width - actPoint.endX);\n                    startX = actPoint.startY;\n                }\n                else if (tempDegree % 270 === 0) {\n                    startX = canvasDraw.canvas.height - actPoint.endY;\n                    startY = actPoint.startX;\n                }\n                imgPoint.startX = startX;\n                imgPoint.startY = startY;\n                actPoint.startX = startX;\n                actPoint.startY = startY;\n                actPoint.endX = actPoint.startX + imgPoint.width;\n                actPoint.endY = actPoint.startY + imgPoint.height;\n                actObj = this.updateWidthHeight(actObj);\n            }\n            else {\n                if (coll === 'horizontal' && degree % 90 === 0 && degree % 180 !== 0) {\n                    coll = 'vertical';\n                }\n                else if (coll === 'vertical' && degree % 90 === 0 && degree % 180 !== 0) {\n                    coll = 'horizontal';\n                }\n                if (coll === 'horizontal') {\n                    canvasDraw.translate(canvasDraw.canvas.width, 0);\n                    canvasDraw.scale(-1, 1);\n                }\n                else if (coll === 'vertical') {\n                    canvasDraw.translate(0, canvasDraw.canvas.height);\n                    canvasDraw.scale(1, -1);\n                }\n                actObj.activePoint = actPoint = this.updateActPoint(coll, canvasDraw);\n                imgPoint.startX = actPoint.startX;\n                imgPoint.startY = actPoint.startY;\n            }\n            imgPoint.startX = actPoint.startX;\n            imgPoint.startY = actPoint.startY;\n            startX = imgPoint.startX;\n            startY = imgPoint.startY;\n        }\n        if (actObj.rotatedAngle !== 0) {\n            parent.notify('shape', { prop: 'setPointCollForShapeRotation', onPropertyChange: false, value: { obj: actObj } });\n        }\n        startY += actObj.textSettings.fontSize * 0.4;\n        this.textFlipDegree(canvasDraw, startX, startY);\n        canvasDraw.restore();\n        parent.activeObj = tempActiveObj;\n        if (parent.transform.degree === 360 || parent.transform.degree === -360) {\n            parent.transform.degree = 0;\n        }\n    };\n    Draw.prototype.textFlipDegree = function (canvasDraw, startX, startY) {\n        var parent = this.parent;\n        var actObj = parent.activeObj;\n        var rows = actObj.keyHistory.split('\\n');\n        var fontSize = actObj.textSettings.fontSize;\n        var lineHeight = ((fontSize * rows.length) - (fontSize * rows.length)) / rows.length;\n        var yPoint = (fontSize * 0.85) + lineHeight;\n        for (var i = 0, len = rows.length; i < len; i++) {\n            var text = rows[i];\n            if (i > 0) {\n                if (i === 1) {\n                    yPoint -= (fontSize * 0.85);\n                }\n                yPoint += fontSize + fontSize * 0.15;\n            }\n            canvasDraw.strokeText(text, startX + fontSize * 0.15, startY +\n                yPoint + (i > 0 ? fontSize * 0.25 : -fontSize * 0.35));\n            canvasDraw.fillText(text, startX + fontSize * 0.15, startY +\n                yPoint + (i > 0 ? fontSize * 0.25 : -fontSize * 0.35));\n        }\n    };\n    Draw.prototype.clearOuterCanvas = function (context) {\n        var parent = this.parent;\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        var left = destLeft > 0 ? destLeft : 0;\n        var top = destTop > 0 ? destTop : 0;\n        context.clearRect(0, 0, left, parent.lowerCanvas.height);\n        context.clearRect(destLeft + destWidth, 0, parent.lowerCanvas.width - (destLeft + destWidth), parent.lowerCanvas.height);\n        context.clearRect(0, 0, parent.lowerCanvas.width, top);\n        context.clearRect(0, destTop + destHeight, parent.lowerCanvas.width, parent.lowerCanvas.height - (destTop + destHeight));\n        if (parent.transform.currFlipState !== '') {\n            parent.img.destLeft = destLeft;\n            parent.img.destTop = destTop;\n        }\n    };\n    Draw.prototype.setDestPoints = function () {\n        var maxDimension;\n        var parent = this.parent;\n        var _a = parent.transform, degree = _a.degree, zoomFactor = _a.zoomFactor;\n        if (degree % 90 === 0 && degree % 180 !== 0) {\n            var obj = { width: 0, height: 0 };\n            parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n                value: { width: parent.img.srcHeight, height: parent.img.srcWidth, obj: obj, isImgShape: null } });\n            maxDimension = obj;\n            if (this.isRotateZoom) {\n                maxDimension.width += (maxDimension.width * zoomFactor);\n                maxDimension.height += (maxDimension.height * zoomFactor);\n                parent.img.destWidth = maxDimension.height;\n                parent.img.destHeight = maxDimension.width;\n            }\n            parent.img.destLeft = (parent.lowerCanvas.clientWidth - maxDimension.height) / 2;\n            parent.img.destTop = (parent.lowerCanvas.clientHeight - maxDimension.width) / 2;\n            parent.img.destWidth = maxDimension.height;\n            parent.img.destHeight = maxDimension.width;\n        }\n        else {\n            var obj = { width: 0, height: 0 };\n            parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n                value: { width: parent.img.srcWidth, height: parent.img.srcHeight, obj: obj, isImgShape: null } });\n            maxDimension = obj;\n            if (this.isRotateZoom) {\n                maxDimension.width += (maxDimension.width * zoomFactor);\n                maxDimension.height += (maxDimension.height * zoomFactor);\n                parent.img.destWidth = maxDimension.width;\n                parent.img.destHeight = maxDimension.height;\n            }\n            parent.img.destLeft = (parent.lowerCanvas.clientWidth - maxDimension.width) / 2;\n            if (degree === 0) {\n                parent.img.destTop = (parent.lowerCanvas.clientHeight - maxDimension.height + 1) / 2;\n            }\n            else {\n                parent.img.destTop = (parent.lowerCanvas.clientHeight - maxDimension.height) / 2;\n            }\n            parent.img.destWidth = maxDimension.width;\n            parent.img.destHeight = maxDimension.height;\n        }\n    };\n    Draw.prototype.updateCurrTransState = function (type, isPreventDestination, isRotatePan, isStraighten) {\n        var parent = this.parent;\n        var destLeft = parent.img.destLeft;\n        var destTop = parent.img.destTop;\n        if (type === 'initial') {\n            this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n            if (isNullOrUndefined(isPreventDestination)) {\n                this.setDestPoints();\n            }\n        }\n        if (parent.isCircleCrop || (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle')) {\n            this.currTransState(type, true, null, isRotatePan);\n            if (parent.transform.degree === 0 && parent.transform.currFlipState === '' && parent.transform.straighten === 0 &&\n                isNullOrUndefined(isStraighten)) {\n                parent.img.destLeft = destLeft;\n                parent.img.destTop = destTop;\n            }\n            if (isRotatePan) {\n                parent.img.destLeft += parent.panPoint.totalPannedClientPoint.x;\n                parent.img.destTop +=\n                    parent.panPoint.totalPannedClientPoint.y;\n            }\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            if (isRotatePan) {\n                parent.img.destLeft -= parent.panPoint.totalPannedClientPoint.x;\n                parent.img.destTop -=\n                    parent.panPoint.totalPannedClientPoint.y;\n            }\n        }\n        else {\n            this.currTransState(type, null, null, isRotatePan);\n            if (parent.transform.degree === 0 && parent.transform.currFlipState === '' && parent.transform.straighten === 0 &&\n                isNullOrUndefined(isStraighten)) {\n                parent.img.destLeft = destLeft;\n                parent.img.destTop = destTop;\n            }\n        }\n    };\n    Draw.prototype.currTransState = function (type, isPreventDimension, context, isPreventCircleCrop) {\n        var parent = this.parent;\n        context = context ? context : this.lowerContext;\n        if (type === 'initial') {\n            this.setTransformColl(context, type);\n        }\n        else if (type === 'reverse') {\n            this.setTransformColl(context, type);\n            this.setClientTransDim(isPreventDimension);\n            if (parent.isCircleCrop || (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle'\n                && isNullOrUndefined(isPreventCircleCrop))) {\n                if (isPreventCircleCrop) {\n                    parent.img.destLeft += parent.panPoint.totalPannedClientPoint.x;\n                    parent.img.destTop += parent.panPoint.totalPannedClientPoint.y;\n                }\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                if (isPreventCircleCrop) {\n                    parent.img.destLeft -= parent.panPoint.totalPannedClientPoint.x;\n                    parent.img.destTop -= parent.panPoint.totalPannedClientPoint.y;\n                }\n            }\n        }\n    };\n    Draw.prototype.setTransformColl = function (context, type) {\n        var parent = this.parent;\n        if (type === 'initial') {\n            for (var i = 0, len = parent.rotateFlipColl.length; i < len; i++) {\n                this.setTransform(context, parent.rotateFlipColl[i]);\n            }\n        }\n        else if (type === 'reverse') {\n            for (var i = parent.rotateFlipColl.length - 1; i >= 0; i--) {\n                this.setTransform(context, parent.rotateFlipColl[i], true);\n            }\n        }\n    };\n    Draw.prototype.setTransform = function (context, value, isReverse) {\n        var parent = this.parent;\n        if (isReverse && value === 90) {\n            value = -90;\n        }\n        else if (isReverse && value === -90) {\n            value = 90;\n        }\n        if (value === 'horizontal' && parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            value = 'vertical';\n        }\n        else if (value === 'vertical' && parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            value = 'horizontal';\n        }\n        parent.notify('transform', { prop: 'setReverseRotate', onPropertyChange: false, value: { bool: true } });\n        parent.notify('transform', { prop: 'setReverseFlip', onPropertyChange: false, value: { isReverseFlip: true } });\n        if (isNullOrUndefined(isReverse)) {\n            context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        }\n        switch (value) {\n            case 90:\n            case -90:\n                context.translate(context.canvas.width / 2, context.canvas.height / 2);\n                context.rotate(Math.PI / 180 * value);\n                context.translate(-context.canvas.width / 2, -context.canvas.height / 2);\n                break;\n            case 'horizontal':\n                context.translate(context.canvas.width, 0);\n                context.scale(-1, 1);\n                break;\n            case 'vertical':\n                context.translate(0, context.canvas.height);\n                context.scale(1, -1);\n                break;\n        }\n        parent.notify('transform', { prop: 'setReverseRotate', onPropertyChange: false, value: { bool: false } });\n        parent.notify('transform', { prop: 'setReverseFlip', onPropertyChange: false, value: { isReverseFlip: false } });\n    };\n    Draw.prototype.drawImgToCanvas = function (maxDimension) {\n        var parent = this.parent;\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.img.destWidth = maxDimension.width;\n        parent.img.destHeight = maxDimension.height;\n        if (this.isInitialLoading) {\n            parent.notify('filter', { prop: 'initFilter', onPropertyChange: false });\n            this.isInitialLoading = false;\n        }\n        var temp = this.lowerContext.filter;\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.drawImage();\n        if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        this.lowerContext.filter = temp;\n    };\n    Draw.prototype.renderImage = function (isMouseWheel, isPreventClearRect, isFrame, isStraighten) {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: null } });\n        if (isNullOrUndefined(isPreventClearRect)) {\n            this.upperContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        }\n        if (isMouseWheel) {\n            this.setTransformColl(this.lowerContext, 'initial');\n        }\n        else {\n            if (parent.transform.zoomFactor !== 0) {\n                this.isRotateZoom = true;\n            }\n            this.updateCurrTransState('initial', null, null, isStraighten);\n        }\n        parent.notify('transform', { prop: 'setDestPointsForFlipState', onPropertyChange: false });\n        this.drawImage();\n        parent.notify('transform', { prop: 'setDestPointsForFlipState', onPropertyChange: false });\n        if (isMouseWheel) {\n            this.setTransformColl(this.lowerContext, 'reverse');\n        }\n        else {\n            this.updateCurrTransState('reverse', null, null, isStraighten);\n            this.isRotateZoom = false;\n        }\n        if (isFrame) {\n            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n        }\n        else {\n            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'iterate', pen: 'iterate', isPreventApply: null } });\n        }\n        this.clearOuterCanvas(this.lowerContext);\n        if (parent.isCircleCrop || (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle')) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n    };\n    Draw.prototype.imageOnLoad = function (src) {\n        var _this = this;\n        var parent = this.parent;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        parent.baseImg.src = src;\n        parent.baseImg.onload = function () {\n            parent.imgSrc = src;\n            if (!parent.isUndoRedo) {\n                parent.notify('filter', { prop: 'update-finetunes', onPropertyChange: false });\n            }\n            proxy.lowerContext.drawImage(parent.baseImg, 0, 0, proxy.parent.lowerCanvas.width, proxy.parent.lowerCanvas.height);\n            var isCropped = false;\n            var isSameDimension = false;\n            if (parent.isImageUpdated) {\n                var _a = parent.img, srcWidth = _a.srcWidth, srcHeight = _a.srcHeight;\n                var _b = parent.baseImgCanvas, width = _b.width, height = _b.height;\n                isCropped = srcWidth !== width || srcHeight !== height;\n                isSameDimension = parent.baseImg.width === width && parent.baseImg.height === height;\n            }\n            hideSpinner(parent.element);\n            parent.element.style.opacity = '1';\n            proxy.updateBaseImgCanvas();\n            var fileOpened = { fileName: _this.fileName, fileType: _this.fileType, isValidImage: true };\n            proxy.updateCanvas(isCropped, isSameDimension);\n            if (parent.currObjType.isUndoZoom) {\n                parent.currObjType.isUndoZoom = false;\n                proxy.parent.lowerCanvas.style.display = 'block';\n            }\n            parent.isUndoRedo = _this.isErrorImage = false;\n            if (Browser.isDevice) {\n                parent.notify('toolbar', { prop: 'destroy-top-toolbar', onPropertyChange: false });\n                parent.notify('toolbar', { prop: 'destroy-bottom-toolbar', onPropertyChange: false });\n                var eventargs = { isApplyBtn: false, isDevice: Browser.isDevice, isOkBtn: null,\n                    isResize: null, isFrame: null, isMainToolbar: true };\n                parent.notify('toolbar', { prop: 'init-main-toolbar', onPropertyChange: false, value: eventargs });\n                parent.notify('toolbar', { prop: 'create-bottom-toolbar', onPropertyChange: false });\n            }\n            else {\n                parent.notify('toolbar', { prop: 'destroy-top-toolbar', onPropertyChange: false });\n                var eventargs = { isApplyBtn: false, isDevice: false, isOkBtn: null };\n                parent.notify('toolbar', { prop: 'init-main-toolbar', onPropertyChange: false, value: eventargs });\n            }\n            if (parent.isImageLoaded && parent.element.style.opacity !== '0.5') {\n                parent.trigger('fileOpened', fileOpened);\n                var action = { action: 'file-open', actionEventArgs: fileOpened };\n                parent.triggerEditCompleteEvent(action);\n            }\n        };\n        parent.baseImg.onerror = function () {\n            hideSpinner(parent.element);\n            proxy.isErrorImage = true;\n            proxy.errorLoading();\n        };\n    };\n    Draw.prototype.errorLoading = function () {\n        var parent = this.parent;\n        var fileOpened = { fileName: null, fileType: null, isValidImage: false };\n        parent.trigger('fileOpened', fileOpened);\n    };\n    Draw.prototype.updateBaseImgCanvas = function () {\n        var parent = this.parent;\n        parent.baseImgCanvas.width = parent.baseImg.width;\n        parent.baseImgCanvas.height = parent.baseImg.height;\n        parent.baseImgCanvas.getContext('2d').drawImage(parent.baseImg, 0, 0);\n    };\n    Draw.prototype.updateCanvas = function (isCropped, isSameDimension) {\n        var parent = this.parent;\n        if (!parent.isImageUpdated || !isCropped) {\n            parent.img.srcWidth = parent.baseImgCanvas.width;\n            parent.img.srcHeight = parent.baseImgCanvas.height;\n        }\n        else if (!isSameDimension && isCropped) {\n            parent.img.srcLeft = 0;\n            parent.img.srcTop = 0;\n            parent.img.srcWidth = parent.baseImgCanvas.width;\n            parent.img.srcHeight = parent.baseImgCanvas.height;\n            parent.currSelectionPoint = null;\n            parent.cropObj = { cropZoom: 0, defaultZoom: 0, totalPannedPoint: { x: 0, y: 0 }, totalPannedClientPoint: { x: 0, y: 0 },\n                totalPannedInternalPoint: { x: 0, y: 0 }, tempFlipPanPoint: { x: 0, y: 0 }, activeObj: {}, rotateFlipColl: [],\n                degree: 0, currFlipState: '', straighten: 0, destPoints: { startX: 0, startY: 0, width: 0, height: 0 },\n                srcPoints: { startX: 0, startY: 0, width: 0, height: 0 }, filter: '', isBrightAdjust: false,\n                zoomFactor: 0, previousZoomValue: 0, aspectWidth: null, aspectHeight: null, frame: 'none', straightenZoom: 0,\n                adjustmentLevel: { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0, blur: 0,\n                    exposure: 0, transparency: 100, sharpen: false, bw: false }, currentFilter: '' };\n        }\n        var obj = { width: 0, height: 0 };\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: parent.img.srcWidth, height: parent.img.srcHeight, obj: obj, isImgShape: null } });\n        var maxDimension = obj;\n        parent.img.destLeft = (parent.lowerCanvas.clientWidth - maxDimension.width) / 2;\n        parent.img.destTop = (parent.lowerCanvas.clientHeight - maxDimension.height + 1) / 2;\n        this.drawImgToCanvas(maxDimension);\n        this.origDim.width = parent.img.destWidth;\n        this.origDim.height = parent.img.destHeight;\n        this.zoomCrop.width = parent.img.destWidth;\n        this.zoomCrop.height = parent.img.destHeight;\n        parent.notify('transform', { prop: 'setCropDimension', onPropertyChange: false,\n            value: { width: parent.img.destWidth, height: parent.img.destHeight } });\n        var point = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n            height: parent.img.destHeight };\n        parent.notify('crop', { prop: 'setCropDestPoints', onPropertyChange: false, value: { point: point } });\n        var temp = this.lowerContext.filter;\n        this.lowerContext.filter = 'none';\n        parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n            value: { ctx: this.lowerContext, shape: 'iterate', pen: 'zoom', isPreventApply: null } });\n        this.lowerContext.filter = temp;\n        if (parent.img.destWidth > 0 && parent.img.destHeight > 0) {\n            parent.isImageLoaded = true;\n        }\n        if (parent.isUndoRedo) {\n            if (parent.transform.currFlipState !== '') {\n                parent.notify('transform', { prop: 'flipImage', onPropertyChange: false,\n                    value: { direction: parent.toPascalCase(parent.transform.currFlipState) } });\n            }\n        }\n        if (parent.disabled) {\n            parent.element.setAttribute('class', 'e-disabled');\n        }\n        if (parent.zoomSettings.zoomFactor !== 1 || parent.zoomSettings.zoomPoint) {\n            parent.zoom(parent.zoomSettings.zoomFactor, parent.zoomSettings.zoomPoint);\n        }\n        if (isNullOrUndefined(this.initZoomValue)) {\n            this.initZoomValue = parent.zoomSettings.zoomFactor;\n        }\n        this.isImageEdited = false;\n    };\n    Draw.prototype.resetFrameZoom = function (isOk) {\n        var parent = this.parent;\n        if (!isNullOrUndefined(parent.tempFrameZoomLevel)) {\n            var temp = parent.tempFrameZoomLevel;\n            parent.tempFrameZoomLevel = null;\n            parent.notify('transform', { prop: 'resetZoom', onPropertyChange: false });\n            parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: temp, zoomPoint: null, isResize: true } });\n            var obj = parent.cancelCropSelection;\n            if (isOk && obj) {\n                obj.previousObj.frameObj = extend({}, parent.frameObj, null, true);\n                obj.currentObj.frameObj = extend({}, parent.frameObj, null, true);\n                obj.previousObj.frame = obj.currentObj.frame = parent.frameObj.type;\n            }\n            this.updateCropSelObj();\n            parent.cancelCropSelection = null;\n        }\n    };\n    Draw.prototype.performCancel = function (isContextualToolbar, isUndoRedo, isFinalCancel) {\n        var parent = this.parent;\n        if (isFinalCancel) {\n            parent.noPushUndo = false;\n        }\n        var straightenObj = { bool: parent.isStraightening };\n        isContextualToolbar = isContextualToolbar ? isContextualToolbar : false;\n        var obj = { bool: false };\n        parent.allowDownScale = true;\n        parent.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n        if (isNullOrUndefined(isUndoRedo) && JSON.stringify(parent.frameObj) !== JSON.stringify(parent.tempFrameObj)) {\n            extend(parent.frameObj, parent.tempFrameObj);\n            this.renderImage(null, null, true);\n        }\n        this.resetFrameZoom(false);\n        var editCompleteArgs = { action: '' };\n        if (obj['bool']) {\n            editCompleteArgs['action'] = 'freehand-draw';\n            parent.notify('freehand-draw', { prop: 'cancelFhd', onPropertyChange: false });\n            parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n        }\n        else if (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block') {\n            editCompleteArgs['action'] = 'text-editing';\n            parent.textArea.style.display = 'none';\n            parent.textArea.value = '';\n            parent.textArea.style.transform = '';\n            if (this.prevActObj) {\n                parent.activeObj = this.prevActObj;\n                this.prevActObj = null;\n            }\n            else {\n                parent.activeObj.strokeSettings = this.tempStrokeSettings;\n                parent.activeObj.textSettings = this.tempTextSettings;\n            }\n            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n            if (this.isShapeTextInserted) {\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            }\n            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n            parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            parent.notify('selection', { prop: 'setTempActObj', onPropertyChange: false, value: { obj: parent.activeObj } });\n            if (parent.drawingShape) {\n                parent.enableShapeDrawing(parent.toPascalCase(parent.drawingShape), true);\n            }\n        }\n        else if ((!parent.activeObj.shape || parent.activeObj.shape !== 'redact') && (((!Browser.isDevice || (Browser.isDevice && !straightenObj['bool'])) &&\n            document.querySelector('#' + parent.element.id + '_sliderWrapper')) || parent.currObjType.isFiltered)) {\n            editCompleteArgs['action'] = parent.isFinetuneBtnClick ? 'fine-tune' : 'filter';\n            this.lowerContext.filter = this.tempAdjValue;\n            parent.canvasFilter = this.tempAdjValue;\n            parent.notify('filter', { prop: 'setAdjustmentValue', onPropertyChange: false, value: { adjustmentValue: this.tempAdjValue } });\n            parent.initialAdjustmentValue = this.tempAdjValue;\n            if (this.lowerContext.filter.split(' ').length > 1 &&\n                this.lowerContext.filter.split(' ')[0].split('(')[1].split(')')[0] === '1') {\n                parent.notify('filter', { prop: 'setBrightnessAdjusted', onPropertyChange: false, value: { isBrightnessAdjusted: false } });\n            }\n            parent.currentFilter = this.tempFilter;\n            parent.notify('filter', { prop: 'setBevelFilter', onPropertyChange: false, value: { bevelFilter: this.lowerContext.filter } });\n            this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            this.redrawImgWithObj();\n            parent.currObjType.isFiltered = false;\n            var obj_3 = { tempAdjustmentLevel: null };\n            parent.notify('filter', { prop: 'getTempAdjustmentLevel', onPropertyChange: false, value: { obj: obj_3 } });\n            parent.notify('filter', { prop: 'setAdjustmentLevel', onPropertyChange: false,\n                value: { adjustmentLevel: extend({}, obj_3['tempAdjustmentLevel'], {}, true) } });\n            parent.notify('undo-redo', { prop: 'setUndoRedoStep', onPropertyChange: false, value: { step: this.tempUndoRedoStep } });\n            parent.upperCanvas.style.cursor = parent.cursor = 'default';\n            parent.currObjType.isCustomCrop = false;\n            this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null, radius: null, outlineColor: '', outlineWidth: null };\n            this.clearOuterCanvas(this.lowerContext);\n            if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            }\n            var eventargs = { type: 'main', isApplyBtn: null, isCropping: null, isZooming: null };\n            parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: eventargs });\n            if (parent.activeObj.shape && parent.activeObj.shape === 'image') {\n                parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n            }\n            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            if (parent.drawingShape) {\n                parent.drawingShape = null;\n                parent.notify('selection', { prop: 'setCurrentDrawingShape', onPropertyChange: false, value: { value: '' } });\n            }\n        }\n        else {\n            if ((!parent.activeObj.shape || parent.activeObj.shape !== 'redact') && isContextualToolbar && (!Browser.isDevice || (Browser.isDevice && !straightenObj['bool']))) {\n                var eventargs = { type: 'main', isApplyBtn: null, isCropping: null, isZooming: null };\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: eventargs });\n            }\n            else {\n                this.cancelItems(editCompleteArgs);\n                if (parent.transform.zoomFactor > 0) {\n                    parent.togglePan = true;\n                    parent.notify('selection', { prop: 'setDragCanvas', value: { bool: true } });\n                }\n                else {\n                    parent.togglePan = false;\n                    parent.notify('selection', { prop: 'setDragCanvas', value: { bool: false } });\n                }\n            }\n        }\n        this.isShapeTextInserted = false;\n        this.isNewPath = false;\n        parent.notify('toolbar', { prop: 'refresh-dropdown-btn', value: { isDisabled: false } });\n        parent.notify('toolbar', { prop: 'setCurrentToolbar', value: { type: 'main' } });\n        if (isFinalCancel) {\n            parent.noPushUndo = false;\n        }\n        parent.drawingShape = null;\n        parent.notify('draw', { prop: 'resetTempObjColl' });\n        parent.notify('draw', { prop: 'resetTempPointColl' });\n        parent.isMaskImage = parent.isFinetuneBtnClick = false;\n        var actionArgs = { action: 'cancel', actionEventArgs: editCompleteArgs };\n        parent.triggerEditCompleteEvent(actionArgs);\n    };\n    Draw.prototype.cancelItems = function (editCompleteArgs) {\n        var parent = this.parent;\n        var isCropSelection = false;\n        var id = parent.element.id;\n        var ascpectIcon = parent.element.querySelector('#' + id + '_aspectratio');\n        var nonAspectIcon = parent.element.querySelector('#' + id + '_nonaspectratio');\n        var splitWords;\n        var shapes = ['rectangle', 'ellipse', 'line', 'arrow', 'path', 'image', 'redact'];\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords === undefined && parent.currObjType.isCustomCrop) {\n            isCropSelection = true;\n        }\n        else if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (isCropSelection && parent.isCropTab) {\n            parent.isCropTab = false;\n            parent.transform.zoomFactor = parent.transform.defaultZoomFactor;\n        }\n        if (parent.isResize) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            if (ascpectIcon || nonAspectIcon || parent.currentToolbar === 'resize-toolbar') {\n                editCompleteArgs['action'] = 'resize';\n                var obj = { width: null, height: null };\n                parent.notify('selection', { prop: 'getNumTextValue', onPropertyChange: false, value: { obj: obj } });\n                var point = { x: obj['width'], y: obj['height'] };\n                var aspectRatioElement = parent.element.querySelector('#' + parent.element.id + '_aspectratio');\n                var blrAspRatElem = parent.element.querySelector('.e-ie-toolbar-aspect-ratio-btn');\n                if (point && point.x && point.y && !isNullOrUndefined(parent.aspectWidth)) {\n                    if (aspectRatioElement || (blrAspRatElem && !blrAspRatElem.classList.contains('e-hidden'))) {\n                        parent.notify('transform', { prop: 'resizeImage', value: { width: parent.aspectWidth, height: parent.aspectHeight } });\n                    }\n                    else {\n                        var bool = parent.currObjType.isUndoAction;\n                        parent.currObjType.isUndoAction = false;\n                        parent.notify('transform', { prop: 'resizeCrop', value: { width: parent.aspectWidth, height: parent.aspectHeight } });\n                        parent.currObjType.isUndoAction = bool;\n                    }\n                }\n                var obj1 = { prevCropObj: parent.prevCropObj };\n                var obj2 = { prevObj: parent.prevObj };\n                parent.notify('toolbar', { prop: 'getPrevCropObj', onPropertyChange: false, value: { obj: obj1 } });\n                parent.notify('toolbar', { prop: 'getPrevObj', onPropertyChange: false, value: { obj: obj2 } });\n                if (obj1['prevCropObj'] && obj2['prevObj']) {\n                    parent.objColl = [];\n                    parent.pointColl = [];\n                    parent.freehandCounter = 0;\n                    parent.cropObj = extend({}, obj1['prevCropObj'], {}, true);\n                    this.setCurrentObj(obj2['prevObj']);\n                    parent.objColl = obj2['prevObj']['objColl'];\n                    parent.pointColl = obj2['prevObj']['pointColl'];\n                    parent.freehandCounter = parent.pointColl.length;\n                    parent.transform.straighten = 0;\n                    parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                        value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n                    var currObj = parent.currSelectionPoint ?\n                        extend({}, parent.currSelectionPoint, {}, true) : null;\n                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                        value: { zoomFactor: -parent.transform.zoomFactor, zoomPoint: null, isResize: true } });\n                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                        value: { zoomFactor: obj2['prevObj']['defaultZoom'], zoomPoint: null, isResize: true } });\n                    parent.currSelectionPoint = currObj;\n                    if (obj2['prevObj'].zoomFactor) {\n                        parent.setProperties({ zoomSettings: { zoomFactor: obj2['prevObj'].zoomFactor } }, true);\n                    }\n                    parent.notify('transform', { prop: 'setPreviousZoomValue', onPropertyChange: false,\n                        value: { previousZoomValue: parent.zoomSettings.zoomFactor } });\n                }\n                parent.isResize = false;\n                parent.notify('transform', { prop: 'setResizedImgAngle', onPropertyChange: false, value: { angle: null } });\n                var temp = parent.isCropTab;\n                parent.isCropTab = false;\n                this.updateCropSelObj();\n                parent.cancelCropSelection = null;\n                parent.isCropTab = temp;\n            }\n        }\n        switch (true) {\n            case parent.togglePen:\n                editCompleteArgs['action'] = 'freehand-draw';\n                this.cancelPen();\n                break;\n            case parent.activeObj.shape === 'text':\n                editCompleteArgs['action'] = 'text';\n                this.cancelText();\n                break;\n            case shapes.indexOf(parent.activeObj.shape) !== -1:\n                editCompleteArgs['action'] = parent.activeObj.shape;\n                this.cancelShape();\n                parent.currObjType.isRedact = false;\n                break;\n            case isCropSelection:\n                editCompleteArgs['action'] = 'crop-selection';\n                this.cancelSelection();\n                break;\n            default:\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n                break;\n        }\n        parent.notify('selection', { prop: 'setCurrentDrawingShape', onPropertyChange: false, value: { value: '' } });\n        parent.upperCanvas.style.cursor = parent.cursor = 'default';\n        parent.currObjType.isCustomCrop = false;\n        this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null, radius: null, outlineColor: '', outlineWidth: null };\n        var eventargs = { type: 'main', isApplyBtn: null, isCropping: false, isZooming: null };\n        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: eventargs });\n    };\n    Draw.prototype.cancelPen = function () {\n        var parent = this.parent;\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.togglePen = false;\n        parent.upperCanvas.style.cursor = parent.cursor = 'default';\n        // eslint-disable-next-line\n        var tempPointsColl = extend([], parent.pointColl, [], true);\n        parent.pointColl = {};\n        for (var i = 0; i < this.tempFreehandCounter; i++) {\n            parent.pointColl[i] = tempPointsColl[i];\n        }\n        parent.freehandCounter = this.tempFreehandCounter;\n        parent.notify('freehand-draw', { prop: 'setCurrentFreehandDrawIndex', value: { value: this.tempCurrFhdIndex } });\n        parent.activeObj.strokeSettings = this.tempStrokeSettings;\n        parent.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: parent.activeObj.strokeSettings, strokeColor: null,\n                fillColor: null, strokeWidth: null, radius: null } });\n        parent.notify('freehand-draw', { prop: 'setPenStrokeWidth', onPropertyChange: false, value: { value: this.tempStrokeWidth } });\n        parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n        parent.notify('selection', { prop: 'setFreehandDrawCustomized', value: { isFreehandDrawCustomized: false } });\n        parent.objColl = extend([], this.tempObjColl, [], true);\n        parent.pointColl = extend([], this.tempPointColl, [], true);\n        parent.freehandCounter = parent.pointColl.length;\n        this.tempPointColl = {};\n        this.renderImage();\n        parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok', isCancel: true } });\n    };\n    Draw.prototype.cancelText = function () {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'setTextSettings', onPropertyChange: false,\n            value: { textSettings: this.tempTextSettings, fontFamily: null, fontSize: null } });\n        parent.notify('shape', { prop: 'setStrokeSettings',\n            value: { strokeSettings: this.tempStrokeSettings, strokeColor: null, fillColor: null, strokeWidth: null, radius: null } });\n        if (isNullOrUndefined(parent.activeObj.currIndex)) {\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        }\n        else {\n            var object = { appliedUndoRedoColl: [] };\n            parent.notify('undo-redo', { prop: 'getAppliedUndoRedoColl', value: { obj: object } });\n            var len = object['appliedUndoRedoColl'].length;\n            var appliedColl = object['appliedUndoRedoColl'][len - 1];\n            if (this.prevActObj && appliedColl && appliedColl.currentObjColl.length &&\n                appliedColl.currentObjColl[appliedColl.currentObjColl.length - 1].currIndex === this.prevActObj.currIndex) {\n                parent.activeObj = this.prevActObj;\n                this.prevActObj = null;\n            }\n            else {\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            }\n        }\n        parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n        this.tempTextSettings = { text: 'Enter Text', fontFamily: parent.fontFamily.default, fontSize: null, fontRatio: null, bold: false,\n            italic: false, underline: false };\n        parent.objColl = extend([], this.tempObjColl, [], true);\n        parent.pointColl = extend([], this.tempPointColl, [], true);\n        this.renderImage();\n        this.tempObjColl = [];\n        parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok', isCancel: true } });\n    };\n    Draw.prototype.cancelShape = function () {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'setStrokeSettings',\n            value: { strokeSettings: this.tempStrokeSettings, strokeColor: null, fillColor: null, strokeWidth: null, radius: null } });\n        if (isNullOrUndefined(parent.activeObj.currIndex)) {\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        }\n        else if (this.isNewPath) {\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            this.renderImage();\n        }\n        else {\n            var object = { appliedUndoRedoColl: [] };\n            parent.notify('undo-redo', { prop: 'getAppliedUndoRedoColl', value: { obj: object } });\n            var obj = void 0;\n            for (var i = 0, iLen = object['appliedUndoRedoColl'].length; i < iLen; i++) {\n                var currObjColl = object['appliedUndoRedoColl'][i].currentObjColl;\n                for (var j = 0, jLen = currObjColl.length; j < jLen; j++) {\n                    if (this.prevActObj && this.prevActObj.currIndex &&\n                        currObjColl[j].currIndex === this.prevActObj.currIndex) {\n                        obj = currObjColl[0];\n                        break;\n                    }\n                }\n            }\n            if (this.prevActObj && obj) {\n                parent.activeObj = this.prevActObj;\n                this.prevActObj = null;\n                parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false, value: { obj: parent.activeObj } });\n                parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n                parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n            }\n            else {\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            }\n            var undoRedoObj = { undoRedoStep: null };\n            parent.notify('undo-redo', { prop: 'getUndoRedoStep', value: { obj: undoRedoObj } });\n            if (object['appliedUndoRedoColl'][(undoRedoObj['undoRedoStep'] - 1)]) {\n                parent.objColl =\n                    extend([], object['appliedUndoRedoColl'][(undoRedoObj['undoRedoStep'] - 1)].currentObjColl, [], true);\n            }\n            else {\n                parent.objColl = [];\n            }\n            this.renderImage();\n        }\n        parent.currObjType.isDragging = false;\n        parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n        parent.objColl = extend([], this.tempObjColl, [], true);\n        parent.pointColl = extend([], this.tempPointColl, [], true);\n        this.renderImage();\n        this.tempObjColl = [];\n        parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok', isCancel: true } });\n    };\n    Draw.prototype.cancelSelection = function () {\n        var parent = this.parent;\n        if (parent.cancelCropSelection) {\n            var obj = { value: parent.tempStraighten };\n            parent.transform.straighten = obj['value'];\n            parent.straightenBaseImageCanvas();\n            parent.notify('freehand-draw', { prop: 'resetStraightenPoint' });\n            parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n            parent.notify('draw', { prop: 'setStraightenActObj', value: { activeObj: parent.activeObj } });\n            parent.notify('crop', { prop: 'resizeWrapper' });\n            this.updateCropSelObj();\n            // eslint-disable-next-line max-len\n            if (this.tempStraightenDestPoints && JSON.stringify(this.tempStraightenDestPoints) !== JSON.stringify(this.straightenDestPoints)) {\n                this.straightenDestPoints = extend({}, this.tempStraightenDestPoints, {}, true);\n            }\n        }\n    };\n    Draw.prototype.updateCropSelObj = function () {\n        var parent = this.parent;\n        if (parent.cancelCropSelection) {\n            parent.cropObj = extend({}, parent.cancelCropSelection.previousCropObj, {}, true);\n            parent.afterCropActions = parent.cancelCropSelection.previousObj.afterCropActions;\n            parent.notify('undo-redo', { prop: 'undoDefault', onPropertyChange: false, value: { obj: parent.cancelCropSelection } });\n            parent.currSelectionPoint = extend({}, parent.cancelCropSelection.previousCropObj.activeObj, true);\n            if (parent.currSelectionPoint && isNullOrUndefined(parent.currSelectionPoint.shape)) {\n                parent.currSelectionPoint = null;\n            }\n            this.clearOuterCanvas(this.lowerContext);\n            if (parent.isCircleCrop || (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle')) {\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            }\n        }\n    };\n    Draw.prototype.updateCropSelection = function () {\n        var parent = this.parent;\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var currentObj = object['currObj'];\n        currentObj.objColl = extend([], parent.objColl, [], true);\n        currentObj.pointColl = extend([], parent.pointColl, [], true);\n        currentObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        currentObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        parent.cancelCropSelection = { operation: 'cropTransform', previousObj: currentObj, currentObj: currentObj,\n            previousObjColl: currentObj.objColl, currentObjColl: currentObj.objColl,\n            previousPointColl: currentObj.pointColl, currentPointColl: currentObj.pointColl,\n            previousSelPointColl: currentObj.selPointColl, currentSelPointColl: currentObj.selPointColl,\n            previousCropObj: extend({}, parent.cropObj, {}, true),\n            currentCropObj: extend({}, parent.cropObj, {}, true),\n            previousText: null, currentText: null, filter: null, isCircleCrop: parent.isCircleCrop };\n    };\n    Draw.prototype.updateFlipPan = function (tempSelectionObj) {\n        var parent = this.parent;\n        if (parent.transform.currFlipState !== '') {\n            var temp = this.lowerContext.filter;\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.notify('transform', { prop: 'rotatedFlip', onPropertyChange: false });\n            this.lowerContext.filter = 'none';\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: this.lowerContext, points: null } });\n            this.lowerContext.filter = temp;\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            if (tempSelectionObj) {\n                this.drawObject('duplicate', tempSelectionObj);\n            }\n        }\n    };\n    Draw.prototype.select = function (type, startX, startY, width, height) {\n        var parent = this.parent;\n        type = type.toLowerCase();\n        if (!parent.disabled && parent.isImageLoaded) {\n            parent.allowDownScale = false;\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var previousObj = object['currObj'];\n            previousObj.objColl = extend([], parent.objColl, [], true);\n            previousObj.pointColl = extend([], parent.pointColl, [], true);\n            previousObj.afterCropActions = parent.afterCropActions;\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            previousObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            parent.notify('crop', { prop: 'setPreviousCropCurrentObj', onPropertyChange: false, value: { obj: previousObj } });\n            if (parent.transform.zoomFactor > 0 && parent.activeObj.shape &&\n                parent.activeObj.shape.split('-')[0] === 'crop' && isNullOrUndefined(this.currSelPoint)) {\n                this.currSelPoint = extend({}, parent.activeObj, {}, true);\n            }\n            var isPrevent = false;\n            var splitWords = void 0;\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (splitWords === undefined && parent.currObjType.isCustomCrop) {\n                isPrevent = true;\n            }\n            else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                isPrevent = true;\n            }\n            var obj = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: obj } });\n            var prevObj = obj['currObj'];\n            prevObj.objColl = extend([], parent.objColl, [], true);\n            prevObj.pointColl = extend([], parent.pointColl, [], true);\n            prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: null } });\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.notify('shape', { prop: 'setKeyHistory', onPropertyChange: false, value: { keyHistory: '' } });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            parent.upperCanvas.style.display = 'block';\n            if (parent.currSelectionPoint || parent.transform.defaultZoomFactor !== 0 ||\n                (parent.transform.degree !== 0 && parent.panPoint.totalPannedInternalPoint.x !== 0 &&\n                    parent.panPoint.totalPannedInternalPoint.y !== 0 && !isPrevent)) {\n                parent.isCircleCrop = false;\n                if (parent.transform.defaultZoomFactor !== 0 && !this.isResizeSelect) {\n                    var isCropTab = parent.isCropTab;\n                    parent.isCropTab = false;\n                    parent.notify('transform', { prop: 'resetZoom', onPropertyChange: false });\n                    parent.isCropTab = isCropTab;\n                    this.resetPanPoints();\n                }\n                parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n                parent.isCropTab = true;\n                parent.isCircleCrop = false;\n                if (!this.isResizeSelect) {\n                    parent.notify('crop', { prop: 'setCurrSelPoints', onPropertyChange: false, value: { isSetDimension: true } });\n                }\n                parent.transform.zoomFactor = parent.transform.cropZoomFactor;\n                if (isNullOrUndefined(parent.cropObj.activeObj.shape)) {\n                    parent.currObjType.shape = 'crop-' + type;\n                    this.drawNewSelection(type, startX, startY, width, height);\n                }\n            }\n            else {\n                if (!this.isCropSelect) {\n                    parent.notify('crop', { prop: 'adjustStraightenForShapes', onPropertyChange: false,\n                        value: { type: 'reverse', isInitialRotated: true } });\n                    parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n                    this.renderImage();\n                }\n                else {\n                    this.isCropSelect = false;\n                }\n                if (type === 'custom') {\n                    parent.currObjType.shape = '';\n                }\n                this.drawNewSelection(type, startX, startY, width, height);\n            }\n        }\n    };\n    Draw.prototype.drawNewSelection = function (type, startX, startY, width, height) {\n        var parent = this.parent;\n        var points;\n        var cropShape = 'crop-' + type.toLowerCase();\n        if (cropShape === 'crop-custom') {\n            if (parent.currObjType.shape === '' || parent.currObjType.shape === 'crop-custom') {\n                this.drawCustomSelection('crop-custom', startX, startY, width, height);\n                this.adjToStraighten();\n                this.updateSelectionInsert();\n                if (parent.isStraightening) {\n                    this.straightenActObj = extend({}, parent.activeObj, {}, true);\n                    this.straightenInitZoom = parent.transform.zoomFactor;\n                }\n            }\n        }\n        else if (cropShape === 'crop-canvas') {\n            parent.upperCanvas.style.display = 'block';\n            parent.notify('selection', { prop: 'setDragCanvas', value: { bool: true } });\n        }\n        else {\n            parent.currObjType.isCustomCrop = false;\n            parent.currObjType.shape = cropShape;\n            if (width && height) {\n                points = { startX: startX, startY: startY, endX: startX + width, endY: startY + height,\n                    width: width, height: height };\n            }\n            else if (width && cropShape === 'crop-circle') {\n                points = { startX: startX, startY: startY, endX: startX + width, endY: startY + width,\n                    width: width, height: width };\n            }\n            parent.activeObj.shape = cropShape;\n            this.updateSelectionInsert(points);\n        }\n    };\n    Draw.prototype.updateSelectionInsert = function (points) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var obj = { shapeSettingsObj: {} };\n        parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n        var selectionSettings = { type: parent.getSelectionType(obj['shapeSettingsObj']['type']), startX: obj['shapeSettingsObj']['startX'],\n            startY: obj['shapeSettingsObj']['startY'], width: obj['shapeSettingsObj']['width'], height: obj['shapeSettingsObj']['height'] };\n        var selectionChangingArgs = { action: 'insert', previousSelectionSettings: selectionSettings,\n            currentSelectionSettings: selectionSettings };\n        parent.trigger('selectionChanging', selectionChangingArgs);\n        parent.editCompleteArgs = selectionChangingArgs;\n        parent.notify('shape', { prop: 'updSelChangeEventArgs', onPropertyChange: false,\n            value: { selectionSettings: selectionChangingArgs.currentSelectionSettings } });\n        if (selectionChangingArgs.currentSelectionSettings.type === 'Custom') {\n            this.drawObject('duplicate', parent.activeObj, null, null, true);\n        }\n        else {\n            if (actPoint.startX !== 0 || actPoint.startY !== 0 ||\n                actPoint.width !== 0 || actPoint.height !== 0) {\n                points = { startX: actPoint.startX, startY: actPoint.startY,\n                    endX: actPoint.endX, endY: actPoint.endY,\n                    width: actPoint.width, height: actPoint.height };\n            }\n            this.drawObject('duplicate', null, true, points);\n        }\n    };\n    Draw.prototype.drawCustomSelection = function (cropShape, startX, startY, width, height) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        parent.currObjType.isCustomCrop = true;\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.currObjType.shape = parent.activeObj.shape = cropShape.toLowerCase();\n        if (!isNullOrUndefined(startX) && !isNullOrUndefined(startY) && !isNullOrUndefined(width) && !isNullOrUndefined(height)) {\n            actPoint.startX = startX;\n            actPoint.startY = startY;\n            actPoint.endX = startX + width;\n            actPoint.endY = startY + height;\n            actPoint.width = width;\n            actPoint.height = height;\n        }\n        else if (width && height) {\n            var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n            actPoint.width = width;\n            actPoint.height = height;\n            actPoint.startX = destLeft + ((destWidth / 2) - (width / 2));\n            actPoint.startY = destTop + ((destHeight / 2) - (height / 2));\n        }\n        else {\n            if (isNullOrUndefined(parent.transform.zoomFactor) || parent.transform.zoomFactor === 0) {\n                var _b = parent.img, destLeft_1 = _b.destLeft, destTop_1 = _b.destTop, destWidth_1 = _b.destWidth, destHeight_1 = _b.destHeight;\n                var lowerCanvasWidth_1 = parent.lowerCanvas.width;\n                var lowerCanvasHeight_1 = parent.lowerCanvas.height;\n                var activePoint_1 = actPoint;\n                if (destLeft_1 >= 0 && destTop_1 >= 0) {\n                    activePoint_1.startX = destLeft_1;\n                    activePoint_1.startY = destTop_1;\n                    activePoint_1.endX = destLeft_1 + destWidth_1;\n                    activePoint_1.endY = destTop_1 + destHeight_1;\n                }\n                else if (destLeft_1 >= 0) {\n                    activePoint_1.startX = destLeft_1;\n                    activePoint_1.startY = 7.5;\n                    activePoint_1.endX = destLeft_1 + destWidth_1;\n                    activePoint_1.endY = lowerCanvasHeight_1 - 15;\n                }\n                else if (destTop_1 >= 0) {\n                    activePoint_1.startX = 7.5;\n                    activePoint_1.startY = destTop_1;\n                    activePoint_1.endX = lowerCanvasWidth_1 - 15;\n                    activePoint_1.endY = destTop_1 + destHeight_1;\n                }\n                else {\n                    activePoint_1.startX = 7.5;\n                    activePoint_1.startY = 7.5;\n                    activePoint_1.endX = lowerCanvasWidth_1 - 15;\n                    activePoint_1.endY = lowerCanvasHeight_1 - 15;\n                }\n            }\n            else {\n                var _c = parent.img, destLeft_2 = _c.destLeft, destTop_2 = _c.destTop, destWidth_2 = _c.destWidth, destHeight_2 = _c.destHeight;\n                var lowerCanvasWidth_2 = parent.lowerCanvas.width;\n                var lowerCanvasHeight_2 = parent.lowerCanvas.height;\n                var activePoint_2 = actPoint;\n                activePoint_2.startX = Math.max(destLeft_2 > 0 ? destLeft_2 : 7.5, destLeft_2);\n                activePoint_2.startY = Math.max(destTop_2 > 0 ? destTop_2 : 7.5, destTop_2);\n                activePoint_2.endX = Math.min(destLeft_2 + destWidth_2 + 15 < lowerCanvasWidth_2 ? destLeft_2 + destWidth_2 - 15 :\n                    lowerCanvasWidth_2 - 15, destLeft_2 + destWidth_2);\n                activePoint_2.endY = Math.min(destTop_2 + destHeight_2 + 15 < lowerCanvasHeight_2 ? destTop_2 + destHeight_2 - 15 :\n                    lowerCanvasHeight_2 - 15, destTop_2 + destHeight_2);\n            }\n            var _d = parent.img, destLeft = _d.destLeft, destTop = _d.destTop, destWidth = _d.destWidth, destHeight = _d.destHeight;\n            var lowerCanvasWidth = parent.lowerCanvas.clientWidth;\n            var lowerCanvasHeight = parent.lowerCanvas.clientHeight;\n            var activePoint = actPoint;\n            activePoint.startX = Math.max(activePoint.startX, destLeft);\n            activePoint.startY = Math.max(activePoint.startY, destTop);\n            activePoint.endX = Math.min(activePoint.endX, destLeft + destWidth);\n            activePoint.endY = Math.min(activePoint.endY, destTop + destHeight);\n            if (parent.transform.straighten > 0) {\n                if (this.imgCanvasPoints[0].x > activePoint.startX) {\n                    activePoint.startX = this.imgCanvasPoints[0].x;\n                }\n                if (this.imgCanvasPoints[0].y > activePoint.startY) {\n                    activePoint.startY = this.imgCanvasPoints[0].y;\n                }\n                if (this.imgCanvasPoints[2].x < activePoint.endX) {\n                    activePoint.endX = this.imgCanvasPoints[2].x;\n                }\n                if (this.imgCanvasPoints[2].y < activePoint.endY) {\n                    activePoint.endY = this.imgCanvasPoints[2].x;\n                }\n            }\n            else if (parent.transform.straighten < 0) {\n                if (this.imgCanvasPoints[3].x > activePoint.startX) {\n                    activePoint.startX = this.imgCanvasPoints[3].x;\n                }\n                if (this.imgCanvasPoints[3].y < activePoint.startY) {\n                    activePoint.startY = this.imgCanvasPoints[3].y;\n                }\n                if (this.imgCanvasPoints[1].x < activePoint.endX) {\n                    activePoint.endX = this.imgCanvasPoints[1].x;\n                }\n                if (this.imgCanvasPoints[1].y > activePoint.endY) {\n                    activePoint.endY = this.imgCanvasPoints[1].x;\n                }\n            }\n            if (activePoint.startX === destLeft && destLeft + destWidth > lowerCanvasWidth) {\n                activePoint.endX = lowerCanvasWidth - 15;\n            }\n            if (activePoint.startY === destTop && destTop + destHeight > lowerCanvasHeight) {\n                activePoint.endY = lowerCanvasHeight - 15;\n            }\n            if (parent.activeObj.activePoint.startX > parent.activeObj.activePoint.endX) {\n                var temp = parent.activeObj.activePoint.startX;\n                parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX;\n                parent.activeObj.activePoint.endX = temp;\n            }\n            if (parent.activeObj.activePoint.startY > parent.activeObj.activePoint.endY) {\n                var temp = parent.activeObj.activePoint.startY;\n                parent.activeObj.activePoint.startY = parent.activeObj.activePoint.endY;\n                parent.activeObj.activePoint.endY = temp;\n            }\n            parent.activeObj = this.updateWidthHeight(parent.activeObj);\n            this.updateActiveObject(actPoint, parent.activeObj);\n            this.adjActObj();\n        }\n        this.updateSelectionInsert();\n    };\n    Draw.prototype.adjToStraighten = function () {\n        var parent = this.parent;\n        if (parent.transform.straighten !== 0 && parent.isStraightening) {\n            var actPoint = parent.activeObj.activePoint;\n            actPoint.startX += 7.5;\n            actPoint.startY += 7.5;\n            actPoint.endX -= 7.5;\n            actPoint.endY -= 7.5;\n            parent.activeObj = this.updateWidthHeight(parent.activeObj);\n        }\n    };\n    Draw.prototype.adjActObj = function () {\n        var parent = this.parent;\n        if (parent.transform.straighten === 0) {\n            return;\n        }\n        var actPoint = parent.activeObj.activePoint;\n        var tempActPoint = extend({}, actPoint, {}, true);\n        var count = 0;\n        while (true) {\n            count++;\n            var object = { isIntersect: null, arr: null };\n            parent.notify('draw', { prop: 'updateImgCanvasPoints', onPropertyChange: false });\n            parent.notify('draw', { prop: 'isLinesIntersect', onPropertyChange: false, value: { obj: object } });\n            if (object['arr'][0] || object['arr'][1] || object['arr'][2] || object['arr'][3] || count === 100) {\n                actPoint = extend({}, tempActPoint, {}, true);\n                break;\n            }\n            tempActPoint = extend({}, actPoint, {}, true);\n            actPoint.startX -= 5;\n            actPoint.endX += 5;\n            actPoint.width = actPoint.endX - actPoint.startX;\n            this.updateActiveObject(actPoint, parent.activeObj);\n        }\n    };\n    Draw.prototype.callUpdateCurrTransState = function () {\n        var parent = this.parent;\n        var tempObjColl = extend([], parent.objColl, [], true);\n        var tempActiveObj = extend({}, parent.activeObj, {}, true);\n        parent.objColl = [];\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        this.isRotateZoom = true;\n        this.updateCurrTransState('initial');\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        if (parent.transform.degree === 0 && parent.rotateFlipColl.length > 0) {\n            parent.img.destLeft += parent.panPoint.totalPannedPoint.x;\n            parent.img.destTop += parent.panPoint.totalPannedPoint.y;\n        }\n        parent.img.destLeft += parent.panPoint.totalPannedInternalPoint.x;\n        parent.img.destTop += parent.panPoint.totalPannedInternalPoint.y;\n        var temp = this.lowerContext.filter;\n        if (parent.transform.degree === 0) {\n            parent.notify('transform', { prop: 'setDestPointsForFlipState', onPropertyChange: false });\n        }\n        this.drawImage();\n        this.updateCurrTransState('reverse');\n        if (parent.transform.degree === 0 && parent.rotateFlipColl.length > 0) {\n            parent.img.destLeft += parent.panPoint.totalPannedPoint.x;\n            parent.img.destTop += parent.panPoint.totalPannedPoint.y;\n        }\n        this.isRotateZoom = false;\n        parent.objColl = tempObjColl;\n        var tempTogglePen = parent.togglePen;\n        parent.togglePen = false;\n        this.lowerContext.filter = 'none';\n        var widthObj = { penStrokeWidth: null };\n        parent.notify('freehand-draw', { prop: 'getPenStrokeWidth', onPropertyChange: false, value: { obj: widthObj } });\n        parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n            value: { ctx: this.lowerContext, shape: 'iterate', pen: 'iterate', isPreventApply: null } });\n        parent.notify('freehand-draw', { prop: 'setPenStrokeWidth', onPropertyChange: false, value: { value: widthObj['penStrokeWidth'] } });\n        parent.img.destLeft += parent.panPoint.totalPannedInternalPoint.x;\n        parent.img.destTop += parent.panPoint.totalPannedInternalPoint.y;\n        parent.img.destLeft -= parent.panPoint.totalPannedInternalPoint.x;\n        parent.img.destTop -= parent.panPoint.totalPannedInternalPoint.y;\n        parent.togglePen = tempTogglePen;\n        this.lowerContext.filter = temp;\n        parent.activeObj = tempActiveObj;\n    };\n    Draw.prototype.resetPanPoints = function () {\n        this.parent.panPoint.totalPannedPoint = { x: 0, y: 0 };\n        this.parent.panPoint.totalPannedClientPoint = { x: 0, y: 0 };\n        this.parent.panPoint.totalPannedInternalPoint = { x: 0, y: 0 };\n    };\n    Draw.prototype.setClientTransDim = function (isPreventDimension) {\n        var parent = this.parent;\n        if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            parent.img.destLeft = (parent.lowerCanvas.clientWidth - parent.img.destHeight) / 2;\n            parent.img.destTop = (parent.lowerCanvas.clientHeight - parent.img.destWidth + 1) / 2;\n            var temp = parent.img.destWidth;\n            parent.img.destWidth = parent.img.destHeight;\n            parent.img.destHeight = temp;\n        }\n        else {\n            if (isNullOrUndefined(isPreventDimension)) {\n                parent.img.destLeft = (parent.lowerCanvas.clientWidth - parent.img.destWidth) / 2;\n                parent.img.destTop = (parent.lowerCanvas.clientHeight - parent.img.destHeight + 1) / 2;\n            }\n        }\n    };\n    Draw.prototype.redrawImgWithObj = function () {\n        var parent = this.parent;\n        var obj = { canvasFilter: parent.canvasFilter };\n        this.lowerContext.filter = obj['canvasFilter'];\n        if (parent.rotateFlipColl.length !== 0) {\n            var totalPannedInternalPoint = extend({}, parent.panPoint.totalPannedInternalPoint, {}, true);\n            var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                height: parent.img.destHeight };\n            this.callUpdateCurrTransState();\n            parent.panPoint.totalPannedInternalPoint = totalPannedInternalPoint;\n            parent.img.destLeft = destPoints.startX;\n            parent.img.destTop = destPoints.startY;\n            parent.img.destWidth = destPoints.width;\n            parent.img.destHeight = destPoints.height;\n        }\n        else {\n            this.callUpdateCurrTransState();\n        }\n        if (parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n    };\n    Draw.prototype.setCurrentObj = function (obj, isUndoRedo, isCircleCropped) {\n        var parent = this.parent;\n        var isObj = obj ? true : false;\n        if (!isObj) {\n            parent.cropObj.aspectWidth = parent.aspectWidth;\n            parent.cropObj.aspectHeight = parent.aspectHeight;\n            parent.cropObj.frame = parent.frameObj.type;\n        }\n        obj = obj ? obj : parent.cropObj;\n        parent.transform.cropZoomFactor = obj.cropZoom;\n        parent.transform.defaultZoomFactor = obj.defaultZoom;\n        this.straightenInitZoom = obj.straightenZoom;\n        if (!isObj) {\n            parent.transform.zoomFactor = obj.cropZoom;\n        }\n        else {\n            if (obj.activeObj.shape && obj.activeObj.shape.split('-')[0] === 'crop') {\n                parent.transform.zoomFactor = obj.cropZoom;\n            }\n            else {\n                parent.transform.zoomFactor = obj.defaultZoom;\n            }\n        }\n        parent.setProperties({ zoomSettings: { zoomFactor: obj.zoomFactor } }, true);\n        parent.notify('transform', { prop: 'setPreviousZoomValue', onPropertyChange: false, value: { previousZoomValue: obj.previousZoomValue } });\n        parent.panPoint.totalPannedPoint = extend({}, obj.totalPannedPoint, {}, true);\n        parent.panPoint.totalPannedClientPoint = extend({}, obj.totalPannedClientPoint, {}, true);\n        parent.panPoint.totalPannedInternalPoint = extend({}, obj.totalPannedInternalPoint, {}, true);\n        var point = extend({}, obj.tempFlipPanPoint, {}, true);\n        parent.notify('crop', { prop: 'setTempFlipPanPoint', onPropertyChange: false, value: { point: point } });\n        parent.rotateFlipColl = extend([], obj.rotateFlipColl, [], true);\n        parent.transform.degree = obj.degree;\n        parent.frameObj.type = obj.frame;\n        parent.transform.currFlipState = obj.currFlipState;\n        parent.notify('filter', { prop: 'setAdjustmentLevel', onPropertyChange: false, value: { adjustmentLevel: obj.adjustmentLevel } });\n        parent.notify('filter', { prop: 'setTempAdjVal' });\n        parent.currentFilter = obj.currentFilter;\n        parent.notify('filter', { prop: 'setTempFilVal' });\n        if (parent.transform.straighten !== obj.straighten || isUndoRedo) {\n            parent.transform.straighten = obj.straighten;\n            parent.straightenBaseImageCanvas();\n        }\n        parent.img = { destLeft: obj.destPoints.startX, destTop: obj.destPoints.startY, destWidth: obj.destPoints.width,\n            destHeight: obj.destPoints.height, srcLeft: obj.srcPoints.startX, srcTop: obj.srcPoints.startY,\n            srcWidth: obj.srcPoints.width, srcHeight: obj.srcPoints.height };\n        parent.aspectWidth = obj.aspectWidth;\n        parent.aspectHeight = obj.aspectHeight;\n        if (obj.afterCropActions) {\n            parent.afterCropActions = obj.afterCropActions;\n        }\n        this.lowerContext.filter = obj.filter;\n        parent.notify('filter', { prop: 'setBrightnessAdjusted', onPropertyChange: false, value: { isBrightnessAdjusted: obj.isBrightAdjust } });\n        parent.notify('draw', { prop: 'imageBackgroundColor', onPropertyChange: false, value: { color: obj.bgColor } });\n        var isCircleCrop = parent.isCircleCrop;\n        var currSelectionPoint;\n        if (isNullOrUndefined(parent.currSelectionPoint)) {\n            currSelectionPoint = null;\n        }\n        else {\n            currSelectionPoint = extend({}, parent.currSelectionPoint, {}, true);\n            parent.currSelectionPoint = null;\n        }\n        parent.isCircleCrop = false;\n        if (isCircleCropped) {\n            parent.frameObj.type = 'none';\n        }\n        this.drawCropSelectionImage(obj, false);\n        if (parent.transform.degree !== 0) {\n            if (parent.transform.currFlipState === '') {\n                parent.notify('transform', { prop: 'rotatePan', onPropertyChange: false,\n                    value: { isCropSelection: null, isDefaultZoom: null } });\n            }\n            else {\n                parent.notify('transform', { prop: 'drawPannedImage', value: { xDiff: 0, yDiff: 0 } });\n            }\n            parent.img.destLeft = obj.destPoints.startX;\n            parent.img.destTop = obj.destPoints.startY;\n            parent.panPoint.totalPannedClientPoint = extend({}, obj.totalPannedClientPoint, {}, true);\n            parent.panPoint.totalPannedInternalPoint = extend({}, obj.totalPannedInternalPoint, {}, true);\n        }\n        parent.activeObj = extend({}, obj.activeObj, {}, true);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        if (parent.activeObj.activePoint.width !== 0 && parent.activeObj.activePoint.height !== 0) {\n            this.drawObject('duplicate', null, null, null, true);\n        }\n        var activeObj = extend({}, obj.activeObj, {}, true);\n        var isAfterCropAction = false;\n        if (parent.afterCropActions.length > 0) {\n            var object = { collection: parent.afterCropActions };\n            parent.notify('shape', { prop: 'alignRotateFlipColl', onPropertyChange: false,\n                value: { collection: parent.afterCropActions, isRotateFlipCollection: null, obj: object } });\n            parent.afterCropActions = object['collection'];\n        }\n        var afterCropActions = extend([], parent.afterCropActions, [], true);\n        if (!isObj && afterCropActions.length > 0) {\n            isAfterCropAction = true;\n            for (var i = 0, len = afterCropActions.length; i < len; i++) {\n                if (afterCropActions[i] === 'horizontalflip' || afterCropActions[i] === 'verticalflip') {\n                    parent.activeObj = extend({}, currSelectionPoint, {}, true);\n                    this.rotatedFlipCropSel = true;\n                }\n                parent.notify('transform', { prop: 'updateTransform', onPropertyChange: false, value: { text: afterCropActions[i] } });\n            }\n            activeObj = extend({}, parent.activeObj, {}, true);\n            this.resetPanPoints();\n            parent.activeObj = activeObj;\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            if (parent.activeObj.activePoint.width !== 0 && parent.activeObj.activePoint.height !== 0) {\n                this.drawObject('duplicate', null, null, null, true);\n            }\n            if (obj.degree !== parent.transform.degree) {\n                parent.transform.cropZoomFactor = null;\n                parent.transform.zoomFactor = 0;\n            }\n            parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n            if (this.rotatedFlipCropSel) {\n                this.rotatedFlipCropSel = false;\n            }\n        }\n        parent.afterCropActions = afterCropActions;\n        if (!this.isCancelAction && !isAfterCropAction) {\n            parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n            parent.img.destLeft = obj.destPoints.startX;\n            parent.img.destTop = obj.destPoints.startY;\n        }\n        parent.activeObj = activeObj;\n        parent.isCircleCrop = isCircleCrop;\n        if (isNullOrUndefined(currSelectionPoint)) {\n            parent.currSelectionPoint = null;\n        }\n        else {\n            parent.currSelectionPoint = extend({}, currSelectionPoint, {}, true);\n            if (parent.currSelectionPoint && isNullOrUndefined(parent.currSelectionPoint.shape)) {\n                parent.currSelectionPoint = null;\n            }\n        }\n    };\n    Draw.prototype.drawCropSelectionImage = function (obj, isObj) {\n        var parent = this.parent;\n        var temp = this.lowerContext.filter;\n        parent.clearContext(this.lowerContext);\n        parent.clearContext(this.upperContext);\n        this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n        if (isObj) {\n            this.updateCurrTransState('initial');\n        }\n        else {\n            this.setTransformColl(this.lowerContext, 'initial');\n        }\n        parent.notify('transform', { prop: 'setDestPointsForFlipState', onPropertyChange: false });\n        this.drawImage();\n        if (isObj) {\n            this.updateCurrTransState('reverse');\n        }\n        else {\n            this.setTransformColl(this.lowerContext, 'reverse');\n        }\n        parent.img.destLeft = parent.cropObj.destPoints.startX;\n        parent.img.destTop = parent.cropObj.destPoints.startY;\n        var activeObj = extend({}, obj.activeObj, {}, true);\n        this.lowerContext.filter = 'none';\n        parent.img = { destLeft: obj.destPoints.startX, destTop: obj.destPoints.startY, destWidth: obj.destPoints.width,\n            destHeight: obj.destPoints.height, srcLeft: obj.srcPoints.startX, srcTop: obj.srcPoints.startY,\n            srcWidth: obj.srcPoints.width, srcHeight: obj.srcPoints.height };\n        if (obj.activeObj.activePoint.width !== 0 && obj.activeObj.activePoint.height !== 0) {\n            var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                height: parent.img.destHeight };\n            parent.img.destLeft = obj.activeObj.activePoint.startX;\n            parent.img.destTop = obj.activeObj.activePoint.startY;\n            parent.img.destWidth = obj.activeObj.activePoint.width;\n            parent.img.destHeight = obj.activeObj.activePoint.height;\n            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n            parent.img.destLeft = destPoints.startX;\n            parent.img.destTop = destPoints.startY;\n            parent.img.destWidth = destPoints.width;\n            parent.img.destHeight = destPoints.height;\n        }\n        parent.activeObj = activeObj;\n        this.lowerContext.filter = temp;\n    };\n    Draw.prototype.performPointZoom = function (x, y, type, isResize, value) {\n        var parent = this.parent;\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        var isCropSelection = false;\n        if (parent.activeObj.shape && parent.activeObj.shape.indexOf('crop-') > -1) {\n            isCropSelection = true;\n        }\n        if (parent.element.querySelector('.e-contextual-toolbar-wrapper') && !isCropSelection) {\n            if (!parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.contains('e-hide')) {\n                parent.okBtn();\n                parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n            }\n        }\n        var ratioX = (x - destLeft) / destWidth;\n        var ratioY = (y - destTop) / destHeight;\n        var isUndoRedo = parent.isUndoRedo;\n        parent.isUndoRedo = true;\n        parent.setProperties({ zoomSettings: { zoomPoint: { x: x, y: y } } }, true);\n        var zoomValue = value ? value : (type === 'zoomIn') ? .1 : -.1;\n        parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n            value: { zoomFactor: zoomValue, zoomPoint: null, isResize: isResize } });\n        parent.isUndoRedo = isUndoRedo;\n        this.panToPoint(x, y, ratioX, ratioY);\n    };\n    Draw.prototype.panToPoint = function (x, y, ratioX, ratioY) {\n        var parent = this.parent;\n        if (parent.transform.zoomFactor > 0) {\n            var destLeft = parent.img.destLeft;\n            var destTop = parent.img.destTop;\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            if (parent.transform.degree === 0) {\n                parent.img.destLeft = x - (ratioX * parent.img.destWidth);\n                parent.img.destTop = y - (ratioY * parent.img.destHeight);\n                this.drawZoomPanImage(parent.img.destLeft - destLeft, parent.img.destTop - destTop);\n            }\n            else {\n                var isCropTab = parent.isCropTab;\n                parent.isCropTab = true;\n                var objColl = extend([], parent.objColl, [], true);\n                var pointColl = extend([], parent.pointColl, [], true);\n                var straightenObj = { straightenPoint: null };\n                parent.notify('freehand-draw', { prop: 'getStraightenPoint', onPropertyChange: false,\n                    value: { obj: straightenObj } });\n                parent.objColl = [];\n                parent.pointColl = [];\n                parent.freehandCounter = 0;\n                parent.notify('freehand-draw', { prop: 'setStraightenPoint', onPropertyChange: false,\n                    value: { x: null, y: null, ratioX: null, ratioY: null } });\n                var object = { selPointColl: null };\n                parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                    value: { obj: object } });\n                var cropSelPointColl = object['selPointColl'];\n                parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                    value: { obj: { selPointColl: [] } } });\n                parent.panPoint.currentPannedPoint = { x: (x - (ratioX * parent.img.destWidth)) - destLeft,\n                    y: (y - (ratioY * parent.img.destHeight)) - destTop };\n                parent.notify('transform', { prop: 'rotatePan', onPropertyChange: false,\n                    value: { isCropSelection: null, isDefaultZoom: null } });\n                parent.isCropTab = isCropTab;\n                parent.objColl = objColl;\n                parent.pointColl = pointColl;\n                parent.freehandCounter = parent.pointColl.length;\n                if (straightenObj['straightenPoint']['x'] && straightenObj['straightenPoint']['y']) {\n                    parent.notify('freehand-draw', { prop: 'setStraightenPoint', onPropertyChange: false,\n                        value: { x: straightenObj['straightenPoint']['x'], y: straightenObj['straightenPoint']['y'],\n                            ratioX: straightenObj['straightenPoint']['ratioX'], ratioY: straightenObj['straightenPoint']['ratioY'] } });\n                }\n                parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                    value: { obj: { selPointColl: cropSelPointColl } } });\n                parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                    value: { ctx: this.lowerContext, shape: 'pan', pen: 'pan', x: parent.panPoint.currentPannedPoint.x,\n                        y: parent.panPoint.currentPannedPoint.y, panRegion: '' } });\n            }\n            this.adjustPanning(activeObj);\n            var isActObj = false;\n            for (var i = 0; i < parent.objColl.length; i++) {\n                if (JSON.stringify(activeObj.activePoint) === JSON.stringify(parent.objColl[i].activePoint)) {\n                    isActObj = true;\n                    break;\n                }\n            }\n            if (!isActObj) {\n                parent.activeObj = activeObj;\n            }\n            if (parent.activeObj.activePoint.width !== 0 && parent.activeObj.activePoint.height !== 0) {\n                this.drawObject('duplicate', null, null, null, true);\n            }\n        }\n    };\n    Draw.prototype.adjustPanning = function (activeObj) {\n        var parent = this.parent;\n        var _a = activeObj.activePoint, startX = _a.startX, startY = _a.startY, width = _a.width, height = _a.height;\n        if (width !== 0 && height !== 0) {\n            var _b = parent.img, destLeft = _b.destLeft, destTop = _b.destTop, destWidth = _b.destWidth, destHeight = _b.destHeight;\n            var point = { x: 0, y: 0 };\n            if (destLeft > startX) {\n                point.x = destLeft - startX;\n            }\n            else if (destLeft + destWidth < startX + width) {\n                point.x = (destLeft + destWidth) - (startX + width);\n            }\n            if (destTop > startY) {\n                point.y = destTop - startY;\n            }\n            else if (destTop + destHeight < startY + height) {\n                point.y = (destTop + destHeight) - (startY + height);\n            }\n            if (parent.transform.degree === 0) {\n                parent.img.destLeft -= point.x;\n                parent.img.destTop -= point.y;\n                this.drawZoomPanImage(parent.img.destLeft - destLeft, parent.img.destTop - destTop);\n            }\n            else {\n                var isCropTab = parent.isCropTab;\n                parent.isCropTab = true;\n                var objColl = extend([], parent.objColl, [], true);\n                var pointColl = extend([], parent.pointColl, [], true);\n                parent.objColl = [];\n                parent.pointColl = [];\n                parent.freehandCounter = 0;\n                var object = { selPointColl: null };\n                parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                    value: { obj: object } });\n                var cropSelPointColl = object['selPointColl'];\n                parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                    value: { obj: { selPointColl: [] } } });\n                parent.img.destLeft -= point.x;\n                parent.img.destTop -= point.y;\n                parent.panPoint.currentPannedPoint = { x: parent.img.destLeft - destLeft, y: parent.img.destTop - destTop };\n                parent.notify('transform', { prop: 'rotatePan', onPropertyChange: false,\n                    value: { isCropSelection: null, isDefaultZoom: null } });\n                parent.isCropTab = isCropTab;\n                parent.objColl = objColl;\n                parent.pointColl = pointColl;\n                parent.freehandCounter = parent.pointColl.length;\n                parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                    value: { obj: { selPointColl: cropSelPointColl } } });\n                parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                    value: { ctx: this.lowerContext, shape: 'pan', pen: 'pan', x: parent.panPoint.currentPannedPoint.x,\n                        y: parent.panPoint.currentPannedPoint.y, panRegion: '' } });\n            }\n        }\n    };\n    Draw.prototype.panToSel = function () {\n        var parent = this.parent;\n        var activeObj = extend({}, parent.activeObj, {}, true);\n        var _a = activeObj.activePoint, startX = _a.startX, startY = _a.startY, width = _a.width, height = _a.height;\n        this.allowRedactStraighten = true;\n        var straightenObj = { straightenPoint: null };\n        parent.notify('freehand-draw', { prop: 'getStraightenPoint', onPropertyChange: false,\n            value: { obj: straightenObj } });\n        if (straightenObj['straightenPoint']['x'] && straightenObj['straightenPoint']['y']) {\n            var panX = (startX + (width / 2)) - straightenObj['straightenPoint']['x'];\n            var panY = (startY + (height / 2)) - straightenObj['straightenPoint']['y'];\n            if (parent.transform.degree === 0) {\n                parent.img.destLeft += panX;\n                parent.img.destTop += panY;\n                parent.notify('transform', { prop: 'drawPannImage', value: { point: { x: panX, y: panY } } });\n            }\n            else {\n                parent.panPoint.currentPannedPoint = { x: panX, y: panY };\n                parent.notify('transform', { prop: 'drawPannedImage', value: { xDiff: panX, yDiff: panY } });\n                parent.panPoint.currentPannedPoint = { x: 0, y: 0 };\n                parent.notify('transform', { prop: 'setTempPanMove', value: { point: null } });\n            }\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: activeObj } });\n            var _b = parent.img, destLeft_3 = _b.destLeft, destTop_3 = _b.destTop, destWidth_3 = _b.destWidth, destHeight_3 = _b.destHeight;\n            var points = this.imgCanvasPoints;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            points.forEach(function (point) {\n                point.x = (point.ratioX * destWidth_3) + destLeft_3;\n                point.y = (point.ratioY * destHeight_3) + destTop_3;\n            });\n            this.imgCanvasPoints = points;\n            var count = 0;\n            if (parent.transform.straighten === 3 && !this.preventStraightening) {\n                this.preventStraightening = true;\n                var temp = parent.prevStraightenedDegree;\n                parent.prevStraightenedDegree = parent.transform.straighten;\n                parent.setStraighten(0);\n                parent.setStraighten(3);\n                parent.prevStraightenedDegree = temp;\n                this.preventStraightening = false;\n            }\n            while (this.isLinesIntersect() && parent.transform.straighten !== 0 && parent.transform.straighten !== 360 && count < 100) {\n                count++;\n                this.performPointZoom(parent.activeObj.activePoint.startX + (parent.activeObj.activePoint.width / 2), parent.activeObj.activePoint.startY + (parent.activeObj.activePoint.height / 2), 'zoomIn', false, 0.025);\n                this.updateImgCanvasPoints();\n            }\n        }\n    };\n    Draw.prototype.drawZoomPanImage = function (x, y) {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n            value: { ctx: this.lowerContext, shape: 'pan', pen: 'pan', x: x, y: y, panRegion: '' } });\n        this.renderImage(true);\n        var obj = { width: 0, height: 0 };\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: parent.img.srcWidth, height: parent.img.srcHeight, obj: obj, isImgShape: null } });\n        var maxDimension = obj;\n        maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n        maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n        parent.panPoint.totalPannedPoint.x += x;\n        parent.panPoint.totalPannedPoint.y += y;\n        parent.notify('crop', { prop: 'setTempFlipPanPoint', onPropertyChange: false, value: { point: { x: 0, y: 0 } } });\n    };\n    Draw.prototype.openNewImage = function () {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        var inMemoryContext = parent.inMemoryCanvas.getContext('2d');\n        showSpinner(parent.element);\n        parent.element.style.opacity = '0.5';\n        var toolbar = document.querySelector('#' + id + '_currPos');\n        if (toolbar) {\n            toolbar.style.display = 'none';\n        }\n        var obj = { defToolbarItems: null };\n        parent.notify('toolbar', { prop: 'getDefToolbarItems', value: { obj: obj } });\n        if (obj['defToolbarItems'].length === 0 &&\n            (isNullOrUndefined(document.getElementById(id + '_toolbar'))) &&\n            parent.element.querySelector('#' + id + '_toolbarArea')) {\n            var height = parent.element.querySelector('#' + id + '_toolbarArea').clientHeight;\n            parent.notify('toolbar', { prop: 'setToolbarHeight', value: { height: height } });\n        }\n        parent.reset();\n        parent.update();\n        parent.transform.degree = 0;\n        parent.transform.zoomFactor = 0;\n        parent.isImageLoaded = false;\n        parent.currSelectionPoint = null;\n        var type = typeof (this.openURL);\n        if (type === 'string') {\n            var fileName = this.openURL.split('.');\n            if (fileName.length > 1) {\n                fileName = fileName[fileName.length - 2].split('/');\n                this.fileName = fileName[fileName.length - 1];\n            }\n            else {\n                this.fileName = 'ImageEditor';\n            }\n            this.fileType = this.getFileExtensionFromURL(this.openURL);\n            if (this.fileType) {\n                this.fileType = parent.toPascalCase(this.fileType);\n                var fileType = this.fileType.toLowerCase();\n                if (fileType === 'jpg' || fileType === 'jpeg') {\n                    this.fileType = 'Jpeg';\n                    fileType = 'jpeg';\n                }\n                if (fileType !== 'jpeg' && fileType !== 'png' && fileType !== 'svg') {\n                    this.fileType = null;\n                }\n            }\n            this.imageOnLoad(this.openURL);\n            if (typeof (this.openURL) !== 'string' || this.openURL.indexOf('localhost') === -1) {\n                this.getImageSizeFromURL(this.openURL.toString(), function (imageSizeMB) {\n                    if (imageSizeMB !== null) {\n                        _this.parent.notify('toolbar', { prop: 'setInitialSize', value: { value: +imageSizeMB } });\n                    }\n                });\n            }\n        }\n        else {\n            this.fileName = 'ImageEditor';\n            this.fileType = null;\n            parent.lowerCanvas = document.querySelector('#' + id + '_lowerCanvas');\n            parent.upperCanvas = document.querySelector('#' + id + '_upperCanvas');\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n            this.upperContext = parent.upperCanvas.getContext('2d');\n            parent.clearContext(this.lowerContext);\n            parent.clearContext(this.upperContext);\n            parent.clearContext(inMemoryContext);\n            parent.inMemoryCanvas.width = this.openURL.width;\n            parent.inMemoryCanvas.height = this.openURL.height;\n            inMemoryContext.putImageData(this.openURL, 0, 0);\n            parent.baseImg.src = parent.inMemoryCanvas.toDataURL();\n        }\n    };\n    Draw.prototype.getImageSizeFromURL = function (imageUrl, callback) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, contentLength, imageSizeMB, ex_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, fetch(imageUrl, { method: 'HEAD' })];\n                    case 1:\n                        response = _a.sent();\n                        contentLength = parseInt(response.headers.get('content-length') || '0', 10);\n                        imageSizeMB = contentLength;\n                        callback(imageSizeMB);\n                        return [3 /*break*/, 3];\n                    case 2:\n                        ex_1 = _a.sent();\n                        // eslint-disable-next-line no-console\n                        console.log(ex_1.message);\n                        return [3 /*break*/, 3];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Draw.prototype.dlgBtnClick = function () {\n        this.parent.export();\n        this.applyDialogOption();\n    };\n    Draw.prototype.dlgCloseBtnClick = function () {\n        this.applyDialogOption();\n    };\n    Draw.prototype.applyDialogOption = function () {\n        var parent = this.parent;\n        if (this.isFileChanged) {\n            parent.isImageLoaded = this.isFileChanged = false;\n            parent.reset();\n            this.checkToolbarTemplate(this.inputElem, this.openURL);\n        }\n        else {\n            this.reset();\n            this.openNewImage();\n        }\n        getComponent(document.getElementById(parent.element.id + '_dialog'), 'dialog').destroy();\n        this.isImageEdited = false;\n    };\n    Draw.prototype.showDialogPopup = function () {\n        var parent = this.parent;\n        var headerObj = { key: 'ConfirmDialogHeader' };\n        parent.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: headerObj } });\n        var contentObj = { key: 'ConfirmDialogContent' };\n        parent.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: contentObj } });\n        var yesObj = { key: 'Yes' };\n        parent.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: yesObj } });\n        var noObj = { key: 'No' };\n        parent.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: noObj } });\n        parent.element.querySelector('#' + parent.element.id + '_dialog').style.display = 'block';\n        var dialog = new Dialog({\n            header: headerObj['value'],\n            closeOnEscape: true,\n            content: '<span>' + contentObj['value'] + '</span>',\n            target: document.getElementById('target'),\n            width: '285px',\n            isModal: true,\n            animationSettings: { effect: 'Zoom' },\n            close: this.dlgCloseBtnClick.bind(this),\n            buttons: [\n                { click: this.dlgCloseBtnClick.bind(this),\n                    buttonModel: { content: noObj['value'], iconCss: 'e-icons e-close' }\n                },\n                { click: this.dlgBtnClick.bind(this),\n                    buttonModel: { content: yesObj['value'], isPrimary: true, iconCss: 'e-icons e-check' } }\n            ]\n        });\n        dialog.appendTo('#' + parent.element.id + '_dialog');\n    };\n    Draw.prototype.restoreOldImage = function () {\n        if (this.parent.isImageLoaded) {\n            this.reset();\n            this.openNewImage();\n        }\n        else {\n            this.openNewImage();\n        }\n    };\n    Draw.prototype.open = function (data) {\n        var dropArea = document.getElementById(this.parent.element.id + '_dropArea');\n        if (dropArea) {\n            dropArea.style.display = 'none';\n        }\n        if (!this.parent.disabled) {\n            this.openURL = data;\n            this.restoreOldImage();\n        }\n    };\n    Draw.prototype.getInitialLoaded = function (object) {\n        object['isInitialLoaded'] = this.isInitialLoading;\n    };\n    Draw.prototype.getFileExtensionFromURL = function (url) {\n        var lastDotIndex = url.lastIndexOf('.');\n        if (lastDotIndex !== -1) {\n            return url.slice(lastDotIndex + 1).toLowerCase();\n        }\n        else if (url.indexOf('base64') !== -1) {\n            return url.slice(url.indexOf('/') + 1, url.indexOf(';')).toLowerCase();\n        }\n        return null;\n    };\n    Draw.prototype.fileSelect = function (inputElement, args) {\n        var parent = this.parent;\n        var dropArea = document.getElementById(parent.element.id + '_dropArea');\n        if (dropArea) {\n            dropArea.style.display = 'none';\n        }\n        if (!parent.disabled) {\n            var filesData = void 0;\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var fileData = void 0;\n            if (args.target) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                filesData = args.target.files[0];\n                fileData = filesData;\n            }\n            else {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                filesData = fileData = args.filesData[0].rawFile;\n            }\n            var fileExtension = void 0;\n            if (fileData.name) {\n                var fileExtensionArray = fileData.name.split('.');\n                fileExtension = fileExtensionArray[fileExtensionArray.length - 1].toLowerCase();\n            }\n            if (fileExtension && ['jpg', 'jpeg', 'png', 'svg'].indexOf(fileExtension) === -1) {\n                this.errorLoading();\n                return;\n            }\n            showSpinner(parent.element);\n            parent.element.style.opacity = '0.5';\n            this.inputElem = inputElement;\n            fileExtension = fileData.name && fileData.name.split('.')[1];\n            if (fileExtension) {\n                var fileType = parent.toPascalCase(fileExtension);\n                if (fileType === 'JPG' || fileType === 'Jpg') {\n                    this.fileType = 'Jpeg';\n                }\n                else {\n                    this.fileType = fileType;\n                }\n            }\n            else {\n                this.fileType = null;\n            }\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var URL_1 = window.URL;\n            var url = URL_1.createObjectURL(filesData);\n            this.openURL = url;\n            // eslint-disable-next-line max-len\n            if (parent.isImageLoaded && !parent.isChangesSaved && (this.isImageEdited || parent.pointColl.length > 0 || parent.objColl.length > 0)) {\n                this.isFileChanged = true;\n                this.showDialogPopup();\n            }\n            else {\n                this.checkToolbarTemplate(inputElement, url);\n            }\n        }\n    };\n    Draw.prototype.checkToolbarTemplate = function (inputElement, url) {\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.toolbarTemplate)) {\n            parent.reset();\n            parent.update();\n        }\n        this.fileName = inputElement.value.split('\\\\')[inputElement.value.split('\\\\').length - 1];\n        this.fileName = this.fileName.split('.')[0];\n        this.imageOnLoad(url.toString());\n        inputElement.value = '';\n    };\n    Draw.prototype.moveToSelectionRange = function (type, activeObj) {\n        var parent = this.parent;\n        if (parent.activeObj.shape) {\n            var isRotated = false;\n            for (var i = 0, len = parent.rotateFlipColl.length; i < len; i++) {\n                var degree = parent.rotateFlipColl[i];\n                if (degree === 90 || degree === -90) {\n                    isRotated = true;\n                    break;\n                }\n            }\n            if (isRotated) {\n                if (parent.transform.degree === 0) {\n                    return;\n                }\n                var zoomFactor = parent.transform.zoomFactor;\n                parent.objColl.push(parent.activeObj);\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                var currObj = parent.objColl[parent.objColl.length - 1];\n                if (type === 'rotateleft' || type === 'rotateright') {\n                    if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n                        if (currObj.activePoint.width < activeObj.activePoint.height) {\n                            for (var i = 2; i < parent.zoomSettings.maxZoomFactor; i++) {\n                                if (currObj.activePoint.width >= activeObj.activePoint.height ||\n                                    this.isSelectionBiggerThanCanvas(currObj) ||\n                                    this.isSelectionOutsideCanvas(currObj)) {\n                                    if (!isNullOrUndefined(zoomFactor)) {\n                                        parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                            value: { zoomFactor: -0.1, zoomPoint: null }, isResize: null });\n                                    }\n                                    break;\n                                }\n                                zoomFactor += 0.1;\n                                parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                    value: { zoomFactor: zoomFactor, zoomPoint: null }, isResize: null });\n                            }\n                        }\n                        else {\n                            for (var i = 2; i < parent.zoomSettings.maxZoomFactor; i++) {\n                                if (currObj.activePoint.width >= activeObj.activePoint.height ||\n                                    this.isSelectionBiggerThanCanvas(currObj) ||\n                                    this.isSelectionOutsideCanvas(currObj)) {\n                                    if (!isNullOrUndefined(zoomFactor)) {\n                                        parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                            value: { zoomFactor: 0.1, zoomPoint: null, isResize: null } });\n                                    }\n                                    break;\n                                }\n                                zoomFactor -= .1;\n                                parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                    value: { zoomFactor: zoomFactor, zoomPoint: null }, isResize: null });\n                            }\n                        }\n                    }\n                    else {\n                        if (currObj.activePoint.height < activeObj.activePoint.width) {\n                            for (var i = 2; i < parent.zoomSettings.maxZoomFactor; i++) {\n                                if (currObj.activePoint.height >= activeObj.activePoint.width ||\n                                    this.isSelectionBiggerThanCanvas(currObj) ||\n                                    this.isSelectionOutsideCanvas(currObj)) {\n                                    if (!isNullOrUndefined(zoomFactor)) {\n                                        parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                            value: { zoomFactor: -0.1, zoomPoint: null }, isResize: null });\n                                    }\n                                    break;\n                                }\n                                zoomFactor += 0.1;\n                                parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                    value: { zoomFactor: zoomFactor, zoomPoint: null }, isResize: null });\n                            }\n                        }\n                        else {\n                            for (var i = 2; i < parent.zoomSettings.maxZoomFactor; i++) {\n                                if (currObj.activePoint.height >= activeObj.activePoint.width ||\n                                    this.isSelectionBiggerThanCanvas(currObj) ||\n                                    this.isSelectionOutsideCanvas(currObj)) {\n                                    if (!isNullOrUndefined(zoomFactor)) {\n                                        parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                            value: { zoomFactor: 0.1, zoomPoint: null }, isResize: null });\n                                    }\n                                    break;\n                                }\n                                zoomFactor -= .1;\n                                parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                    value: { zoomFactor: zoomFactor, zoomPoint: null }, isResize: null });\n                            }\n                        }\n                    }\n                }\n                var panX = (parent.lowerCanvas.clientWidth / 2) - (currObj.activePoint.startX +\n                    (currObj.activePoint.width / 2));\n                var panY = ((parent.lowerCanvas.clientHeight + 1) / 2) - (currObj.activePoint.startY +\n                    (currObj.activePoint.height / 2));\n                if (isNullOrUndefined(parent.activeObj.shape)) {\n                    parent.activeObj = extend({}, activeObj, {}, true);\n                }\n                if (parent.transform.degree === 0) {\n                    parent.img.destLeft += panX;\n                    parent.img.destTop += panY;\n                    parent.notify('transform', { prop: 'drawPannImage', value: { point: { x: panX, y: panY } } });\n                }\n                else {\n                    parent.panPoint.currentPannedPoint = { x: panX, y: panY };\n                    parent.notify('transform', { prop: 'drawPannedImage', value: { xDiff: panX, yDiff: panY } });\n                    parent.panPoint.currentPannedPoint = { x: 0, y: 0 };\n                }\n                parent.notify('transform', { prop: 'setTempPanMove', onPropertyChange: false,\n                    value: { point: null } });\n                parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1]);\n                parent.objColl.pop();\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n            }\n        }\n    };\n    Draw.prototype.isSelectionBiggerThanCanvas = function (obj) {\n        var isBigger = false;\n        var parent = this.parent;\n        var _a = obj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        var _b = parent.img, destLeft = _b.destLeft, destTop = _b.destTop, destWidth = _b.destWidth, destHeight = _b.destHeight;\n        if (startX <= destLeft || startY <= destTop || endX >= destLeft + destWidth || endY >= destTop + destHeight) {\n            isBigger = true;\n        }\n        return isBigger;\n    };\n    Draw.prototype.isSelectionOutsideCanvas = function (obj) {\n        var isOutside = false;\n        var parent = this.parent;\n        if ((obj.activePoint.height < parent.lowerCanvas.height - parent.toolbarHeight) ||\n            (obj.activePoint.width < parent.lowerCanvas.width)) {\n            isOutside = true;\n        }\n        return isOutside;\n    };\n    Draw.prototype.downScaleImgCanvas = function (ctx, isImgAnnotation, isHFlip, isVFlip) {\n        var parent = this.parent;\n        var canvas = isImgAnnotation ? parent.activeObj.imageCanvas : parent.baseImgCanvas;\n        var img = isImgAnnotation ? parent.activeObj.imageElement : parent.baseImg;\n        var width = isImgAnnotation ? parent.activeObj.activePoint.width : parent.img.destWidth;\n        var height = isImgAnnotation ? parent.activeObj.activePoint.height : parent.img.destHeight;\n        var obj = { width: 0, height: 0 };\n        if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n                value: { width: img.height, height: img.width, obj: obj, isImgShape: isImgAnnotation } });\n        }\n        else {\n            parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n                value: { width: img.width, height: img.height, obj: obj, isImgShape: isImgAnnotation } });\n        }\n        if (isImgAnnotation || (parent.allowDownScale && !parent.isCropTab && !parent.isCropToolbar && img.width !== 0 && img.height !== 0\n            && obj['width'] * 0.75 > width && obj['height'] * 0.75 > height)) {\n            var tempCanvas = parent.createElement('canvas', {\n                id: parent.element.id + '_downScaleCanvas', attrs: { name: 'canvasImage' }\n            });\n            tempCanvas.width = isImgAnnotation ? img.width : parent.img.srcWidth;\n            tempCanvas.height = isImgAnnotation ? img.height : parent.img.srcHeight;\n            if (isImgAnnotation) {\n                tempCanvas.getContext('2d').drawImage(img, 0, 0, tempCanvas.width, tempCanvas.height);\n            }\n            else {\n                if (this.imageBackgroundColor !== '') {\n                    ctx.fillStyle = this.imageBackgroundColor;\n                    ctx.fillRect(parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n                }\n                tempCanvas.getContext('2d').drawImage(canvas, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, 0, 0, tempCanvas.width, tempCanvas.height);\n            }\n            if (isImgAnnotation || this.isDownScale) {\n                this.downScale(tempCanvas, width, height, isImgAnnotation);\n            }\n            if (isImgAnnotation) {\n                ctx.canvas.width = tempCanvas.width;\n                ctx.canvas.height = tempCanvas.height;\n                if (isHFlip && isVFlip) {\n                    ctx.translate(parent.activeObj.imageCanvas.width, 0);\n                    ctx.scale(-1, 1);\n                    ctx.translate(0, parent.activeObj.imageCanvas.height);\n                    ctx.scale(1, -1);\n                }\n                else {\n                    if (isHFlip) {\n                        if (isNullOrUndefined(parent.activeObj.isHorImageFlip) || !parent.activeObj.isHorImageFlip) {\n                            parent.activeObj.isHorImageFlip = true;\n                            ctx.translate(parent.activeObj.imageCanvas.width, 0);\n                            ctx.scale(-1, 1);\n                        }\n                        else if (parent.activeObj.isHorImageFlip) {\n                            parent.activeObj.isHorImageFlip = false;\n                        }\n                        if (parent.activeObj.isVerImageFlip) {\n                            ctx.translate(0, parent.activeObj.imageCanvas.height);\n                            ctx.scale(1, -1);\n                        }\n                    }\n                    else if (isVFlip) {\n                        if (isNullOrUndefined(parent.activeObj.isVerImageFlip) || !parent.activeObj.isVerImageFlip) {\n                            parent.activeObj.isVerImageFlip = true;\n                            ctx.translate(0, parent.activeObj.imageCanvas.height);\n                            ctx.scale(1, -1);\n                        }\n                        else if (parent.activeObj.isVerImageFlip) {\n                            parent.activeObj.isVerImageFlip = false;\n                        }\n                        if (parent.activeObj.isHorImageFlip) {\n                            ctx.translate(parent.activeObj.imageCanvas.width, 0);\n                            ctx.scale(-1, 1);\n                        }\n                    }\n                }\n                ctx.drawImage(tempCanvas, 0, 0);\n                ctx.setTransform(1, 0, 0, 1, 0, 0);\n            }\n            else if (parent.isFinetuning) {\n                ctx.save();\n                ctx.setTransform(1, 0, 0, 1, 0, 0);\n                ctx.drawImage(parent.inMemoryCanvas, 0, 0);\n                ctx.restore();\n            }\n            else {\n                ctx.drawImage(tempCanvas, 0, 0, tempCanvas.width, tempCanvas.height, parent.img.destLeft, parent.img.destTop, tempCanvas.width, tempCanvas.height);\n            }\n        }\n        else {\n            if ((isNullOrUndefined(isImgAnnotation) || !isImgAnnotation) && parent.baseImgCanvas.width !== 0 &&\n                parent.baseImgCanvas.height !== 0) {\n                if (this.imageBackgroundColor !== '') {\n                    ctx.fillStyle = this.imageBackgroundColor;\n                    ctx.fillRect(parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n                }\n                ctx.drawImage(parent.baseImgCanvas, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n            }\n        }\n        if (parent.isSafari) {\n            parent.notify('filter', { prop: 'apply-filter', onPropertyChange: false, value: { context: ctx } });\n        }\n    };\n    Draw.prototype.downScale = function (canvas, width, height, isImgAnnotation) {\n        var parent = this.parent;\n        if (isImgAnnotation && parent.isStraightening) {\n            return;\n        }\n        var widthSource = canvas.width;\n        var heightSource = canvas.height;\n        width = Math.round(width);\n        height = Math.round(height);\n        var widthRatio = widthSource / width;\n        var heightRatio = heightSource / height;\n        var halfWidthRatio = Math.ceil(widthRatio / 2);\n        var halfHeightRatio = Math.ceil(heightRatio / 2);\n        var ctx = canvas.getContext('2d');\n        var img = ctx.getImageData(0, 0, widthSource, heightSource);\n        var img2 = ctx.createImageData(width, height);\n        var data = img.data;\n        var data2 = img2.data;\n        for (var j = 0; j < height; j++) {\n            for (var i = 0; i < width; i++) {\n                var x2 = (i + j * width) * 4;\n                var weight = 0;\n                var weights = 0;\n                var alphaWeights = 0;\n                var r = 0;\n                var g = 0;\n                var b = 0;\n                var a = 0;\n                var centerY = (j + 0.5) * heightRatio;\n                var startY = Math.floor(j * heightRatio);\n                var stopY = Math.ceil((j + 1) * heightRatio);\n                for (var y = startY; y < stopY; y++) {\n                    var dy = Math.abs(centerY - (y + 0.5)) / halfHeightRatio;\n                    var centerX = (i + 0.5) * widthRatio;\n                    var w0 = dy * dy; //pre-calc part of w\n                    var startX = Math.floor(i * widthRatio);\n                    var stopX = Math.ceil((i + 1) * widthRatio);\n                    for (var x = startX; x < stopX; x++) {\n                        var dx = Math.abs(centerX - (x + 0.5)) / halfWidthRatio;\n                        var w = Math.sqrt(w0 + dx * dx);\n                        if (w >= 1) {\n                            continue;\n                        }\n                        weight = 2 * w * w * w - 3 * w * w + 1;\n                        var xPos = 4 * (x + y * widthSource);\n                        a += weight * data[xPos + 3];\n                        alphaWeights += weight;\n                        weight = weight * data[xPos + 3] / 250;\n                        r += weight * data[xPos];\n                        g += weight * data[xPos + 1];\n                        b += weight * data[xPos + 2];\n                        weights += weight;\n                    }\n                }\n                data2[x2] = r / weights;\n                data2[x2 + 1] = g / weights;\n                data2[x2 + 2] = b / weights;\n                data2[x2 + 3] = a / alphaWeights;\n            }\n        }\n        canvas.width = isImgAnnotation ? parent.activeObj.activePoint.width : parent.lowerCanvas.width;\n        canvas.height = isImgAnnotation ? parent.activeObj.activePoint.height : parent.lowerCanvas.height;\n        ctx.putImageData(img2, 0, 0);\n    };\n    Draw.prototype.drawImgToCtx = function (ctx, preventImg) {\n        var parent = this.parent;\n        if (ctx.canvas.id !== parent.element.id + '_tempCanvas' && ctx !== this.upperContext && isNullOrUndefined(preventImg)) {\n            this.downScaleImgCanvas(ctx, null, null, null);\n        }\n    };\n    Draw.prototype.getFrameColor = function (frameObj, ctx, points) {\n        var parent = this.parent;\n        var color = parent.frameObj.color;\n        if (frameObj.gradientColor) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var gradient = ctx.createLinearGradient(points.startX, points.startY, points.startX + points.width, points.startY + points.height);\n            gradient.addColorStop(0, frameObj.color);\n            gradient.addColorStop(1, frameObj.gradientColor);\n            color = gradient;\n        }\n        else {\n            color = frameObj.color;\n        }\n        return color;\n    };\n    Draw.prototype.applyFrame = function (ctx, frame, preventImg) {\n        var parent = this.parent;\n        parent.frameObj.type = frame;\n        var tempLineWidth;\n        var ratio = { width: 1, height: 1 };\n        var points = { startX: parent.img.destLeft - ctx.lineWidth, startY: parent.img.destTop - ctx.lineWidth,\n            width: parent.img.destWidth + (2 * ctx.lineWidth), height: parent.img.destHeight + (2 * ctx.lineWidth) };\n        var frameObj = { type: parent.frameObj.type, color: parent.frameObj.color, size: parent.frameObj.size,\n            inset: parent.frameObj.inset, offset: parent.frameObj.offset / 2, radius: parent.frameObj.radius,\n            amount: parent.frameObj.amount, border: parent.frameObj.border, gradientColor: parent.frameObj.gradientColor };\n        var zoomFactor = parent.transform.zoomFactor;\n        if (ctx.canvas.id === parent.element.id + '_tempCanvas') {\n            var newWidth = ctx.canvas.width;\n            var newHeight = ctx.canvas.height;\n            var obj = { width: 0, height: 0 };\n            parent.notify('crop', { prop: 'calcRatio', onPropertyChange: false,\n                value: { obj: obj, dimension: { width: newWidth, height: newHeight } } });\n            ratio = obj;\n            frameObj.size *= ((ratio.width + ratio.height) / 2);\n            frameObj.inset *= ((ratio.width + ratio.height) / 2);\n            frameObj.offset *= ((ratio.width + ratio.height) / 2);\n            frameObj.radius *= ((ratio.width + ratio.height) / 2);\n            points = { startX: 0, startY: 0, width: ctx.canvas.width, height: ctx.canvas.height };\n            parent.notify('export', { prop: 'updateSaveContext', onPropertyChange: false, value: { context: ctx } });\n        }\n        else if (ctx === this.upperContext && parent.activeObj.shape) {\n            points = { startX: parent.activeObj.activePoint.startX - ctx.lineWidth, startY: parent.activeObj.activePoint.startY\n                    - ctx.lineWidth, width: parent.activeObj.activePoint.width + (2 * ctx.lineWidth), height: parent.activeObj.activePoint.height + (2 * ctx.lineWidth) };\n        }\n        else if (isNullOrUndefined(preventImg)) {\n            ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        }\n        var valueForty = (40 * ((ratio.width + ratio.height) / 2));\n        var valueFifty = (50 * ((ratio.width + ratio.height) / 2));\n        if (ctx !== this.upperContext) {\n            frameObj.size += (frameObj.size * zoomFactor);\n            frameObj.inset += (frameObj.inset * zoomFactor);\n            frameObj.offset += (frameObj.offset * zoomFactor);\n            frameObj.radius += (frameObj.radius * zoomFactor);\n            valueForty += (valueForty * zoomFactor);\n            valueFifty += (valueFifty * zoomFactor);\n        }\n        if (ctx === this.upperContext && parent.activeObj.shape) {\n            if ((frame === 'mat' && ((points.width - (2 * frameObj.size) < 0) || (points.height - (2 * frameObj.size) < 0))) ||\n                (frame === 'bevel' && (points.width - (2 * frameObj.size) < 40 || points.height - (2 * frameObj.size) < 40)) ||\n                ((frame === 'inset') && (points.startX + points.width - frameObj.offset - (points.startX + frameObj.offset) < 0 ||\n                    points.startY + points.height - frameObj.offset - (points.startY + frameObj.offset) < 0)) ||\n                (frame === 'hook' && (points.width - (2 * frameObj.size) < 50 || points.height - (2 * frameObj.size) < 50))) {\n                return;\n            }\n        }\n        var bevelObj = { bevelFilter: ctx.filter };\n        var filter = ctx.filter;\n        if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop ||\n            (ctx === this.lowerContext && parent.isCropTab)) {\n            this.drawImgToCtx(ctx, preventImg);\n        }\n        else {\n            switch (frame) {\n                case 'none':\n                    this.drawImgToCtx(ctx, preventImg);\n                    break;\n                case 'mat':\n                    this.drawImgToCtx(ctx, preventImg);\n                    while (((points.width - (2 * frameObj.size) < 0) ||\n                        (points.height - (2 * frameObj.size) < 0)) && frameObj.size > 0) {\n                        frameObj.size -= 20;\n                    }\n                    ctx.filter = 'none';\n                    ctx.fillStyle = this.getFrameColor(frameObj, ctx, points);\n                    ctx.beginPath();\n                    ctx.rect(points.startX, points.startY, points.width, points.height);\n                    ctx.rect(points.startX + frameObj.size, points.startY + frameObj.size, points.width -\n                        (2 * frameObj.size), points.height - (2 * frameObj.size));\n                    ctx.fill('evenodd');\n                    ctx.closePath();\n                    break;\n                case 'bevel':\n                    ctx.filter = 'none';\n                    ctx.fillStyle = this.getFrameColor(frameObj, ctx, points);\n                    ctx.beginPath();\n                    ctx.fillRect(points.startX, points.startY, points.width, points.height);\n                    ctx.closePath();\n                    points.startX += frameObj.size;\n                    points.startY += frameObj.size;\n                    points.width -= (2 * frameObj.size);\n                    points.height -= (2 * frameObj.size);\n                    while ((points.width - (2 * frameObj.size) < 40 ||\n                        points.height - (2 * frameObj.size) < 40) && frameObj.size > 0) {\n                        points.startX -= frameObj.size;\n                        points.startY -= frameObj.size;\n                        points.width += (2 * frameObj.size);\n                        points.height += (2 * frameObj.size);\n                        frameObj.size -= 20;\n                        points.startX += frameObj.size;\n                        points.startY += frameObj.size;\n                        points.width -= (2 * frameObj.size);\n                        points.height -= (2 * frameObj.size);\n                    }\n                    ctx.fillStyle = this.getFrameColor(frameObj, ctx, points);\n                    ctx.save();\n                    ctx.beginPath();\n                    ctx.moveTo(points.startX + valueForty, points.startY);\n                    ctx.lineTo(points.startX + points.width - valueForty, points.startY);\n                    ctx.quadraticCurveTo(points.startX + points.width, points.startY, points.startX + points.width, points.startY + valueForty);\n                    ctx.lineTo(points.startX + points.width, points.startY + points.height - valueForty);\n                    ctx.quadraticCurveTo(points.startX + points.width, points.startY + points.height, points.startX + points.width - valueForty, points.startY + points.height);\n                    ctx.lineTo(points.startX + valueForty, points.startY + points.height);\n                    ctx.quadraticCurveTo(points.startX, points.startY + points.height, points.startX, points.startY + points.height\n                        - valueForty);\n                    ctx.lineTo(points.startX, points.startY + valueForty);\n                    ctx.quadraticCurveTo(points.startX, points.startY, points.startX + valueForty, points.startY);\n                    ctx.closePath();\n                    ctx.clip();\n                    ctx.filter = filter === 'none' ? parent.canvasFilter : filter;\n                    if (ctx.canvas.id === parent.element.id + '_tempCanvas') {\n                        preventImg = null;\n                        ctx.filter = 'none';\n                        ctx.drawImage(parent.inMemoryCanvas, 0, 0);\n                        ctx.filter = filter === 'none' ? parent.canvasFilter : filter;\n                    }\n                    else {\n                        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n                        if (preventImg) {\n                            preventImg = null;\n                            if (parent.transform.zoomFactor !== 0) {\n                                this.isRotateZoom = true;\n                            }\n                            parent.notify('filter', { prop: 'getBevelFilter', onPropertyChange: false, value: { obj: bevelObj } });\n                            ctx.filter = bevelObj['bevelFilter'];\n                            this.updateCurrTransState('initial');\n                            this.drawImgToCtx(ctx, preventImg);\n                            this.updateCurrTransState('reverse');\n                            this.isRotateZoom = false;\n                            parent.frameObj.type = 'none';\n                            ctx.filter = 'none';\n                            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                                value: { ctx: ctx, shape: 'iterate', pen: 'iterate', isPreventApply: null } });\n                            parent.frameObj.type = 'bevel';\n                            ctx.filter = filter === 'none' ? parent.canvasFilter : filter;\n                        }\n                        else {\n                            parent.notify('filter', { prop: 'getBevelFilter', onPropertyChange: false, value: { obj: bevelObj } });\n                            ctx.filter = bevelObj['bevelFilter'];\n                            this.drawImgToCtx(ctx, preventImg);\n                        }\n                    }\n                    ctx.restore();\n                    break;\n                case 'line':\n                    this.drawImgToCtx(ctx, preventImg);\n                    tempLineWidth = ctx.lineWidth;\n                    ctx.lineWidth = frameObj.size / 10;\n                    for (var i = 0; i < parent.frameObj.amount; i++) {\n                        if (i > 0) {\n                            points.startX += frameObj.offset;\n                            points.startY += frameObj.offset;\n                            points.width -= (2 * frameObj.offset);\n                            points.height -= (2 * frameObj.offset);\n                        }\n                        var arcY2 = points.startY + points.height - frameObj.inset - frameObj.radius;\n                        var lineY = points.startY + frameObj.inset + frameObj.radius;\n                        var arcX2 = points.startX + points.width - frameObj.inset - frameObj.radius;\n                        var lineX = points.startX + frameObj.inset + frameObj.radius;\n                        var arcX1 = points.startX + frameObj.inset + frameObj.radius;\n                        var lineX2 = points.startX + points.width - frameObj.inset - frameObj.radius;\n                        var arcY1 = points.startY + frameObj.inset + frameObj.radius;\n                        var lineY2 = points.startY + points.height - frameObj.inset - frameObj.radius;\n                        if (arcY2 >= lineY && arcX2 >= lineX && arcX1 <= lineX2 && arcY1 <= lineY2) {\n                            ctx.filter = 'none';\n                            ctx.strokeStyle = this.getFrameColor(frameObj, ctx, points);\n                            if (frameObj.border === 'dashed') {\n                                ctx.setLineDash([ctx.lineWidth * 2.5, ctx.lineWidth * 1.5]);\n                            }\n                            else if (frameObj.border === 'dotted') {\n                                ctx.setLineDash([ctx.lineWidth, ctx.lineWidth]);\n                            }\n                            ctx.beginPath();\n                            ctx.moveTo(points.startX + frameObj.inset + frameObj.radius, points.startY + frameObj.inset);\n                            ctx.lineTo(points.startX + points.width - frameObj.inset - frameObj.radius, points.startY + frameObj.inset);\n                            ctx.arcTo(points.startX + points.width - frameObj.inset, points.startY + frameObj.inset, points.startX + points.width - frameObj.inset, points.startY + frameObj.inset + frameObj.radius, frameObj.radius);\n                            ctx.lineTo(points.startX + points.width - frameObj.inset, points.startY + points.height - frameObj.inset -\n                                frameObj.radius);\n                            ctx.arcTo(points.startX + points.width - frameObj.inset, points.startY + points.height - frameObj.inset, points.startX + points.width - frameObj.inset - frameObj.radius, points.startY + points.height\n                                - frameObj.inset, frameObj.radius);\n                            ctx.lineTo(points.startX + frameObj.inset + frameObj.radius, points.startY + points.height - frameObj.inset);\n                            ctx.arcTo(points.startX + frameObj.inset, points.startY + points.height - frameObj.inset, points.startX + frameObj.inset, points.startY + points.height - frameObj.inset - frameObj.radius, frameObj.radius);\n                            ctx.lineTo(points.startX + frameObj.inset, points.startY + frameObj.inset + frameObj.radius);\n                            ctx.arcTo(points.startX + frameObj.inset, points.startY + frameObj.inset, points.startX + frameObj.inset + frameObj.radius, points.startY + frameObj.inset, frameObj.radius);\n                            ctx.closePath();\n                            ctx.stroke();\n                            ctx.setLineDash([]);\n                        }\n                    }\n                    ctx.lineWidth = tempLineWidth;\n                    break;\n                case 'inset':\n                    this.drawImgToCtx(ctx, preventImg);\n                    ctx.filter = 'none';\n                    ctx.strokeStyle = this.getFrameColor(frameObj, ctx, points);\n                    tempLineWidth = ctx.lineWidth;\n                    ctx.lineWidth = frameObj.size / 10;\n                    ctx.beginPath();\n                    ctx.moveTo(points.startX + frameObj.offset, points.startY + frameObj.inset);\n                    ctx.lineTo(points.startX + points.width - frameObj.offset, points.startY + frameObj.inset);\n                    ctx.moveTo(points.startX + points.width - frameObj.inset, points.startY + frameObj.offset);\n                    ctx.lineTo(points.startX + points.width - frameObj.inset, points.startY + points.height - frameObj.offset);\n                    ctx.moveTo(points.startX + points.width - frameObj.offset, points.startY + points.height - frameObj.inset);\n                    ctx.lineTo(points.startX + frameObj.offset, points.startY + points.height - frameObj.inset);\n                    ctx.moveTo(points.startX + frameObj.inset, points.startY + points.height - frameObj.offset);\n                    ctx.lineTo(points.startX + frameObj.inset, points.startY + frameObj.offset);\n                    ctx.stroke();\n                    ctx.closePath();\n                    ctx.lineWidth = tempLineWidth;\n                    break;\n                case 'hook':\n                    this.drawImgToCtx(ctx, preventImg);\n                    ctx.filter = 'none';\n                    ctx.strokeStyle = this.getFrameColor(frameObj, ctx, points);\n                    tempLineWidth = ctx.lineWidth;\n                    ctx.lineWidth = frameObj.size / 10;\n                    ctx.beginPath();\n                    ctx.moveTo(points.startX + frameObj.inset + valueFifty, points.startY + frameObj.inset);\n                    ctx.lineTo(points.startX + frameObj.inset, points.startY + frameObj.inset);\n                    ctx.lineTo(points.startX + frameObj.inset, points.startY + frameObj.inset + valueFifty);\n                    ctx.moveTo(points.startX + points.width - frameObj.inset - valueFifty, points.startY + frameObj.inset);\n                    ctx.lineTo(points.startX + points.width - frameObj.inset, points.startY + frameObj.inset);\n                    ctx.lineTo(points.startX + points.width - frameObj.inset, points.startY + frameObj.inset + valueFifty);\n                    ctx.moveTo(points.startX + points.width - frameObj.inset - valueFifty, points.startY + points.height - frameObj.inset);\n                    ctx.lineTo(points.startX + points.width - frameObj.inset, points.startY + points.height - frameObj.inset);\n                    ctx.lineTo(points.startX + points.width - frameObj.inset, points.startY + points.height - frameObj.inset - valueFifty);\n                    ctx.moveTo(points.startX + frameObj.inset + valueFifty, points.startY + points.height - frameObj.inset);\n                    ctx.lineTo(points.startX + frameObj.inset, points.startY + points.height - frameObj.inset);\n                    ctx.lineTo(points.startX + frameObj.inset, points.startY + points.height - frameObj.inset - valueFifty);\n                    ctx.stroke();\n                    ctx.lineWidth = tempLineWidth;\n                    break;\n            }\n            if (parent.isCircleCrop || (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle')) {\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: ctx, isSave: ctx.canvas.id === parent.element.id + '_tempCanvas' ? true : null, isFlip: null } });\n            }\n            ctx.filter = filter;\n        }\n    };\n    Draw.prototype.triggerFrameChange = function (prevFrameSettings) {\n        var parent = this.parent;\n        var currFrameSettings = { type: parent.toPascalCase(parent.frameObj.type),\n            color: parent.frameObj.color, gradientColor: parent.frameObj.gradientColor, size: parent.frameObj.size,\n            inset: parent.frameObj.inset, offset: parent.frameObj.offset, borderRadius: parent.frameObj.radius,\n            frameLineStyle: parent.toPascalCase(parent.frameObj.border), lineCount: parent.frameObj.amount };\n        var frameChange = { cancel: false, previousFrameSetting: prevFrameSettings,\n            currentFrameSetting: currFrameSettings };\n        parent.trigger('frameChange', frameChange);\n        parent.editCompleteArgs = frameChange;\n        if (!frameChange.cancel) {\n            this.setFrameObj(frameChange.currentFrameSetting);\n        }\n        return frameChange;\n    };\n    Draw.prototype.setFrameObj = function (currFrameSettings) {\n        var parent = this.parent;\n        parent.frameObj.type = currFrameSettings.type.toLowerCase();\n        parent.frameObj.color = currFrameSettings.color;\n        parent.frameObj.gradientColor = currFrameSettings.gradientColor;\n        parent.frameObj.size = currFrameSettings.size;\n        parent.frameObj.inset = currFrameSettings.inset;\n        parent.frameObj.offset = currFrameSettings.offset;\n        parent.frameObj.radius = currFrameSettings.borderRadius;\n        parent.frameObj.border = currFrameSettings.frameLineStyle.toLowerCase();\n        parent.frameObj.amount = currFrameSettings.lineCount;\n    };\n    Draw.prototype.zoomToSel = function (activeObj, isToolbar) {\n        var parent = this.parent;\n        if (this.straightenActObj && JSON.stringify(this.straightenActObj.activePoint) === JSON.stringify(activeObj.activePoint)) {\n            parent.activeObj = extend({}, this.straightenActObj, null, true);\n            this.allowRedactStraighten = false;\n            if (parent.transform.straighten === 0) {\n                var destWidth = parent.img.destWidth;\n                var destHeight = parent.img.destHeight;\n                parent.transform.straighten = 360;\n                while (true) {\n                    if (!isNullOrUndefined(this.straightenInitZoom) &&\n                        (Math.round(parent.transform.zoomFactor * Math.pow(10, 3)) / Math.pow(10, 3)) >\n                            (Math.round(this.straightenInitZoom * Math.pow(10, 3)) / Math.pow(10, 3))) {\n                        this.setZoomPan('out');\n                        if (destWidth === parent.img.destWidth && destHeight === parent.img.destHeight) {\n                            this.performDummyZoom();\n                            break;\n                        }\n                        if (parent.transform.degree === 0) {\n                            parent.transform.zoomFactor -= 0.025;\n                            parent.transform.cropZoomFactor -= 0.025;\n                        }\n                    }\n                    else {\n                        this.performDummyZoom();\n                        break;\n                    }\n                }\n                parent.transform.straighten = 0;\n                parent.img = { destLeft: parent.img.destLeft, destTop: parent.img.destTop, destWidth: parent.img.destWidth,\n                    destHeight: parent.img.destHeight, srcLeft: parent.img.srcLeft, srcTop: parent.img.srcTop,\n                    srcWidth: parent.img.srcWidth, srcHeight: parent.img.srcHeight };\n            }\n            else {\n                if (isNullOrUndefined(this.straightenInitZoom)) {\n                    this.straightenInitZoom = parent.transform.zoomFactor;\n                }\n                if (this.straightenInitZoom - parent.transform.zoomFactor > 0) {\n                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                        value: { zoomFactor: -(this.straightenInitZoom - parent.transform.zoomFactor), zoomPoint: null, isResize: true } });\n                }\n                else if (this.straightenInitZoom - parent.transform.zoomFactor < 0) {\n                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                        value: { zoomFactor: (this.straightenInitZoom - parent.transform.zoomFactor), zoomPoint: null, isResize: true } });\n                }\n                parent.activeObj = extend({}, activeObj, null, true);\n                parent.transform.zoomFactor += 0.001;\n                this.calcStraightenedPoints(isToolbar);\n            }\n        }\n        else {\n            this.straightenActObj = extend({}, activeObj, null, true);\n            parent.activeObj = extend({}, this.straightenActObj, null, true);\n            this.straightenInitZoom = parent.transform.zoomFactor;\n            this.calcStraightenedPoints(isToolbar);\n        }\n    };\n    Draw.prototype.isDestPointSmall = function () {\n        var parent = this.parent;\n        var img = parent.img;\n        var destPoints = { startX: img.destLeft, startY: img.destTop,\n            width: img.destWidth, height: img.destHeight };\n        parent.notify('shape', { prop: 'straightenShapes', onPropertyChange: false });\n        var isSmall = false;\n        if (this.straightenDestPoints.destWidth && this.straightenDestPoints.destHeight &&\n            (img.destWidth < this.straightenDestPoints.destWidth || img.destHeight < this.straightenDestPoints.destHeight)) {\n            isSmall = true;\n        }\n        img.destLeft = destPoints.startX;\n        img.destTop = destPoints.startY;\n        img.destWidth = destPoints.width;\n        img.destHeight = destPoints.height;\n        parent.img = img;\n        return isSmall;\n    };\n    Draw.prototype.calcStraightenedPoints = function (isToolbar) {\n        var parent = this.parent;\n        var destWidth = parent.img.destWidth;\n        var destHeight = parent.img.destHeight;\n        if (isNullOrUndefined(parent.transform.zoomFactor)) {\n            parent.transform.zoomFactor += 0.025;\n        }\n        this.updateImgCanvasPoints();\n        var _loop_1 = function () {\n            if (this_1.isLinesIntersect() || this_1.isSelOutsideImg() || (isToolbar && this_1.isDestPointSmall())) {\n                parent.activeObj = extend({}, this_1.straightenActObj, null, true);\n                this_1.setZoomPan('in');\n                if (destWidth === parent.img.destWidth && destHeight === parent.img.destHeight) {\n                    this_1.performDummyZoom();\n                    return \"break\";\n                }\n                if (parent.transform.degree === 0) {\n                    parent.transform.zoomFactor += 0.025;\n                    parent.transform.cropZoomFactor += 0.025;\n                }\n                var points = this_1.imgCanvasPoints;\n                var left_1 = parent.img.destLeft;\n                var top_1 = parent.img.destTop;\n                var width_1 = parent.img.destWidth;\n                var height_1 = parent.img.destHeight;\n                points.forEach(function (point) {\n                    point.x = (point.ratioX * width_1) + left_1;\n                    point.y = (point.ratioY * height_1) + top_1;\n                });\n                this_1.imgCanvasPoints = points;\n            }\n            else {\n                this_1.performDummyZoom();\n                return \"break\";\n            }\n        };\n        var this_1 = this;\n        while (true) {\n            var state_1 = _loop_1();\n            if (state_1 === \"break\")\n                break;\n        }\n    };\n    Draw.prototype.performDummyZoom = function () {\n        var parent = this.parent;\n        parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n            value: { zoomFactor: 0.025, zoomPoint: null, isResize: true } });\n        parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n            value: { zoomFactor: -0.025, zoomPoint: null, isResize: true } });\n        var zoom = parent.transform.zoomFactor * 10;\n        if (zoom < 1) {\n            zoom = 1 + (zoom / 10);\n        }\n        parent.setProperties({ zoomSettings: { zoomFactor: zoom } }, true);\n        parent.notify('transform', { prop: 'setPreviousZoomValue', onPropertyChange: false,\n            value: { previousZoomValue: zoom } });\n        this.panToSel();\n    };\n    Draw.prototype.setZoomPan = function (type) {\n        var parent = this.parent;\n        var obj = { maxDimension: null };\n        if (parent.transform.degree === 0) {\n            parent.notify('transform', { prop: 'cropZoom', onPropertyChange: false,\n                value: { value: type === 'in' ? 0.025 : -0.025, selectionObj: parent.activeObj, obj: obj } });\n            parent.img.destWidth = obj['maxDimension']['width'];\n            parent.img.destHeight = obj['maxDimension']['height'];\n        }\n        else {\n            parent.transform.zoomFactor += (type === 'in' ? 0.025 : -0.025);\n            parent.transform.cropZoomFactor += (type === 'in' ? 0.025 : -0.025);\n            this.updateCurrTransState('initial');\n            this.isRotateZoom = true;\n            this.setDestPoints();\n            this.isRotateZoom = false;\n            this.updateCurrTransState('reverse');\n        }\n    };\n    Draw.prototype.updateImgCanvasPoints = function () {\n        var parent = this.parent;\n        var points = this.getImagePoints();\n        var obj = { width: 0, height: 0 };\n        var width = parent.baseImgCanvas.width;\n        var height = parent.baseImgCanvas.height;\n        parent.notify('crop', { prop: 'calcRatio', onPropertyChange: false,\n            value: { obj: obj, dimension: { width: width, height: height } } });\n        var ratio = obj;\n        width = parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0 ?\n            ratio.height : ratio.width;\n        height = parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0 ?\n            ratio.width : ratio.height;\n        var p1;\n        var p2;\n        var p3;\n        var p4;\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        if (parent.transform.straighten > 0) {\n            p1 = { x: destLeft + (points[0].x / width), y: destTop };\n            p2 = { x: destLeft + destWidth, y: destTop + (points[1].y / height) };\n            p3 = { x: destLeft + destWidth - (points[0].x / width), y: destTop + destHeight };\n            p4 = { x: destLeft, y: destTop + destHeight - (points[1].y / height) };\n        }\n        else if (parent.transform.straighten < 0) {\n            p1 = { x: destLeft, y: destTop + (points[0].y / height) };\n            p2 = { x: destLeft + (points[1].x / width), y: destTop };\n            p3 = { x: destLeft + destWidth, y: destTop + destHeight - (points[0].y / height) };\n            p4 = { x: destLeft + destWidth - (points[1].x / width), y: destTop + destHeight };\n        }\n        else if (parent.transform.straighten === 0) {\n            p1 = { x: destLeft, y: destTop };\n            p2 = { x: destLeft + destWidth, y: destTop };\n            p3 = { x: destLeft + destWidth, y: destTop + destHeight };\n            p4 = { x: destLeft, y: destTop + destHeight };\n        }\n        p1.ratioX = (p1.x - destLeft) / destWidth;\n        p1.ratioY = (p1.y - destTop) / destHeight;\n        p2.ratioX = (p2.x - destLeft) / destWidth;\n        p2.ratioY = (p2.y - destTop) / destHeight;\n        p3.ratioX = (p3.x - destLeft) / destWidth;\n        p3.ratioY = (p3.y - destTop) / destHeight;\n        p4.ratioX = (p4.x - destLeft) / destWidth;\n        p4.ratioY = (p4.y - destTop) / destHeight;\n        this.imgCanvasPoints = [p1, p2, p3, p4];\n    };\n    Draw.prototype.isLinesIntersect = function (obj) {\n        var parent = this.parent;\n        var point = parent.activeObj.activePoint;\n        if (parent.activeObj.rotatedAngle !== 0) {\n            var _a = parent.activeObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY, width = _a.width, height = _a.height;\n            var center = { x: startX + (width / 2), y: startY +\n                    (height / 2) };\n            var cosAngle = Math.cos(parent.activeObj.rotatedAngle);\n            var sinAngle = Math.sin(parent.activeObj.rotatedAngle);\n            var p1 = { x: cosAngle * (startX - center.x) - sinAngle * (startY - center.y) + center.x,\n                y: sinAngle * (startX - center.x) + cosAngle * (startY - center.y) + center.y };\n            var p2 = { x: cosAngle * (endX - center.x) - sinAngle * (startY - center.y) + center.x,\n                y: sinAngle * (endX - center.x) + cosAngle * (startY - center.y) + center.y };\n            var p3 = { x: cosAngle * (startX - center.x) - sinAngle * (endY - center.y) + center.x,\n                y: sinAngle * (startX - center.x) + cosAngle * (endY - center.y) + center.y };\n            var p4 = { x: cosAngle * (endX - center.x) - sinAngle * (endY - center.y) + center.x,\n                y: sinAngle * (endX - center.x) + cosAngle * (endY - center.y) + center.y };\n            var imgPoints_1 = this.imgCanvasPoints;\n            var isTopIntersect_1 = this.doIntersect(p1, p2, imgPoints_1[0], imgPoints_1[1]);\n            var isRightIntersect_1 = this.doIntersect(p2, p4, imgPoints_1[1], imgPoints_1[2]);\n            var isBottomIntersect_1 = this.doIntersect(p3, p4, imgPoints_1[2], imgPoints_1[3]);\n            var isLeftIntersect_1 = this.doIntersect(p1, p3, imgPoints_1[3], imgPoints_1[0]);\n            if (obj) {\n                obj['arr'] = [isTopIntersect_1, isRightIntersect_1, isBottomIntersect_1, isLeftIntersect_1];\n            }\n            return isTopIntersect_1 || isRightIntersect_1 || isBottomIntersect_1 || isLeftIntersect_1;\n        }\n        var imgPoints = this.imgCanvasPoints;\n        var isTopIntersect = this.doIntersect({ x: point.startX, y: point.startY }, { x: point.endX, y: point.startY }, imgPoints[0], imgPoints[1]);\n        var isRightIntersect = this.doIntersect({ x: point.endX, y: point.startY }, { x: point.endX, y: point.endY }, imgPoints[1], imgPoints[2]);\n        var isBottomIntersect = this.doIntersect({ x: point.startX, y: point.endY }, { x: point.endX, y: point.endY }, imgPoints[2], imgPoints[3]);\n        var isLeftIntersect = this.doIntersect({ x: point.startX, y: point.startY }, { x: point.startX, y: point.endY }, imgPoints[3], imgPoints[0]);\n        var isTopLeftInsideRect = this.isInsideRect(imgPoints[0]);\n        var isTopRightInsideRect = this.isInsideRect(imgPoints[1]);\n        var isBottomRightInsideRect = this.isInsideRect(imgPoints[2]);\n        var isBottomLeftInsideRect = this.isInsideRect(imgPoints[3]);\n        if (obj) {\n            obj['arr'] = [isTopIntersect, isRightIntersect, isBottomIntersect, isLeftIntersect];\n        }\n        return isTopIntersect || isRightIntersect || isBottomIntersect || isLeftIntersect ||\n            isTopLeftInsideRect || isTopRightInsideRect || isBottomRightInsideRect || isBottomLeftInsideRect ||\n            (imgPoints[0].x > point.startX && imgPoints[1].x < point.endX &&\n                imgPoints[2].x < point.endX && imgPoints[3].x > point.startX &&\n                imgPoints[0].y < point.startY && imgPoints[1].y < point.startY &&\n                imgPoints[2].y > point.endY && imgPoints[3].y > point.endY) ||\n            (imgPoints[0].x < point.startX && imgPoints[1].x > point.endX &&\n                imgPoints[2].x > point.endX && imgPoints[3].x < point.startX &&\n                imgPoints[0].y > point.startY && imgPoints[1].y > point.startY &&\n                imgPoints[2].y < point.endY && imgPoints[3].y < point.endY);\n    };\n    Draw.prototype.isSelOutsideImg = function () {\n        var parent = this.parent;\n        var points = this.imgCanvasPoints;\n        var actPoint = parent.activeObj.activePoint;\n        return (this.checkPointPosition(actPoint.startX, actPoint.startY, points[0].x, points[0].y, points[1].x, points[1].y, points[2].x, points[2].y, points[3].x, points[3].y) !== 'inside' ||\n            this.checkPointPosition(actPoint.endX, actPoint.startY, points[0].x, points[0].y, points[1].x, points[1].y, points[2].x, points[2].y, points[3].x, points[3].y) !== 'inside' ||\n            this.checkPointPosition(actPoint.startX, actPoint.endY, points[0].x, points[0].y, points[1].x, points[1].y, points[2].x, points[2].y, points[3].x, points[3].y) !== 'inside' ||\n            this.checkPointPosition(actPoint.endX, actPoint.endY, points[0].x, points[0].y, points[1].x, points[1].y, points[2].x, points[2].y, points[3].x, points[3].y) !== 'inside');\n    };\n    Draw.prototype.calcTriangleArea = function (x1, y1, x2, y2, x3, y3) {\n        return Math.abs((x1 * (y2 - y3) + x2 * (y3 - y1) + x3 * (y1 - y2)) / 2);\n    };\n    Draw.prototype.checkPointPosition = function (x, y, x1, y1, x2, y2, x3, y3, x4, y4) {\n        var area1 = this.calcTriangleArea(x, y, x1, y1, x4, y4);\n        var area2 = this.calcTriangleArea(x, y, x4, y4, x3, y3);\n        var area3 = this.calcTriangleArea(x, y, x3, y3, x2, y2);\n        var area4 = this.calcTriangleArea(x, y, x2, y2, x1, y1);\n        var areaRectangle = this.calcTriangleArea(x1, y1, x2, y2, x3, y3) + this.calcTriangleArea(x3, y3, x4, y4, x1, y1);\n        if (area1 + area2 + area3 + area4 > areaRectangle) {\n            return 'outside';\n        }\n        else if (area1 + area2 + area3 + area4 === areaRectangle && (area1 === 0 || area2 === 0 || area3 === 0 || area4 === 0)) {\n            return 'on';\n        }\n        else {\n            return 'inside';\n        }\n    };\n    Draw.prototype.getImagePoints = function () {\n        var point = [];\n        var parent = this.parent;\n        var degree = parent.transform.degree;\n        var width = parent.baseImg.width;\n        var height = parent.baseImg.height;\n        var obj = { dim: null, width: height, height: width, angle: parent.transform.straighten };\n        obj['dim'] = parent.getRotatedCanvasDim(obj['width'], obj['height'], obj['angle']);\n        var baseImgCanvasWidth = degree % 90 === 0 && degree % 180 !== 0 ? obj['dim']['width'] : parent.baseImgCanvas.width;\n        var baseImgCanvasHeight = degree % 90 === 0 && degree % 180 !== 0 ? obj['dim']['height'] : parent.baseImgCanvas.height;\n        var baseImgWidth = degree % 90 === 0 && degree % 180 !== 0 ? height : width;\n        var baseImgHeight = degree % 90 === 0 && degree % 180 !== 0 ? width : height;\n        var centerX = baseImgCanvasWidth / 2;\n        var centerY = baseImgCanvasHeight / 2;\n        var startX = centerX - (baseImgWidth / 2);\n        var startY = centerY - (baseImgHeight / 2);\n        var endX = centerX + (baseImgWidth / 2);\n        var endY = centerY + (baseImgHeight / 2);\n        var center = { x: centerX, y: centerY };\n        var radians = parent.transform.straighten * (Math.PI / 180);\n        var p1 = { x: Math.cos(radians) * (startX - center.x) - Math.sin(radians) * (startY - center.y) + center.x,\n            y: Math.sin(radians) * (startX - center.x) + Math.cos(radians) * (startY - center.y) + center.y };\n        var p2 = { x: Math.cos(radians) * (endX - center.x) - Math.sin(radians) * (startY - center.y) + center.x,\n            y: Math.sin(radians) * (endX - center.x) + Math.cos(radians) * (startY - center.y) + center.y };\n        var p3 = { x: Math.cos(radians) * (endX - center.x) - Math.sin(radians) * (endY - center.y) + center.x,\n            y: Math.sin(radians) * (endX - center.x) + Math.cos(radians) * (endY - center.y) + center.y };\n        var p4 = { x: Math.cos(radians) * (startX - center.x) - Math.sin(radians) * (endY - center.y) + center.x,\n            y: Math.sin(radians) * (startX - center.x) + Math.cos(radians) * (endY - center.y) + center.y };\n        point.push(p1);\n        point.push(p2);\n        point.push(p3);\n        point.push(p4);\n        return point;\n    };\n    Draw.prototype.doIntersect = function (a, b, c, d) {\n        var point1 = this.initiation(a, b, c);\n        var point2 = this.initiation(a, b, d);\n        var point3 = this.initiation(c, d, a);\n        var point4 = this.initiation(c, d, b);\n        if (point1 !== point2 && point3 !== point4) {\n            return true;\n        }\n        if (point1 === 0 && this.onSegment(a, c, b)) {\n            return true;\n        }\n        if (point2 === 0 && this.onSegment(a, d, b)) {\n            return true;\n        }\n        if (point3 === 0 && this.onSegment(c, a, d)) {\n            return true;\n        }\n        if (point4 === 0 && this.onSegment(c, b, d)) {\n            return true;\n        }\n        return false;\n    };\n    Draw.prototype.initiation = function (a, b, c) {\n        var value = (b.y - a.y) * (c.x - b.x) - (b.x - a.x) * (c.y - b.y);\n        if (value === 0) {\n            return 0;\n        }\n        return (value > 0) ? 1 : 2;\n    };\n    Draw.prototype.onSegment = function (a, b, c) {\n        if (b.x <= Math.max(a.x, c.x) && b.x >= Math.min(a.x, c.x) &&\n            b.y <= Math.max(a.y, c.y) && b.y >= Math.min(a.y, c.y)) {\n            return true;\n        }\n        return false;\n    };\n    Draw.prototype.isInsideRect = function (point) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var isInside = false;\n        if (point.x >= actPoint.startX && point.x <= actPoint.endX &&\n            point.y >= actPoint.startY && point.y <= actPoint.endY) {\n            isInside = true;\n        }\n        return isInside;\n    };\n    Draw.prototype.setDestForStraighten = function () {\n        var parent = this.parent;\n        if (isNullOrUndefined(this.straightenDestPoints)) {\n            var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n            // If straightening performed, then destination points are set in non-straightened state\n            parent.notify('shape', { prop: 'straightenShapes', onPropertyChange: false });\n            this.straightenDestPoints = extend({}, parent.img, {}, true);\n            parent.img.destLeft = destLeft;\n            parent.img.destTop = destTop;\n            parent.img.destWidth = destWidth;\n            parent.img.destHeight = destHeight;\n        }\n    };\n    Draw.prototype.drawRedact = function (canvasDraw, obj) {\n        var _a = obj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        var _b = obj.activePoint, width = _b.width, height = _b.height;\n        var isSaveCtx = false;\n        var canvas = canvasDraw.canvas;\n        if (canvas.id.indexOf('_tempCanvas') !== -1) {\n            isSaveCtx = true;\n        }\n        var img = this.parent.img;\n        if (width <= 0 || height <= 0) {\n            return;\n        }\n        else if (this.parent.isCropTab) {\n            canvasDraw.drawImage(obj.redactImage, 0, 0, obj.redactImage.width, obj.redactImage.height, startX, startY, width, height);\n        }\n        else {\n            var offscreenCanvas = document.createElement('canvas');\n            var offscreenCtx = offscreenCanvas.getContext('2d');\n            var imageWidth = canvas.width;\n            var imageHeight = canvas.height;\n            var tempRatio = Math.min(imageWidth, imageHeight) / 1000;\n            var straighten = this.parent.transform.straighten !== 0 ? this.parent.transform.straighten :\n                this.parent.cropObj.straighten;\n            if (this.allowRedactStraighten && straighten !== 0) {\n                var tempCanvas = document.createElement('canvas');\n                var tempCtx = tempCanvas.getContext('2d');\n                if (isSaveCtx) {\n                    tempCanvas.width = canvas.width;\n                    tempCanvas.height = canvas.height;\n                    tempCtx.drawImage(canvas, 0, 0);\n                }\n                else {\n                    tempCanvas.width = img.destWidth;\n                    tempCanvas.height = img.destHeight;\n                    tempCtx.drawImage(this.lowerContext.canvas, img.destLeft, img.destTop, img.destWidth, img.destHeight, 0, 0, img.destWidth, img.destHeight);\n                }\n                var radians = -straighten * Math.PI / 180;\n                var straightenCanvas = document.createElement('canvas');\n                var straightenCtx = straightenCanvas.getContext('2d');\n                straightenCanvas.width = tempCanvas.width;\n                straightenCanvas.height = tempCanvas.height;\n                if (img.destWidth > canvas.width && !isSaveCtx) {\n                    straightenCanvas.width = canvas.width;\n                }\n                if (img.destHeight > canvas.height && !isSaveCtx) {\n                    straightenCanvas.height = canvas.height;\n                }\n                straightenCtx.save();\n                straightenCtx.translate(tempCanvas.width / 2, tempCanvas.height / 2);\n                straightenCtx.rotate(radians);\n                straightenCtx.drawImage(tempCanvas, -tempCanvas.width / 2, -tempCanvas.height / 2);\n                straightenCtx.restore();\n                if (img.destLeft > 0 && !isSaveCtx) {\n                    startX -= img.destLeft;\n                    endX -= img.destLeft;\n                }\n                if (img.destTop > 0 && !isSaveCtx) {\n                    startY -= img.destTop;\n                    endY -= img.destTop;\n                }\n                var center = { x: startX + (width / 2), y: startY + (height / 2) };\n                var cosAngle = Math.cos(straighten * Math.PI / 180);\n                var sinAngle = Math.sin(straighten * Math.PI / 180);\n                var p1 = { x: cosAngle * (startX - center.x) - sinAngle * (startY - center.y) + center.x,\n                    y: sinAngle * (startX - center.x) + cosAngle * (startY - center.y) + center.y };\n                var p2 = { x: cosAngle * (endX - center.x) - sinAngle * (startY - center.y) + center.x,\n                    y: sinAngle * (endX - center.x) + cosAngle * (startY - center.y) + center.y };\n                var p3 = { x: cosAngle * (startX - center.x) - sinAngle * (endY - center.y) + center.x,\n                    y: sinAngle * (startX - center.x) + cosAngle * (endY - center.y) + center.y };\n                if (!isSaveCtx) {\n                    center = { x: img.destWidth / 2, y: img.destHeight / 2 };\n                    if (img.destWidth > canvas.width) {\n                        center.x = canvas.width / 2;\n                    }\n                    if (img.destHeight > canvas.height) {\n                        center.y = canvas.height / 2;\n                    }\n                }\n                else {\n                    center = { x: canvas.width / 2, y: canvas.height / 2 };\n                }\n                cosAngle = Math.cos(radians);\n                sinAngle = Math.sin(radians);\n                var newP1 = { x: cosAngle * (p1.x - center.x) - sinAngle * (p1.y - center.y) + center.x,\n                    y: sinAngle * (p1.x - center.x) + cosAngle * (p1.y - center.y) + center.y };\n                var newP2 = { x: cosAngle * (p2.x - center.x) - sinAngle * (p2.y - center.y) + center.x,\n                    y: sinAngle * (p2.x - center.x) + cosAngle * (p2.y - center.y) + center.y };\n                var newP3 = { x: cosAngle * (p3.x - center.x) - sinAngle * (p3.y - center.y) + center.x,\n                    y: sinAngle * (p3.x - center.x) + cosAngle * (p3.y - center.y) + center.y };\n                var tempWidth = isSaveCtx ? canvasDraw.canvas.width : img.destWidth;\n                var tempHeight = isSaveCtx ? canvasDraw.canvas.height : img.destHeight;\n                var rotatedWidth = Math.abs(tempWidth * Math.cos(radians)) + Math.abs(tempHeight * Math.sin(radians));\n                var rotatedHeight = Math.abs(tempWidth * Math.sin(radians)) + Math.abs(tempHeight * Math.cos(radians));\n                straightenCanvas.width = rotatedWidth;\n                straightenCanvas.height = rotatedHeight;\n                straightenCtx.save();\n                straightenCtx.translate(rotatedWidth / 2, rotatedHeight / 2);\n                straightenCtx.rotate(radians);\n                straightenCtx.drawImage(tempCanvas, -tempCanvas.width / 2, -tempCanvas.height / 2);\n                straightenCtx.restore();\n                if (this.parent.activeObj.redactType === 'blur') {\n                    offscreenCanvas.width = width;\n                    offscreenCanvas.height = height;\n                    offscreenCtx.drawImage(straightenCanvas, newP1.x + ((rotatedWidth - tempCanvas.width) / 2), newP1.y + ((rotatedHeight - tempCanvas.height) / 2), newP2.x - newP1.x, newP3.y - newP2.y, 0, 0, width, height);\n                }\n                else {\n                    var pixelSize = (obj.redactPixelate / 100) * 20;\n                    if (isSaveCtx) {\n                        pixelSize = tempRatio * (obj.redactPixelate / 100) * 35;\n                    }\n                    offscreenCanvas.width = Math.ceil(width / pixelSize);\n                    offscreenCanvas.height = Math.ceil(height / pixelSize);\n                    offscreenCtx.drawImage(straightenCanvas, newP1.x + ((rotatedWidth - tempCanvas.width) / 2), newP1.y + ((rotatedHeight - tempCanvas.height) / 2), newP2.x - newP1.x, newP3.y - newP2.y, 0, 0, offscreenCanvas.width, offscreenCanvas.height);\n                }\n            }\n            if (this.parent.activeObj.redactType === 'blur') {\n                if (straighten === 0) {\n                    offscreenCanvas.width = width;\n                    offscreenCanvas.height = height;\n                    offscreenCtx.drawImage((isSaveCtx) ? canvas : this.lowerContext.canvas, startX, startY, width, height, 0, 0, width, height);\n                }\n                if (isSaveCtx) {\n                    var blur_1 = tempRatio * ((obj.redactBlur / 100) * 34);\n                    offscreenCtx.filter = \"blur(\" + blur_1 + \"px)\";\n                }\n                else {\n                    offscreenCtx.filter = \"blur(\" + (obj.redactBlur / 100) * 17 + \"px)\";\n                }\n                offscreenCtx.drawImage(offscreenCanvas, 0, 0);\n                if (straighten === 0) {\n                    offscreenCtx.drawImage((isSaveCtx) ? canvas : this.lowerContext.canvas, startX, startY, width, height, 0, 0, width, height);\n                }\n                else {\n                    if (img.destLeft > 0 && !isSaveCtx) {\n                        startX += img.destLeft;\n                        endX += img.destLeft;\n                    }\n                    if (img.destTop > 0 && !isSaveCtx) {\n                        startY += img.destTop;\n                        endY += img.destTop;\n                    }\n                }\n                if (this.parent.isSafari) {\n                    this.parent.notify('filter', { prop: 'apply-filter', onPropertyChange: false, value: { context: offscreenCtx } });\n                }\n                canvasDraw.drawImage(offscreenCanvas, 0, 0, width, height, startX, startY, width, height);\n            }\n            else {\n                var pixelSize = (obj.redactPixelate / 100) * 20;\n                if (isSaveCtx) {\n                    pixelSize = tempRatio * (obj.redactPixelate / 100) * 35;\n                }\n                if (straighten === 0) {\n                    offscreenCanvas.width = Math.ceil(width / pixelSize);\n                    offscreenCanvas.height = Math.ceil(height / pixelSize);\n                    offscreenCtx.drawImage((isSaveCtx) ? canvas : this.lowerContext.canvas, startX, startY, width, height, 0, 0, offscreenCanvas.width, offscreenCanvas.height);\n                }\n                else {\n                    if (img.destLeft > 0 && !isSaveCtx) {\n                        startX += img.destLeft;\n                        endX += img.destLeft;\n                    }\n                    if (img.destTop > 0 && !isSaveCtx) {\n                        startY += img.destTop;\n                        endY += img.destTop;\n                    }\n                }\n                canvasDraw.imageSmoothingEnabled = false;\n                canvasDraw.drawImage(offscreenCanvas, 0, 0, offscreenCanvas.width, offscreenCanvas.height, startX, startY, width, height);\n            }\n            obj.redactImage = this.parent.createElement('canvas');\n            obj.redactImage.width = offscreenCanvas.width;\n            obj.redactImage.height = offscreenCanvas.height;\n            obj.redactImage.getContext('2d').drawImage(offscreenCanvas, 0, 0);\n            canvasDraw.beginPath();\n            canvasDraw.rect(startX, startY, width, height);\n            canvasDraw.rect(startX, startY, width, height);\n            canvasDraw.fill('evenodd');\n            canvasDraw.closePath();\n        }\n    };\n    return Draw;\n}());\nexport { Draw };\n","/* eslint-disable max-len */\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nvar Export = /** @class */ (function () {\n    function Export(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Export.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Export.prototype.addEventListener = function () {\n        this.parent.on('export', this.export, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Export.prototype.removeEventListener = function () {\n        this.parent.off('export', this.export);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Export.prototype.export = function (args) {\n        this.parent.notify('toolbar', { prop: 'refreshShapeDrawing', onPropertyChange: false });\n        this.updatePvtVar();\n        switch (args.prop) {\n            case 'export':\n                this.exportImg(args.value['type'], args.value['fileName'], args.value['imgQuality']);\n                break;\n            case 'exportToCanvas':\n                this.exportToCanvas(args.value['object']);\n                break;\n            case 'updateSaveContext':\n                this.updateSaveContext(args.value['context']);\n                break;\n            case 'setImageQuality':\n                this.imageQuality = args.value['value'];\n                break;\n            case 'drawAnnotation':\n                this.drawAnnotation(args.value['context'], args.value['ratio']);\n                break;\n        }\n    };\n    Export.prototype.getModuleName = function () {\n        return 'export';\n    };\n    Export.prototype.updatePvtVar = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n    };\n    Export.prototype.exportImg = function (type, fileName, imgQuality) {\n        var parent = this.parent;\n        var obj = { fileName: '' };\n        parent.notify('draw', { prop: 'getFileName', onPropertyChange: false, value: { obj: obj } });\n        var imageName = obj['fileName'];\n        if (!parent.disabled && parent.isImageLoaded) {\n            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: null } });\n            var obj_1 = { canvasFilter: this.parent.canvasFilter };\n            this.lowerContext.filter = obj_1['canvasFilter'];\n            type = type ? type : 'Png';\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: null } });\n            var beforeSave = { cancel: false, fileName: fileName ? fileName : imageName,\n                fileType: type, imageQuality: imgQuality };\n            parent.trigger('beforeSave', beforeSave);\n            this.beforeSaveEvent(beforeSave, type, fileName, imageName, imgQuality);\n        }\n    };\n    Export.prototype.beforeSaveEvent = function (observableSaveArgs, type, fileName, imageName, imgQuality) {\n        var parent = this.parent;\n        if (!observableSaveArgs.cancel) {\n            parent.currObjType.isSave = true;\n            fileName = observableSaveArgs.fileName ? observableSaveArgs.fileName : fileName;\n            var lowerCaseType = type.toLowerCase();\n            fileName = fileName || imageName;\n            if (lowerCaseType === 'svg') {\n                this.toSVGImg(fileName);\n            }\n            else {\n                this.toBlobFn(fileName, lowerCaseType, imgQuality);\n            }\n            var saved = { fileName: fileName ? fileName : imageName, fileType: type };\n            parent.trigger('saved', saved);\n            var actionArgs = { action: 'save', actionEventArgs: saved };\n            parent.triggerEditCompleteEvent(actionArgs);\n            parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            parent.lowerCanvas.style.left = parent.upperCanvas.style.left = '';\n            parent.lowerCanvas.style.top = parent.upperCanvas.style.top = '';\n            parent.lowerCanvas.style.maxWidth = parent.upperCanvas.style.maxWidth = '';\n            parent.lowerCanvas.style.maxHeight = parent.upperCanvas.style.maxHeight = '';\n        }\n    };\n    Export.prototype.toSVGImg = function (fileName) {\n        var parent = this.parent;\n        showSpinner(parent.element);\n        parent.element.style.opacity = '0.5';\n        var tempCanvas = this.exportToCanvas();\n        var dataUrl = tempCanvas.toDataURL();\n        hideSpinner(parent.element);\n        parent.element.style.opacity = '1';\n        var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        svg.setAttribute('width', tempCanvas.style.maxWidth);\n        svg.setAttribute('height', tempCanvas.style.maxHeight);\n        var XLinkNS = 'http://www.w3.org/1999/xlink';\n        var img = document.createElementNS('http://www.w3.org/2000/svg', 'image');\n        img.setAttributeNS(null, 'height', tempCanvas.height.toString());\n        img.setAttributeNS(null, 'width', tempCanvas.width.toString());\n        img.setAttributeNS(XLinkNS, 'xlink:href', dataUrl);\n        svg.appendChild(img);\n        var prefix = 'data:image/svg+xml;base64,';\n        var header = '<svg' + ' xmlns=\"http://www.w3.org/2000/svg\"' + ' xmlns:xlink=\"http://www.w3.org/1999/xlink\"'\n            + (\" width=\\\"\" + tempCanvas.width + \"\\\"\") + (\" height=\\\"\" + tempCanvas.height + \"\\\"\") + '>';\n        var footer = '</svg>';\n        var body = svg.innerHTML;\n        var data = header + body + footer;\n        var svgDataUrl = prefix + btoa(data);\n        if (fileName === null) {\n            return svgDataUrl;\n        }\n        else {\n            this.downloadImg(svgDataUrl, fileName + '.' + 'svg');\n            return null;\n        }\n    };\n    Export.prototype.toBlobFn = function (fileName, type, imgQuality) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        var parent = this.parent;\n        showSpinner(parent.element);\n        parent.element.style.opacity = '0.5';\n        if (!isNullOrUndefined(imgQuality)) {\n            imgQuality = imgQuality > 1 ? 1 : (imgQuality <= 0 ? 0.01 : imgQuality);\n            this.imageQuality = imgQuality ? imgQuality : null;\n        }\n        var tempCanvas = this.exportToCanvas();\n        var imagetype = type !== 'jpeg' ? 'image/png' : 'image/jpeg';\n        // eslint-disable-next-line @typescript-eslint/tslint/config\n        tempCanvas.toBlob(function (blob) {\n            var blobUrl = URL.createObjectURL(blob);\n            proxy.downloadImg(blobUrl, fileName + '.' + type);\n            hideSpinner(parent.element);\n            parent.element.style.opacity = '1';\n        }, imagetype, this.imageQuality ? this.imageQuality : null);\n    };\n    Export.prototype.exportToCanvas = function (object) {\n        var parent = this.parent;\n        var width;\n        var height;\n        var tempCropObj = extend({}, parent.cropObj, {}, true);\n        var tempObj = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: tempObj } });\n        var prevObj = tempObj['currObj'];\n        prevObj.objColl = extend([], parent.objColl, [], true);\n        prevObj.pointColl = extend([], parent.pointColl, [], true);\n        prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        if (this.parent.aspectWidth) {\n            parent.notify('undo-redo', { prop: 'setPreventUR', value: { bool: true } });\n            parent.notify('toolbar', { prop: 'resizeClick', value: { bool: false } });\n            parent.okBtn();\n            if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n                width = this.parent.aspectHeight;\n                height = this.parent.aspectWidth;\n            }\n            else {\n                width = this.parent.aspectWidth;\n                height = this.parent.aspectHeight;\n            }\n            parent.notify('undo-redo', { prop: 'setPreventUR', value: { bool: false } });\n        }\n        else if (parent.currSelectionPoint) {\n            width = parent.img.srcWidth;\n            height = parent.img.srcHeight;\n        }\n        else {\n            width = parent.baseImgCanvas.width;\n            height = parent.baseImgCanvas.height;\n        }\n        var obj = { width: 0, height: 0 };\n        parent.notify('crop', { prop: 'calcRatio', onPropertyChange: false,\n            value: { obj: obj, dimension: { width: width, height: height } } });\n        var ratio = obj;\n        var tempContextFilter = this.lowerContext.filter;\n        // Manipulating blur value\n        if (this.lowerContext.filter !== 'none') {\n            var splitWords = this.lowerContext.filter.split(' ');\n            var value = parseFloat(splitWords[5].split('(')[1]);\n            value *= ((ratio.width + ratio.height) / 2);\n            splitWords[5] = 'blur(' + value + 'px)';\n            this.lowerContext.filter = splitWords.join(' ');\n        }\n        var tempCanvas = parent.createElement('canvas', {\n            id: parent.element.id + '_tempCanvas', attrs: { name: 'canvasImage' }\n        });\n        var tempContext = tempCanvas.getContext('2d');\n        tempCanvas.width = width;\n        tempCanvas.height = height;\n        var dimObj = { width: 0, height: 0 };\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: width, height: height, obj: dimObj } });\n        var maxDimension = dimObj;\n        tempCanvas.style.maxWidth = maxDimension.width + 'px';\n        tempCanvas.style.maxHeight = maxDimension.height + 'px';\n        var temp = this.lowerContext.filter;\n        tempContext.filter = this.lowerContext.filter;\n        this.downScaleImgCanvas(tempContext, width, height);\n        this.lowerContext.filter = temp;\n        if (parent.transform.degree !== 0 || parent.transform.currFlipState !== '' || parent.transform.straighten !== 0) {\n            this.updateSaveContext(tempContext);\n            this.exportTransformedImage(tempContext);\n        }\n        if (parent.isSafari) {\n            parent.notify('filter', { prop: 'apply-filter', onPropertyChange: false, value: { context: tempContext } });\n        }\n        this.drawAnnotation(tempContext, ratio);\n        if (parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: tempContext, isSave: true, isFlip: null } });\n        }\n        this.updateFrame(tempContext, true);\n        this.lowerContext.filter = tempContextFilter;\n        parent.canvasFilter = tempContextFilter;\n        if (object) {\n            object['canvas'] = tempCanvas;\n        }\n        if (parent.aspectWidth) {\n            parent.objColl = [];\n            parent.pointColl = [];\n            parent.freehandCounter = 0;\n            parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                value: { obj: { selPointColl: [] } } });\n            parent.notify('draw', { prop: 'setCurrentObj', onPropertyChange: false, value: { obj: prevObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                value: { obj: { selPointColl: prevObj.selPointColl } } });\n            parent.cropObj = tempCropObj;\n            parent.objColl = extend([], prevObj.objColl, [], true);\n            parent.pointColl = extend([], prevObj.pointColl, [], true);\n            parent.freehandCounter = parent.pointColl.length;\n            parent.transform.straighten = 0;\n            this.lowerContext.filter = 'none';\n            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n            this.lowerContext.filter = prevObj.filter;\n            parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n            if (parent.isCircleCrop || (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle')) {\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            }\n        }\n        return tempCanvas;\n    };\n    Export.prototype.drawAnnotation = function (tempContext, ratio) {\n        var parent = this.parent;\n        var tempObjColl = extend([], parent.objColl, [], true);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var tempPointColl = extend([], parent.pointColl, [], true);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var nonRedact = parent.shapeColl.filter(function (item) { return item.shape !== 'redact'; });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var redact = parent.shapeColl.filter(function (item) { return item.shape === 'redact'; });\n        parent.shapeColl = redact.concat(nonRedact);\n        for (var i = 0; i < parent.shapeColl.length; i++) {\n            if (parent.shapeColl[i].order) {\n                if (parent.shapeColl[i].currIndex && parent.shapeColl[i].currIndex.indexOf('shape') > -1) {\n                    parent.objColl = [];\n                    parent.objColl.push(extend({}, parent.shapeColl[i], {}, true));\n                    this.drawShape(tempContext, ratio);\n                }\n                else if (parent.shapeColl[i].id && parent.shapeColl[i].id.indexOf('pen') > -1) {\n                    parent.pointColl = [];\n                    parent.freehandCounter = 0;\n                    parent.pointColl.push(extend({}, parent.shapeColl[i], {}, true));\n                    parent.freehandCounter = parent.pointColl.length;\n                    this.drawPen(tempContext, ratio);\n                }\n            }\n        }\n        parent.objColl = tempObjColl;\n        parent.pointColl = tempPointColl;\n        parent.freehandCounter = parent.pointColl.length;\n    };\n    Export.prototype.drawShape = function (tempContext, ratio) {\n        var parent = this.parent;\n        if (parent.objColl.length > 0) {\n            var temp = tempContext.filter;\n            tempContext.filter = 'none';\n            var indexObj = { index: null };\n            parent.notify('shape', { prop: 'getSmallestIndex', onPropertyChange: false, value: { obj: indexObj } });\n            var index = indexObj['index'];\n            var objColl = extend([], parent.objColl, [], true);\n            var tempObjColl = extend([], parent.objColl, [], true);\n            while (objColl.length > 0) {\n                var found = false;\n                for (var i = 0; i < objColl.length; i++) {\n                    var currentObj = objColl[i];\n                    if (isNullOrUndefined(currentObj.order)) {\n                        objColl.splice(i, 1);\n                        i--;\n                        continue;\n                    }\n                    if (currentObj.order === index) {\n                        var temp_1 = tempContext.filter;\n                        tempContext.filter = 'none';\n                        var currObj = objColl[i];\n                        var activePoint = currObj.activePoint;\n                        // Subtracting destination left and top points\n                        activePoint.startX -= parent.img.destLeft;\n                        activePoint.startY -= parent.img.destTop;\n                        activePoint.endX -= parent.img.destLeft;\n                        activePoint.endY -= parent.img.destTop;\n                        activePoint.width = activePoint.endX - activePoint.startX;\n                        activePoint.height = activePoint.endY - activePoint.startY;\n                        // Manipulating points\n                        activePoint.startX *= ratio.width;\n                        activePoint.startY *= ratio.height;\n                        activePoint.endX *= ratio.width;\n                        activePoint.endY *= ratio.height;\n                        activePoint.width = activePoint.endX - activePoint.startX;\n                        activePoint.height = activePoint.endY - activePoint.startY;\n                        currObj.strokeSettings.strokeWidth *= ((ratio.width + ratio.height) / 2);\n                        if (currObj.shape === 'text') {\n                            currObj.textSettings.fontSize *= ((ratio.width + ratio.height) / 2);\n                        }\n                        else if (currObj.shape === 'path') {\n                            for (var l = 0; l < currObj.pointColl.length; l++) {\n                                currObj.pointColl[l].x =\n                                    (currObj.pointColl[l].x - parent.img.destLeft) * ratio.width;\n                                currObj.pointColl[l].y =\n                                    (currObj.pointColl[l].y - parent.img.destTop) * ratio.height;\n                            }\n                        }\n                        else if (currObj.shape === 'image') {\n                            parent.activeObj = extend({}, objColl[i], {}, true);\n                            parent.notify('selection', { prop: 'upgradeImageQuality', onPropertyChange: false });\n                            objColl[i] = extend({}, parent.activeObj, {}, true);\n                        }\n                        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'saveContext', obj: objColl[i], isCropRatio: null,\n                                points: null, isPreventDrag: true, saveContext: tempContext, isPreventSelection: null } });\n                        tempContext.filter = temp_1;\n                        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                        index++;\n                        var indexBool = { bool: false };\n                        parent.notify('shape', { prop: 'isIndexInObjColl', onPropertyChange: false, value: { obj: indexBool, index: index } });\n                        if (!indexBool['bool']) {\n                            index++;\n                        }\n                        objColl.splice(i, 1);\n                        found = true;\n                        break; // Exit the loop to start from the beginning\n                    }\n                }\n                if (!found) {\n                    break; // If no matching order was found, exit the loop\n                }\n            }\n            tempContext.filter = temp;\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.objColl = tempObjColl;\n        }\n    };\n    Export.prototype.drawPen = function (tempContext, ratio) {\n        var parent = this.parent;\n        if (parent.freehandCounter > 0) {\n            var widthObj = { penStrokeWidth: null };\n            parent.notify('freehand-draw', { prop: 'getPenStrokeWidth', onPropertyChange: false, value: { obj: widthObj } });\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var tempPointColl = extend({}, parent.pointColl, {}, true);\n            for (var n = 0; n < parent.freehandCounter; n++) {\n                parent.points = extend([], parent.pointColl[n].points, []);\n                parent.notify('freehand-draw', { prop: 'setPointCounter', onPropertyChange: false, value: { value: 0 } });\n                var len = parent.points.length;\n                parent.pointColl[n].strokeWidth *= ((ratio.width + ratio.height) / 2);\n                for (var l = 0; l < len; l++) {\n                    parent.points[l].x = (parent.points[l].x - parent.img.destLeft) * ratio.width;\n                    parent.points[l].y = (parent.points[l].y - parent.img.destTop) * ratio.height;\n                }\n            }\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: tempContext, points: null } });\n            parent.pointColl = tempPointColl;\n            parent.notify('freehand-draw', { prop: 'setPenStrokeWidth', onPropertyChange: false, value: { value: widthObj['penStrokeWidth'] } });\n        }\n    };\n    Export.prototype.downScaleImgCanvas = function (ctx, width, height) {\n        var parent = this.parent;\n        var canvas = parent.baseImgCanvas;\n        var img = parent.baseImg;\n        var obj = { width: 0, height: 0 };\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: img.width, height: img.height, obj: obj, isImgShape: null } });\n        var bgObj = { color: null };\n        parent.notify('draw', { prop: 'getImageBackgroundColor', value: { obj: bgObj } });\n        if (bgObj['color'] !== '') {\n            ctx.fillStyle = bgObj['color'];\n            ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        }\n        if (obj['width'] > width && obj['height'] > height) {\n            var tempCanvas = parent.createElement('canvas', {\n                id: parent.element.id + '_downScaleCanvas', attrs: { name: 'canvasImage' }\n            });\n            tempCanvas.width = this.parent.img.srcWidth;\n            tempCanvas.height = this.parent.img.srcHeight;\n            tempCanvas.getContext('2d').drawImage(canvas, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, 0, 0, tempCanvas.width, tempCanvas.height);\n            parent.notify('draw', { prop: 'downScale', value: { canvas: tempCanvas, width: width, height: height } });\n            ctx.drawImage(tempCanvas, 0, 0);\n        }\n        else {\n            ctx.drawImage(parent.baseImgCanvas, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, 0, 0, width, height);\n        }\n    };\n    Export.prototype.updateFrame = function (tempContext, isAnnotation) {\n        if (this.parent.frameObj.type !== 'none') {\n            var temp = tempContext.filter;\n            tempContext.filter = 'none';\n            this.parent.notify('draw', { prop: 'applyFrame', value: { ctx: tempContext, frame: this.parent.frameObj.type, preventImg: isAnnotation } });\n            tempContext.filter = temp;\n        }\n    };\n    Export.prototype.downloadImg = function (blob, fileName) {\n        var a = document.createElement('a');\n        a.href = blob;\n        a.target = '_parent';\n        a.download = fileName;\n        (document.body || document.documentElement).appendChild(a);\n        a.click();\n        a.parentNode.removeChild(a);\n    };\n    Export.prototype.exportTransformedImage = function (tempContext) {\n        var parent = this.parent;\n        var degree = parent.transform.degree;\n        if (parent.rotateFlipColl.length > 0) {\n            for (var i = 0, len = parent.rotateFlipColl.length; i < len; i++) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var flip = parent.rotateFlipColl[i];\n                if (typeof flip === 'number') {\n                    this.exportRotate(tempContext, flip);\n                }\n                else if (flip === 'horizontal') {\n                    this.exportFlip(tempContext, true, false);\n                }\n                else if (flip === 'vertical') {\n                    this.exportFlip(tempContext, false, true);\n                }\n            }\n        }\n        parent.transform.degree = degree;\n    };\n    Export.prototype.exportRotate = function (tempContext, degree) {\n        var parent = this.parent;\n        tempContext.clearRect(0, 0, tempContext.canvas.width, tempContext.canvas.height);\n        this.setMaxDim(parent.transform.degree, tempContext.canvas);\n        tempContext.translate(tempContext.canvas.width / 2, tempContext.canvas.height / 2);\n        tempContext.rotate(Math.PI / 180 * degree);\n        tempContext.drawImage(parent.inMemoryCanvas, -tempContext.canvas.height / 2, -tempContext.canvas.width / 2, tempContext.canvas.height, tempContext.canvas.width);\n        this.updateSaveContext(tempContext);\n    };\n    Export.prototype.exportFlip = function (tempContext, flipHorizontal, flipVertical) {\n        tempContext.clearRect(0, 0, tempContext.canvas.width, tempContext.canvas.height);\n        if (flipHorizontal) {\n            tempContext.translate(tempContext.canvas.width, 0);\n            tempContext.scale(-1, 1);\n        }\n        if (flipVertical) {\n            tempContext.translate(0, tempContext.canvas.height);\n            tempContext.scale(1, -1);\n        }\n        tempContext.drawImage(this.parent.inMemoryCanvas, 0, 0);\n        this.updateSaveContext(tempContext);\n    };\n    Export.prototype.updateSaveContext = function (tempContext) {\n        var inMemoryContext = this.parent.inMemoryCanvas.getContext('2d');\n        tempContext.setTransform(1, 0, 0, 1, 0, 0);\n        var imageData = tempContext.getImageData(0, 0, tempContext.canvas.width, tempContext.canvas.height);\n        this.parent.inMemoryCanvas.width = imageData.width;\n        this.parent.inMemoryCanvas.height = imageData.height;\n        inMemoryContext.putImageData(imageData, 0, 0);\n    };\n    Export.prototype.setMaxDim = function (degree, tempCanvas) {\n        var newWidth;\n        var newHeight;\n        if (degree % 90 === 0 && degree % 180 !== 0) {\n            if (isNullOrUndefined(this.parent.currSelectionPoint)) {\n                newWidth = this.parent.baseImgCanvas.height;\n                newHeight = this.parent.baseImgCanvas.width;\n            }\n            else {\n                newWidth = this.parent.img.srcHeight;\n                newHeight = this.parent.img.srcWidth;\n            }\n        }\n        else if (degree % 180 === 0 || degree === 0) {\n            if (isNullOrUndefined(this.parent.currSelectionPoint)) {\n                newWidth = this.parent.baseImgCanvas.width;\n                newHeight = this.parent.baseImgCanvas.height;\n            }\n            else {\n                newWidth = this.parent.img.srcWidth;\n                newHeight = this.parent.img.srcHeight;\n            }\n        }\n        if (!isNullOrUndefined(this.parent.aspectWidth)) {\n            newWidth = this.parent.aspectWidth;\n            newHeight = this.parent.aspectHeight;\n        }\n        tempCanvas.width = newWidth;\n        tempCanvas.height = newHeight;\n        var obj = { width: 0, height: 0 };\n        this.parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: newWidth, height: newHeight, obj: obj, isImgShape: null } });\n        var maxDimension = obj;\n        tempCanvas.style.maxWidth = maxDimension.width + 'px';\n        tempCanvas.style.maxHeight = maxDimension.height + 'px';\n    };\n    return Export;\n}());\nexport { Export };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nvar Filter = /** @class */ (function () {\n    function Filter(parent) {\n        this.adjustmentLevel = { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0, blur: 0,\n            exposure: 0, transparency: 100, sharpen: false, bw: false }; // for toolbar slider value\n        this.tempAdjustmentLevel = { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0, blur: 0,\n            exposure: 0, transparency: 100, sharpen: false, bw: false }; // for temp toolbar slider value\n        this.adjustmentValue = ''; // for internal slider value\n        this.isBrightnessAdjusted = false;\n        this.bevelFilter = 'none';\n        this.tempAdjVal = { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0, blur: 0,\n            exposure: 0, transparency: 100, sharpen: false, bw: false };\n        this.tempFilVal = '';\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Filter.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Filter.prototype.addEventListener = function () {\n        this.parent.on('filter', this.filter, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Filter.prototype.removeEventListener = function () {\n        this.parent.off('filter', this.filter);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Filter.prototype.filter = function (args) {\n        this.updatePrivateVariables();\n        switch (args.prop) {\n            case 'finetuneImage':\n                this.finetuneImage(args.value['option'], args.value['value']);\n                break;\n            case 'applyImageFilter':\n                this.setFilter(args.value['option']);\n                break;\n            case 'update-finetunes':\n                this.updateFinetunes();\n                break;\n            case 'set-adjustment':\n                this.setAdjustment(args.value['operation']);\n                break;\n            case 'initFilter':\n                this.initFilter();\n                break;\n            case 'setCurrAdjValue':\n                this.setCurrAdjValue(args.value['type'], args.value['value']);\n                break;\n            case 'updateAdj':\n                this.updateAdj(args.value['type'], args.value['value'], args.value['isPreview'], args.value['ctx']);\n                break;\n            case 'getCurrentObj':\n                this.getCurrentObj(args.value['object']);\n                break;\n            case 'getAdjustmentLevel':\n                if (isNullOrUndefined(this.parent.activeObj.opacity)) {\n                    this.adjustmentLevel.transparency = 100;\n                }\n                else {\n                    this.adjustmentLevel.transparency = this.parent.activeObj.opacity * 100;\n                }\n                args.value['obj']['adjustmentLevel'] = this.adjustmentLevel;\n                break;\n            case 'setAdjustmentLevel':\n                this.adjustmentLevel = args.value['adjustmentLevel'];\n                break;\n            case 'getTempAdjustmentLevel':\n                args.value['obj']['tempAdjustmentLevel'] = this.tempAdjustmentLevel;\n                break;\n            case 'setTempAdjustmentLevel':\n                this.tempAdjustmentLevel = args.value['tempAdjustmentLevel'];\n                break;\n            case 'setAdjustmentValue':\n                this.adjustmentValue = args.value['adjustmentValue'];\n                break;\n            case 'getBrightnessAdjusted':\n                args.value['obj']['isBrightnessAdjusted'] = this.isBrightnessAdjusted;\n                break;\n            case 'setBrightnessAdjusted':\n                this.isBrightnessAdjusted = args.value['isBrightnessAdjusted'];\n                if (this.parent.currentFilter.split('_') && this.parent.currentFilter.split('_')[1] === 'cold') {\n                    this.isBrightnessAdjusted = false;\n                }\n                break;\n            case 'getBevelFilter':\n                args.value['obj']['bevelFilter'] = this.bevelFilter;\n                break;\n            case 'setBevelFilter':\n                this.bevelFilter = args.value['bevelFilter'];\n                break;\n            case 'setTempAdjVal':\n                this.tempAdjVal = extend({}, this.adjustmentLevel, {}, true);\n                break;\n            case 'setTempFilVal':\n                this.tempFilVal = this.parent.currentFilter;\n                break;\n            case 'reset':\n                this.reset();\n                break;\n            case 'apply-filter':\n                this.applyFilter(args.value['context']);\n                break;\n        }\n    };\n    Filter.prototype.updatePrivateVariables = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n    };\n    Filter.prototype.getModuleName = function () {\n        return 'filter';\n    };\n    Filter.prototype.reset = function () {\n        this.adjustmentLevel = { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0,\n            blur: 0, exposure: 0, transparency: 100, sharpen: false, bw: false };\n        this.tempAdjustmentLevel = { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0,\n            blur: 0, exposure: 0, transparency: 100, sharpen: false, bw: false };\n        this.adjustmentValue = this.parent.getDefaultFilter();\n        this.isBrightnessAdjusted = false;\n        this.bevelFilter = 'none';\n        this.tempFilVal = '';\n        this.tempAdjVal = { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0,\n            blur: 0, exposure: 0, transparency: 100, sharpen: false, bw: false };\n    };\n    Filter.prototype.updateFinetunes = function () {\n        var _this = this;\n        var parent = this.parent;\n        var fs = parent.finetuneSettings;\n        if (fs) {\n            var propertiesToSet = ['brightness', 'contrast', 'hue', 'saturation', 'exposure', 'opacity', 'blur'];\n            propertiesToSet.forEach(function (property) {\n                if (fs[property]) {\n                    _this.adjustmentLevel[property] = fs[property].defaultValue;\n                    _this.tempAdjustmentLevel[property] = fs[property].defaultValue;\n                }\n            });\n            parent.notify('draw', { prop: 'isInitialLoading', onPropertyChange: false, value: { isInitialLoading: true } });\n        }\n    };\n    Filter.prototype.initFilter = function () {\n        this.setFilterAdj('brightness', this.adjustmentLevel.brightness);\n        this.setFilterAdj('contrast', this.adjustmentLevel.contrast);\n        this.setFilterAdj('hue', this.adjustmentLevel.hue);\n        this.setFilterAdj('saturation', this.adjustmentLevel.saturation);\n        this.setFilterAdj('exposure', this.adjustmentLevel.exposure);\n        this.setFilterAdj('opacity', this.adjustmentLevel.opacity);\n        this.setFilterAdj('blur', this.adjustmentLevel.blur);\n    };\n    Filter.prototype.updateAdj = function (type, value, isPreview, ctx) {\n        var parent = this.parent;\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        var splitWords = this.lowerContext.filter.split(' ');\n        var values = [];\n        var brightness = this.getFilterValue(this.adjustmentLevel.brightness);\n        var excludedTypes = ['brightness', 'contrast', 'hue', 'saturation', 'exposure', 'opacity', 'blur'];\n        if (excludedTypes.indexOf(type) === -1) {\n            if (isNullOrUndefined(isPreview) && (this.adjustmentLevel.sharpen || this.adjustmentLevel.bw)) {\n                parent.isUndoRedo = true;\n                var temp = this.lowerContext.filter;\n                this.lowerContext.filter = 'none';\n                parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                    value: { ctx: this.lowerContext, shape: 'iterate', pen: 'iterate', isPreventApply: null } });\n                this.lowerContext.filter = temp;\n                parent.isUndoRedo = false;\n            }\n        }\n        var saturate;\n        var bright;\n        var saturatePercent;\n        var contrast;\n        var saturatePercentage;\n        switch (type) {\n            case 'brightness':\n                value = this.getFilterValue(this.adjustmentLevel.exposure) + (value * 0.005);\n                splitWords[0] = 'brightness(' + value + ')';\n                if (this.adjustmentLevel.brightness !== 0) {\n                    value = (this.adjustmentLevel.opacity / 100) - (this.adjustmentLevel.opacity * 0.3) / 100;\n                    splitWords[4] = 'opacity(' + value + ')';\n                }\n                else {\n                    value = this.adjustmentLevel.opacity / 100;\n                    splitWords[4] = 'opacity(' + value + ')';\n                }\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'contrast':\n                splitWords[1] = 'contrast(' + value + '%)';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'hue':\n                splitWords[2] = 'hue-rotate(' + value + 'deg)';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'saturation':\n                splitWords[3] = 'saturate(' + value + '%)';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'opacity':\n                if (parseFloat(splitWords[0].split('(')[1]) !== 1) {\n                    value -= 0.2;\n                }\n                if (value < 0) {\n                    value = 0;\n                }\n                splitWords[4] = 'opacity(' + value + ')';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'blur':\n                splitWords[5] = 'blur(' + value + 'px)';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'exposure':\n                if (value > 1) {\n                    value -= 1;\n                    value += brightness;\n                }\n                else if (value < 1) {\n                    value = 1 - value;\n                    value = brightness - value;\n                }\n                splitWords[0] = 'brightness(' + value + ')';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'chrome':\n                saturate = this.getSaturationFilterValue(this.adjustmentLevel.saturation);\n                saturate *= 100;\n                value = saturate + (saturate * 0.4);\n                splitWords[3] = 'saturate(' + value + '%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[6] = 'sepia(0%)';\n                splitWords[7] = 'grayscale(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'cold':\n                // Adjusting Brightness\n                bright = this.getFilterValue(this.adjustmentLevel.brightness);\n                bright *= 100;\n                value = bright * 0.9;\n                value *= 0.01;\n                splitWords[0] = 'brightness(' + value + ')';\n                // Adjusting Contrast\n                contrast = this.getFilterValue(this.adjustmentLevel.contrast);\n                contrast *= 100;\n                value = contrast + (contrast * 0.5);\n                splitWords[1] = 'contrast(' + value + '%)';\n                // Adjusting Saturation\n                saturatePercentage = this.getSaturationFilterValue(this.adjustmentLevel.saturation);\n                saturatePercentage *= 100;\n                value = saturatePercentage;\n                splitWords[3] = 'saturate(' + value + '%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[2] = values[2];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[6] = 'sepia(0%)';\n                splitWords[7] = 'grayscale(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'warm':\n                saturatePercent = this.getSaturationFilterValue(this.adjustmentLevel.saturation);\n                saturatePercent *= 100;\n                value = saturatePercent + (saturatePercent * 0.4);\n                splitWords[3] = 'saturate(' + value + '%)';\n                splitWords[6] = 'sepia(25%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[7] = 'grayscale(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'grayscale':\n                splitWords[7] = 'grayscale(100%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[3] = values[3];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[6] = 'sepia(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'sepia':\n                splitWords[6] = 'sepia(100%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[3] = values[3];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[7] = 'grayscale(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'invert':\n                splitWords[8] = 'invert(100%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[3] = values[3];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[6] = 'sepia(0%)';\n                splitWords[7] = 'grayscale(0%)';\n                break;\n        }\n        if (type !== 'sharpen' && type !== 'blackandwhite') {\n            if (isNullOrUndefined(isPreview)) {\n                if (type === 'default') {\n                    splitWords = this.getDefaultCurrentFilter(splitWords);\n                }\n                this.lowerContext.filter = splitWords.join(' ');\n            }\n            splitWords = this.setTempFilterValue(brightness, isPreview, splitWords, type);\n            parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: true } });\n            parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n            var tempFilter = void 0;\n            if (parent.frameObj.type === 'bevel') {\n                tempFilter = this.lowerContext.filter;\n                this.bevelFilter = tempFilter;\n            }\n            if (parent.transform.degree === 0 && parent.rotateFlipColl.length > 0) {\n                parent.img.destLeft += parent.panPoint.totalPannedPoint.x;\n                parent.img.destTop += parent.panPoint.totalPannedPoint.y;\n            }\n            parent.img.destLeft += parent.panPoint.totalPannedInternalPoint.x;\n            parent.img.destTop += parent.panPoint.totalPannedInternalPoint.y;\n            if (parent.transform.degree === 0) {\n                parent.notify('transform', { prop: 'setDestPointsForFlipState', onPropertyChange: false });\n            }\n            parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n            parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                value: { type: 'reverse', isPreventDestination: null, isRotatePan: null } });\n            parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: false } });\n            if (parent.transform.degree === 0 && parent.rotateFlipColl.length > 0) {\n                parent.img.destLeft += parent.panPoint.totalPannedPoint.x;\n                parent.img.destTop += parent.panPoint.totalPannedPoint.y;\n            }\n            splitWords = this.setTempFilterValue(brightness, isPreview, splitWords, type);\n            if (isNullOrUndefined(isPreview)) {\n                this.lowerContext.filter = splitWords.join(' ');\n            }\n            parent.initialAdjustmentValue = splitWords.join(' ');\n            tempFilter = this.lowerContext.filter;\n            this.lowerContext.filter = 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n                'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n            this.bevelFilter = tempFilter;\n            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'iterate', pen: 'iterate', isPreventApply: null } });\n            this.lowerContext.filter = tempFilter;\n            parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n            if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            }\n            this.isBrightnessAdjusted = brightness !== 1;\n        }\n        var filter = splitWords.join(' ');\n        if (ctx) {\n            ctx.filter = filter;\n        }\n    };\n    Filter.prototype.setTempFilterValue = function (brightness, isPreview, splitWords, type) {\n        if (isPreview) {\n            if (type === 'default') {\n                splitWords = this.getDefaultCurrentFilter(splitWords);\n            }\n            else if (brightness !== 1) {\n                var tempSplitWords = this.lowerContext.filter.split(' ');\n                tempSplitWords[4] = splitWords[4];\n                this.lowerContext.filter = tempSplitWords.join(' ');\n            }\n        }\n        return splitWords;\n    };\n    Filter.prototype.getDefaultCurrentFilter = function (splitWords) {\n        var values = this.adjustmentValue.split(' ');\n        splitWords = [values[0], values[1], values[2], values[3], values[4], values[5], 'sepia(0%)', 'grayscale(0%)', 'invert(0%)'];\n        return splitWords;\n    };\n    Filter.prototype.getFilterValue = function (value) {\n        return (value === 0) ? 1 : 1 + ((value * 0.5) / 100);\n    };\n    Filter.prototype.getSaturationFilterValue = function (value) {\n        return value === 0 ? 1 : 1 + (value / 100);\n    };\n    Filter.prototype.setFilterAdj = function (type, value) {\n        var parent = this.parent;\n        parent.notify('freehand-draw', { prop: 'apply-pen-draw', onPropertyChange: false });\n        this.adjustmentLevel[\"\" + type] = value;\n        switch (type) {\n            case 'contrast':\n            case 'exposure':\n                value = this.getFilterValue(value);\n                if (type === 'contrast') {\n                    value *= 100;\n                }\n                break;\n            case 'hue':\n                value *= 3;\n                break;\n            case 'saturation':\n                value = this.getSaturationFilterValue(value) * 100;\n                break;\n            case 'opacity':\n                if (value < 10) {\n                    value += 1;\n                }\n                value /= 100;\n                break;\n            case 'blur':\n                if (value !== 0) {\n                    value /= 20;\n                    // Since 0.5 is not working in blur we consider from 1\n                    value += 0.5;\n                }\n                break;\n        }\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var prevObj = this.getCurrentObj();\n        prevObj.objColl = extend([], parent.objColl, [], true);\n        prevObj.pointColl = extend([], parent.pointColl, [], true);\n        prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false, value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.updateAdj(type, value);\n        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: { operation: type, previousObj: prevObj,\n                previousObjColl: prevObj.objColl, previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                previousCropObj: prevCropObj, previousText: null, currentText: null, previousFilter: null, isCircleCrop: null\n            } });\n    };\n    Filter.prototype.setFilter = function (type) {\n        var parent = this.parent;\n        type = type.toLowerCase();\n        parent.notify('freehand-draw', { prop: 'apply-pen-draw', onPropertyChange: false });\n        var obj = { currentFilter: this.parent.currentFilter };\n        var prevFilter = obj['currentFilter'];\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var prevObj = this.getCurrentObj();\n        prevObj.objColl = extend([], parent.objColl, [], true);\n        prevObj.pointColl = extend([], parent.pointColl, [], true);\n        prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false, value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.updateAdj(type, null);\n        parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: type, previousObj: prevObj, previousObjColl: prevObj.objColl, previousPointColl: prevObj.pointColl,\n                previousSelPointColl: prevObj.selPointColl, previousCropObj: prevCropObj, previousText: null,\n                currentText: null, previousFilter: prevFilter, isCircleCrop: null } });\n    };\n    Filter.prototype.setAdjustment = function (type) {\n        var splitWords = this.lowerContext.filter.split(' ');\n        var value;\n        var valueArr;\n        switch (type) {\n            case 'brightness':\n                valueArr = splitWords[0].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                this.adjustmentLevel.brightness = this.setFilterValue(value);\n                break;\n            case 'contrast':\n                valueArr = splitWords[1].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                value /= 100;\n                this.adjustmentLevel.contrast = this.setFilterValue(value);\n                break;\n            case 'hue':\n                valueArr = splitWords[2].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                value /= 3;\n                this.adjustmentLevel.hue = value;\n                break;\n            case 'saturation':\n                valueArr = splitWords[3].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                value /= 100;\n                this.adjustmentLevel.saturation = this.setSaturationFilterValue(value);\n                break;\n            case 'opacity':\n                valueArr = splitWords[4].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                if (value === 0.45) {\n                    value = 40;\n                }\n                else if (value === 0.40) {\n                    value = 30;\n                }\n                else if (value === 0.35) {\n                    value = 20;\n                }\n                else if (value === 0.30) {\n                    value = 10;\n                }\n                else if (value === 0.25) {\n                    value = 0;\n                }\n                else {\n                    value *= 100;\n                }\n                this.adjustmentLevel.opacity = value;\n                break;\n            case 'blur':\n                valueArr = splitWords[5].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                value *= 20;\n                this.adjustmentLevel.blur = value;\n                break;\n            case 'exposure':\n                valueArr = splitWords[0].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                this.adjustmentLevel.exposure = this.setFilterValue(value);\n                break;\n        }\n    };\n    Filter.prototype.setFilterValue = function (value) {\n        return Math.round((value === 1) ? 0 : ((value - 1) * 100) / 0.5);\n    };\n    Filter.prototype.setSaturationFilterValue = function (value) {\n        return Math.round((value === 1) ? 0 : (value - 1) * 100);\n    };\n    Filter.prototype.finetuneImage = function (finetuneOption, value) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            switch (finetuneOption.toLowerCase()) {\n                case 'brightness':\n                    this.setFilterAdj('brightness', value);\n                    break;\n                case 'contrast':\n                    this.setFilterAdj('contrast', value);\n                    break;\n                case 'hue':\n                    this.setFilterAdj('hue', value);\n                    break;\n                case 'saturation':\n                    this.setFilterAdj('saturation', value);\n                    break;\n                case 'opacity':\n                    this.setFilterAdj('opacity', value);\n                    break;\n                case 'blur':\n                    this.setFilterAdj('blur', value);\n                    break;\n                case 'exposure':\n                    this.setFilterAdj('exposure', value);\n                    break;\n            }\n            this.parent.canvasFilter = this.lowerContext.filter;\n            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n        }\n    };\n    Filter.prototype.setCurrAdjValue = function (type, value) {\n        var parent = this.parent;\n        this.parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n        switch (type) {\n            case 'brightness':\n                this.setFilterAdj('brightness', value);\n                break;\n            case 'contrast':\n                this.setFilterAdj('contrast', value);\n                break;\n            case 'hue':\n                this.setFilterAdj('hue', value);\n                break;\n            case 'saturation':\n                this.setFilterAdj('saturation', value);\n                break;\n            case 'opacity':\n                this.setFilterAdj('opacity', value);\n                break;\n            case 'blur':\n                this.setFilterAdj('blur', value);\n                break;\n            case 'exposure':\n                this.setFilterAdj('exposure', value);\n                break;\n        }\n        parent.isFinetuneBtnClick = true;\n        parent.curFinetuneObjEvent = { finetune: parent.toPascalCase(type), value: value };\n    };\n    Filter.prototype.getCurrentObj = function (dummyObj) {\n        var parent = this.parent;\n        var tempFlipPanPointObj = { point: null };\n        parent.notify('crop', { prop: 'getTempFlipPanPoint', value: { obj: tempFlipPanPointObj } });\n        var zoomObj = { previousZoomValue: null };\n        parent.notify('transform', { prop: 'getPreviousZoomValue', value: { obj: zoomObj } });\n        var straightenObj = { zoomFactor: null };\n        parent.notify('draw', { prop: 'getStraightenInitZoom', value: { obj: straightenObj } });\n        var bgObj = { color: null };\n        parent.notify('draw', { prop: 'getImageBackgroundColor', value: { obj: bgObj } });\n        var obj = { cropZoom: 0, defaultZoom: 0, totalPannedPoint: { x: 0, y: 0 }, totalPannedClientPoint: { x: 0, y: 0 },\n            totalPannedInternalPoint: { x: 0, y: 0 }, tempFlipPanPoint: { x: 0, y: 0 }, activeObj: {},\n            rotateFlipColl: [], degree: 0, currFlipState: '', zoomFactor: 0, previousZoomValue: 0, straighten: 0,\n            destPoints: { startX: 0, startY: 0, width: 0, height: 0 }, frame: 'none',\n            srcPoints: { startX: 0, startY: 0, width: 0, height: 0 }, filter: '', isBrightAdjust: this.isBrightnessAdjusted,\n            aspectWidth: null, aspectHeight: null, straightenZoom: 0, adjustmentLevel: extend({}, this.tempAdjVal, {}, true),\n            currentFilter: this.tempFilVal, imageSource: '', bgColor: '' };\n        obj.cropZoom = parent.transform.cropZoomFactor;\n        obj.defaultZoom = parent.transform.defaultZoomFactor;\n        obj.zoomFactor = parent.zoomSettings.zoomFactor;\n        obj.previousZoomValue = zoomObj['previousZoomValue'];\n        obj.straightenZoom = straightenObj['zoomFactor'];\n        obj.totalPannedPoint = extend({}, parent.panPoint.totalPannedPoint, {}, true);\n        obj.totalPannedClientPoint = extend({}, parent.panPoint.totalPannedClientPoint, {}, true);\n        obj.totalPannedInternalPoint = extend({}, parent.panPoint.totalPannedInternalPoint, {}, true);\n        obj.tempFlipPanPoint = extend({}, tempFlipPanPointObj['point'], {}, true);\n        obj.activeObj = extend({}, parent.activeObj, {}, true);\n        obj.rotateFlipColl = extend([], parent.rotateFlipColl, [], true);\n        obj.degree = parent.transform.degree;\n        obj.straighten = parent.cropObj.straighten;\n        obj.currFlipState = parent.transform.currFlipState;\n        obj.destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, endX: 0, endY: 0,\n            width: parent.img.destWidth, height: parent.img.destHeight };\n        obj.srcPoints = { startX: parent.img.srcLeft, startY: parent.img.srcTop, endX: 0, endY: 0,\n            width: parent.img.srcWidth, height: parent.img.srcHeight };\n        obj.filter = this.lowerContext.filter;\n        obj.aspectWidth = parent.aspectWidth;\n        obj.aspectHeight = parent.aspectHeight;\n        obj.frame = parent.frameObj.type;\n        obj.frameObj = extend({}, parent.frameObj);\n        obj.imageSource = parent.baseImg.src;\n        obj.bgColor = bgObj['color'];\n        if (dummyObj) {\n            dummyObj['currObj'] = obj;\n        }\n        return obj;\n    };\n    /* Filter safari related codes */\n    Filter.prototype.getValFromPercentage = function (percentage) {\n        var val = parseFloat(percentage);\n        // check for percentages and divide by a hundred\n        if (/%\\s*?$/i.test(percentage)) {\n            val /= 100;\n        }\n        return val;\n    };\n    Filter.prototype.getValFromLength = function (length) {\n        return parseFloat(length);\n    };\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    Filter.prototype.parseFilterString = function (filterString) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var filterArray = [];\n        if (filterString && filterString !== 'none') {\n            filterArray = filterString.split(' ').map(function (filter) {\n                var _a = filter.match(/([a-z-]+)\\(([^)]+)\\)/).slice(1, 3), name = _a[0], value = _a[1];\n                return { filter: name, value: value };\n            });\n        }\n        return filterArray;\n    };\n    Filter.prototype.applyFilter = function (context) {\n        var _a = context.canvas, height = _a.height, width = _a.width;\n        var imageData = context.getImageData(0, 0, width, height);\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var filterArray = this.parseFilterString(context.filter);\n        for (var i = 0, len = filterArray.length; i < len; i++) {\n            switch (filterArray[i].filter) {\n                case 'blur':\n                    imageData = this.blur(context, imageData, filterArray[i].value);\n                    break;\n                case 'brightness':\n                    imageData = this.brightness(imageData, filterArray[i].value);\n                    break;\n                case 'contrast':\n                    imageData = this.contrast(imageData, filterArray[i].value);\n                    break;\n                case 'grayscale':\n                    imageData = this.grayscale(imageData, filterArray[i].value);\n                    break;\n                case 'hue-rotate':\n                    imageData = this.hueRotate(imageData, filterArray[i].value);\n                    break;\n                case 'invert':\n                    imageData = this.invert(imageData, filterArray[i].value);\n                    break;\n                case 'opacity':\n                    imageData = this.opacity(imageData, filterArray[i].value);\n                    break;\n                case 'saturate':\n                    imageData = this.saturate(context, imageData, filterArray[i].value);\n                    break;\n                case 'sepia':\n                    imageData = this.sepia(imageData, filterArray[i].value);\n                    break;\n            }\n        }\n        context.putImageData(imageData, 0, 0);\n    };\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    Filter.prototype.blur = function (context, imageData, radius) {\n        if (radius === void 0) { radius = '0'; }\n        var blurRadius = this.getValFromLength(radius);\n        blurRadius = Math.floor(blurRadius);\n        if (blurRadius <= 0) {\n            return imageData;\n        }\n        var _a = context.canvas, height = _a.height, width = _a.width;\n        var data = imageData.data;\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var blurredData = new Uint8ClampedArray(data.length);\n        for (var y = 0; y < height; y++) {\n            for (var x = 0; x < width; x++) {\n                var r = 0;\n                var g = 0;\n                var b = 0;\n                var a = 0;\n                var count = 0;\n                for (var dy = -blurRadius; dy <= blurRadius; dy++) {\n                    for (var dx = -blurRadius; dx <= blurRadius; dx++) {\n                        var nx = x + dx;\n                        var ny = y + dy;\n                        if (nx >= 0 && nx < width && ny >= 0 && ny < height) {\n                            var offset = (ny * width + nx) * 4;\n                            r += data[offset];\n                            g += data[offset + 1];\n                            b += data[offset + 2];\n                            a += data[offset + 3];\n                            count++;\n                        }\n                    }\n                }\n                var i = (y * width + x) * 4;\n                blurredData[i] = r / count;\n                blurredData[i + 1] = g / count;\n                blurredData[i + 2] = b / count;\n                blurredData[i + 3] = a / count;\n            }\n        }\n        for (var i = 0; i < data.length; i++) {\n            data[i] = blurredData[i];\n        }\n        return imageData;\n    };\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    Filter.prototype.brightness = function (imageData, percentage) {\n        if (percentage === void 0) { percentage = '1'; }\n        var factor = this.getValFromPercentage(percentage);\n        if (factor !== 1) {\n            var data = imageData.data;\n            var length_1 = data.length;\n            for (var i = 0; i < length_1; i += 4) {\n                data[i + 0] *= factor;\n                data[i + 1] *= factor;\n                data[i + 2] *= factor;\n            }\n        }\n        return imageData;\n    };\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    Filter.prototype.contrast = function (imageData, percentage) {\n        if (percentage === void 0) { percentage = '1'; }\n        var factor = this.getValFromPercentage(percentage);\n        if (factor !== 1) {\n            var data = imageData.data;\n            var length_2 = data.length;\n            for (var i = 0; i < length_2; i += 4) {\n                data[i + 0] = ((data[i + 0] / 255 - 0.5) * factor + 0.5) * 255;\n                data[i + 1] = ((data[i + 1] / 255 - 0.5) * factor + 0.5) * 255;\n                data[i + 2] = ((data[i + 2] / 255 - 0.5) * factor + 0.5) * 255;\n            }\n        }\n        return imageData;\n    };\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    Filter.prototype.grayscale = function (imageData, percentage) {\n        if (percentage === void 0) { percentage = '0'; }\n        var factor = this.getValFromPercentage(percentage);\n        if (factor > 0) {\n            var data = imageData.data;\n            var length_3 = data.length;\n            for (var i = 0; i < length_3; i += 4) {\n                var r = data[i];\n                var g = data[i + 1];\n                var b = data[i + 2];\n                // Calculate the grayscale value using the luminosity method\n                var gray = 0.299 * r + 0.587 * g + 0.114 * b;\n                // Blend the original color with the grayscale value based on the percentage\n                data[i] = r * (1 - factor) + gray * factor;\n                data[i + 1] = g * (1 - factor) + gray * factor;\n                data[i + 2] = b * (1 - factor) + gray * factor;\n            }\n        }\n        return imageData;\n    };\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    Filter.prototype.hueRotate = function (imageData, rotation) {\n        if (rotation === void 0) { rotation = '0deg'; }\n        var data = imageData.data;\n        var angle = parseFloat(rotation) * (Math.PI / 180);\n        if (angle > 0) {\n            var cosA = Math.cos(angle);\n            var sinA = Math.sin(angle);\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var matrix = [\n                0.213 + cosA * 0.787 - sinA * 0.213, 0.715 - cosA * 0.715 - sinA * 0.715, 0.072 - cosA * 0.072 + sinA * 0.928,\n                0.213 - cosA * 0.213 + sinA * 0.143, 0.715 + cosA * 0.285 + sinA * 0.140, 0.072 - cosA * 0.072 - sinA * 0.283,\n                0.213 - cosA * 0.213 - sinA * 0.787, 0.715 - cosA * 0.715 + sinA * 0.715, 0.072 + cosA * 0.928 + sinA * 0.072\n            ];\n            for (var i = 0; i < data.length; i += 4) {\n                var r = data[i];\n                var g = data[i + 1];\n                var b = data[i + 2];\n                // Apply the hue rotation matrix\n                data[i] = matrix[0] * r + matrix[1] * g + matrix[2] * b;\n                data[i + 1] = matrix[3] * r + matrix[4] * g + matrix[5] * b;\n                data[i + 2] = matrix[6] * r + matrix[7] * g + matrix[8] * b;\n            }\n        }\n        return imageData;\n    };\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    Filter.prototype.invert = function (imageData, percentage) {\n        if (percentage === void 0) { percentage = '0'; }\n        var factor = this.getValFromPercentage(percentage);\n        if (factor > 0) {\n            var data = imageData.data;\n            var length_4 = data.length;\n            for (var i = 0; i < length_4; i += 4) {\n                data[i + 0] = Math.abs(data[i + 0] - 255 * factor);\n                data[i + 1] = Math.abs(data[i + 1] - 255 * factor);\n                data[i + 2] = Math.abs(data[i + 2] - 255 * factor);\n            }\n        }\n        return imageData;\n    };\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    Filter.prototype.opacity = function (imageData, percentage) {\n        if (percentage === void 0) { percentage = '0'; }\n        var factor = this.getValFromPercentage(percentage);\n        if (factor >= 0) {\n            var data = imageData.data;\n            var length_5 = data.length;\n            for (var i = 3; i < length_5; i += 4) {\n                data[i] *= factor;\n            }\n        }\n        return imageData;\n    };\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    Filter.prototype.saturate = function (context, imageData, percentage) {\n        if (percentage === void 0) { percentage = '0'; }\n        var factor = this.getValFromPercentage(percentage);\n        if (factor !== 1) {\n            var _a = context.canvas, width = _a.width, height = _a.height;\n            var data = imageData.data;\n            var lumR = (1 - factor) * 0.3086;\n            var lumG = (1 - factor) * 0.6094;\n            var lumB = (1 - factor) * 0.082;\n            // tslint:disable-next-line no-bitwise\n            var shiftW = width << 2;\n            for (var j = 0; j < height; j++) {\n                var offset = j * shiftW;\n                for (var i = 0; i < width; i++) {\n                    // tslint:disable-next-line no-bitwise\n                    var pos = offset + (i << 2);\n                    var r = data[pos + 0];\n                    var g = data[pos + 1];\n                    var b = data[pos + 2];\n                    data[pos + 0] = (lumR + factor) * r + lumG * g + lumB * b;\n                    data[pos + 1] = lumR * r + (lumG + factor) * g + lumB * b;\n                    data[pos + 2] = lumR * r + lumG * g + (lumB + factor) * b;\n                }\n            }\n        }\n        return imageData;\n    };\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    Filter.prototype.sepia = function (imageData, percentage) {\n        if (percentage === void 0) { percentage = '0'; }\n        var factor = this.getValFromPercentage(percentage);\n        if (factor > 1) {\n            factor = 1;\n        }\n        if (factor > 0) {\n            var data = imageData.data;\n            var length_6 = data.length;\n            for (var i = 0; i < length_6; i += 4) {\n                var r = data[i + 0];\n                var g = data[i + 1];\n                var b = data[i + 2];\n                data[i + 0] =\n                    (0.393 * r + 0.769 * g + 0.189 * b) * factor + r * (1 - factor);\n                data[i + 1] =\n                    (0.349 * r + 0.686 * g + 0.168 * b) * factor + g * (1 - factor);\n                data[i + 2] =\n                    (0.272 * r + 0.534 * g + 0.131 * b) * factor + b * (1 - factor);\n            }\n        }\n        return imageData;\n    };\n    return Filter;\n}());\nexport { Filter };\n","import { EventHandler, extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ShapeType } from '../index';\nvar FreehandDrawing = /** @class */ (function () {\n    function FreehandDrawing(parent) {\n        this.fhdObj = { lastWidth: 0, lastVelocity: 0, time: 0, pointX: 0, pointY: 0 };\n        this.isFreehandDrawing = false;\n        this.freehandDownPoint = { x: 0, y: 0 };\n        this.isFreehandPointMoved = false;\n        this.pointCounter = 0;\n        // eslint-disable-next-line\n        this.selPointColl = {};\n        this.currFHDIdx = 0; // Specifies id for every freehand drawing - uses while deleting\n        this.selPoints = [];\n        this.dummyPoints = [];\n        this.tempFHDStyles = { strokeColor: null, fillColor: null, strokeWidth: null };\n        this.straightenPoint = { x: null, y: null, ratioX: null, ratioY: null };\n        this.straightenPointAngle = 0;\n        this.isMasking = false;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    FreehandDrawing.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    FreehandDrawing.prototype.addEventListener = function () {\n        this.parent.on('freehand-draw', this.draw, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    FreehandDrawing.prototype.removeEventListener = function () {\n        this.parent.off('freehand-draw', this.draw);\n        this.parent.off('destroyed', this.destroy);\n    };\n    FreehandDrawing.prototype.draw = function (args) {\n        this.updateFhdPvtVar();\n        switch (args.prop) {\n            case 'hoverFhd': {\n                this.hoverFhd(args.value['strokeColor'], args.value['strokeWidth']);\n                break;\n            }\n            case 'freehandDownHandler':\n                this.freehandDownHandler(args.value['e'], args.value['canvas']);\n                break;\n            case 'freehandUpHandler':\n                this.freehandUpHandler(args.value['e'], args.value['canvas'], args.value['context']);\n                break;\n            case 'handle-freehand-draw': {\n                var id = parseInt(args.value['id'].split('_')[1], 10) - 1;\n                if (this.isFHDIdx(id)) {\n                    this.deleteFhd(id, true);\n                }\n                break;\n            }\n            case 'freehandRedraw':\n                this.freehandRedraw(args.value['context'], args.value['points']);\n                break;\n            case 'deleteFhd': {\n                var id = parseInt(args.value['id'].split('_')[1], 10) - 1;\n                this.deleteFhd(id, true);\n                break;\n            }\n            case 'selectFhd': {\n                var id = null;\n                if (args.value['id']) {\n                    id = parseInt(args.value['id'].split('_')[1], 10) - 1;\n                }\n                this.selectFhd(id);\n                break;\n            }\n            case 'applyFhd':\n                this.applyFhd();\n                break;\n            case 'cancelFhd':\n                this.cancelFhd();\n                break;\n            case 'updateFHDCurPts':\n                this.updateFHDCurPts();\n                break;\n            case 'rotateFhdColl':\n                this.rotateFhdColl();\n                break;\n            case 'flipFHDColl':\n                this.flipFHDColl(args.value['value']);\n                break;\n            case 'panFHDColl':\n                this.panFHDColl(args.value['xDiff'], args.value['yDiff'], args.value['panRegion']);\n                break;\n            case 'updateFHDColl':\n                if (args.value && args.value['isPreventApply']) {\n                    this.updateFHDColl(args.value['isPreventApply']);\n                }\n                else {\n                    this.updateFHDColl();\n                }\n                break;\n            case 'zoomFHDColl':\n                this.zoomFHDColl(args.value['isPreventApply']);\n                break;\n            case 'apply-pen-draw':\n                this.applyPenDraw();\n                break;\n            case 'freeHandDraw':\n                this.freeHandDraw(args.value['value']);\n                break;\n            case 'isFHDIdx':\n                this.isFHDIdx(args.value['index'], args.value['obj']);\n                break;\n            case 'getSqPtFD':\n                this.getSqPtFD(args.value['idx'], args.value['obj']);\n                break;\n            case 'getSelPointColl':\n                args.value['obj']['selPointColl'] = extend([], this.selPointColl);\n                break;\n            case 'setSelPointColl':\n                this.selPointColl = extend([], args.value['obj']['selPointColl']);\n                break;\n            case 'pushSelPointColl':\n                this.selPointColl.push(extend([], args.value['obj']['selPointColl']));\n                break;\n            case 'setFreehandDrawHoveredIndex':\n                this.fhdHovIdx = args.value['index'];\n                break;\n            case 'getFreehandDrawHoveredIndex':\n                args.value['obj']['index'] = this.fhdHovIdx;\n                break;\n            case 'setPointCounter':\n                this.pointCounter = args.value['value'];\n                break;\n            case 'getPenStrokeWidth':\n                args.value['obj']['penStrokeWidth'] = this.penStrokeWidth;\n                break;\n            case 'setPenStrokeWidth':\n                this.penStrokeWidth = args.value['value'];\n                break;\n            case 'getCurrentFreehandDrawIndex':\n                args.value['obj']['currentFreehandDrawIndex'] = this.currFHDIdx;\n                break;\n            case 'setCurrentFreehandDrawIndex':\n                this.currFHDIdx = args.value['value'];\n                break;\n            case 'updateCropPtsForSel':\n                this.updateCropPtsForSel();\n                break;\n            case 'getFreehandDrawSelectedId':\n                args.value['obj']['freehandDrawSelectedId'] = this.fhdSelID;\n                break;\n            case 'resetFreehandDrawSelectedId':\n                this.fhdSelID = null;\n                break;\n            case 'getTempFreeHandDrawEditingStyles':\n                args.value['obj']['tempFreeHandDrawEditingStyles'] = this.tempFHDStyles;\n                break;\n            case 'setFreehandSelectedIndex':\n                this.fhdSelIdx = args.value['index'];\n                break;\n            case 'getFreehandSelectedIndex':\n                args.value['obj']['freehandSelectedIndex'] = this.fhdSelIdx;\n                break;\n            case 'setCenterSelPoints':\n                this.setCenterSelPoints();\n                break;\n            case 'getStraightenPoint':\n                args.value['obj']['straightenPoint'] = extend({}, this.straightenPoint, {}, true);\n                break;\n            case 'setStraightenPoint':\n                this.straightenPoint.x = args.value['x'];\n                this.straightenPoint.y = args.value['y'];\n                if (args.value['ratioX'] && args.value['ratioY']) {\n                    this.straightenPoint.ratioX = args.value['ratioX'];\n                    this.straightenPoint.ratioY = args.value['ratioY'];\n                }\n                break;\n            case 'resetStraightenPoint':\n                this.straightenPoint = { x: null, y: null, ratioX: null, ratioY: null };\n                this.prevStraightenObj = null;\n                this.straightenPointAngle = 0;\n                break;\n            case 'getStraightenPointAngle':\n                args.value['obj']['angle'] = this.straightenPointAngle;\n                break;\n            case 'reset':\n                this.reset();\n                break;\n            case 'triggerShapeChanging':\n                this.triggerShapeChanging(args.value['shapeChangingArgs']);\n                break;\n            case 'setMasking':\n                this.isMasking = args.value['value'];\n                break;\n            case 'resetSelPoints':\n                this.selPoints = [];\n                break;\n        }\n    };\n    FreehandDrawing.prototype.updateFhdPvtVar = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n        if (parent.upperCanvas) {\n            this.upperContext = parent.upperCanvas.getContext('2d');\n        }\n    };\n    FreehandDrawing.prototype.reset = function () {\n        this.fhdObj = { lastWidth: 0, lastVelocity: 0, time: 0, pointX: 0, pointY: 0 };\n        this.isFreehandDrawing = this.isFreehandPointMoved = false;\n        this.selPoints = [];\n        this.dummyPoints = [];\n        this.freehandDownPoint = { x: 0, y: 0 };\n        this.selPointColl = {};\n        this.straightenPointAngle = 0;\n        this.fhdHovIdx = null;\n        this.pointCounter = 0;\n        this.fhdSelID = null;\n        this.isMasking = false;\n        this.penStrokeWidth = undefined;\n        this.currFHDIdx = 0;\n        this.fhdSelIdx = null;\n        this.tempFHDStyles = { strokeColor: null, fillColor: null, strokeWidth: null };\n        this.straightenPoint = { x: null, y: null, ratioX: null, ratioY: null };\n        this.prevStraightenObj = null;\n    };\n    FreehandDrawing.prototype.getModuleName = function () {\n        return 'freehand-draw';\n    };\n    FreehandDrawing.prototype.hoverFhd = function (fillStyle, strokeWidth) {\n        var parent = this.parent;\n        var context = this.upperContext;\n        var idx = -1;\n        if (this.fhdHovIdx > -1) {\n            idx = this.fhdHovIdx;\n        }\n        else {\n            idx = this.fhdSelIdx;\n        }\n        parent.points = extend([], parent.pointColl[idx].points);\n        this.pointCounter = 0;\n        var len = parent.points.length;\n        var controlPoint1;\n        var controlPoint2;\n        var startPoint;\n        var endPoint;\n        var minStrokeWidth = 0;\n        var maxStrokeWidth = 0;\n        context.fillStyle = fillStyle ? fillStyle : parent.pointColl[idx].strokeColor;\n        context.strokeStyle = context.fillStyle;\n        minStrokeWidth = maxStrokeWidth = this.penStrokeWidth = strokeWidth ?\n            strokeWidth : parent.pointColl[idx].strokeWidth;\n        if (len === 1) {\n            controlPoint1 = controlPoint2 = startPoint = endPoint = parent.points[0];\n            this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n        }\n        for (var l = 0; l < len - 3; l++) {\n            if (parent.points[l + 1] && parent.points[l + 2] && parent.points[l + 2]) {\n                controlPoint1 = (this.calcCurveCP(parent.points[l + 0], parent.points[l + 1], parent.points[l + 2])).controlPoint2;\n                controlPoint2 = (this.calcCurveCP(parent.points[l + 1], parent.points[l + 2], parent.points[l + 3])).controlPoint1;\n                if (l === 0) {\n                    startPoint = parent.points[l];\n                }\n                else {\n                    startPoint = parent.points[l + 1];\n                }\n                endPoint = parent.points[l + 2];\n                this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n            }\n        }\n        context.closePath();\n        // Outer selection\n        var point = this.getSqPtFD(idx);\n        var tempLineWidth = context.lineWidth;\n        context.lineWidth = 2;\n        context.strokeStyle = parent.themeColl[parent.theme]['primaryColor'];\n        context.beginPath();\n        context.rect(point.startX, point.startY, point.width, point.height);\n        context.stroke();\n        context.closePath();\n        context.lineWidth = tempLineWidth;\n    };\n    FreehandDrawing.prototype.freehandDownHandler = function (e, canvas) {\n        var parent = this.parent;\n        parent.lowerCanvas = document.querySelector('#' + parent.element.id + '_lowerCanvas');\n        this.lowerContext = parent.lowerCanvas.getContext('2d');\n        parent.upperCanvas = document.querySelector('#' + parent.element.id + '_upperCanvas');\n        this.upperContext = parent.upperCanvas.getContext('2d');\n        this.fhdObj.time = new Date().getTime();\n        this.isFreehandDrawing = true;\n        if (e.type === 'mousedown') {\n            this.freehandDownPoint = { x: e.clientX, y: e.clientY };\n        }\n        else {\n            this.freehandDownPoint = { x: e.touches[0].clientX, y: e.touches[0].clientY };\n        }\n        this.isFreehandPointMoved = false;\n        EventHandler.add(canvas, 'mousemove touchmove', this.freehandMoveHandler, this);\n        var shapeSettings = { id: 'pen_' + (this.currFHDIdx + 1), type: ShapeType.FreehandDraw,\n            startX: this.freehandDownPoint.x, startY: this.freehandDownPoint.y,\n            strokeColor: parent.activeObj.strokeSettings.strokeColor, strokeWidth: this.penStrokeWidth,\n            points: null, index: parent.objColl.length + parent.freehandCounter + 1 };\n        var shapeChangingArgs = { cancel: false, action: 'draw-start', previousShapeSettings: shapeSettings,\n            currentShapeSettings: shapeSettings };\n        this.triggerShapeChanging(shapeChangingArgs);\n    };\n    FreehandDrawing.prototype.freehandUpHandler = function (e, canvas, context) {\n        var rect = canvas.getBoundingClientRect();\n        var parent = this.parent;\n        EventHandler.remove(canvas, 'mousemove touchmove', this.freehandMoveHandler);\n        if (parent.points.length === 0) {\n            if (e.type === 'mouseup') {\n                this.processPoint(e.clientX - rect.left, e.clientY - rect.top, true, context);\n            }\n            else if (e.type === 'touchend' && e.changedTouches) {\n                this.processPoint(e.changedTouches[0].clientX - rect.left, e.changedTouches[0].clientY - rect.top, true, context);\n            }\n            else {\n                if (!this.isFreehandPointMoved) {\n                    this.processPoint(this.freehandDownPoint.x - rect.left, this.freehandDownPoint.y - rect.top, true, context);\n                }\n            }\n        }\n        context.closePath();\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], parent.objColl, [], true);\n        prevObj.pointColl = extend([], parent.pointColl, [], true);\n        prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false, value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        var fhCnt = parent.freehandCounter;\n        var order = parent.objColl.length + parent.freehandCounter + 1;\n        parent.pointColl[fhCnt] = { points: extend([], parent.points), strokeColor: parent.activeObj.strokeSettings.strokeColor,\n            strokeWidth: this.penStrokeWidth, flipState: parent.transform.currFlipState,\n            id: 'pen_' + (this.currFHDIdx + 1), order: order };\n        parent.points = [];\n        this.dummyPoints = [];\n        this.selPointColl[fhCnt] = { points: extend([], this.selPoints) };\n        this.selPoints = [];\n        this.pointCounter = 0;\n        parent.freehandCounter++;\n        this.isFreehandDrawing = false;\n        if (!parent.isMaskImage) {\n            parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'freehand-draw', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n        }\n        var shapeSettings = { id: 'pen_' + (this.currFHDIdx + 1), type: ShapeType.FreehandDraw,\n            startX: this.freehandDownPoint.x, startY: this.freehandDownPoint.y,\n            strokeColor: parent.activeObj.strokeSettings.strokeColor, strokeWidth: this.penStrokeWidth,\n            points: parent.pointColl[this.currFHDIdx].points, index: order };\n        var shapeChangingArgs = { cancel: false, action: 'draw-end', previousShapeSettings: shapeSettings,\n            currentShapeSettings: shapeSettings };\n        this.triggerShapeChanging(shapeChangingArgs);\n        this.currFHDIdx++;\n    };\n    FreehandDrawing.prototype.freehandMoveHandler = function (e) {\n        this.isFreehandPointMoved = true;\n        var rect = this.parent.upperCanvas.getBoundingClientRect();\n        var x;\n        var y;\n        if (e.type === 'mousemove') {\n            x = e.clientX - rect.left;\n            y = e.clientY - rect.top;\n        }\n        else {\n            x = e.touches[0].clientX - rect.left;\n            y = e.touches[0].clientY - rect.top;\n        }\n        if (this.isFreehandDrawing) {\n            this.upperContext.fillStyle = this.parent.activeObj.strokeSettings.strokeColor;\n            if (this.parent.isMaskImage) {\n                this.upperContext.globalCompositeOperation = 'xor';\n            }\n            this.processPoint(x, y, false, this.upperContext);\n        }\n    };\n    FreehandDrawing.prototype.processPoint = function (x, y, mouseDown, context) {\n        var parent = this.parent;\n        var lastPoint = this.point(x, y, new Date().getTime());\n        lastPoint = parent.points.length > 0 && parent.points[parent.points.length - 1];\n        var isLastPointTooClose = lastPoint ? this.distanceTo(lastPoint) <= 5 : false;\n        var controlPoint1;\n        var controlPoint2;\n        var startPoint;\n        var endPoint;\n        this.selPoints.push({ x: x, y: y, ratioX: (x - parent.img.destLeft) / parent.img.destWidth,\n            ratioY: (y - parent.img.destTop) / parent.img.destHeight, time: this.fhdObj.time });\n        if (!lastPoint || !(lastPoint && isLastPointTooClose) || mouseDown) {\n            this.fhdObj.time = new Date().getTime();\n            parent.points.push({ x: x, y: y, ratioX: (x - parent.img.destLeft) / parent.img.destWidth,\n                ratioY: (y - parent.img.destTop) / parent.img.destHeight,\n                time: this.fhdObj.time });\n            this.dummyPoints.push({ x: x, y: y, ratioX: (x - parent.img.destLeft) / parent.img.destWidth,\n                ratioY: (y - parent.img.destTop) / parent.img.destHeight,\n                time: this.fhdObj.time });\n            if (this.dummyPoints.length > 2) {\n                if (this.dummyPoints.length === 3) {\n                    this.dummyPoints.unshift(this.dummyPoints[0]);\n                }\n                var p0 = this.dummyPoints[0];\n                var p1 = this.dummyPoints[1];\n                var p2 = this.dummyPoints[2];\n                var p3 = this.dummyPoints[3];\n                controlPoint1 = this.calcCurveCP(p0, p1, p2).controlPoint2;\n                controlPoint2 = this.calcCurveCP(p1, p2, p3).controlPoint1;\n                startPoint = this.dummyPoints[1];\n                endPoint = this.dummyPoints[2];\n                var minStrokeWidth = 0.5;\n                var maxStrokeWidth = 5;\n                if (!isNullOrUndefined(this.penStrokeWidth)) {\n                    minStrokeWidth = maxStrokeWidth = this.penStrokeWidth;\n                }\n                this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n                this.pointCounter++;\n                this.dummyPoints.shift();\n            }\n            if (mouseDown) {\n                controlPoint1 = controlPoint2 = startPoint = endPoint = { x: x, y: y, time: new Date().getTime() };\n                var minStrokeWidth = 0.5;\n                var maxStrokeWidth = 5;\n                if (!isNullOrUndefined(this.penStrokeWidth)) {\n                    minStrokeWidth = maxStrokeWidth = this.penStrokeWidth;\n                }\n                this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n            }\n        }\n    };\n    FreehandDrawing.prototype.calcCurveCP = function (p1, p2, p3) {\n        if (!p2) {\n            p2 = p1;\n        }\n        if (!p3) {\n            p3 = p2;\n        }\n        var dx1 = p1.x - p2.x;\n        var dy1 = p1.y - p2.y;\n        var dx2 = p2.x - p3.x;\n        var dy2 = p2.y - p3.y;\n        var m1 = { x: (p1.x + p2.x) / 2.0, y: (p1.y + p2.y) / 2.0 };\n        var m2 = { x: (p2.x + p3.x) / 2.0, y: (p2.y + p3.y) / 2.0 };\n        var l1 = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n        var l2 = Math.sqrt(dx2 * dx2 + dy2 * dy2);\n        var dxm = (m1.x - m2.x);\n        var dym = (m1.y - m2.y);\n        var k = l2 / (l1 + l2);\n        var cm = { x: m2.x + dxm * k, y: m2.y + dym * k };\n        var tx = p2.x - cm.x;\n        var ty = p2.y - cm.y;\n        return {\n            controlPoint1: this.point(m1.x + tx, m1.y + ty, 0),\n            controlPoint2: this.point(m2.x + tx, m2.y + ty, 0)\n        };\n    };\n    FreehandDrawing.prototype.point = function (x, y, time) {\n        this.fhdObj.pointX = x;\n        this.fhdObj.pointY = y;\n        return { x: this.fhdObj.pointX, y: this.fhdObj.pointY, time: time };\n    };\n    FreehandDrawing.prototype.startDraw = function (context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth) {\n        var tempVelocity;\n        tempVelocity = this.pointVelocity(startPoint);\n        tempVelocity = 0.7 * tempVelocity + (1 - 0.7) * this.fhdObj.lastVelocity;\n        var newWidth = Math.max(maxStrokeWidth / (0.7 + 1), minStrokeWidth);\n        this.drawCurve(this.fhdObj.time, newWidth, context, controlPoint1, controlPoint2, startPoint, endPoint, maxStrokeWidth);\n        this.fhdObj.lastVelocity = tempVelocity;\n        this.fhdObj.time = newWidth;\n    };\n    FreehandDrawing.prototype.pointVelocity = function (startPoint) {\n        return (this.fhdObj.time !== startPoint.time) ? this.distanceTo(startPoint) /\n            (this.fhdObj.time - startPoint.time) : 0;\n    };\n    FreehandDrawing.prototype.distanceTo = function (start) {\n        return Math.sqrt(Math.pow(this.fhdObj.pointX - start.x, 2) + Math.pow(this.fhdObj.pointY - start.y, 2));\n    };\n    FreehandDrawing.prototype.drawCurve = function (startWidth, endWidth, context, controlPoint1, controlPoint2, startPoint, endPoint, maxStrokeWidth) {\n        var width;\n        var i;\n        var t1;\n        var t2;\n        var t3;\n        var u1;\n        var u2;\n        var u3;\n        var x;\n        var y;\n        var widthValue = endWidth - startWidth;\n        var bezierLength = this.bezierLength(controlPoint1, controlPoint2, startPoint, endPoint);\n        var drawSteps = Math.ceil(bezierLength) * 2;\n        context.beginPath();\n        for (i = 0; i < drawSteps; i++) {\n            t1 = i / drawSteps;\n            t2 = t1 * t1;\n            t3 = t2 * t1;\n            u1 = 1 - t1;\n            u2 = u1 * u1;\n            u3 = u2 * u1;\n            x = u3 * startPoint.x;\n            x += 3 * u2 * t1 * controlPoint1.x;\n            x += 3 * u1 * t2 * controlPoint2.x;\n            x += t3 * endPoint.x;\n            y = u3 * startPoint.y;\n            y += 3 * u2 * t1 * controlPoint1.y;\n            y += 3 * u1 * t2 * controlPoint2.y;\n            y += t3 * endPoint.y;\n            width = Math.min(startWidth + t3 * widthValue, maxStrokeWidth);\n            this.drawArc(x, y, width, context);\n        }\n        context.closePath();\n        context.fill();\n    };\n    FreehandDrawing.prototype.bezierLength = function (controlPoint1, controlPoint2, startPoint, endPoint) {\n        var steps = 10;\n        var length = 0;\n        var i;\n        var t;\n        var pointX1;\n        var pointY1;\n        var pointX2;\n        var pointY2;\n        var pointX3;\n        var pointY3;\n        for (i = 0; i <= steps; i++) {\n            t = i / steps;\n            pointX1 = this.bezierPoint(t, startPoint.x, controlPoint1.x, controlPoint2.x, endPoint.x);\n            pointY1 = this.bezierPoint(t, startPoint.y, controlPoint1.y, controlPoint2.y, endPoint.y);\n            if (i > 0) {\n                pointX3 = pointX1 - pointX2;\n                pointY3 = pointY1 - pointY2;\n                length += Math.sqrt(pointX3 * pointX3 + pointY3 * pointY3);\n            }\n            pointX2 = pointX1;\n            pointY2 = pointY1;\n        }\n        return length;\n    };\n    FreehandDrawing.prototype.bezierPoint = function (t, startPoint, cp1, cp2, endPoint) {\n        return startPoint * (1.0 - t) * (1.0 - t) * (1.0 - t) + 3.0 * cp1 * (1.0 - t) * (1.0 - t) * t + 3.0 *\n            cp2 * (1.0 - t) * t * t + endPoint * t * t * t;\n    };\n    FreehandDrawing.prototype.drawArc = function (x, y, size, context) {\n        var img = this.parent.img;\n        if ((x > img.destLeft && y > img.destTop && x < (img.destLeft + img.destWidth) &&\n            y < (img.destTop + img.destHeight) ||\n            (context !== this.lowerContext && context !== this.upperContext))) {\n            context.moveTo(x, y);\n            context.arc(x, y, size, 0, 2 * Math.PI, false);\n        }\n    };\n    FreehandDrawing.prototype.freehandRedraw = function (context, points) {\n        var parent = this.parent;\n        var temp = context.filter;\n        context.filter = 'none';\n        if (points) {\n            parent.pointColl[parent.freehandCounter] = { points: points, strokeColor: parent.activeObj.strokeSettings.strokeColor,\n                strokeWidth: this.penStrokeWidth, flipState: parent.transform.currFlipState,\n                id: 'pen_' + (parent.freehandCounter + 1), order: parent.objColl.length + parent.freehandCounter + 1 };\n            this.selPointColl[parent.freehandCounter] = extend({}, parent.pointColl[parent.freehandCounter], {}, true);\n            parent.freehandCounter++;\n        }\n        if (parent.freehandCounter > 0) {\n            for (var n = 0; n < parent.freehandCounter; n++) {\n                parent.points = extend([], parent.pointColl[n].points);\n                this.pointCounter = 0;\n                var len = parent.points.length;\n                var controlPoint1 = void 0;\n                var controlPoint2 = void 0;\n                var startPoint = void 0;\n                var endPoint = void 0;\n                var minStrokeWidth = void 0;\n                var maxStrokeWidth = void 0;\n                if (len > 0) {\n                    context.fillStyle = parent.pointColl[n].strokeColor;\n                    minStrokeWidth = maxStrokeWidth = this.penStrokeWidth = parent.pointColl[n].strokeWidth;\n                }\n                if (len === 1) {\n                    controlPoint1 = controlPoint2 = startPoint = endPoint = parent.points[0];\n                    this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n                }\n                for (var l = 0; l < len - 3; l++) {\n                    if (parent.points[l + 1] && parent.points[l + 2] && parent.points[l + 2]) {\n                        controlPoint1 = (this.calcCurveCP(parent.points[l + 0], parent.points[l + 1], parent.points[l + 2])).controlPoint2;\n                        controlPoint2 = (this.calcCurveCP(parent.points[l + 1], parent.points[l + 2], parent.points[l + 3])).controlPoint1;\n                        if (l === 0) {\n                            startPoint = parent.points[l];\n                        }\n                        else {\n                            startPoint = parent.points[l + 1];\n                        }\n                        endPoint = parent.points[l + 2];\n                        this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n                    }\n                }\n                context.closePath();\n            }\n            if (context === this.lowerContext) {\n                parent.notify('draw', { prop: 'applyFrame', value: { ctx: this.lowerContext, frame: parent.frameObj.type, preventImg: true } });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            }\n        }\n        context.filter = temp;\n    };\n    FreehandDrawing.prototype.getSqPtFD = function (idx, obj) {\n        var activePoint = { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 };\n        var sPoints = extend([], this.selPointColl[idx].points, []);\n        this.parent.points = extend([], this.parent.pointColl[idx].points);\n        this.pointCounter = 0;\n        var len = sPoints.length;\n        for (var l = 0; l < len; l++) {\n            if (activePoint.startX === 0 && activePoint.startY === 0 && activePoint.endX === 0 && activePoint.endY === 0) {\n                activePoint.startX = sPoints[l].x;\n                activePoint.startY = sPoints[l].y;\n                activePoint.endX = sPoints[l].x;\n                activePoint.endY = sPoints[l].y;\n            }\n            else {\n                activePoint.startX = Math.min(activePoint.startX, sPoints[l].x);\n                activePoint.startY = Math.min(activePoint.startY, sPoints[l].y);\n                activePoint.endX = Math.max(activePoint.endX, sPoints[l].x);\n                activePoint.endY = Math.max(activePoint.endY, sPoints[l].y);\n            }\n        }\n        activePoint.startX -= this.penStrokeWidth;\n        activePoint.startY -= this.penStrokeWidth;\n        activePoint.endX += this.penStrokeWidth;\n        activePoint.endY += this.penStrokeWidth;\n        activePoint.width = activePoint.endX - activePoint.startX;\n        activePoint.height = activePoint.endY - activePoint.startY;\n        if (obj) {\n            obj['activePoint'] = activePoint;\n        }\n        return activePoint;\n    };\n    FreehandDrawing.prototype.applyPenDraw = function () {\n        var parent = this.parent;\n        if (parent.currObjType.shape === 'freehanddraw') {\n            parent.notify('shape', { prop: 'apply', onPropertyChange: false, value: { shape: null, obj: null, canvas: null } });\n            parent.upperCanvas.style.cursor = parent.cursor = 'default';\n            parent.currObjType.shape = '';\n        }\n        parent.notify('shape', { prop: 'clearActObj' });\n    };\n    FreehandDrawing.prototype.applyFhd = function () {\n        var parent = this.parent;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var selectedPoint = parent.pointColl[this.fhdSelIdx];\n        if (selectedPoint.strokeColor === '#42a5f5') {\n            selectedPoint.strokeColor = this.tempFHDStyles.strokeColor;\n        }\n        parent.notify('toolbar', { prop: 'setSelectedFreehandColor', value: { color: '#42a5f5' } });\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n        parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n        if (selectedPoint) {\n            selectedPoint.isSelected = false;\n        }\n        parent.notify('selection', { prop: 'resetFreehandDrawVariables' });\n        this.fhdHovIdx = this.fhdSelIdx = null;\n    };\n    FreehandDrawing.prototype.cancelFhd = function () {\n        var parent = this.parent;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var selectedPoint = parent.pointColl[this.fhdSelIdx];\n        parent.notify('toolbar', { prop: 'setSelectedFreehandColor', value: { color: '#42a5f5' } });\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        this.lowerContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        this.pointCounter = 0;\n        if (selectedPoint) {\n            selectedPoint.strokeColor = this.tempFHDStyles.strokeColor;\n            selectedPoint.strokeWidth = this.tempFHDStyles.strokeWidth;\n            selectedPoint.isSelected = false;\n        }\n        this.fhdHovIdx = this.fhdSelIdx = this.fhdSelID = null;\n        parent.notify('selection', { prop: 'resetFreehandDrawVariables' });\n        parent.activeObj.strokeSettings.strokeColor = this.tempFHDStyles.strokeColor;\n        parent.activeObj.strokeSettings.strokeWidth = this.penStrokeWidth = this.tempFHDStyles.strokeWidth;\n        this.tempFHDStyles = { strokeColor: null, strokeWidth: null, fillColor: null };\n        parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n        parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n    };\n    FreehandDrawing.prototype.selectFhd = function (index) {\n        var parent = this.parent;\n        var tempFHDStyles = extend({}, this.tempFHDStyles, {}, true);\n        parent.notify('selection', { prop: 'setFreehandDrawEditing', onPropertyChange: false, value: { bool: true } });\n        if (index || index === 0) {\n            if (this.isFHDIdx(index)) {\n                this.fhdSelIdx = this.fhdHovIdx = index;\n                this.hoverFhd();\n                parent.upperCanvas.style.cursor = parent.cursor = 'pointer';\n            }\n            else {\n                return;\n            }\n        }\n        this.fhdSelIdx = this.fhdHovIdx;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var point = parent.pointColl[this.fhdSelIdx];\n        point.isSelected = true;\n        this.fhdSelID = point.id;\n        if (point.strokeColor !== '#42a5f5') {\n            parent.activeObj.strokeSettings.strokeColor = this.tempFHDStyles.strokeColor = point.strokeColor;\n        }\n        parent.activeObj.strokeSettings.strokeWidth = this.tempFHDStyles.strokeWidth =\n            parent.pointColl[this.fhdHovIdx].strokeWidth;\n        var obj = { bool: false };\n        parent.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n        if (obj['bool']) {\n            var shapeSettings = { id: 'pen_' + (this.fhdSelIdx + 1), type: ShapeType.FreehandDraw,\n                startX: point.points[0].x, startY: point.points[0].y, strokeColor: point.strokeColor,\n                strokeWidth: point.strokeWidth, points: point.points, opacity: point.opacity,\n                index: point.order };\n            var shapeChangingArgs = { cancel: false, action: 'select', previousShapeSettings: shapeSettings,\n                currentShapeSettings: shapeSettings };\n            this.triggerShapeChanging(shapeChangingArgs);\n        }\n        else {\n            parent.okBtn(null, true);\n        }\n        if (parent.isUndoRedoStack) {\n            this.tempFHDStyles = tempFHDStyles;\n        }\n    };\n    // eslint-disable-next-line  @typescript-eslint/no-unused-vars\n    FreehandDrawing.prototype.deleteFhd = function (index, isId) {\n        var parent = this.parent;\n        if (this.isFHDIdx(index)) {\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var tempPointColl = extend({}, parent.pointColl, {}, true);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var tempSelPointColl = extend({}, this.selPointColl, {}, true);\n            parent.pointColl = {};\n            this.selPointColl = {};\n            var count = 0;\n            for (var i = 0; i < parent.freehandCounter; i++) {\n                if (parseInt(tempPointColl[i].id.split('_')[1], 10) - 1 !== index) {\n                    parent.pointColl[count] = tempPointColl[i];\n                    this.selPointColl[count] = tempSelPointColl[i];\n                    count++;\n                }\n            }\n            parent.freehandCounter -= 1;\n            this.fhdHovIdx = this.fhdSelIdx = null;\n            parent.notify('selection', { prop: 'resetFreehandDrawVariables' });\n            parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n            parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n        }\n    };\n    FreehandDrawing.prototype.zoomX = function (x) {\n        return (x * this.parent.img.destWidth) + this.parent.img.destLeft;\n    };\n    FreehandDrawing.prototype.zoomY = function (y) {\n        return (y * this.parent.img.destHeight) + this.parent.img.destTop;\n    };\n    FreehandDrawing.prototype.zoomFHDColl = function (isPreventApply) {\n        var parent = this.parent;\n        var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop,\n            width: parent.img.destWidth, height: parent.img.destHeight };\n        parent.notify('shape', { prop: 'straightenShapes', onPropertyChange: false });\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            parent.points = extend([], parent.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = parent.points.length;\n            for (var l = 0; l < len; l++) {\n                var point = parent.points[l];\n                point.x = this.zoomX(point.ratioX);\n                point.y = this.zoomY(point.ratioY);\n            }\n        }\n        this.updateFHDCurPts();\n        if (this.straightenPoint.x && this.straightenPoint.y) {\n            this.straightenPoint.x = this.zoomX(this.straightenPoint.ratioX);\n            this.straightenPoint.y = this.zoomY(this.straightenPoint.ratioY);\n        }\n        if (parent.transform.straighten !== 0) {\n            parent.notify('shape', { prop: 'straightenFHD', onPropertyChange: false });\n        }\n        parent.img.destLeft = destPoints.startX;\n        parent.img.destTop = destPoints.startY;\n        parent.img.destWidth = destPoints.width;\n        parent.img.destHeight = destPoints.height;\n        if (isNullOrUndefined(isPreventApply)) {\n            this.freehandRedraw(this.lowerContext, null);\n        }\n    };\n    FreehandDrawing.prototype.updateFHDCurPts = function () {\n        var parent = this.parent;\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (this.selPointColl[n]) {\n                this.selPoints = extend([], this.selPointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = this.selPoints.length;\n                for (var l = 0; l < len; l++) {\n                    var point = this.selPoints[l];\n                    point.x = this.zoomX(point.ratioX);\n                    point.y = this.zoomY(point.ratioY);\n                }\n            }\n        }\n    };\n    FreehandDrawing.prototype.rotateFhdColl = function () {\n        var parent = this.parent;\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            parent.points = extend([], parent.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = parent.points.length;\n            for (var l = 0; l < len; l++) {\n                var point = parent.points[l];\n                point.y = destTop + (destHeight * point.ratioX);\n                point.x = (destLeft + destWidth) - (destWidth * point.ratioY);\n                point.ratioX = (point.x - destLeft) / destWidth;\n                point.ratioY = (point.y - destTop) / destHeight;\n            }\n        }\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (this.selPointColl[n]) {\n                this.selPoints = extend([], this.selPointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = this.selPoints.length;\n                for (var l = 0; l < len; l++) {\n                    var point = this.selPoints[l];\n                    point.y = destTop + (destHeight * point.ratioX);\n                    point.x = (destLeft + destWidth) - (destWidth * point.ratioY);\n                    point.ratioX = (point.x - destLeft) / destWidth;\n                    point.ratioY = (point.y - destTop) / destHeight;\n                }\n            }\n        }\n        this.updateFHDCurPts();\n    };\n    FreehandDrawing.prototype.flipFHDColl = function (value) {\n        var lowercaseValue = value.toLowerCase();\n        if (lowercaseValue === 'horizontal') {\n            this.pointsHorizontalFlip();\n        }\n        else if (lowercaseValue === 'vertical') {\n            this.pointsVerticalFlip();\n        }\n        else {\n            this.pointsHorizontalFlip();\n            for (var i = 0; i < this.parent.freehandCounter; i++) {\n                this.parent.pointColl[i].shapeFlip = '';\n            }\n            this.pointsVerticalFlip();\n        }\n    };\n    FreehandDrawing.prototype.pointsHorizontalFlip = function () {\n        var parent = this.parent;\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (parent.pointColl[n].shapeFlip !== parent.transform.currFlipState) {\n                parent.points = extend([], parent.pointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = parent.points.length;\n                for (var l = 0; l < len; l++) {\n                    var point = parent.points[l];\n                    if (point.x <= destLeft + (destWidth / 2)) {\n                        point.x = (destLeft + destWidth) - (point.x - destLeft);\n                    }\n                    else if (point.x >= destLeft + (destWidth / 2)) {\n                        point.x = destLeft + (destLeft + destWidth - point.x);\n                    }\n                    point.ratioX = (point.x - destLeft) / destWidth;\n                    point.ratioY = (point.y - destTop) / destHeight;\n                }\n                parent.pointColl[n].shapeFlip = parent.transform.currFlipState;\n            }\n        }\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (this.selPointColl[n]) {\n                if (this.selPointColl[n].shapeFlip !== parent.transform.currFlipState) {\n                    this.selPoints = extend([], this.selPointColl[n].points, []);\n                    this.pointCounter = 0;\n                    var len = this.selPoints.length;\n                    for (var l = 0; l < len; l++) {\n                        var point = this.selPoints[l];\n                        if (point.x <= destLeft + (destWidth / 2)) {\n                            point.x = (destLeft + destWidth) - (point.x - destLeft);\n                        }\n                        else if (point.x >= destLeft + (destWidth / 2)) {\n                            point.x = destLeft + (destLeft + destWidth - point.x);\n                        }\n                        point.ratioX = (point.x - destLeft) / destWidth;\n                        point.ratioY = (point.y - destTop) / destHeight;\n                    }\n                }\n            }\n        }\n        this.updateFHDCurPts();\n    };\n    FreehandDrawing.prototype.pointsVerticalFlip = function () {\n        var parent = this.parent;\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (parent.pointColl[n].shapeFlip !== parent.transform.currFlipState) {\n                parent.points = extend([], parent.pointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = parent.points.length;\n                for (var l = 0; l < len; l++) {\n                    var point = parent.points[l];\n                    if (point.y <= destTop + (destHeight / 2)) {\n                        point.y = (destTop + destHeight) - (point.y - destTop);\n                    }\n                    else if (point.y >= destTop + (destHeight / 2)) {\n                        point.y = destTop + (destTop + destHeight - point.y);\n                    }\n                    point.ratioX = (point.x - destLeft) / destWidth;\n                    point.ratioY = (point.y - destTop) / destHeight;\n                }\n                parent.pointColl[n].shapeFlip = parent.transform.currFlipState;\n            }\n        }\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (this.selPointColl[n]) {\n                if (this.selPointColl[n].shapeFlip !== parent.transform.currFlipState) {\n                    this.selPoints = extend([], this.selPointColl[n].points, []);\n                    this.pointCounter = 0;\n                    var len = this.selPoints.length;\n                    for (var l = 0; l < len; l++) {\n                        var point = this.selPoints[l];\n                        if (point.y <= destTop + (destHeight / 2)) {\n                            point.y = (destTop + destHeight) - (point.y - destTop);\n                        }\n                        else if (point.y >= destTop + (destHeight / 2)) {\n                            point.y = destTop + (destTop + destHeight - point.y);\n                        }\n                        point.ratioX = (point.x - destLeft) / destWidth;\n                        point.ratioY = (point.y - destTop) / destHeight;\n                    }\n                }\n            }\n        }\n        this.updateFHDCurPts();\n    };\n    FreehandDrawing.prototype.updateFHDColl = function (isPreventApply) {\n        var parent = this.parent;\n        var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop,\n            width: parent.img.destWidth, height: parent.img.destHeight };\n        parent.notify('shape', { prop: 'straightenShapes', onPropertyChange: false });\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        for (var i = 0, iLen = parent.objColl.length; i < iLen; i++) {\n            var currObj = parent.objColl[i];\n            if (currObj.shape === 'line' || currObj.shape === 'arrow') {\n                parent.notify('shape', { prop: 'straightenShapePoints', value: { obj: currObj, isReverse: true } });\n            }\n            else if (currObj.shape === 'path') {\n                var temp = parent.transform.straighten;\n                parent.transform.straighten = -parent.transform.straighten;\n                parent.notify('shape', { prop: 'straightenPath', onPropertyChange: false, value: { obj: currObj } });\n                parent.transform.straighten = temp;\n            }\n            currObj.imageRatio = { startX: ((currObj.activePoint.startX - destLeft) /\n                    destWidth), startY: ((currObj.activePoint.startY - destTop) / destHeight),\n                endX: ((currObj.activePoint.endX - destLeft) / destWidth),\n                endY: ((currObj.activePoint.endY - destTop) / destHeight),\n                width: destWidth / currObj.activePoint.width, height: destHeight /\n                    currObj.activePoint.height };\n            if (currObj.shape === 'path') {\n                for (var j = 0, jLen = currObj.pointColl.length; j < jLen; j++) {\n                    currObj.pointColl[j].ratioX =\n                        (currObj.pointColl[j].x - destLeft) / destWidth;\n                    currObj.pointColl[j].ratioY =\n                        (currObj.pointColl[j].y - destTop) / destHeight;\n                }\n            }\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        }\n        if (parent.freehandCounter > 0 && parent.transform.straighten !== 0) {\n            var temp = parent.transform.straighten;\n            parent.transform.straighten = -parent.transform.straighten;\n            parent.notify('shape', { prop: 'straightenFHD', onPropertyChange: false });\n            parent.transform.straighten = temp;\n        }\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            parent.points = extend([], parent.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = parent.points.length;\n            for (var l = 0; l < len; l++) {\n                var point = parent.points[l];\n                point.ratioX = (point.x - destLeft) / destWidth;\n                point.ratioY = (point.y - destTop) / destHeight;\n            }\n        }\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (this.selPointColl[n]) {\n                this.selPoints = extend([], this.selPointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = this.selPoints.length;\n                for (var l = 0; l < len; l++) {\n                    var point = this.selPoints[l];\n                    point.ratioX = (point.x - destLeft) / destWidth;\n                    point.ratioY = (point.y - destTop) / destHeight;\n                }\n            }\n        }\n        if (this.straightenPoint.x && this.straightenPoint.y) {\n            this.straightenPoint.ratioX = (this.straightenPoint.x - destLeft) / destWidth;\n            this.straightenPoint.ratioY = (this.straightenPoint.y - destTop) / destHeight;\n        }\n        parent.img.destLeft = destPoints.startX;\n        parent.img.destTop = destPoints.startY;\n        parent.img.destWidth = destPoints.width;\n        parent.img.destHeight = destPoints.height;\n        parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n            value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: isPreventApply } });\n    };\n    FreehandDrawing.prototype.panFHDColl = function (xDiff, yDiff, panRegion) {\n        var parent = this.parent;\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            parent.points = extend([], parent.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = parent.points.length;\n            for (var l = 0; l < len; l++) {\n                var point = parent.points[l];\n                if (panRegion === '' || panRegion === 'vertical') {\n                    point.x += xDiff;\n                }\n                else {\n                    point.x -= xDiff;\n                }\n                if (panRegion === '' || panRegion === 'horizontal') {\n                    point.y += yDiff;\n                }\n                else {\n                    point.y -= yDiff;\n                }\n            }\n        }\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (this.selPointColl[n]) {\n                this.selPoints = extend([], this.selPointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = this.selPoints.length;\n                for (var l = 0; l < len; l++) {\n                    var point = this.selPoints[l];\n                    if (panRegion === '' || panRegion === 'vertical') {\n                        point.x += xDiff;\n                    }\n                    else {\n                        point.x -= xDiff;\n                    }\n                    if (panRegion === '' || panRegion === 'horizontal') {\n                        point.y += yDiff;\n                    }\n                    else {\n                        point.y -= yDiff;\n                    }\n                }\n            }\n        }\n        if (this.straightenPoint.x && this.straightenPoint.y) {\n            if (panRegion === '' || panRegion === 'vertical') {\n                this.straightenPoint.x += xDiff;\n            }\n            else {\n                this.straightenPoint.x -= xDiff;\n            }\n            if (panRegion === '' || panRegion === 'horizontal') {\n                this.straightenPoint.y += yDiff;\n            }\n            else {\n                this.straightenPoint.y -= yDiff;\n            }\n        }\n        this.freehandRedraw(this.lowerContext, null);\n    };\n    FreehandDrawing.prototype.freeHandDraw = function (value) {\n        var parent = this.parent;\n        if (value) {\n            parent.points = [];\n            this.dummyPoints = [];\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.togglePen = true;\n            parent.upperCanvas.style.cursor = parent.cursor = 'crosshair';\n            parent.upperCanvas.style.display = 'block';\n            if (isNullOrUndefined(parent.activeObj.strokeSettings)) {\n                var obj = { strokeSettings: {} };\n                parent.notify('shape', { prop: 'getStrokeSettings', onPropertyChange: false,\n                    value: { obj: obj } });\n                parent.activeObj.strokeSettings = obj['strokeSettings'];\n            }\n            if (isNullOrUndefined(parent.activeObj.strokeSettings.strokeWidth)) {\n                parent.activeObj.strokeSettings.strokeWidth = 2;\n            }\n            if (parent.isMaskImage) {\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            }\n            else {\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'pen',\n                        isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n            }\n        }\n        else {\n            parent.upperCanvas.style.cursor = parent.cursor = 'default';\n            var strokeWidth = this.penStrokeWidth;\n            parent.notify('shape', { prop: 'apply', onPropertyChange: false, value: { shape: null, obj: null, canvas: null } });\n            parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            parent.notify('toolbar', { prop: 'setCurrentToolbar', value: { type: 'main' } });\n            parent.notify('selection', { prop: 'setFreehandDrawCustomized', value: { isFreehandDrawCustomized: false } });\n            this.penStrokeWidth = strokeWidth;\n        }\n    };\n    FreehandDrawing.prototype.isFHDIdx = function (index, obj) {\n        var isIndex = false;\n        for (var i = 0; i < this.parent.freehandCounter; i++) {\n            if (this.parent.pointColl[i].id &&\n                parseInt(this.parent.pointColl[i].id.split('_')[1], 10) - 1 === index) {\n                isIndex = true;\n                break;\n            }\n        }\n        if (obj) {\n            obj['isIndex'] = isIndex;\n        }\n        return isIndex;\n    };\n    FreehandDrawing.prototype.updateCropPtsForSel = function () {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            var obj = { selPointColl: extend([], this.selPointColl) };\n            if (obj['selPointColl'][n]) {\n                this.selPoints = extend([], obj['selPointColl'][n].points, []);\n                this.pointCounter = 0;\n                var len = this.selPoints.length;\n                for (var l = 0; l < len; l++) {\n                    var point = this.selPoints[l];\n                    point.ratioX = (point.x - actPoint.startX) / actPoint.width;\n                    point.ratioY = (point.y - actPoint.startY) / actPoint.height;\n                }\n            }\n        }\n    };\n    FreehandDrawing.prototype.triggerShapeChanging = function (shapeChangingArgs) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var parent = this.parent;\n        var point = parent.pointColl[this.fhdSelIdx];\n        parent.trigger('shapeChanging', shapeChangingArgs);\n        if (parent.element.getAttribute('data-value') === 'mask-drawing' && !this.isMasking) {\n            this.isMasking = true;\n            parent.upperCanvas.style.cursor = 'crosshair';\n            parent.notify('draw', { prop: 'updateTempObjColl' });\n            parent.notify('draw', { prop: 'updateTempPointColl' });\n            parent.discard();\n            parent.selectMaskImage();\n            return;\n        }\n        parent.editCompleteArgs = shapeChangingArgs;\n        if (shapeChangingArgs.currentShapeSettings.id.indexOf('pen_') === -1 &&\n            (shapeChangingArgs.action === 'draw-end' || shapeChangingArgs.action === 'select')) {\n            var id = 'pen_' + shapeChangingArgs.currentShapeSettings.id;\n            if (this.fhdSelIdx) {\n                parent.pointColl[this.fhdSelIdx].id = id;\n            }\n            else {\n                parent.pointColl[parent.freehandCounter - 1].id = id;\n            }\n        }\n        this.penStrokeWidth = shapeChangingArgs.currentShapeSettings.strokeWidth;\n        if (parent.activeObj.strokeSettings.strokeColor !== shapeChangingArgs.currentShapeSettings.strokeColor) {\n            parent.activeObj.strokeSettings.strokeColor = shapeChangingArgs.currentShapeSettings.strokeColor;\n            parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n        }\n        if (this.fhdSelID && point && shapeChangingArgs.currentShapeSettings) {\n            point.strokeColor = shapeChangingArgs.currentShapeSettings.strokeColor;\n            point.strokeWidth = shapeChangingArgs.currentShapeSettings.strokeWidth;\n            point.points = shapeChangingArgs.currentShapeSettings.points;\n            point.opacity = shapeChangingArgs.currentShapeSettings.opacity;\n        }\n        if (shapeChangingArgs.action === 'select') {\n            this.freehandRedraw(this.upperContext);\n            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'pen',\n                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n        }\n    };\n    FreehandDrawing.prototype.setCenterSelPoints = function () {\n        var parent = this.parent;\n        var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop,\n            width: parent.img.destWidth, height: parent.img.destHeight };\n        parent.notify('shape', { prop: 'straightenShapes', onPropertyChange: false });\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        var actPoint = parent.activeObj.activePoint;\n        if (isNullOrUndefined(this.prevStraightenObj) ||\n            (JSON.stringify(this.prevStraightenObj.activePoint) !== JSON.stringify(actPoint))) {\n            this.straightenPoint = { x: actPoint.startX + (actPoint.width / 2),\n                y: actPoint.startY + (actPoint.height / 2),\n                ratioX: (actPoint.startX + (actPoint.width / 2) - destLeft) / destWidth,\n                ratioY: (actPoint.startY + (actPoint.height / 2) - destTop) / destHeight };\n            this.prevStraightenObj = extend({}, parent.activeObj, {}, true);\n            this.straightenPointAngle = parent.transform.straighten;\n        }\n        parent.img.destLeft = destPoints.startX;\n        parent.img.destTop = destPoints.startY;\n        parent.img.destWidth = destPoints.width;\n        parent.img.destHeight = destPoints.height;\n    };\n    return FreehandDrawing;\n}());\nexport { FreehandDrawing };\n","/* eslint-disable prefer-const */\nimport { Browser, EventHandler, extend, getComponent, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ArrowheadType, ShapeType, ZoomTrigger } from '../index';\nvar Selection = /** @class */ (function () {\n    function Selection(parent) {\n        this.diffPoint = { x: 0, y: 0 }; // updates resize points\n        this.oldPoint = {};\n        this.isTouch = false;\n        this.isObjSelected = false;\n        this.isFhdPoint = false; // Specifies whether mouse cursor is on freehand drawing point or not\n        this.dragPoint = { startX: 0, startY: 0, endX: 0, endY: 0 }; // updates drag start and end points in mousedown and mousemove\n        this.isShapeInserted = false;\n        this.tempActiveObj = { activePoint: { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 },\n            flipObjColl: [], triangle: [], triangleRatio: [], order: null }; // for undo redo\n        this.isFirstMove = false; // for pinch zoom\n        this.startTouches = []; // for pinch zoom\n        this.tempTouches = []; // for pinch zoom\n        this.currMousePoint = { x: 0, y: 0 }; // To prevent mouse move event on pinch zoom\n        this.cursorTargetId = '';\n        this.isPreventDragging = false; // Shapes dragging is prevented when crop region is inside shape points\n        this.dragElement = '';\n        this.textRow = 1; // text area row count\n        this.mouseDownPoint = { x: 0, y: 0 };\n        this.previousPoint = { x: 0, y: 0 }; // updates prev x and y points in mouseMove\n        this.zoomType = 'Toolbar';\n        this.isInitialTextEdited = false;\n        this.dragCanvas = false;\n        this.isFhdCustomized = false;\n        this.touchEndPoint = {};\n        this.isFhdEditing = false; // Specifies whether freehand drawing is in editing mode or not\n        this.currentDrawingShape = '';\n        this.initialPrevObj = {};\n        this.touchTime = 0;\n        this.resizedElement = '';\n        this.isImageClarity = true;\n        this.isPinching = false;\n        this.isSliding = false;\n        this.mouseDown = '';\n        this.isSliderActive = false;\n        this.arrowShape = [ArrowheadType.None, ArrowheadType.SolidArrow];\n        this.isTouchDblClick = false;\n        this.isMouseDown = false;\n        this.isMouseUp = false;\n        this.mouseWheel = 0;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Selection.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Selection.prototype.addEventListener = function () {\n        this.parent.on('selection', this.selection, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Selection.prototype.removeEventListener = function () {\n        this.parent.off('selection', this.selection);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Selection.prototype.selection = function (args) {\n        var parent = this.parent;\n        this.updatePrivateVariables();\n        switch (args.prop) {\n            case 'setCursor':\n                this.setCursor(args.value['x'], args.value['y']);\n                break;\n            case 'updateActivePoint':\n                this.updateActivePoint(args.value['x'], args.value['y'], args.value['isCropSelection']);\n                break;\n            case 'updateCursorStyles':\n                this.updateCursorStyles(args.value['x'], args.value['y'], args.value['type']);\n                break;\n            case 'setTextSelection':\n                this.setTextSelection(args.value['width'], args.value['height']);\n                break;\n            case 'setActivePoint':\n                this.setActivePoint(args.value['startX'], args.value['startY']);\n                break;\n            case 'clearSelection':\n                this.clearSelection(args.value['resetCrop']);\n                break;\n            case 'calcShapeRatio':\n                this.calcShapeRatio(args.value['x'], args.value['y'], args.value['imgWidth'], args.value['imgHeight']);\n                break;\n            case 'tab':\n                this.performTabAction();\n                break;\n            case 'setDragDirection':\n                this.setDragDirection(args.value['width'], args.value['height']);\n                break;\n            case 'clearUpperCanvas':\n                if (this.isTouch) {\n                    setTimeout(function () {\n                        parent.upperCanvas.getContext('2d').clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                    }, 550);\n                }\n                break;\n            case 'resetFreehandDrawVariables':\n                this.isFhdEditing = this.isFhdPoint = false;\n                break;\n            case 'isShapeInserted':\n                this.isShapeInserted = args.value['bool'];\n                break;\n            case 'redrawShape':\n                this.redrawShape(args.value['obj']);\n                break;\n            case 'setTextBoxStylesToActObj':\n                this.setTextBoxStylesToActObj();\n                break;\n            case 'mouseDownEventHandler':\n                this.mouseDownEventHandler(args.value['e']);\n                break;\n            case 'mouseMoveEventHandler':\n                this.mouseMoveEventHandler(args.value['e']);\n                break;\n            case 'mouseUpEventHandler':\n                this.mouseUpEventHandler(args.value['e']);\n                break;\n            case 'canvasMouseDownHandler':\n                this.canvasMouseDownHandler(args.value['e']);\n                break;\n            case 'canvasMouseMoveHandler':\n                this.canvasMouseMoveHandler(args.value['e']);\n                break;\n            case 'canvasMouseUpHandler':\n                this.canvasMouseUpHandler(args.value['e']);\n                break;\n            case 'touchStartHandler':\n                this.touchStartHandler(args.value['e']);\n                break;\n            case 'keyDownEventHandler':\n                this.keyDownEventHandler(args.value['e']);\n                break;\n            case 'handleScroll':\n                this.handleScroll(args.value['e']);\n                break;\n            case 'textKeyDown':\n                setTimeout(this.textKeyDown.bind(this), 1, args.value['e']);\n                break;\n            case 'deleteItem':\n                this.deleteItem();\n                break;\n            case 'updatePrevShapeSettings':\n                this.updatePrevShapeSettings(args.value['obj']);\n                break;\n            case 'getZoomType':\n                args.value['obj']['zoomType'] = this.zoomType;\n                break;\n            case 'setZoomType':\n                this.zoomType = args.value['zoomType'];\n                break;\n            case 'setInitialTextEdit':\n                this.isInitialTextEdited = args.value['bool'];\n                break;\n            case 'setDragCanvas':\n                this.dragCanvas = args.value['bool'];\n                break;\n            case 'setFreehandDrawCustomized':\n                this.isFhdCustomized = args.value['isFreehandDrawCustomized'];\n                break;\n            case 'setTouchEndPoint':\n                this.touchEndPoint.x = args.value['x'];\n                this.touchEndPoint.y = args.value['y'];\n                break;\n            case 'getPanDown':\n                args.value['obj']['panDown'] = this.panDown;\n                break;\n            case 'setPanDown':\n                this.panDown = args.value['panDown'];\n                break;\n            case 'getFreehandDrawEditing':\n                args.value['obj']['bool'] = this.isFhdEditing;\n                break;\n            case 'setFreehandDrawEditing':\n                this.isFhdEditing = args.value['bool'];\n                break;\n            case 'getTempActObj':\n                args.value['obj']['tempObj'] = this.tempActiveObj;\n                break;\n            case 'setTempActObj':\n                this.tempActiveObj = args.value['obj'];\n                break;\n            case 'isInside':\n                this.isInside(args.value['x'], args.value['y'], args.value['z1'], args.value['z2'], args.value['z3'], args.value['z4']);\n                break;\n            case 'setDragElement':\n                this.dragElement = args.value['value'];\n                break;\n            case 'setObjSelected':\n                this.isObjSelected = args.value['bool'];\n                break;\n            case 'adjustActObjForLineArrow':\n                this.adjustActObjForLineArrow(args.value['obj']);\n                break;\n            case 'findTarget':\n                this.findTarget(args.value['x'], args.value['y'], args.value['type']);\n                break;\n            case 'getCurrentFlipState':\n                this.getCurrentFlipState();\n                break;\n            case 'setDragWidth':\n                this.setDragWidth(args.value['width']);\n                break;\n            case 'setDragHeight':\n                this.setDragHeight(args.value['setDragHeight']);\n                break;\n            case 'annotate':\n                this.currentDrawingShape = args.value['shape'];\n                if (args.value['shape'] === 'text') {\n                    parent.activeObj.textSettings.fontSize = 11;\n                    parent.activeObj.keyHistory = 'Enter Text';\n                    parent.notify('shape', { prop: 'initializeTextShape', onPropertyChange: false,\n                        value: { text: null, fontFamily: null, fontSize: null, bold: null, italic: null, strokeColor: null } });\n                }\n                else if (args.value['shape'] === 'path') {\n                    parent.activeObj.pointColl = [];\n                }\n                break;\n            case 'getCurrentDrawingShape':\n                args.value['obj']['shape'] = this.currentDrawingShape;\n                break;\n            case 'setCurrentDrawingShape':\n                this.currentDrawingShape = args.value['value'];\n                break;\n            case 'getTransRotationPoint':\n                this.getTransRotationPoint(args.value['obj'], args.value['object']);\n                break;\n            case 'adjustNEPoints':\n                this.adjustNEPoints(args.value['rectangle'], args.value['x'], args.value['y'], args.value['angle']);\n                break;\n            case 'adjustRotationPoints':\n                this.adjustRotationPoints(args.value['rectangle'], args.value['x'], args.value['y'], args.value['angle'], args.value['type'], args.value['elem']);\n                break;\n            case 'getResizeDirection':\n                this.getResizeDirection(args.value['rectangle'], args.value['x'], args.value['y'], args.value['angle']);\n                break;\n            case 'setResizedElement':\n                this.resizedElement = args.value['value'];\n                break;\n            case 'reset':\n                this.reset();\n                break;\n            case 'unWireEvent':\n                this.unwireEvent();\n                break;\n            case 'updPtCollForShpRot':\n                this.updPtCollForShpRot(args.value['obj']);\n                break;\n            case 'findImageRatio':\n                this.findImageRatio(args.value['width'], args.value['height'], args.value['obj']);\n                break;\n            case 'getNumTextValue':\n                this.getNumTextValue(args.value['obj']);\n                break;\n            case 'setImageClarity':\n                this.isImageClarity = args.value['bool'];\n                break;\n            case 'upgradeImageQuality':\n                this.upgradeImageQuality();\n                break;\n            case 'triggerShapeChange':\n                this.triggerShapeChange(args.value['shapeResizingArgs'], args.value['shapeMovingArgs'], args.value['type']);\n                break;\n            case 'applyTransformToImg':\n                this.applyTransformToImg(args.value['ctx']);\n                break;\n            case 'findTargetObj':\n                args.value['obj']['bool'] = this.findTargetObj(args.value['x'], args.value['y'], args.value['isCrop']);\n                break;\n            case 'setSliding':\n                this.isSliding = args.value['bool'];\n                break;\n            case 'setSliderActive':\n                this.isSliderActive = args.value['bool'];\n                break;\n            case 'getArrowType':\n                args.value['obj']['type'] = this.getArrowType(args.value['type']);\n                break;\n            case 'setArrowShape':\n                if (args.value['type'] === 'initial') {\n                    this.arrowShape[0] = args.value['shape'];\n                }\n                else {\n                    this.arrowShape[1] = args.value['shape'];\n                }\n                break;\n            case 'updateNWPoints':\n                this.updateNWPoints(args.value['x'], args.value['y']);\n                break;\n            case 'updateNPoints':\n                this.updateNPoints(args.value['x'], args.value['y']);\n                break;\n            case 'updateNEPoints':\n                this.updateNEPoints(args.value['x'], args.value['y']);\n                break;\n            case 'updateWPoints':\n                this.updateWPoints(args.value['x'], args.value['y']);\n                break;\n            case 'updateEPoints':\n                this.updateEPoints(args.value['x'], args.value['y']);\n                break;\n            case 'updateSWPoints':\n                this.updateSWPoints(args.value['x'], args.value['y']);\n                break;\n            case 'updateSPoints':\n                this.updateSPoints(args.value['x'], args.value['y']);\n                break;\n            case 'updateSEPoints':\n                this.updateSEPoints(args.value['x'], args.value['y']);\n                break;\n            case 'drawMaskCircle':\n                this.drawMaskCircle(args.value['x'], args.value['y']);\n                break;\n            case 'isValueUpdated':\n                this.isValueUpdated();\n                break;\n            case 'getDistance':\n                this.getDistance(args.value['x'], args.value['y']);\n                break;\n            case 'redact':\n                this.currentDrawingShape = args.value['shape'];\n                break;\n        }\n    };\n    Selection.prototype.getModuleName = function () {\n        return 'selection';\n    };\n    Selection.prototype.updatePrivateVariables = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n        if (parent.upperCanvas) {\n            this.upperContext = parent.upperCanvas.getContext('2d');\n        }\n    };\n    Selection.prototype.reset = function () {\n        this.diffPoint = { x: 0, y: 0 };\n        this.oldPoint = {};\n        this.isTouch = this.isObjSelected = this.isFhdPoint = this.isShapeInserted = false;\n        this.dragPoint = { startX: 0, startY: 0, endX: 0, endY: 0 };\n        this.tempActiveObj = { activePoint: { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 },\n            flipObjColl: [], triangle: [], triangleRatio: [], order: null };\n        this.isFirstMove = false;\n        this.cursorTargetId = this.dragElement = '';\n        this.isTouchDblClick = false;\n        this.startTouches = [];\n        this.tempTouches = [];\n        this.currMousePoint = { x: 0, y: 0 };\n        this.isPreventDragging = false;\n        this.timer = undefined;\n        this.tempObjColl = undefined;\n        this.mouseWheel = 0;\n        this.textRow = 1;\n        this.mouseDownPoint = { x: 0, y: 0 };\n        this.previousPoint = { x: 0, y: 0 };\n        this.zoomType = 'Toolbar';\n        this.isInitialTextEdited = false;\n        this.dragCanvas = this.isPinching = false;\n        this.isFhdCustomized = false;\n        this.touchEndPoint = {};\n        this.panDown = null;\n        this.isSliding = false;\n        this.isFhdEditing = false;\n        this.pathAdjustedIndex = null;\n        this.touchTime = 0;\n        this.isImageClarity = true;\n        this.currentDrawingShape = '';\n        this.initialPrevObj = {};\n        this.resizedElement = '';\n        this.mouseDown = '';\n        this.isSliderActive = false;\n        this.arrowShape = [ArrowheadType.None, ArrowheadType.SolidArrow];\n        this.isMouseDown = this.isMouseUp = false;\n    };\n    Selection.prototype.performTabAction = function () {\n        var parent = this.parent;\n        if (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block') {\n            var allowUndoRedoPush = this.applyCurrShape(false);\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: null } });\n            if (allowUndoRedoPush) {\n                parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            }\n        }\n        parent.isKBDNavigation = true;\n    };\n    Selection.prototype.selMouseUpEvent = function () {\n        this.oldPoint.x = undefined;\n        this.oldPoint.y = undefined;\n    };\n    Selection.prototype.getMouseCursor = function (actObj, x, y, isCropSelection, isApply) {\n        var rotationCirclePoint = this.getTransRotationPoint(actObj);\n        var radius = actObj.bottomCenterCircle.radius;\n        var cursor = 'default';\n        var ratio = isApply ? 0 : ((actObj.topLeftCircle.radius * 2));\n        if (x >= (actObj.topLeftCircle.startX - ratio) &&\n            x <= (actObj.topLeftCircle.startX + ratio) &&\n            y >= (actObj.topLeftCircle.startY - ratio) &&\n            y <= (actObj.topLeftCircle.startY + ratio)) {\n            cursor = 'nw-resize';\n        }\n        else if (x >= (actObj.topLeftCircle.startX - ratio) &&\n            x <= (actObj.topRightCircle.startX - ratio) &&\n            y >= (actObj.topCenterCircle.startY - ratio) &&\n            y <= (actObj.topCenterCircle.startY + ratio)) {\n            cursor = 'n-resize';\n        }\n        else if (x >= (actObj.topRightCircle.startX - ratio) &&\n            x <= (actObj.topRightCircle.startX + ratio) &&\n            y >= (actObj.topRightCircle.startY - ratio) &&\n            y <= (actObj.topRightCircle.startY + ratio)) {\n            cursor = 'ne-resize';\n        }\n        else if (x >= (actObj.centerLeftCircle.startX - ratio) &&\n            x <= (actObj.centerLeftCircle.startX + ratio) &&\n            y >= (actObj.topLeftCircle.startY - ratio) &&\n            y <= (actObj.bottomLeftCircle.startY - ratio)) {\n            cursor = 'w-resize';\n        }\n        else if (x >= (actObj.centerRightCircle.startX - ratio) &&\n            x <= (actObj.centerRightCircle.startX + ratio) &&\n            y >= (actObj.topRightCircle.startY - ratio) &&\n            y <= (actObj.bottomRightCircle.startY - ratio)) {\n            cursor = 'e-resize';\n        }\n        else if (x >= (actObj.bottomLeftCircle.startX - ratio) &&\n            x <= (actObj.bottomLeftCircle.startX + ratio) &&\n            y >= (actObj.bottomLeftCircle.startY - ratio) &&\n            y <= (actObj.bottomLeftCircle.startY + ratio)) {\n            cursor = 'sw-resize';\n        }\n        else if (x >= (actObj.bottomLeftCircle.startX - ratio) &&\n            x <= (actObj.bottomRightCircle.startX - ratio) &&\n            y >= (actObj.bottomCenterCircle.startY - ratio) &&\n            y <= (actObj.bottomCenterCircle.startY + ratio)) {\n            cursor = 's-resize';\n        }\n        else if (x >= (actObj.bottomRightCircle.startX - ratio) &&\n            x <= (actObj.bottomRightCircle.startX + ratio) &&\n            y >= (actObj.bottomRightCircle.startY - ratio) &&\n            y <= (actObj.bottomRightCircle.startY + ratio)) {\n            cursor = 'se-resize';\n        }\n        else if ((x >= actObj.activePoint.startX &&\n            x <= actObj.activePoint.endX) && (y >= actObj.activePoint.startY &&\n            y <= actObj.activePoint.endY)) {\n            if (isCropSelection) {\n                cursor = 'grab';\n            }\n            else {\n                cursor = 'move';\n            }\n        }\n        else if (rotationCirclePoint && !isApply &&\n            x >= (rotationCirclePoint.x - (radius + 2)) &&\n            x <= rotationCirclePoint.x + (radius + 2) &&\n            y >= rotationCirclePoint.y - (radius + 2) &&\n            y <= rotationCirclePoint.y + (radius + 2)) {\n            cursor = 'grabbing';\n        }\n        else {\n            cursor = 'default';\n        }\n        return cursor;\n    };\n    Selection.prototype.setCursor = function (x, y) {\n        var parent = this.parent;\n        parent.upperCanvas.style.cursor = parent.cursor = 'default';\n        var frameObject = { bool: null };\n        parent.notify('toolbar', { prop: 'getFrameToolbar', onPropertyChange: false, value: { obj: frameObject } });\n        if (parent.isResize || this.isSliding || frameObject['bool']) {\n            parent.upperCanvas.style.cursor = 'default';\n            return;\n        }\n        var isCropSelection = false;\n        var splitWords;\n        if (parent.activeObj.shape) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if ((!splitWords && parent.currObjType.isCustomCrop) || (splitWords && splitWords[0] === 'crop')) {\n            isCropSelection = true;\n        }\n        if (parent.currObjType.isDragging) {\n            if (this.dragElement === '') {\n                parent.upperCanvas.style.cursor = parent.cursor = 'move';\n            }\n            else {\n                parent.upperCanvas.style.cursor = parent.cursor = this.dragElement;\n            }\n            return;\n        }\n        if (parent.togglePen) {\n            parent.upperCanvas.style.cursor = parent.cursor = 'crosshair';\n            if (parent.isMaskImage) {\n                this.drawMaskCircle(x, y);\n                parent.upperCanvas.style.cursor = 'none';\n            }\n            return;\n        }\n        if (parent.activeObj.shape) {\n            this.setCursorForActObj(splitWords, isCropSelection, x, y);\n        }\n        if (parent.cursor === 'default' || parent.cursor === 'grab') {\n            var highestOrder = this.getHighestOrder();\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var tempShapeColl = extend([], parent.shapeColl, [], true);\n            var objColl = extend([], parent.objColl, [], true);\n            var isShape = false;\n            while (highestOrder > 0) {\n                isShape = false;\n                for (var i = tempShapeColl.length - 1; i >= 0; i--) {\n                    if (tempShapeColl[i].order === highestOrder) {\n                        isShape = true;\n                        if (tempShapeColl[i].id && tempShapeColl[i].id.indexOf('pen') > -1) {\n                            if (parent.pointColl[0] && (parent.cursor !== 'grab' || !isCropSelection)\n                                && !parent.currObjType.isDragging && !parent.currObjType.isResize) {\n                                var points = extend([], parent.points, [], true);\n                                if (!isCropSelection) {\n                                    this.setCursorForFreehandDrawing(x, y, parent.upperCanvas, tempShapeColl[i].id);\n                                }\n                                parent.points = points;\n                            }\n                        }\n                        else {\n                            parent.objColl = [];\n                            parent.objColl.push(extend({}, tempShapeColl[i], null, true));\n                            var cursor = parent.upperCanvas.style.cursor;\n                            if (parent.objColl.length > 0 && (parent.cursor !== 'grab' || !isCropSelection)) {\n                                this.setCursorFromObj(x, y, parent.objColl, parent.upperCanvas, isCropSelection);\n                            }\n                            if (cursor === 'grab' && parent.cursor === 'default') {\n                                parent.upperCanvas.style.cursor = parent.cursor = 'grab';\n                            }\n                        }\n                    }\n                    else if (isNullOrUndefined(tempShapeColl[i].order)) {\n                        isShape = true;\n                    }\n                }\n                if (parent.cursor !== 'default' && parent.cursor !== 'grab') {\n                    break;\n                }\n                else if (isShape) {\n                    var isBreak = false;\n                    while (!isBreak && highestOrder > 0) {\n                        for (var a = 0; a < tempShapeColl.length; a++) {\n                            if (tempShapeColl[a].order === highestOrder - 1) {\n                                isBreak = true;\n                                break;\n                            }\n                        }\n                        highestOrder--;\n                        if (!isBreak) {\n                            highestOrder--;\n                        }\n                    }\n                }\n            }\n            parent.objColl = objColl;\n            if (parent.cursor === 'default' || parent.cursor === 'grab') {\n                if (parent.togglePan) {\n                    parent.lowerCanvas.style.cursor = parent.upperCanvas.style.cursor = parent.cursor = 'grab';\n                }\n            }\n        }\n        if (this.currentDrawingShape !== '' && (parent.cursor === 'default' || parent.cursor === 'grab')) {\n            parent.upperCanvas.style.cursor = parent.cursor = 'crosshair';\n        }\n    };\n    Selection.prototype.getHighestOrder = function () {\n        var highestOrder = 0;\n        for (var i = 0; i < this.parent.shapeColl.length; i++) {\n            if (this.parent.shapeColl[i].order > highestOrder) {\n                highestOrder = this.parent.shapeColl[i].order;\n            }\n        }\n        return highestOrder;\n    };\n    Selection.prototype.drawMaskCircle = function (x, y) {\n        var parent = this.parent;\n        if (parent.isMaskImage) {\n            var radius = parent.activeObj.strokeSettings.strokeWidth * 2;\n            var canvasDraw = parent.maskCanvas.getContext('2d');\n            canvasDraw.clearRect(0, 0, parent.maskCanvas.width, parent.maskCanvas.height);\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n            canvasDraw.strokeStyle = '#fff';\n            canvasDraw.beginPath();\n            canvasDraw.ellipse(x, y, radius / 2, radius / 2, 0, 0, 2 * Math.PI, false);\n            canvasDraw.fill();\n            canvasDraw.stroke();\n            canvasDraw.closePath();\n            parent.maskCanvas.style.cursor = 'none';\n        }\n    };\n    Selection.prototype.setCursorForActObj = function (splitWords, isCropSelection, x, y) {\n        var parent = this.parent;\n        if (parent.activeObj.horTopLine !== undefined) {\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (splitWords === undefined && parent.currObjType.isCustomCrop) {\n                isCropSelection = true;\n            }\n            else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                isCropSelection = true;\n            }\n            if (!isCropSelection && parent.togglePan) {\n                parent.lowerCanvas.style.cursor = parent.upperCanvas.style.cursor = parent.cursor = 'grab';\n            }\n            var cursor = parent.upperCanvas.style.cursor;\n            var actObj = extend({}, parent.activeObj, {}, true);\n            this.cursorTargetId = actObj.currIndex;\n            var degree = void 0;\n            if (actObj.shapeDegree === 0) {\n                degree = parent.transform.degree;\n            }\n            else {\n                degree = parent.transform.degree - actObj.shapeDegree;\n            }\n            if (degree < 0) {\n                degree = 360 + degree;\n            }\n            if (actObj.shape === 'line' || actObj.shape === 'arrow') {\n                this.setCursorForLineArrow(actObj, x, y, parent.upperCanvas);\n            }\n            else if (actObj.shape === 'path') {\n                this.setCursorForPath(actObj, x, y, parent.upperCanvas);\n            }\n            else if (!isNullOrUndefined(actObj.rotatedAngle) && actObj.rotatedAngle !== 0) {\n                this.setCursorForRotatedObject(actObj, x, y, parent.upperCanvas);\n            }\n            else {\n                parent.upperCanvas.style.cursor = parent.cursor = this.getMouseCursor(actObj, x, y, isCropSelection, false);\n                var cursorColl = ['n-resize', 's-resize', 'e-resize', 'w-resize'];\n                if ((actObj.shape === 'text') && cursorColl.indexOf(parent.cursor) > -1) {\n                    parent.upperCanvas.style.cursor = parent.cursor = 'move';\n                }\n            }\n            if (cursor === 'default' && parent.cursor === 'default' && isCropSelection) {\n                parent.upperCanvas.style.cursor = parent.cursor = 'grab';\n            }\n            if (cursor === 'grab' && parent.cursor === 'default') {\n                parent.upperCanvas.style.cursor = parent.cursor = 'grab';\n            }\n        }\n        else if (parent.togglePan && !parent.togglePen) {\n            parent.lowerCanvas.style.cursor = parent.upperCanvas.style.cursor = parent.cursor = 'grab';\n        }\n        else {\n            if (parent.currObjType.isCustomCrop || parent.togglePen) {\n                parent.upperCanvas.style.cursor = parent.cursor = 'crosshair';\n            }\n            else {\n                parent.upperCanvas.style.cursor = parent.cursor = 'default';\n            }\n        }\n    };\n    Selection.prototype.setCursorForPath = function (actObj, x, y, upperCanvas) {\n        this.setCursorForLineArrow(actObj, x, y, upperCanvas);\n        var parent = this.parent;\n        if (parent.cursor === 'default') {\n            var obj = extend({}, actObj, null, true);\n            var isMove = false;\n            for (var i = 1, len = actObj.pointColl.length; i < len; i++) {\n                if (isMove) {\n                    break;\n                }\n                obj.activePoint.startX = actObj.pointColl[i - 1].x;\n                obj.activePoint.startY = actObj.pointColl[i - 1].y;\n                obj.activePoint.endX = actObj.pointColl[i].x;\n                obj.activePoint.endY = actObj.pointColl[i].y;\n                parent.notify('shape', { prop: 'setPointCollForLineArrow', onPropertyChange: false,\n                    value: { obj: obj } });\n                var radius = actObj.topLeftCircle.radius;\n                for (var j = 0, jLen = obj.pointColl.length; j < jLen; j++) {\n                    var point = obj.pointColl[j];\n                    if (!isNullOrUndefined(point.x - (radius * 2)) &&\n                        !isNullOrUndefined(point.x + (radius * 2)) &&\n                        !isNullOrUndefined(point.y - (radius * 2)) &&\n                        !isNullOrUndefined(point.y + (radius * 2)) &&\n                        x >= (point.x - (radius * 2)) &&\n                        x <= (point.x + (radius * 2)) &&\n                        y >= (point.y - (radius * 2)) &&\n                        y <= (point.y + (radius * 2))) {\n                        upperCanvas.style.cursor = parent.cursor = 'move';\n                        isMove = true;\n                        break;\n                    }\n                    else {\n                        upperCanvas.style.cursor = parent.cursor = 'default';\n                    }\n                }\n            }\n        }\n        return parent.cursor;\n    };\n    Selection.prototype.setCursorForLineArrow = function (actObj, x, y, upperCanvas) {\n        var index;\n        var radius = actObj.topLeftCircle.radius;\n        if (isNullOrUndefined(actObj.pointColl)) {\n            return index;\n        }\n        for (var i = 0, len = actObj.pointColl.length; i < len; i++) {\n            var point = actObj.pointColl[i];\n            if (x >= (point.x - (radius * 2)) && x <= (point.x + (radius * 2)) &&\n                y >= (point.y - (radius * 2)) && y <= (point.y + (radius * 2))) {\n                upperCanvas.style.cursor = this.parent.cursor = 'move';\n                index = i;\n                break;\n            }\n            else {\n                upperCanvas.style.cursor = this.parent.cursor = 'default';\n            }\n        }\n        return index;\n    };\n    Selection.prototype.setCursorForRotatedObject = function (actObj, x, y, upperCanvas) {\n        this.resizedElement = '';\n        var parent = this.parent;\n        var radius = actObj.bottomCenterCircle.radius;\n        var horTP = actObj.horTopLinePointColl[Math.round(actObj.horTopLinePointColl.length / 2)];\n        var horTP1 = actObj.horTopLinePointColl[Math.round(actObj.horTopLinePointColl.length - 1)];\n        var verLP = actObj.verLeftLinePointColl[Math.round(actObj.verLeftLinePointColl.length / 2)];\n        var verRP = actObj.verRightLinePointColl[Math.round(actObj.verRightLinePointColl.length / 2)];\n        var horBP = actObj.horBottomLinePointColl[Math.round(actObj.horBottomLinePointColl.length / 2)];\n        var horBP1 = actObj.horBottomLinePointColl[Math.round(actObj.horBottomLinePointColl.length - 1)];\n        var rotCP = actObj.rotationCirclePointColl;\n        var horTP0 = actObj.horTopLinePointColl[0];\n        var horBP0 = actObj.horBottomLinePointColl[0];\n        if (x >= (horTP0.x - (radius + 2)) && x <= (horTP0.x + (radius + 2)) && y >= (horTP0.y - (radius + 2)) &&\n            y <= (horTP0.y + (radius + 2))) {\n            upperCanvas.style.cursor = parent.cursor = 'nw-resize';\n        }\n        else if (x >= (horTP.x - 5) && x <= (horTP.x + 5) && y >= (horTP.y - 5) && y <= (horTP.y + 5)) {\n            upperCanvas.style.cursor = parent.cursor = this.resizedElement = 'n-resize';\n        }\n        else if (x >= (horTP1.x - (radius + 2)) && x <= (horTP1.x + (radius + 2)) && y >= (horTP1.y - (radius + 2)) &&\n            y <= (horTP1.y + (radius + 2))) {\n            upperCanvas.style.cursor = parent.cursor = 'ne-resize';\n        }\n        else if (x >= (verLP.x - 5) && x <= (verLP.x + 5) && y >= (verLP.y - 5) && y <= (verLP.y + 5)) {\n            upperCanvas.style.cursor = parent.cursor = this.resizedElement = 'w-resize';\n        }\n        else if (x >= (verRP.x - 5) && x <= (verRP.x + 5) && y >= (verRP.y - 5) && y <= (verRP.y + 5)) {\n            upperCanvas.style.cursor = parent.cursor = this.resizedElement = 'e-resize';\n        }\n        else if (x >= (horBP0.x - (radius + 2)) && x <= (horBP0.x + (radius + 2)) && y >= (horBP0.y - (radius + 2)) &&\n            y <= (horBP0.y + (radius + 2))) {\n            upperCanvas.style.cursor = parent.cursor = 'sw-resize';\n        }\n        else if (x >= (horBP.x - 5) && x <= (horBP.x + 5) && y >= (horBP.y - 5) && y <= (horBP.y + 5)) {\n            upperCanvas.style.cursor = parent.cursor = this.resizedElement = 's-resize';\n        }\n        else if (x >= (horBP1.x - (radius + 2)) && x <= (horBP1.x + (radius + 2)) && y >= (horBP1.y - (radius + 2)) &&\n            y <= (horBP1.y + (radius + 2))) {\n            upperCanvas.style.cursor = parent.cursor = 'se-resize';\n        }\n        else if (rotCP && x >= (rotCP.x - (radius + 2)) && x <= rotCP.x + (radius + 2) && y >= rotCP.y - (radius + 2) &&\n            y <= rotCP.y + (radius + 2)) {\n            upperCanvas.style.cursor = parent.cursor = 'grabbing';\n        }\n        else {\n            upperCanvas.style.cursor = parent.cursor = 'default';\n            var isPointsInsideRectangle = this.getRectanglePoints(actObj.activePoint.startX, actObj.activePoint.startY, actObj.activePoint.width, actObj.activePoint.height, actObj.rotatedAngle * (180 / Math.PI), x, y);\n            if (isPointsInsideRectangle) {\n                upperCanvas.style.cursor = parent.cursor = 'move';\n            }\n        }\n        if (parent.cursor === 'default') {\n            for (var i = 0, len = actObj.horTopLinePointColl.length; i < len; i++) {\n                var horTP_1 = actObj.horTopLinePointColl[i];\n                if (x >= (horTP_1.x - 5) && x <= (horTP_1.x + 5) && y >= (horTP_1.y - 5) && y <= (horTP_1.y + 5)) {\n                    upperCanvas.style.cursor = parent.cursor = this.resizedElement = 'n-resize';\n                    break;\n                }\n            }\n        }\n        if (parent.cursor === 'default') {\n            for (var i = 0, len = actObj.horBottomLinePointColl.length; i < len; i++) {\n                var horBP_1 = actObj.horBottomLinePointColl[i];\n                if (x >= (horBP_1.x - 5) && x <= (horBP_1.x + 5) && y >= (horBP_1.y - 5) && y <= (horBP_1.y + 5)) {\n                    upperCanvas.style.cursor = parent.cursor = this.resizedElement = 's-resize';\n                    break;\n                }\n            }\n        }\n        if (parent.cursor === 'default') {\n            for (var i = 0, len = actObj.verLeftLinePointColl.length; i < len; i++) {\n                var verLP_1 = actObj.verLeftLinePointColl[i];\n                if (x >= (verLP_1.x - 5) && x <= (verLP_1.x + 5) && y >= (verLP_1.y - 5) && y <= (verLP_1.y + 5)) {\n                    upperCanvas.style.cursor = parent.cursor = this.resizedElement = 'w-resize';\n                    break;\n                }\n            }\n        }\n        if (parent.cursor === 'default') {\n            for (var i = 0, len = actObj.verRightLinePointColl.length; i < len; i++) {\n                var verRP_1 = actObj.verRightLinePointColl[i];\n                if (x >= (verRP_1.x - 5) && x <= (verRP_1.x + 5) && y >= (verRP_1.y - 5) && y <= (verRP_1.y + 5)) {\n                    upperCanvas.style.cursor = parent.cursor = this.resizedElement = 'e-resize';\n                    break;\n                }\n            }\n        }\n        this.adjustCursorStylesForRotatedState(actObj);\n        return parent.cursor;\n    };\n    Selection.prototype.adjustCursorStylesForRotatedState = function (actObj) {\n        var parent = this.parent;\n        var length = actObj.rotatedAngle * (180 / Math.PI);\n        length = length > 0 ? Math.floor(length) : Math.ceil(length);\n        if ((length >= 92 && length <= 182) || (length >= -178 && length <= -88)) {\n            var cursorMap = { 'nw-resize': 'ne-resize', 'n-resize': 's-resize',\n                'ne-resize': 'nw-resize', 'w-resize': 'e-resize', 'e-resize': 'w-resize',\n                'sw-resize': 'se-resize', 's-resize': 'n-resize', 'se-resize': 'sw-resize'\n            };\n            if (parent.cursor in cursorMap) {\n                parent.cursor = cursorMap[parent.cursor];\n            }\n        }\n        parent.upperCanvas.style.cursor = this.getResizeElement((actObj.rotatedAngle * (180 / Math.PI)), parent.cursor);\n        return parent.cursor;\n    };\n    Selection.prototype.getResizeElement = function (degree, element) {\n        var resizeMappings = [];\n        switch (element) {\n            case 'nw-resize':\n                resizeMappings = [\n                    [337.5, 22.5, 'nw-resize'], [22.5, 67.5, 'n-resize'], [67.5, 112.5, 'ne-resize'],\n                    [112.5, 157.5, 'e-resize'], [157.5, 202.5, 'se-resize'],\n                    [202.5, 247.5, 's-resize'], [247.5, 292.5, 'sw-resize'],\n                    [292.5, 337.5, 'w-resize']\n                ];\n                break;\n            case 'n-resize':\n                resizeMappings = [\n                    [337.5, 22.5, 'n-resize'], [22.5, 67.5, 'ne-resize'], [67.5, 112.5, 'e-resize'],\n                    [112.5, 157.5, 'se-resize'], [157.5, 202.5, 's-resize'], [202.5, 247.5, 'sw-resize'],\n                    [247.5, 292.5, 'w-resize'], [292.5, 337.5, 'nw-resize']\n                ];\n                break;\n            case 'ne-resize':\n                resizeMappings = [\n                    [337.5, 22.5, 'ne-resize'], [22.5, 67.5, 'e-resize'],\n                    [67.5, 112.5, 'se-resize'], [112.5, 157.5, 's-resize'], [157.5, 202.5, 'sw-resize'],\n                    [202.5, 247.5, 'w-resize'], [247.5, 292.5, 'nw-resize'], [292.5, 337.5, 'n-resize']\n                ];\n                break;\n            case 'e-resize':\n                resizeMappings = [\n                    [337.5, 22.5, 'e-resize'], [22.5, 67.5, 'se-resize'], [67.5, 112.5, 's-resize'],\n                    [112.5, 157.5, 'sw-resize'], [157.5, 202.5, 'w-resize'], [202.5, 247.5, 'nw-resize'],\n                    [247.5, 292.5, 'n-resize'], [292.5, 337.5, 'ne-resize']\n                ];\n                break;\n            case 'se-resize':\n                resizeMappings = [\n                    [337.5, 22.5, 'se-resize'], [22.5, 67.5, 's-resize'], [67.5, 112.5, 'sw-resize'],\n                    [112.5, 157.5, 'w-resize'], [157.5, 202.5, 'nw-resize'], [202.5, 247.5, 'n-resize'],\n                    [247.5, 292.5, 'ne-resize'], [292.5, 337.5, 'e-resize']\n                ];\n                break;\n            case 's-resize':\n                resizeMappings = [\n                    [337.5, 22.5, 's-resize'], [22.5, 67.5, 'sw-resize'], [67.5, 112.5, 'w-resize'],\n                    [112.5, 157.5, 'nw-resize'], [157.5, 202.5, 'n-resize'], [202.5, 247.5, 'ne-resize'],\n                    [247.5, 292.5, 'e-resize'], [292.5, 337.5, 'se-resize']\n                ];\n                break;\n            case 'sw-resize':\n                resizeMappings = [\n                    [337.5, 22.5, 'sw-resize'], [22.5, 67.5, 'w-resize'], [67.5, 112.5, 'nw-resize'],\n                    [112.5, 157.5, 'n-resize'], [157.5, 202.5, 'ne-resize'], [202.5, 247.5, 'e-resize'],\n                    [247.5, 292.5, 'se-resize'], [292.5, 337.5, 's-resize']\n                ];\n                break;\n            case 'w-resize':\n                resizeMappings = [\n                    [337.5, 22.5, 'w-resize'], [22.5, 67.5, 'nw-resize'], [67.5, 112.5, 'n-resize'],\n                    [112.5, 157.5, 'ne-resize'], [157.5, 202.5, 'e-resize'], [202.5, 247.5, 'se-resize'],\n                    [247.5, 292.5, 's-resize'], [292.5, 337.5, 'sw-resize']\n                ];\n                break;\n        }\n        var positiveDegree = degree < 0 ? 360 - Math.abs(degree) : degree;\n        for (var _i = 0, resizeMappings_1 = resizeMappings; _i < resizeMappings_1.length; _i++) {\n            var _a = resizeMappings_1[_i], startDegree = _a[0], endDegree = _a[1], resizeElement = _a[2];\n            if ((positiveDegree > startDegree && positiveDegree <= endDegree) ||\n                (positiveDegree + 360 > startDegree && positiveDegree + 360 <= endDegree)) {\n                return resizeElement;\n            }\n        }\n        return element;\n    };\n    Selection.prototype.setCursorForFreehandDrawing = function (x, y, upperCanvas, id) {\n        var upperContext = upperCanvas.getContext('2d');\n        var parent = this.parent;\n        var textArea = document.querySelector('#' + parent.element.id + '_textArea');\n        var isEntered = false;\n        parent.notify('freehand-draw', { prop: 'setFreehandDrawHoveredIndex', onPropertyChange: false,\n            value: { index: -1 } });\n        var sPoints;\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (id && id !== parent.pointColl[n].id) {\n                continue;\n            }\n            var obj = { selPointColl: {} };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false, value: { obj: obj } });\n            sPoints = extend([], obj['selPointColl'][n].points, []);\n            parent.points = extend([], parent.pointColl[n].points, []);\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var ptc = parent.pointColl[n];\n            parent.notify('freehand-draw', { prop: 'setPointCounter', onPropertyChange: false, value: { value: 0 } });\n            var len = sPoints.length;\n            for (var l = 0; l < len; l++) {\n                if (l !== 0) {\n                    var isInside = false;\n                    if (sPoints[l - 1] && sPoints[l]) {\n                        isInside = this.isInside(x, y, sPoints[l - 1].x, sPoints[l - 1].y, sPoints[l].x, sPoints[l].y);\n                    }\n                    if (isInside) {\n                        this.isFhdPoint = true;\n                        parent.notify('freehand-draw', { prop: 'setFreehandDrawHoveredIndex', onPropertyChange: false,\n                            value: { index: n } });\n                        parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                            value: { strokeColor: null, strokeWidth: null } });\n                        upperCanvas.style.cursor = parent.cursor = 'pointer';\n                        isEntered = true;\n                        break;\n                    }\n                    else if (!this.isFhdEditing || ptc.isSelected) {\n                        if (this.isFhdPoint || this.isFhdEditing) {\n                            upperContext.clearRect(0, 0, upperCanvas.width, upperCanvas.height);\n                            if (parent.activeObj.shape && textArea.style.display === 'none') {\n                                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n                            }\n                        }\n                        if (this.isFhdEditing) {\n                            var indexObj = { freehandSelectedIndex: -1 };\n                            parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n                            var strokeColor = parent.pointColl[indexObj['freehandSelectedIndex']].strokeColor;\n                            var strokeWidth = parent.pointColl[indexObj['freehandSelectedIndex']].strokeWidth;\n                            parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                                value: { strokeColor: strokeColor, strokeWidth: strokeWidth } });\n                        }\n                        else {\n                            parent.notify('freehand-draw', { prop: 'setFreehandDrawHoveredIndex', onPropertyChange: false,\n                                value: { index: null } });\n                        }\n                        this.isFhdPoint = false;\n                    }\n                }\n                else {\n                    var pt = parent.points[l];\n                    if (x > pt.x - ptc.strokeWidth && x < pt.x + ptc.strokeWidth && y > pt.y - ptc.strokeWidth &&\n                        y < pt.y + ptc.strokeWidth) {\n                        this.isFhdPoint = true;\n                        parent.notify('freehand-draw', { prop: 'setFreehandDrawHoveredIndex', onPropertyChange: false, value: { index: n } });\n                        parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false, value: { strokeColor: null, strokeWidth: null } });\n                        upperCanvas.style.cursor = parent.cursor = 'pointer';\n                        isEntered = true;\n                        break;\n                    }\n                    else if (!this.isFhdEditing || ptc.isSelected) {\n                        if (this.isFhdPoint || this.isFhdEditing) {\n                            upperContext.clearRect(0, 0, upperCanvas.width, upperCanvas.height);\n                            if (parent.activeObj.shape && textArea.style.display === 'none') {\n                                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n                            }\n                        }\n                        if (this.isFhdEditing) {\n                            var indexObj = { freehandSelectedIndex: -1 };\n                            parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n                            var strokeColor = parent.pointColl[indexObj['freehandSelectedIndex']].strokeColor;\n                            var strokeWidth = parent.pointColl[indexObj['freehandSelectedIndex']].strokeWidth;\n                            parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                                value: { strokeColor: strokeColor, strokeWidth: strokeWidth } });\n                        }\n                        this.isFhdPoint = false;\n                    }\n                }\n            }\n            if (isEntered) {\n                break;\n            }\n        }\n    };\n    Selection.prototype.setCursorFromObj = function (x, y, obj, upperCanvas, isCropSelection) {\n        var parent = this.parent;\n        for (var i = 0, len = obj.length; i < len; i++) {\n            if (parent.cursor === 'move') {\n                return;\n            }\n            var actObj = extend({}, obj[i], {}, true);\n            if (actObj.activePoint.width === 0 && actObj.activePoint.height === 0) {\n                obj.splice(i, 1);\n                return;\n            }\n            this.cursorTargetId = actObj.currIndex;\n            if (actObj.shape === 'line' || actObj.shape === 'arrow') {\n                this.setCursorForLineArrow(actObj, x, y, upperCanvas);\n            }\n            else if (actObj.shape === 'path') {\n                this.setCursorForPath(actObj, x, y, upperCanvas);\n            }\n            else if (!isNullOrUndefined(actObj.rotatedAngle) && actObj.rotatedAngle !== 0) {\n                this.setCursorForRotatedObject(actObj, x, y, upperCanvas);\n            }\n            else {\n                upperCanvas.style.cursor = parent.cursor = this.getMouseCursor(actObj, x, y, isCropSelection, true);\n            }\n        }\n    };\n    Selection.prototype.isInside = function (x, y, z1, z2, z3, z4) {\n        var x1 = Math.min(z1, z3);\n        var x2 = Math.max(z1, z3);\n        var y1 = Math.min(z2, z4);\n        var y2 = Math.max(z2, z4);\n        if ((x1 <= x && x <= x2) && (y1 <= y && y <= y2)) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Selection.prototype.preventResizing = function (tempActiveObj) {\n        var parent = this.parent;\n        if (parent.activeObj.preventShapeDragOut && this.isShapeDragOut()) {\n            var actPoint = parent.activeObj.activePoint;\n            actPoint.startX = tempActiveObj.activePoint.startX;\n            actPoint.startY = tempActiveObj.activePoint.startY;\n            actPoint.endX = tempActiveObj.activePoint.endX;\n            actPoint.endY = tempActiveObj.activePoint.endY;\n            actPoint.width = tempActiveObj.activePoint.width;\n            actPoint.height = tempActiveObj.activePoint.height;\n            parent.activeObj.rotatedAngle = tempActiveObj.rotatedAngle;\n            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false,\n                value: { actPoint: actPoint, obj: parent.activeObj, isMouseMove: null, x: null, y: null } });\n        }\n    };\n    Selection.prototype.updateActivePoint = function (x, y, isCropSelection) {\n        var parent = this.parent;\n        var obj = { width: 0, height: 0 };\n        var _a = parent.activeObj.activePoint, startX = _a.startX, startY = _a.startY;\n        var _b = parent.activeObj.activePoint, width = _b.width, height = _b.height;\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: width, height: height, obj: obj, isImgShape: null } });\n        var previousShapeSettings = this.updatePrevShapeSettings();\n        var shapeResizingArgs = { cancel: false, action: 'resize', previousShapeSettings: previousShapeSettings, allowShapeOverflow: this.allowOutofBound() };\n        var shapeMovingArgs = { cancel: false, action: 'move', previousShapeSettings: previousShapeSettings, allowShapeOverflow: this.allowOutofBound() };\n        this.shapeResizingArgs = shapeResizingArgs;\n        this.shapeMovingArgs = shapeMovingArgs;\n        if (parent.activeObj.shape === 'text' && this.dragElement !== '') {\n            parent.notify('shape', { prop: 'updateFontRatio', onPropertyChange: false,\n                value: { obj: parent.activeObj, isTextArea: null } });\n        }\n        if (this.currentDrawingShape !== '' && (this.dragElement === '' || this.dragElement === 'move') && parent.isShapeDrawing) {\n            var shapeColl = ['line', 'arrow', 'path'];\n            if (shapeColl.indexOf(parent.activeObj.shape) > -1) {\n                this.dragElement = 'e-resize';\n            }\n            else {\n                if (x > startX && y > startY) {\n                    this.dragElement = 'se-resize';\n                }\n                else if (x < startX && y > startY) {\n                    this.dragElement = 'sw-resize';\n                }\n                else if (x > startX && y < startY) {\n                    this.dragElement = 'ne-resize';\n                }\n                else if (x < startX && y < startY) {\n                    this.dragElement = 'nw-resize';\n                }\n            }\n        }\n        if (parent.activeObj.shape === 'arrow') {\n            if (Math.atan2(x - parent.lowerCanvas.width / 2, y - parent.lowerCanvas.height / 2) > 0) {\n                parent.activeObj.rotatedAngle = -Math.atan2(x - parent.lowerCanvas.width / 2, y - parent.lowerCanvas.height / 2);\n            }\n            else {\n                parent.activeObj.rotatedAngle = Math.abs(Math.atan2(x - parent.lowerCanvas.width / 2, y - parent.lowerCanvas.height / 2));\n            }\n        }\n        var degree;\n        var isHorizontalflip = false;\n        var isVerticalflip = false;\n        if (isCropSelection && parent.transform.straighten !== 0 && this.isMouseOutsideImg(x, y)) {\n            return;\n        }\n        var tempActiveObj = extend({}, parent.activeObj, {}, true);\n        var splitWords;\n        var cropResize;\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords !== undefined && splitWords[0] === 'crop') {\n            cropResize = true;\n        }\n        switch (this.dragElement.toLowerCase()) {\n            case 'nw-resize':\n                this.updateNWPoints(x, y);\n                this.preventResizing(tempActiveObj);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'n-resize':\n                this.updateNPoints(x, y);\n                this.preventResizing(tempActiveObj);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'ne-resize':\n                this.updateNEPoints(x, y);\n                this.preventResizing(tempActiveObj);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'w-resize':\n                this.updateWPoints(x, y);\n                this.preventResizing(tempActiveObj);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'e-resize':\n                this.updateEPoints(x, y);\n                this.preventResizing(tempActiveObj);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'sw-resize':\n                this.updateSWPoints(x, y);\n                this.preventResizing(tempActiveObj);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 's-resize':\n                this.updateSPoints(x, y);\n                this.preventResizing(tempActiveObj);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'se-resize':\n                this.updateSEPoints(x, y);\n                this.preventResizing(tempActiveObj);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'grabbing':\n                if (Math.atan2(x - (startX + (width / 2)), y - (startY + (height / 2))) > 0) {\n                    parent.activeObj.rotatedAngle = -Math.atan2(x - (startX + (width / 2)), y - (startY + (height / 2)));\n                }\n                else {\n                    parent.activeObj.rotatedAngle = Math.abs(Math.atan2(x - (startX + (width / 2)), y - (startY + (height / 2))));\n                }\n                if (parent.activeObj.shapeDegree === 0) {\n                    degree = parent.transform.degree;\n                }\n                else {\n                    degree = parent.transform.degree - parent.activeObj.shapeDegree;\n                }\n                if (degree < 0) {\n                    degree = 360 + degree;\n                }\n                for (var i = 0, len = parent.activeObj.flipObjColl.length; i < len; i++) {\n                    if (parent.activeObj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                        isHorizontalflip = true;\n                    }\n                    else if (parent.activeObj.flipObjColl[i].toLowerCase() === 'vertical') {\n                        isVerticalflip = true;\n                    }\n                }\n                parent.activeObj.rotatedAngle -= (degree * (Math.PI / 180));\n                if (degree === 0 || degree === 360) {\n                    if (isVerticalflip) {\n                        parent.activeObj.rotatedAngle -= (180 * (Math.PI / 180));\n                    }\n                }\n                else if (degree === 90 || degree === -270) {\n                    if (isHorizontalflip) {\n                        parent.activeObj.rotatedAngle -= (180 * (Math.PI / 180));\n                    }\n                }\n                else if (degree === 180 || degree === -180) {\n                    if (isVerticalflip) {\n                        parent.activeObj.rotatedAngle -= (180 * (Math.PI / 180));\n                    }\n                }\n                else if (degree === 270 || degree === -90) {\n                    if (isHorizontalflip) {\n                        parent.activeObj.rotatedAngle -= (180 * (Math.PI / 180));\n                    }\n                }\n                this.preventResizing(tempActiveObj);\n                break;\n            case 'pathdrag':\n                if (!isNullOrUndefined(this.pathAdjustedIndex)) {\n                    parent.activeObj.pointColl[this.pathAdjustedIndex].x = x;\n                    parent.activeObj.pointColl[this.pathAdjustedIndex].y = y;\n                }\n                break;\n            default:\n                if (!isCropSelection && !parent.currObjType.isCustomCrop) {\n                    var activePoint = parent.activeObj.activePoint;\n                    if (this.dragPoint.startX) {\n                        var width_1 = (this.dragPoint.endX - this.previousPoint.x);\n                        var height_1 = (this.dragPoint.endY - this.previousPoint.y);\n                        activePoint.startX += width_1;\n                        activePoint.endX += width_1;\n                        activePoint.startY += height_1;\n                        activePoint.endY += height_1;\n                        startX = activePoint.startX;\n                        startY = activePoint.startY;\n                        if (parent.activeObj.shape !== 'line' && parent.activeObj.shape !== 'arrow' &&\n                            parent.activeObj.rotationCirclePointColl) {\n                            parent.activeObj.rotationCirclePointColl.x += width_1;\n                            parent.activeObj.rotationCirclePointColl.y += height_1;\n                            parent.activeObj.rotationCirclePoint.x += width_1;\n                            parent.activeObj.rotationCirclePoint.y += height_1;\n                        }\n                        if (parent.activeObj.shape === 'path') {\n                            for (var i = 0, len = parent.activeObj.pointColl.length; i < len; i++) {\n                                parent.activeObj.pointColl[i].x += width_1;\n                                parent.activeObj.pointColl[i].y += height_1;\n                            }\n                        }\n                        if ((!this.isPreventDragging && this.isShapeDragOut()) && (parent.activeObj.preventShapeDragOut || parent.activeObj.shape === 'redact' || cropResize)) {\n                            activePoint.startX -= width_1;\n                            activePoint.endX -= width_1;\n                            activePoint.startY -= height_1;\n                            activePoint.endY -= height_1;\n                            if (parent.activeObj.shape !== 'line' && parent.activeObj.shape !== 'arrow' &&\n                                parent.activeObj.rotationCirclePointColl) {\n                                parent.activeObj.rotationCirclePointColl.x -= width_1;\n                                parent.activeObj.rotationCirclePointColl.y -= height_1;\n                                parent.activeObj.rotationCirclePoint.x -= width_1;\n                                parent.activeObj.rotationCirclePoint.y -= height_1;\n                            }\n                            else if (parent.activeObj.shape === 'path') {\n                                for (var l = 0, len = parent.activeObj.pointColl.length; l < len; l++) {\n                                    parent.activeObj.pointColl[l].x -= width_1;\n                                    parent.activeObj.pointColl[l].y -= height_1;\n                                }\n                            }\n                            if (parent.activeObj.rotatedAngle === 0) {\n                                var tempEndX = parent.activeObj.activePoint.endX;\n                                var tempEndY = parent.activeObj.activePoint.endY;\n                                if (parent.activeObj.shape === 'path') {\n                                    parent.activeObj.activePoint = parent.getSquarePointForPath(parent.activeObj);\n                                }\n                                this.setDragWidth(width_1);\n                                this.setDragHeight(height_1);\n                                var currObj = parent.activeObj;\n                                var xDiff = currObj.activePoint.endX - tempEndX;\n                                var yDiff = currObj.activePoint.endY - tempEndY;\n                                if (currObj.shape === 'path') {\n                                    for (var l = 0, len = currObj.pointColl.length; l < len; l++) {\n                                        currObj.pointColl[l].x += xDiff;\n                                        currObj.pointColl[l].y += yDiff;\n                                    }\n                                }\n                            }\n                            else {\n                                parent.notify('selection', { prop: 'updPtCollForShpRot', onPropertyChange: false, value: { obj: parent.activeObj } });\n                            }\n                        }\n                    }\n                    else {\n                        activePoint.startX = x < this.mouseDownPoint.x ? x : this.mouseDownPoint.x;\n                        activePoint.startY = y < this.mouseDownPoint.y ? y : this.mouseDownPoint.y;\n                        x = x < this.mouseDownPoint.x ? this.mouseDownPoint.x : x;\n                        y = y < this.mouseDownPoint.y ? this.mouseDownPoint.y : y;\n                        activePoint.endX = x;\n                        activePoint.endY = y;\n                    }\n                    this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'move');\n                }\n                break;\n        }\n    };\n    Selection.prototype.isShapeDragOut = function () {\n        var parent = this.parent;\n        var isShapeDragOut = false;\n        var allowPreventing = false;\n        var shape = parent.activeObj.shape;\n        if (parent.activeObj.preventShapeDragOut) {\n            allowPreventing = true;\n        }\n        else if (parent.activeObj.rotatedAngle === 0 &&\n            (shape !== 'line' && shape !== 'arrow' && shape !== 'path')) {\n            allowPreventing = true;\n        }\n        if (allowPreventing) {\n            var _a = parent.activeObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n            if (shape === 'path') {\n                var path = parent.getSquarePointForPath(parent.activeObj);\n                startX = path.startX;\n                startY = path.startY;\n                endX = path.endX;\n                endY = path.endY;\n            }\n            if (parent.activeObj.rotatedAngle === 0 || shape === 'arrow') {\n                isShapeDragOut = this.isObjOutsideImg(startX, startY, endX, endY, shape);\n            }\n            else {\n                var obj = { isIntersect: null, arr: null };\n                parent.notify('draw', { prop: 'updateImgCanvasPoints', onPropertyChange: false });\n                parent.notify('draw', { prop: 'isLinesIntersect', onPropertyChange: false, value: { obj: obj } });\n                if (obj['arr'][0] || obj['arr'][1] || obj['arr'][2] || obj['arr'][3]) {\n                    isShapeDragOut = true;\n                }\n                else {\n                    isShapeDragOut = this.isObjOutsideImg(startX, startY, endX, endY, shape);\n                }\n            }\n        }\n        return isShapeDragOut;\n    };\n    Selection.prototype.isObjOutsideImg = function (startX, startY, endX, endY, shape) {\n        var parent = this.parent;\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        if (startX < destLeft || startY < destTop || endX > destLeft + destWidth ||\n            endY > destTop + destHeight || ((shape === 'line' || shape === 'arrow') &&\n            (startX > destLeft + destWidth || startY > destTop + destHeight ||\n                endX < destLeft || endY < destTop))) {\n            return true;\n        }\n        return false;\n    };\n    Selection.prototype.triggerShapeChange = function (shapeResizingArgs, shapeMovingArgs, type) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        actPoint.width = actPoint.endX - actPoint.startX;\n        actPoint.height = actPoint.endY - actPoint.startY;\n        var currentShapeSettings = this.updatePrevShapeSettings();\n        if (!isNullOrUndefined(this.shapeResizingArgs) && !isNullOrUndefined(this.shapeMovingArgs)) {\n            shapeResizingArgs.currentShapeSettings = this.shapeResizingArgs.currentShapeSettings = currentShapeSettings;\n            shapeMovingArgs.currentShapeSettings = this.shapeMovingArgs.currentShapeSettings = currentShapeSettings;\n        }\n        else {\n            shapeResizingArgs.currentShapeSettings = currentShapeSettings;\n            shapeMovingArgs.currentShapeSettings = currentShapeSettings;\n        }\n        if (type === 'resize') {\n            this.isCropSelection = false;\n            var splitWords = void 0;\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (splitWords !== undefined && splitWords[0] === 'crop') {\n                this.isCropSelection = true;\n            }\n            if (!this.isCropSelection) {\n                if (this.currentDrawingShape !== '' && parent.upperCanvas.style.cursor === 'crosshair') {\n                    shapeResizingArgs.action = 'drawing';\n                }\n                if (!parent.currObjType.isRedact || parent.activeObj.shape !== 'redact') {\n                    parent.trigger('shapeChanging', shapeResizingArgs);\n                }\n                parent.editCompleteArgs = shapeResizingArgs;\n                this.isPreventShaping = shapeResizingArgs.cancel;\n                parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false, value: { shapeSettings: shapeResizingArgs.currentShapeSettings, allowShapeOverflow: shapeResizingArgs.allowShapeOverflow } });\n            }\n            else {\n                if (this.isMouseDown) {\n                    shapeResizingArgs.action = 'resize-start';\n                }\n                else if (this.isMouseUp) {\n                    shapeResizingArgs.action = 'resize-end';\n                }\n                var selectionResizingArgs = { action: shapeResizingArgs.action,\n                    previousSelectionSettings: { type: parent.getSelectionType(parent.activeObj.shape),\n                        startX: shapeResizingArgs.previousShapeSettings.startX,\n                        startY: shapeResizingArgs.previousShapeSettings.startY,\n                        width: shapeResizingArgs.previousShapeSettings.width,\n                        height: shapeResizingArgs.previousShapeSettings.height },\n                    currentSelectionSettings: { type: parent.getSelectionType(parent.activeObj.shape),\n                        startX: shapeResizingArgs.currentShapeSettings.startX,\n                        startY: shapeResizingArgs.currentShapeSettings.startY,\n                        width: shapeResizingArgs.currentShapeSettings.width,\n                        height: shapeResizingArgs.currentShapeSettings.height } };\n                this.selectionResizingArgs = selectionResizingArgs;\n                parent.trigger('selectionChanging', selectionResizingArgs);\n                parent.editCompleteArgs = selectionResizingArgs;\n                parent.notify('shape', { prop: 'updSelChangeEventArgs', onPropertyChange: false,\n                    value: { selectionSettings: selectionResizingArgs.currentSelectionSettings } });\n            }\n        }\n        else if (type === 'mouse-down' || type === 'mouse-up') {\n            if (parent.activeObj.shape !== 'redact') {\n                parent.trigger('shapeChanging', shapeResizingArgs);\n            }\n            parent.editCompleteArgs = shapeResizingArgs;\n            this.isPreventShaping = shapeResizingArgs.cancel;\n            parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n                value: { shapeSettings: shapeResizingArgs.currentShapeSettings, allowShapeOverflow: shapeResizingArgs.allowShapeOverflow } });\n        }\n        else {\n            if (parent.activeObj.shape !== 'redact') {\n                parent.trigger('shapeChanging', shapeMovingArgs);\n            }\n            parent.editCompleteArgs = shapeMovingArgs;\n            this.isPreventShaping = shapeMovingArgs.cancel;\n            parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n                value: { shapeSettings: shapeMovingArgs.currentShapeSettings, allowShapeOverflow: shapeMovingArgs.allowShapeOverflow } });\n        }\n        parent.eventType = type;\n    };\n    Selection.prototype.setDragWidth = function (width) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var _a = parent.img, destLeft = _a.destLeft, destWidth = _a.destWidth;\n        var tempWidth = width;\n        var shape = parent.activeObj.shape;\n        var preventDragOut = false;\n        if (parent.activeObj.preventShapeDragOut && (shape === 'line' || shape === 'arrow')) {\n            preventDragOut = true;\n        }\n        if (tempWidth >= 0) {\n            for (var i = 0; i < tempWidth; i++) {\n                width = tempWidth - i;\n                actPoint.startX += width;\n                actPoint.endX += width;\n                if ((actPoint.startX >= destLeft &&\n                    actPoint.endX <= destLeft + destWidth && !preventDragOut) ||\n                    (actPoint.startX >= destLeft && actPoint.endX <= destLeft + destWidth &&\n                        actPoint.endX >= destLeft && actPoint.startX <= destLeft + destWidth && preventDragOut)) {\n                    break;\n                }\n                else {\n                    actPoint.startX -= width;\n                    actPoint.endX -= width;\n                }\n            }\n        }\n        else {\n            for (var i = 1; i < Math.abs(tempWidth); i++) {\n                width = tempWidth + i;\n                actPoint.startX += width;\n                actPoint.endX += width;\n                if ((actPoint.startX >= destLeft &&\n                    actPoint.endX <= destLeft + destWidth && !preventDragOut) ||\n                    (actPoint.startX >= destLeft && actPoint.endX <= destLeft + destWidth &&\n                        actPoint.endX >= destLeft && actPoint.startX <= destLeft + destWidth && preventDragOut)) {\n                    break;\n                }\n                else {\n                    actPoint.startX -= width;\n                    actPoint.endX -= width;\n                }\n            }\n        }\n    };\n    Selection.prototype.setDragHeight = function (height) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var _a = parent.img, destTop = _a.destTop, destHeight = _a.destHeight;\n        var tempHeight = height;\n        var shape = parent.activeObj.shape;\n        var preventDragOut = false;\n        if (parent.activeObj.preventShapeDragOut && (shape === 'line' || shape === 'arrow')) {\n            preventDragOut = true;\n        }\n        if (tempHeight >= 0) {\n            for (var i = 1; i < tempHeight; i++) {\n                height = tempHeight - i;\n                actPoint.startY += height;\n                actPoint.endY += height;\n                if ((actPoint.startY >= destTop &&\n                    actPoint.endY <= destTop + destHeight && !preventDragOut) ||\n                    (actPoint.startY >= destTop && actPoint.endY <= destTop + destHeight &&\n                        actPoint.endY >= destTop && actPoint.startY <= destTop + destHeight && preventDragOut)) {\n                    break;\n                }\n                else {\n                    actPoint.startY -= height;\n                    actPoint.endY -= height;\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < Math.abs(tempHeight); i++) {\n                height = tempHeight + i;\n                actPoint.startY += height;\n                actPoint.endY += height;\n                if ((actPoint.startY >= destTop &&\n                    actPoint.endY <= destTop + destHeight && !preventDragOut) ||\n                    (actPoint.startY >= destTop && actPoint.endY <= destTop + destHeight &&\n                        actPoint.endY >= destTop && actPoint.startY <= destTop + destHeight && preventDragOut)) {\n                    break;\n                }\n                else {\n                    actPoint.startY -= height;\n                    actPoint.endY -= height;\n                }\n            }\n        }\n    };\n    Selection.prototype.limitDrag = function (isStart) {\n        var isLimiting = false;\n        var parent = this.parent;\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        var actPoint = parent.activeObj.activePoint;\n        var startX = isStart ? actPoint.startX : actPoint.endX;\n        var startY = isStart ? actPoint.startY : actPoint.endY;\n        var endX = isStart ? actPoint.endX : actPoint.startX;\n        var endY = isStart ? actPoint.endY : actPoint.startY;\n        var wrapperWidth = parent.upperCanvas.width;\n        var wrapperHeight = parent.upperCanvas.height;\n        if (Browser.isDevice) {\n            if (startX < 0 && destLeft < 0) {\n                startX = 0;\n            }\n            if (startY < 0 && destTop < 0) {\n                startY = 0;\n            }\n            if (endX > wrapperWidth && destLeft + destWidth > wrapperWidth) {\n                endX = wrapperWidth;\n            }\n            if (endY > wrapperHeight && destTop + destHeight > wrapperHeight) {\n                endY = wrapperHeight;\n            }\n        }\n        else {\n            if (startX < destLeft) {\n                startX = destLeft;\n            }\n            if (startY < destTop) {\n                startY = destTop;\n            }\n            if (endX > destLeft + destWidth) {\n                endX = destLeft + destWidth;\n            }\n            if (endY > destTop + destHeight) {\n                endY = destTop + destHeight;\n            }\n        }\n        if (parent.transform.straighten !== 0) {\n            var obj = { isIntersect: null, arr: null };\n            parent.notify('draw', { prop: 'updateImgCanvasPoints', onPropertyChange: false });\n            parent.notify('draw', { prop: 'isLinesIntersect', onPropertyChange: false, value: { obj: obj } });\n            if (obj['arr'][0] || obj['arr'][1] || obj['arr'][2] || obj['arr'][3]) {\n                isLimiting = true;\n            }\n        }\n        if (isStart) {\n            actPoint.startX = startX;\n            actPoint.startY = startY;\n            actPoint.endX = endX;\n            actPoint.endY = endY;\n        }\n        else {\n            actPoint.startX = endX;\n            actPoint.startY = endY;\n            actPoint.endX = startX;\n            actPoint.endY = startY;\n        }\n        return isLimiting;\n    };\n    Selection.prototype.isMouseOutsideImg = function (x, y) {\n        var obj = { bool: false };\n        this.parent.notify('draw', { prop: 'updateImgCanvasPoints', onPropertyChange: false });\n        this.parent.notify('draw', { prop: 'isPointsInsideImg', value: { obj: obj, x: x, y: y } });\n        return obj['bool'];\n    };\n    Selection.prototype.preventDraggingInvertly = function () {\n        var isLimiting = false;\n        var parent = this.parent;\n        if (parent.activeObj.shape === 'image') {\n            return isLimiting;\n        }\n        var splitWords;\n        var cropResize;\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords !== undefined && splitWords[0] === 'crop') {\n            cropResize = true;\n        }\n        if ((!this.isPreventDragging && parent.activeObj.rotatedAngle === 0) && (parent.activeObj.preventShapeDragOut || parent.activeObj.shape === 'redact' || cropResize)) {\n            isLimiting = this.limitDrag(true);\n            var shapeColl = ['line', 'arrow', 'path'];\n            if (shapeColl.indexOf(parent.activeObj.shape) > -1) {\n                isLimiting = this.limitDrag(false);\n            }\n        }\n        return isLimiting;\n    };\n    Selection.prototype.preventTextDraggingInvertly = function () {\n        var parent = this.parent;\n        var isLimiting = false;\n        var actPoint = parent.activeObj.activePoint;\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        if (!this.isPreventDragging) {\n            if (actPoint.startX < destLeft ||\n                actPoint.startY < destTop ||\n                actPoint.endX > destLeft + destWidth ||\n                actPoint.endY > destTop + destHeight) {\n                isLimiting = true;\n            }\n        }\n        return isLimiting;\n    };\n    Selection.prototype.preventInverseResize = function (tempActiveObj) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        if (actPoint.width < 0) {\n            actPoint.width = 0;\n            actPoint.startX = tempActiveObj.activePoint.startX;\n            actPoint.endX = tempActiveObj.activePoint.endX;\n        }\n        if (actPoint.height < 0) {\n            actPoint.height = 0;\n            actPoint.startY = tempActiveObj.activePoint.startY;\n            actPoint.endY = tempActiveObj.activePoint.endY;\n        }\n    };\n    Selection.prototype.getScaleRatio = function (scale) {\n        var parent = this.parent;\n        var point = { x: scale, y: scale };\n        if (parent.activeObj.shape && parent.activeObj.shape !== 'crop-custom' &&\n            parent.activeObj.shape !== 'crop-circle' && parent.activeObj.shape !== 'crop-square') {\n            var ratio = parent.activeObj.shape === 'image' || parent.activeObj.shape === 'text' ?\n                this.findImageRatio(parent.activeObj.activePoint.width, parent.activeObj.activePoint.height).split('-') :\n                parent.activeObj.shape.split('-');\n            if (ratio.length > 1 || parent.activeObj.shape === 'image' || parent.activeObj.shape === 'text') {\n                ratio = parent.activeObj.shape === 'image' || parent.activeObj.shape === 'text' ? ratio[0].split(':') : ratio[1].split(':');\n                var newScale = scale / (parseInt(ratio[1], 10));\n                point.x = newScale * (parseInt(ratio[0], 10));\n                point.y = newScale * (parseInt(ratio[1], 10));\n            }\n        }\n        return point;\n    };\n    Selection.prototype.findImageRatio = function (width, height, obj) {\n        // eslint-disable-next-line @typescript-eslint/tslint/config\n        var gcd = function (a, b) {\n            if (b === 0) {\n                return a;\n            }\n            return gcd(b, a % b);\n        };\n        var divisor = gcd(width, height);\n        var ratio = width / divisor + \":\" + height / divisor;\n        if (obj) {\n            obj['ratio'] = ratio;\n        }\n        return ratio;\n    };\n    Selection.prototype.revertResizing = function (tempActiveObj) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        if (this.preventDraggingInvertly()) {\n            actPoint.startX = tempActiveObj.activePoint.startX;\n            actPoint.startY = tempActiveObj.activePoint.startY;\n            actPoint.endX = tempActiveObj.activePoint.endX;\n            actPoint.endY = tempActiveObj.activePoint.endY;\n        }\n    };\n    Selection.prototype.performSEResize = function (x, y, tempActiveObj, actPoint) {\n        var parent = this.parent;\n        this.resizeImg(x, y, 'se-resize', tempActiveObj);\n        if (actPoint.endX < actPoint.startX) {\n            var temp = actPoint.endX;\n            actPoint.endX = actPoint.startX;\n            actPoint.startX = temp;\n            this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'sw-resize';\n        }\n        if (actPoint.endY < actPoint.startY) {\n            var temp = actPoint.endY;\n            actPoint.endY = actPoint.startY;\n            actPoint.startY = temp;\n            this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'ne-resize';\n        }\n        this.revertCustomSelection(actPoint, tempActiveObj, 'se-resize');\n        this.revertResizing(tempActiveObj);\n    };\n    Selection.prototype.performNWResize = function (x, y, tempActiveObj, actPoint) {\n        var parent = this.parent;\n        this.resizeImg(x, y, 'nw-resize', tempActiveObj);\n        if (actPoint.startX > actPoint.endX) {\n            var temp = actPoint.startX;\n            actPoint.startX = actPoint.endX;\n            actPoint.endX = temp;\n            this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'ne-resize';\n        }\n        if (actPoint.startY > actPoint.endY) {\n            var temp = actPoint.startY;\n            actPoint.startY = actPoint.endY;\n            actPoint.endY = temp;\n            this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'sw-resize';\n        }\n        this.revertCustomSelection(actPoint, tempActiveObj, 'nw-resize');\n        this.revertResizing(tempActiveObj);\n    };\n    Selection.prototype.isCustomSelection = function () {\n        if (this.parent.activeObj.shape) {\n            var shapeColl = ['custom', 'circle', 'square', '2:3', '3:2', '3:4', '4:3', '4:5', '5:4', '5:7', '7:5', '9:16', '16:9'];\n            return this.parent.activeObj.shape.indexOf('crop-') > -1 && shapeColl.indexOf(this.parent.activeObj.shape.split('-')[1]) === -1;\n        }\n        return false;\n    };\n    Selection.prototype.revertCustomSelection = function (actPoint, tempActiveObj, type) {\n        var parent = this.parent;\n        if (this.isCustomSelection()) {\n            var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n            var endX = destLeft + destWidth < parent.lowerCanvas.width ?\n                destLeft + destWidth : parent.lowerCanvas.width;\n            var endY = destTop + destHeight < parent.lowerCanvas.height ?\n                destTop + destHeight : parent.lowerCanvas.height;\n            var left = destLeft > 0 ? destLeft : 0;\n            var top_1 = destTop > 0 ? destTop : 0;\n            var endY1 = destTop > 0 ? destTop : 0;\n            var endX1 = destLeft > 0 ? destLeft : 0;\n            if ((type === 'se-resize' && (actPoint.endX > endX || actPoint.endY > endY)) ||\n                (type === 'nw-resize' && (actPoint.startX < left || actPoint.startY < top_1)) ||\n                (type === 'ne-resize' && (actPoint.endX > endX || actPoint.startY < endY1)) ||\n                (type === 'sw-resize' && (actPoint.startX < endX1 || actPoint.endY > endY))) {\n                this.revertPoints(actPoint, tempActiveObj);\n            }\n        }\n    };\n    Selection.prototype.revertPoints = function (actPoint, tempActiveObj) {\n        actPoint.startX = tempActiveObj.activePoint.startX;\n        actPoint.startY = tempActiveObj.activePoint.startY;\n        actPoint.endX = tempActiveObj.activePoint.endX;\n        actPoint.endY = tempActiveObj.activePoint.endY;\n        actPoint.width = tempActiveObj.activePoint.width;\n        actPoint.height = tempActiveObj.activePoint.height;\n    };\n    Selection.prototype.updateNWPoints = function (x, y) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var width;\n        var height;\n        var scale;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (parent.activeObj.shape === 'text') {\n            this.resizeImg(x, y, 'nw-resize', tempActiveObj);\n            parent.notify('shape', { prop: 'updateFontSize', onPropertyChange: false,\n                value: { obj: parent.activeObj } });\n        }\n        else {\n            var splitWords = void 0;\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape !== undefined && splitWords[0] !== 'crop')\n                || this.isCustomSelection()) {\n                if (parent.activeObj.shape === 'image' || this.isCustomSelection()) {\n                    this.resizeImg(x, y, 'nw-resize', tempActiveObj);\n                }\n                else {\n                    this.adjustNWPoints(actPoint, x, y, parent.activeObj.rotatedAngle);\n                }\n                if (actPoint.startX > actPoint.endX) {\n                    var temp = actPoint.startX;\n                    actPoint.startX = actPoint.endX;\n                    actPoint.endX = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'ne-resize';\n                }\n                if (actPoint.startY > actPoint.endY) {\n                    var temp = actPoint.startY;\n                    actPoint.startY = actPoint.endY;\n                    actPoint.endY = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'sw-resize';\n                }\n                this.revertCustomSelection(actPoint, tempActiveObj, 'nw-resize');\n                this.revertResizing(tempActiveObj);\n            }\n            else {\n                var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop;\n                if (actPoint.startX < x && actPoint.startY < y) {\n                    width = x - actPoint.startX;\n                    height = y - actPoint.startY;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    actPoint.startX += newScale.x;\n                    actPoint.startY += newScale.y;\n                    var left = destLeft > 0 ? destLeft : 0;\n                    var top_2 = destTop > 0 ? destTop : 0;\n                    if (actPoint.startX < left || actPoint.startY < top_2) {\n                        actPoint.startX -= newScale.x;\n                        actPoint.startY -= newScale.y;\n                    }\n                }\n                else {\n                    width = actPoint.startX - x;\n                    height = y - actPoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    actPoint.startX -= newScale.x;\n                    actPoint.startY -= newScale.y;\n                    var left = destLeft > 0 ? destLeft : 0;\n                    var top_3 = destTop > 0 ? destTop : 0;\n                    if (actPoint.startX < left || actPoint.startY < top_3) {\n                        actPoint.startX += newScale.x;\n                        actPoint.startY += newScale.y;\n                    }\n                }\n                actPoint.width = actPoint.endX - actPoint.startX;\n                actPoint.height = actPoint.endY - actPoint.startY;\n                this.revertResizing(tempActiveObj);\n            }\n            actPoint.width = actPoint.endX - actPoint.startX;\n            actPoint.height = actPoint.endY - actPoint.startY;\n            this.preventInverseResize(tempActiveObj);\n        }\n    };\n    Selection.prototype.updateNPoints = function (x, y) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var width;\n        var height;\n        var scale;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (parent.activeObj.shape !== 'text') {\n            var splitWords = void 0;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape && splitWords[0] !== 'crop')) {\n                if (parent.activeObj.shape !== 'line' && parent.activeObj.shape !== 'arrow' && parent.activeObj.shape !== 'path' &&\n                    parent.activeObj.rotatedAngle !== 0 && this.dragPoint.startX) {\n                    if (this.dragPoint.startX && this.dragPoint.startY) {\n                        this.previousPoint.x = this.dragPoint.endX;\n                        this.previousPoint.y = this.dragPoint.endY;\n                        this.dragPoint.endX = x;\n                        this.dragPoint.endY = y;\n                    }\n                    width = (this.dragPoint.endX - this.previousPoint.x);\n                    height = (this.dragPoint.endY - this.previousPoint.y);\n                    this.adjustRotationPoints(actPoint, width, height, parent.activeObj.rotatedAngle);\n                }\n                else {\n                    actPoint.startY = y;\n                    actPoint.height = actPoint.endY - actPoint.startY;\n                }\n                if (actPoint.startY > actPoint.endY) {\n                    var temp = actPoint.startY;\n                    actPoint.startY = actPoint.endY;\n                    actPoint.endY = temp;\n                    this.dragElement = this.resizedElement = 's-resize';\n                }\n                this.revertResizing(tempActiveObj);\n            }\n            else {\n                var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth;\n                if (this.isCustomSelection()) {\n                    this.performNWResize(x, y, tempActiveObj, actPoint);\n                }\n                else if (actPoint.endX > x && actPoint.startY < y) {\n                    width = actPoint.endX - x;\n                    height = y - actPoint.startY;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    actPoint.endX -= newScale.x;\n                    actPoint.startY += newScale.y;\n                    if (actPoint.endX > (destLeft + destWidth) ||\n                        actPoint.startY < destTop) {\n                        actPoint.endX += newScale.x;\n                        actPoint.startY -= newScale.y;\n                    }\n                }\n                else {\n                    width = x - actPoint.endX;\n                    height = actPoint.startY - y;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    actPoint.endX += newScale.x;\n                    actPoint.startY -= newScale.y;\n                    if (actPoint.endX > (destLeft + destWidth) ||\n                        actPoint.startY < destTop) {\n                        actPoint.endX -= newScale.x;\n                        actPoint.startY += newScale.y;\n                    }\n                }\n                actPoint.width = actPoint.endX - actPoint.startX;\n                actPoint.height = actPoint.endY - actPoint.startY;\n                this.revertResizing(tempActiveObj);\n            }\n        }\n    };\n    Selection.prototype.updateNEPoints = function (x, y) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var width;\n        var height;\n        var scale;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (parent.activeObj.shape === 'text') {\n            this.resizeImg(x, y, 'ne-resize', tempActiveObj);\n            parent.notify('shape', { prop: 'updateFontSize', onPropertyChange: false,\n                value: { obj: parent.activeObj } });\n        }\n        else {\n            var splitWords = void 0;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape !== undefined && splitWords[0] !== 'crop')\n                || this.isCustomSelection()) {\n                if (parent.activeObj.shape === 'image' || this.isCustomSelection()) {\n                    this.resizeImg(x, y, 'ne-resize', tempActiveObj);\n                }\n                else {\n                    this.adjustNEPoints(actPoint, x, y, parent.activeObj.rotatedAngle);\n                }\n                if (actPoint.endX < actPoint.startX) {\n                    var temp = actPoint.endX;\n                    actPoint.endX = actPoint.startX;\n                    actPoint.startX = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'nw-resize';\n                }\n                if (actPoint.startY > actPoint.endY) {\n                    var temp = actPoint.startY;\n                    actPoint.startY = actPoint.endY;\n                    actPoint.endY = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'se-resize';\n                }\n                this.revertCustomSelection(actPoint, tempActiveObj, 'ne-resize');\n                this.revertResizing(tempActiveObj);\n            }\n            else {\n                var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth;\n                if (actPoint.endX > x && actPoint.startY < y) {\n                    width = actPoint.endX - x;\n                    height = y - actPoint.startY;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    actPoint.endX -= newScale.x;\n                    actPoint.startY += newScale.y;\n                    var endX = destLeft + destWidth < parent.lowerCanvas.width ?\n                        destLeft + destWidth : parent.lowerCanvas.width;\n                    var endY = destTop > 0 ? destTop : 0;\n                    if (actPoint.endX > endX || actPoint.startY < endY) {\n                        actPoint.endX += newScale.x;\n                        actPoint.startY -= newScale.y;\n                    }\n                }\n                else {\n                    width = x - actPoint.endX;\n                    height = actPoint.startY - y;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    actPoint.endX += newScale.x;\n                    actPoint.startY -= newScale.y;\n                    var endX = destLeft + destWidth < parent.lowerCanvas.width ?\n                        destLeft + destWidth : parent.lowerCanvas.width;\n                    var endY = destTop > 0 ? destTop : 0;\n                    if (actPoint.endX > endX || actPoint.startY < endY) {\n                        actPoint.endX -= newScale.x;\n                        actPoint.startY += newScale.y;\n                    }\n                }\n                actPoint.width = actPoint.endX - actPoint.startX;\n                actPoint.height = actPoint.endY - actPoint.startY;\n                this.revertResizing(tempActiveObj);\n            }\n            actPoint.width = actPoint.endX - actPoint.startX;\n            actPoint.height = actPoint.endY - actPoint.startY;\n            this.preventInverseResize(tempActiveObj);\n        }\n    };\n    Selection.prototype.updateWPoints = function (x, y) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var width;\n        var height;\n        var scale;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (parent.activeObj.shape !== 'text') {\n            var splitWords = void 0;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape && splitWords[0] !== 'crop')) {\n                if (parent.activeObj.shape !== 'line' && parent.activeObj.shape !== 'arrow' && parent.activeObj.shape !== 'path' &&\n                    parent.activeObj.rotatedAngle !== 0 && this.dragPoint.startX) {\n                    if (this.dragPoint.startX && this.dragPoint.startY) {\n                        this.previousPoint.x = this.dragPoint.endX;\n                        this.previousPoint.y = this.dragPoint.endY;\n                        this.dragPoint.endX = x;\n                        this.dragPoint.endY = y;\n                    }\n                    width = (this.dragPoint.endX - this.previousPoint.x);\n                    height = (this.dragPoint.endY - this.previousPoint.y);\n                    this.adjustRotationPoints(actPoint, width, height, parent.activeObj.rotatedAngle);\n                }\n                else {\n                    actPoint.startX = x;\n                    actPoint.width = actPoint.endX - actPoint.startX;\n                }\n                if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'path') {\n                    actPoint.startY = y;\n                    actPoint.height = actPoint.endY - actPoint.startY;\n                    if (this.adjustActObjForLineArrow()) {\n                        this.dragElement = 'e-resize';\n                        if (parent.activeObj.triangleDirection === 'right') {\n                            parent.activeObj.triangleDirection = 'left';\n                        }\n                        else if (parent.activeObj.triangleDirection === 'left') {\n                            parent.activeObj.triangleDirection = 'right';\n                        }\n                    }\n                }\n                else if (actPoint.startX > actPoint.endX) {\n                    var temp = actPoint.startX;\n                    actPoint.startX = actPoint.endX;\n                    actPoint.endX = temp;\n                    this.dragElement = this.resizedElement = 'e-resize';\n                }\n                this.revertResizing(tempActiveObj);\n            }\n            else {\n                var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destHeight = _a.destHeight;\n                if (this.isCustomSelection()) {\n                    this.performNWResize(x, y, tempActiveObj, actPoint);\n                }\n                else if (actPoint.startX < x && actPoint.endY > y) {\n                    width = x - actPoint.startX;\n                    height = actPoint.endY - y;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    actPoint.startX += newScale.x;\n                    actPoint.endY -= newScale.y;\n                    if (actPoint.startX < destLeft || actPoint.endY >\n                        (destTop + destHeight)) {\n                        actPoint.startX -= newScale.x;\n                        actPoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = actPoint.startX - x;\n                    height = y - actPoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    actPoint.startX -= newScale.x;\n                    actPoint.endY += newScale.y;\n                    if (actPoint.startX < destLeft || actPoint.endY >\n                        (destTop + destHeight)) {\n                        actPoint.startX += newScale.x;\n                        actPoint.endY -= newScale.y;\n                    }\n                }\n                actPoint.width = actPoint.endX - actPoint.startX;\n                actPoint.height = actPoint.endY - actPoint.startY;\n                this.revertResizing(tempActiveObj);\n            }\n        }\n    };\n    Selection.prototype.updateEPoints = function (x, y) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var width;\n        var height;\n        var scale;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (parent.activeObj.shape !== 'text') {\n            var splitWords = void 0;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape && splitWords[0] !== 'crop')) {\n                if (parent.activeObj.shape !== 'line' && parent.activeObj.shape !== 'arrow' && parent.activeObj.shape !== 'path' &&\n                    parent.activeObj.rotatedAngle !== 0 && this.dragPoint.startX) {\n                    if (this.dragPoint.startX && this.dragPoint.startY) {\n                        this.previousPoint.x = this.dragPoint.endX;\n                        this.previousPoint.y = this.dragPoint.endY;\n                        this.dragPoint.endX = x;\n                        this.dragPoint.endY = y;\n                    }\n                    width = (this.dragPoint.endX - this.previousPoint.x);\n                    height = (this.dragPoint.endY - this.previousPoint.y);\n                    this.adjustRotationPoints(actPoint, width, height, parent.activeObj.rotatedAngle);\n                }\n                else {\n                    actPoint.endX = x;\n                    actPoint.width = actPoint.endX - actPoint.startX;\n                }\n                if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'path') {\n                    actPoint.endY = y;\n                    actPoint.height = actPoint.endY - actPoint.startY;\n                    if (this.adjustActObjForLineArrow()) {\n                        this.dragElement = 'w-resize';\n                        if (parent.activeObj.triangleDirection === 'right') {\n                            parent.activeObj.triangleDirection = 'left';\n                        }\n                        else if (parent.activeObj.triangleDirection === 'left') {\n                            parent.activeObj.triangleDirection = 'right';\n                        }\n                    }\n                }\n                else if (actPoint.endX < actPoint.startX) {\n                    var temp = actPoint.endX;\n                    actPoint.endX = actPoint.startX;\n                    actPoint.startX = temp;\n                    this.dragElement = this.resizedElement = 'w-resize';\n                }\n                this.revertResizing(tempActiveObj);\n            }\n            else {\n                var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n                if (this.isCustomSelection()) {\n                    this.performSEResize(x, y, tempActiveObj, actPoint);\n                }\n                else if (actPoint.endX > x && actPoint.endY > y) {\n                    width = actPoint.endX - x;\n                    height = actPoint.endY - y;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    actPoint.endX -= newScale.x;\n                    actPoint.endY -= newScale.y;\n                    if (actPoint.endX > (destLeft + destWidth) ||\n                        actPoint.endY > (destTop + destHeight)) {\n                        actPoint.endX += newScale.x;\n                        actPoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = x - actPoint.endX;\n                    height = y - actPoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    actPoint.endX += newScale.x;\n                    actPoint.endY += newScale.y;\n                    if (actPoint.endX > (destLeft + destWidth) ||\n                        actPoint.endY > (destTop + destHeight)) {\n                        actPoint.endX -= newScale.x;\n                        actPoint.endY -= newScale.y;\n                    }\n                }\n                actPoint.width = actPoint.endX - actPoint.startX;\n                actPoint.height = actPoint.endY - actPoint.startY;\n                this.revertResizing(tempActiveObj);\n            }\n        }\n    };\n    Selection.prototype.updateSWPoints = function (x, y) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var width;\n        var height;\n        var scale;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (parent.activeObj.shape === 'text') {\n            this.resizeImg(x, y, 'sw-resize', tempActiveObj);\n            parent.notify('shape', { prop: 'updateFontSize', onPropertyChange: false,\n                value: { obj: parent.activeObj } });\n        }\n        else {\n            var splitWords = void 0;\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape !== undefined && splitWords[0] !== 'crop')\n                || this.isCustomSelection()) {\n                if (parent.activeObj.shape === 'image' || this.isCustomSelection()) {\n                    this.resizeImg(x, y, 'sw-resize', tempActiveObj);\n                }\n                else {\n                    this.adjustSWPoints(actPoint, x, y, parent.activeObj.rotatedAngle);\n                }\n                if (actPoint.startX > actPoint.endX) {\n                    var temp = actPoint.startX;\n                    actPoint.startX = actPoint.endX;\n                    actPoint.endX = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'se-resize';\n                }\n                if (actPoint.endY < actPoint.startY) {\n                    var temp = actPoint.endY;\n                    actPoint.endY = actPoint.startY;\n                    actPoint.startY = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'nw-resize';\n                }\n                this.revertCustomSelection(actPoint, tempActiveObj, 'sw-resize');\n                this.revertResizing(tempActiveObj);\n            }\n            else {\n                var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destHeight = _a.destHeight;\n                if (actPoint.startX < x && actPoint.endY > y) {\n                    width = x - actPoint.startX;\n                    height = actPoint.endY - y;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    actPoint.startX += newScale.x;\n                    actPoint.endY -= newScale.y;\n                    var endX = destLeft > 0 ? destLeft : 0;\n                    var endY = destTop + destHeight < parent.lowerCanvas.height ? destTop +\n                        destHeight : parent.lowerCanvas.height;\n                    if (actPoint.startX < endX || actPoint.endY > endY) {\n                        actPoint.startX -= newScale.x;\n                        actPoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = actPoint.startX - x;\n                    height = y - actPoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    actPoint.startX -= newScale.x;\n                    actPoint.endY += newScale.y;\n                    var endX = destLeft > 0 ? destLeft : 0;\n                    var endY = destTop + destHeight < parent.lowerCanvas.height ? destTop +\n                        destHeight : parent.lowerCanvas.height;\n                    if (actPoint.startX < endX || actPoint.endY > endY) {\n                        actPoint.startX += newScale.x;\n                        actPoint.endY -= newScale.y;\n                    }\n                }\n                actPoint.width = actPoint.endX - actPoint.startX;\n                actPoint.height = actPoint.endY - actPoint.startY;\n                this.revertResizing(tempActiveObj);\n            }\n            actPoint.width = actPoint.endX - actPoint.startX;\n            actPoint.height = actPoint.endY - actPoint.startY;\n            this.preventInverseResize(tempActiveObj);\n        }\n    };\n    Selection.prototype.updateSPoints = function (x, y) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var width;\n        var height;\n        var scale;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (parent.activeObj.shape !== 'text') {\n            var splitWords = void 0;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape && splitWords[0] !== 'crop')) {\n                if (parent.activeObj.shape !== 'line' && parent.activeObj.shape !== 'arrow' && parent.activeObj.shape !== 'path' &&\n                    parent.activeObj.rotatedAngle !== 0 && this.dragPoint.startX) {\n                    if (this.dragPoint.startX && this.dragPoint.startY) {\n                        this.previousPoint.x = this.dragPoint.endX;\n                        this.previousPoint.y = this.dragPoint.endY;\n                        this.dragPoint.endX = x;\n                        this.dragPoint.endY = y;\n                    }\n                    width = (this.dragPoint.endX - this.previousPoint.x);\n                    height = (this.dragPoint.endY - this.previousPoint.y);\n                    this.adjustRotationPoints(actPoint, width, height, parent.activeObj.rotatedAngle);\n                }\n                else {\n                    actPoint.endY = y;\n                    actPoint.height = actPoint.endY - actPoint.startY;\n                }\n                if (actPoint.endY < actPoint.startY) {\n                    var temp = actPoint.endY;\n                    actPoint.endY = actPoint.startY;\n                    actPoint.startY = temp;\n                    this.dragElement = this.resizedElement = 'n-resize';\n                }\n                this.revertResizing(tempActiveObj);\n            }\n            else {\n                var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n                if (this.isCustomSelection()) {\n                    this.performSEResize(x, y, tempActiveObj, actPoint);\n                }\n                else if (actPoint.endX > x && actPoint.endY > y) {\n                    width = actPoint.endX - x;\n                    height = actPoint.endY - y;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    actPoint.endX -= newScale.x;\n                    actPoint.endY -= newScale.y;\n                    if (actPoint.endX > (destLeft + destWidth) ||\n                        actPoint.endY > (destTop + destHeight)) {\n                        actPoint.endX += newScale.x;\n                        actPoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = x - actPoint.endX;\n                    height = y - actPoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    actPoint.endX += newScale.x;\n                    actPoint.endY += newScale.x;\n                    if (actPoint.endX > (destLeft + destWidth) ||\n                        actPoint.endY > (destTop + destHeight)) {\n                        actPoint.endX -= newScale.x;\n                        actPoint.endY -= newScale.y;\n                    }\n                }\n                actPoint.width = actPoint.endX - actPoint.startX;\n                actPoint.height = actPoint.endY - actPoint.startY;\n                this.revertResizing(tempActiveObj);\n            }\n        }\n    };\n    Selection.prototype.updateSEPoints = function (x, y) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var width;\n        var height;\n        var scale;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (parent.activeObj.shape === 'text') {\n            this.resizeImg(x, y, 'se-resize', tempActiveObj);\n            parent.notify('shape', { prop: 'updateFontSize', onPropertyChange: false,\n                value: { obj: parent.activeObj } });\n        }\n        else {\n            var splitWords = void 0;\n            var newScale = void 0;\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape !== undefined && splitWords[0] !== 'crop')\n                || this.isCustomSelection()) {\n                if (parent.activeObj.shape === 'image' || this.isCustomSelection()) {\n                    this.resizeImg(x, y, 'se-resize', tempActiveObj);\n                }\n                else {\n                    this.adjustSEPoints(actPoint, x, y, parent.activeObj.rotatedAngle);\n                }\n                if (actPoint.endX < actPoint.startX) {\n                    var temp = actPoint.endX;\n                    actPoint.endX = actPoint.startX;\n                    actPoint.startX = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'sw-resize';\n                }\n                if (actPoint.endY < actPoint.startY) {\n                    var temp = actPoint.endY;\n                    actPoint.endY = actPoint.startY;\n                    actPoint.startY = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'ne-resize';\n                }\n                this.revertCustomSelection(actPoint, tempActiveObj, 'se-resize');\n                this.revertResizing(tempActiveObj);\n            }\n            else {\n                var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n                if (actPoint.endX > x && actPoint.endY > y) {\n                    width = actPoint.endX - x;\n                    height = actPoint.endY - y;\n                    scale = Math.min(width, height);\n                    newScale = this.getScaleRatio(scale);\n                    actPoint.endX -= newScale.x;\n                    actPoint.endY -= newScale.y;\n                    var endX = destLeft + destWidth < parent.lowerCanvas.width ?\n                        destLeft + destWidth : parent.lowerCanvas.width;\n                    var endY = destTop + destHeight < parent.lowerCanvas.height ?\n                        destTop + destHeight : parent.lowerCanvas.height;\n                    if (actPoint.endX > endX || actPoint.endY > endY) {\n                        actPoint.endX += newScale.x;\n                        actPoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = x - actPoint.endX;\n                    height = y - actPoint.endY;\n                    scale = Math.max(width, height);\n                    newScale = this.getScaleRatio(scale);\n                    actPoint.endX += newScale.x;\n                    actPoint.endY += newScale.y;\n                    var endX = destLeft + destWidth < parent.lowerCanvas.width ? destLeft +\n                        destWidth : parent.lowerCanvas.width;\n                    var endY = destTop + destHeight < parent.lowerCanvas.height ? destTop +\n                        destHeight : parent.lowerCanvas.height;\n                    if (actPoint.endX > endX || actPoint.endY > endY) {\n                        actPoint.endX -= newScale.x;\n                        actPoint.endY -= newScale.y;\n                    }\n                }\n                actPoint.width = actPoint.endX - actPoint.startX;\n                actPoint.height = actPoint.endY - actPoint.startY;\n                this.revertResizing(tempActiveObj);\n            }\n            this.preventInverseResize(tempActiveObj);\n        }\n    };\n    Selection.prototype.resizeImg = function (x, y, elem, tempActiveObj) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var width;\n        var height;\n        var scale;\n        var newScale;\n        if (this.previousPoint.x !== 0 && this.previousPoint.y !== 0) {\n            if (this.currentDrawingShape === 'text') {\n                this.setCursor(x, y);\n                if (parent.activeObj.textSettings.fontSize === 0) {\n                    parent.activeObj.textSettings.fontSize = 11;\n                    parent.notify('shape', { prop: 'updateFontRatio', onPropertyChange: false,\n                        value: { obj: parent.activeObj, isTextArea: null } });\n                    parent.activeObj.textSettings.text = parent.activeObj.keyHistory = 'Enter Text';\n                    parent.notify('shape', { prop: 'updateFontStyles', onPropertyChange: false,\n                        value: { isTextBox: null } });\n                    var width_2 = this.upperContext.measureText(parent.activeObj.textSettings.text).width +\n                        parent.activeObj.textSettings.fontSize * 0.5;\n                    actPoint.endX = actPoint.startX + width_2;\n                    actPoint.endY = actPoint.startY + parent.activeObj.textSettings.fontSize;\n                    actPoint.width = actPoint.endX - actPoint.startX;\n                    actPoint.height = actPoint.endY - actPoint.startY;\n                    tempActiveObj = extend({}, parent.activeObj, null, true);\n                    parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: parent.activeObj.activePoint, obj: parent.activeObj,\n                            isMouseMove: null, x: null, y: null } });\n                }\n            }\n            switch (parent.upperCanvas.style.cursor) {\n                case 'se-resize':\n                case 's-resize':\n                    if (this.previousPoint.x > x || this.previousPoint.y > y) {\n                        width = (this.previousPoint.x - x);\n                        height = (this.previousPoint.y - y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(actPoint, -Math.abs(newScale.x), -Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    else if (this.previousPoint.x !== 0 && this.previousPoint.y !== 0) {\n                        width = (x - this.previousPoint.x);\n                        height = (y - this.previousPoint.y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(actPoint, Math.abs(newScale.x), Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    break;\n                case 'sw-resize':\n                    if (this.previousPoint.x < x || this.previousPoint.y > y) {\n                        width = (x - this.previousPoint.x);\n                        height = (this.previousPoint.y - y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(actPoint, -Math.abs(newScale.x), -Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    else if (this.previousPoint.x !== 0 && this.previousPoint.y !== 0) {\n                        width = (this.previousPoint.x - x);\n                        height = (y - this.previousPoint.y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(actPoint, Math.abs(newScale.x), Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    break;\n                case 'w-resize':\n                case 'nw-resize':\n                    if (this.previousPoint.x < x || this.previousPoint.y < y) {\n                        width = (x - this.previousPoint.x);\n                        height = (y - this.previousPoint.y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(actPoint, -Math.abs(newScale.x), -Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    else if (this.previousPoint.x !== 0 && this.previousPoint.y !== 0) {\n                        width = (this.previousPoint.x - x);\n                        height = (this.previousPoint.y - y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(actPoint, Math.abs(newScale.x), Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    break;\n                case 'n-resize':\n                case 'ne-resize':\n                    if (this.previousPoint.x > x || this.previousPoint.y < y) {\n                        width = (this.previousPoint.x - x);\n                        height = (y - this.previousPoint.y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(actPoint, -Math.abs(newScale.x), -Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    else if (this.previousPoint.x !== 0 && this.previousPoint.y !== 0) {\n                        width = (x - this.previousPoint.x);\n                        height = (this.previousPoint.y - y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(actPoint, Math.abs(newScale.x), Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    break;\n                case 'e-resize':\n                    if (this.previousPoint.x > x || this.previousPoint.y > y) {\n                        width = (this.previousPoint.x - x);\n                        height = (this.previousPoint.y - y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(actPoint, -Math.abs(newScale.x), -Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    else if (this.previousPoint.x !== 0 && this.previousPoint.y !== 0) {\n                        width = (x - this.previousPoint.x);\n                        height = (y - this.previousPoint.y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(actPoint, Math.abs(newScale.x), Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    break;\n            }\n            actPoint.width = actPoint.endX - actPoint.startX;\n            actPoint.height = actPoint.endY - actPoint.startY;\n            if ((actPoint.width < 10 || actPoint.height < 10) ||\n                (parent.activeObj.shape === 'text' && parent.activeObj.rotatedAngle === 0 && this.preventTextDraggingInvertly())) {\n                parent.activeObj = extend({}, tempActiveObj, null, true);\n            }\n        }\n        this.previousPoint = { x: x, y: y };\n    };\n    Selection.prototype.adjustNWPoints = function (rectangle, x, y, angle) {\n        var cx = rectangle.startX + rectangle.width / 2;\n        var cy = rectangle.startY + rectangle.height / 2;\n        var rotatedC = this.rotatePoints(rectangle.endX, rectangle.endY, cx, cy, angle);\n        var newCenter = [(rotatedC[0] + x) / 2, (rotatedC[1] + y) / 2];\n        var newBottomRight = this.rotatePoints(rotatedC[0], rotatedC[1], newCenter[0], newCenter[1], -angle);\n        var newTopLeft = this.rotatePoints(x, y, newCenter[0], newCenter[1], -angle);\n        rectangle.endX = newBottomRight[0];\n        rectangle.endY = newBottomRight[1];\n        rectangle.startY = newTopLeft[1];\n        rectangle.startX = newTopLeft[0];\n        rectangle.width = rectangle.endX - rectangle.startX;\n        rectangle.height = rectangle.endY - rectangle.startY;\n        return rectangle;\n    };\n    Selection.prototype.adjustNEPoints = function (rectangle, x, y, angle) {\n        var cx = rectangle.startX + rectangle.width / 2;\n        var cy = rectangle.startY + rectangle.height / 2;\n        var rotatedD = this.rotatePoints(rectangle.startX, rectangle.endY, cx, cy, angle);\n        var newCenter = [(rotatedD[0] + x) / 2, (rotatedD[1] + y) / 2];\n        var newBottomLeft = this.rotatePoints(rotatedD[0], rotatedD[1], newCenter[0], newCenter[1], -angle);\n        var newTopRight = this.rotatePoints(x, y, newCenter[0], newCenter[1], -angle);\n        rectangle.startX = newBottomLeft[0];\n        rectangle.endY = newBottomLeft[1];\n        rectangle.width = newTopRight[0] - newBottomLeft[0];\n        rectangle.height = newBottomLeft[1] - newTopRight[1];\n        rectangle.endX = rectangle.startX + rectangle.width;\n        rectangle.startY = rectangle.endY - rectangle.height;\n        return rectangle;\n    };\n    Selection.prototype.adjustSWPoints = function (rectangle, x, y, angle) {\n        var cx = rectangle.startX + rectangle.width / 2;\n        var cy = rectangle.startY + rectangle.height / 2;\n        var rotatedB = this.rotatePoints(rectangle.endX, rectangle.startY, cx, cy, angle);\n        var newCenter = [(rotatedB[0] + x) / 2, (rotatedB[1] + y) / 2];\n        var newTopRight = this.rotatePoints(rotatedB[0], rotatedB[1], newCenter[0], newCenter[1], -angle);\n        var newBottomLeft = this.rotatePoints(x, y, newCenter[0], newCenter[1], -angle);\n        rectangle.endX = newTopRight[0];\n        rectangle.startY = newTopRight[1];\n        rectangle.startX = newBottomLeft[0];\n        rectangle.endY = newBottomLeft[1];\n        rectangle.width = rectangle.endX - rectangle.startX;\n        rectangle.height = rectangle.endY - rectangle.startY;\n        return rectangle;\n    };\n    Selection.prototype.adjustSEPoints = function (rectangle, x, y, angle) {\n        var cx = rectangle.startX + rectangle.width / 2;\n        var cy = rectangle.startY + rectangle.height / 2;\n        var rotatedA = this.rotatePoints(rectangle.startX, rectangle.startY, cx, cy, angle);\n        var newCenter = [(rotatedA[0] + x) / 2, (rotatedA[1] + y) / 2];\n        var newTopLeft = this.rotatePoints(rotatedA[0], rotatedA[1], newCenter[0], newCenter[1], -angle);\n        var newBottomRight = this.rotatePoints(x, y, newCenter[0], newCenter[1], -angle);\n        rectangle.startX = newTopLeft[0];\n        rectangle.startY = newTopLeft[1];\n        rectangle.width = newBottomRight[0] - newTopLeft[0];\n        rectangle.height = newBottomRight[1] - newTopLeft[1];\n        rectangle.endX = rectangle.startX + rectangle.width;\n        rectangle.endY = rectangle.startY + rectangle.height;\n        return rectangle;\n    };\n    Selection.prototype.adjustRotationPoints = function (rectangle, x, y, angle, type, elem) {\n        var cx = rectangle.startX + rectangle.width / 2;\n        var cy = rectangle.startY + rectangle.height / 2;\n        this.getResizeDirection(rectangle, x, y, angle, type, elem);\n        var rotatedA = this.rotatePoints(rectangle.startX, rectangle.startY, cx, cy, angle);\n        var rotatedB = this.rotatePoints(rectangle.endX, rectangle.startY, cx, cy, angle);\n        var rotatedC = this.rotatePoints(rectangle.endX, rectangle.endY, cx, cy, angle);\n        var rotatedD = this.rotatePoints(rectangle.startX, rectangle.endY, cx, cy, angle);\n        var newCenter = [(rotatedA[0] + rotatedC[0]) / 2, (rotatedA[1] + rotatedC[1]) / 2];\n        var newTopLeft = this.rotatePoints(rotatedA[0], rotatedA[1], newCenter[0], newCenter[1], -angle);\n        var newBottomLeft = this.rotatePoints(rotatedD[0], rotatedD[1], newCenter[0], newCenter[1], -angle);\n        var newTopRight = this.rotatePoints(rotatedB[0], rotatedB[1], newCenter[0], newCenter[1], -angle);\n        rectangle.startX = newTopLeft[0];\n        rectangle.startY = newTopLeft[1];\n        rectangle.endX = newTopRight[0];\n        rectangle.endY = newBottomLeft[1];\n        rectangle.width = rectangle.endX - rectangle.startX;\n        rectangle.height = rectangle.endY - rectangle.startY;\n        return rectangle;\n    };\n    Selection.prototype.rotatePoints = function (x, y, cx, cy, angle) {\n        return [\n            (x - cx) * Math.cos(angle) - (y - cy) * Math.sin(angle) + cx,\n            (x - cx) * Math.sin(angle) + (y - cy) * Math.cos(angle) + cy\n        ];\n    };\n    Selection.prototype.setResizedValue = function (element, value, x, y) {\n        switch (element) {\n            case 'x':\n                value += x;\n                break;\n            case 'y':\n                value += y;\n                break;\n            case 'abs-x':\n                value += (x > 0 ? -x : Math.abs(x));\n                break;\n            case 'abs-y':\n                value += (y > 0 ? -y : Math.abs(y));\n                break;\n            case 'y-abs-x':\n                value += (y + ((x > 0 ? -x : Math.abs(x)) / 2));\n                break;\n            case 'abs-x-abs-y':\n                value += ((x > 0 ? -x : Math.abs(x)) + ((y > 0 ? -y : Math.abs(y)) / 2));\n                break;\n            case 'abs-y-x':\n                value += ((y > 0 ? -y : Math.abs(y)) + (x / 2));\n                break;\n            case 'x-y':\n                value += (x + (y / 2));\n                break;\n            case 'y-x':\n                value += (y + (x / 2));\n                break;\n            case 'img-resize-x':\n                value += x;\n                break;\n            case 'img-resize-y':\n                value += y;\n                break;\n        }\n        return value;\n    };\n    Selection.prototype.getResizeDirection = function (rectangle, x, y, angle, type, elem) {\n        var rotatedAngle = angle * (180 / Math.PI);\n        var element = this.getResizedElement(rotatedAngle, this.resizedElement);\n        if (this.resizedElement === 'e-resize') {\n            rectangle.width = this.setResizedValue(element, rectangle.width, x, y);\n            rectangle.endX = rectangle.width + rectangle.startX;\n        }\n        else if (this.resizedElement === 'n-resize') {\n            rectangle.startY = this.setResizedValue(element, rectangle.startY, x, y);\n            rectangle.height = rectangle.endY - rectangle.startY;\n        }\n        else if (this.resizedElement === 'w-resize') {\n            rectangle.startX = this.setResizedValue(element, rectangle.startX, x, y);\n            rectangle.width = rectangle.startX + rectangle.endX;\n        }\n        else if (this.resizedElement === 's-resize') {\n            rectangle.height = this.setResizedValue(element, rectangle.height, x, y);\n            rectangle.endY = rectangle.height + rectangle.startY;\n        }\n        else if (type && type === 'img-resize') {\n            rectangle.width = this.setResizedValue('img-resize-x', rectangle.width, x, y);\n            rectangle.height = this.setResizedValue('img-resize-y', rectangle.height, x, y);\n            if (elem === 'se-resize') {\n                rectangle.endX = rectangle.width + rectangle.startX;\n                rectangle.endY = rectangle.height + rectangle.startY;\n            }\n            else if (elem === 'sw-resize') {\n                rectangle.startX = rectangle.endX - rectangle.width;\n                rectangle.endY = rectangle.height + rectangle.startY;\n            }\n            else if (elem === 'ne-resize') {\n                rectangle.endX = rectangle.width + rectangle.startX;\n                rectangle.startY = rectangle.endY - rectangle.height;\n            }\n            else if (elem === 'nw-resize') {\n                rectangle.startX = rectangle.endX - rectangle.width;\n                rectangle.startY = rectangle.endY - rectangle.height;\n            }\n        }\n        else if (type && type === 'text') {\n            if (elem === 'widthHeight') {\n                rectangle.width = this.setResizedValue('x-y', rectangle.width, x, y);\n                rectangle.endX = rectangle.width + rectangle.startX;\n                rectangle.height = this.setResizedValue('y-x', rectangle.height, x, y);\n                rectangle.endY = rectangle.height + rectangle.startY;\n            }\n            else if (elem === 'width') {\n                rectangle.width = this.setResizedValue('x-y', rectangle.width, x, y);\n                rectangle.endX = rectangle.width + rectangle.startX;\n            }\n            else if (elem === 'height') {\n                rectangle.height = this.setResizedValue('y-abs-x', rectangle.height, x, y);\n                rectangle.endY = rectangle.height + rectangle.startY;\n            }\n        }\n    };\n    Selection.prototype.getResizedElement = function (degree, element) {\n        var resizeMappings = [];\n        if (element === 'n-resize') {\n            resizeMappings = [\n                [337.5, 360, 'y'],\n                [0, 22.5, 'y'],\n                [22.5, 67.5, 'y-abs-x'],\n                [67.5, 112.5, 'abs-x'],\n                [112.5, 157.5, 'abs-x-abs-y'],\n                [157.5, 202.5, 'abs-y'],\n                [202.5, 247.5, 'abs-y-x'],\n                [247.5, 292.5, 'x'],\n                [292.5, 337.5, 'x-y']\n            ];\n        }\n        else if (element === 'e-resize') {\n            resizeMappings = [\n                [337.5, 360, 'x'],\n                [0, 22.5, 'x'],\n                [22.5, 67.5, 'x-y'],\n                [67.5, 112.5, 'y'],\n                [112.5, 157.5, 'y-abs-x'],\n                [157.5, 202.5, 'abs-x'],\n                [202.5, 247.5, 'abs-x-abs-y'],\n                [247.5, 292.5, 'abs-y'],\n                [292.5, 337.5, 'abs-y-x']\n            ];\n        }\n        else if (element === 's-resize') {\n            resizeMappings = [\n                [337.5, 360, 'y'],\n                [0, 22.5, 'y'],\n                [22.5, 67.5, 'y-abs-x'],\n                [67.5, 112.5, 'abs-x'],\n                [112.5, 157.5, 'abs-x-abs-y'],\n                [157.5, 202.5, 'abs-y'],\n                [202.5, 247.5, 'abs-y-x'],\n                [247.5, 292.5, 'x'],\n                [292.5, 337.5, 'x-y']\n            ];\n        }\n        else if (element === 'w-resize') {\n            resizeMappings = [\n                [337.5, 360, 'x'],\n                [0, 22.5, 'x'],\n                [22.5, 67.5, 'x-y'],\n                [67.5, 112.5, 'y'],\n                [112.5, 157.5, 'y-abs-x'],\n                [157.5, 202.5, 'abs-x'],\n                [202.5, 247.5, 'abs-x-abs-y'],\n                [247.5, 292.5, 'abs-y'],\n                [292.5, 337.5, 'abs-y-x']\n            ];\n        }\n        var positiveDegree = degree < 0 ? 360 - Math.abs(degree) : degree;\n        for (var _i = 0, resizeMappings_2 = resizeMappings; _i < resizeMappings_2.length; _i++) {\n            var _a = resizeMappings_2[_i], startDegree = _a[0], endDegree = _a[1], resizeElement = _a[2];\n            if ((positiveDegree > startDegree && positiveDegree <= endDegree) ||\n                (positiveDegree + 360 > startDegree && positiveDegree + 360 <= endDegree)) {\n                return resizeElement;\n            }\n        }\n        return element;\n    };\n    Selection.prototype.updateCursorStyles = function (x, y, type) {\n        var parent = this.parent;\n        var isResize = false;\n        if (parent.activeObj.keyHistory !== '' && parent.activeObj.shape === undefined && !parent.currObjType.isCustomCrop &&\n            !parent.currObjType.isLine && parent.currObjType.isText) {\n            parent.activeObj.shape = 'text';\n        }\n        var actObj = extend({}, parent.activeObj, {}, true);\n        if (isNullOrUndefined(actObj.topLeftCircle)) {\n            return;\n        }\n        var degree;\n        if (actObj.shapeDegree === 0) {\n            degree = parent.transform.degree;\n        }\n        else {\n            degree = parent.transform.degree - actObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        if (this.isObjSelected) {\n            if (actObj.shape === 'line' || actObj.shape === 'arrow') {\n                isResize = this.updateCursorStylesForLineArrow(x, y, actObj);\n            }\n            else if (actObj.shape === 'path') {\n                isResize = this.updateCursorStylesForPath(x, y, actObj);\n            }\n            else if (actObj.rotatedAngle) {\n                this.setCursorForRotatedObject(actObj, x, y, parent.upperCanvas);\n                if (parent.cursor === 'grabbing') {\n                    parent.upperCanvas.style.cursor = parent.cursor = 'grabbing';\n                    this.dragElement = parent.cursor;\n                }\n                else if (parent.cursor === 'move') {\n                    this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n                    this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n                }\n                else if (parent.cursor !== 'default') {\n                    isResize = true;\n                    this.dragElement = parent.cursor;\n                    parent.currObjType.isResize = true;\n                }\n            }\n            else {\n                var rotationCirclePoint = this.getTransRotationPoint(actObj);\n                var radius = actObj.topLeftCircle.radius;\n                if (rotationCirclePoint &&\n                    x >= rotationCirclePoint.x - (radius * 2) &&\n                    x <= rotationCirclePoint.x + (radius * 2) &&\n                    y >= rotationCirclePoint.y - (radius * 2) &&\n                    y <= rotationCirclePoint.y + (radius * 2) && this.dragElement !== 'grabbing') {\n                    parent.upperCanvas.style.cursor = parent.cursor = 'grabbing';\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.topLeftCircle.startX - (radius * 2)) &&\n                    x <= (actObj.topLeftCircle.startX + (radius * 2)) &&\n                    y >= (actObj.topLeftCircle.startY - (radius * 2)) &&\n                    y <= (actObj.topLeftCircle.startY + (radius * 2)) && this.dragElement !== 'nw-resize') {\n                    actObj.topLeftCircle.startX = actObj.topLeftCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'nw-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.topLeftCircle.startX - (radius * 2)) &&\n                    x <= (actObj.topRightCircle.startX - (radius * 2)) &&\n                    y >= (actObj.topCenterCircle.startY - (radius * 2)) &&\n                    y <= (actObj.topCenterCircle.startY + (radius * 2)) && this.dragElement !== 'n-resize') {\n                    actObj.topCenterCircle.startX = actObj.topCenterCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'n-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.topRightCircle.startX - (radius * 2)) &&\n                    x <= (actObj.topRightCircle.startX + (radius * 2)) &&\n                    y >= (actObj.topRightCircle.startY - (radius * 2)) &&\n                    y <= (actObj.topRightCircle.startY + (radius * 2)) && this.dragElement !== 'ne-resize') {\n                    actObj.topRightCircle.startX = actObj.topRightCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'ne-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.centerLeftCircle.startX - (radius * 2)) &&\n                    x <= (actObj.centerLeftCircle.startX + (radius * 2)) &&\n                    y >= (actObj.topLeftCircle.startY - (radius * 2)) &&\n                    y <= (actObj.bottomLeftCircle.startY - (radius * 2)) && this.dragElement !== 'w-resize') {\n                    actObj.centerLeftCircle.startX = actObj.centerLeftCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'w-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.centerRightCircle.startX - (radius * 2)) &&\n                    x <= (actObj.centerRightCircle.startX + (radius * 2)) &&\n                    y >= (actObj.topRightCircle.startY - (radius * 2)) &&\n                    y <= (actObj.bottomRightCircle.startY - (radius * 2)) && this.dragElement !== 'e-resize') {\n                    actObj.centerRightCircle.startX = actObj.centerRightCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'e-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.bottomLeftCircle.startX - (radius * 2)) &&\n                    x <= (actObj.bottomLeftCircle.startX + (radius * 2)) &&\n                    y >= (actObj.bottomLeftCircle.startY - (radius * 2)) &&\n                    y <= (actObj.bottomLeftCircle.startY + (radius * 2)) && this.dragElement !== 'sw-resize') {\n                    actObj.bottomLeftCircle.startX = actObj.bottomLeftCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'sw-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.bottomLeftCircle.startX - (radius * 2)) &&\n                    x <= (actObj.bottomRightCircle.startX - (radius * 2)) &&\n                    y >= (actObj.bottomCenterCircle.startY - (radius * 2)) &&\n                    y <= (actObj.bottomCenterCircle.startY + (radius * 2)) && this.dragElement !== 's-resize') {\n                    actObj.bottomCenterCircle.startX = actObj.bottomCenterCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 's-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.bottomRightCircle.startX - (radius * 2)) &&\n                    x <= (actObj.bottomRightCircle.startX + (radius * 2)) &&\n                    y >= (actObj.bottomRightCircle.startY - (radius * 2)) &&\n                    y <= (actObj.bottomRightCircle.startY + (radius * 2)) && this.dragElement !== 'se-resize') {\n                    actObj.bottomRightCircle.startX = actObj.bottomRightCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'se-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else {\n                    this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n                    this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n                }\n                if ((actObj.shape === 'text') && (parent.cursor === 'n-resize' ||\n                    parent.cursor === 's-resize' || parent.cursor === 'e-resize' ||\n                    parent.cursor === 'w-resize')) {\n                    parent.upperCanvas.style.cursor = parent.cursor = 'move';\n                    this.dragElement = '';\n                    this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n                    this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n                }\n            }\n        }\n        else {\n            this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n            this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n        }\n        this.previousPoint.x = this.previousPoint.y = this.diffPoint.x = this.diffPoint.y = 0;\n        if (type === 'touchstart') {\n            if (isResize || (x >= actObj.activePoint.startX && x <= actObj.activePoint.endX\n                && y >= actObj.activePoint.startY && y <= actObj.activePoint.endY) || this.dragElement === 'grabbing') {\n                parent.currObjType.isDragging = true;\n            }\n            else if (actObj.shape === 'line' || actObj.shape === 'arrow') {\n                this.setCursorForLineArrow(actObj, x, y, parent.upperCanvas);\n                if (parent.cursor === 'move') {\n                    parent.currObjType.isDragging = true;\n                }\n            }\n            else if (actObj.shape === 'path') {\n                this.setCursorForPath(actObj, x, y, parent.upperCanvas);\n                if (parent.cursor === 'move') {\n                    parent.currObjType.isDragging = true;\n                }\n            }\n        }\n        else {\n            parent.currObjType.isDragging = true;\n        }\n        if (actObj.rotatedAngle !== 0 && (this.dragElement === 'e-resize' ||\n            this.dragElement === 'w-resize' || this.dragElement === 'n-resize' ||\n            this.dragElement === 's-resize')) {\n            this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n            this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n        }\n    };\n    Selection.prototype.updateCursorStylesForLineArrow = function (x, y, actObj) {\n        var isResize = false;\n        var parent = this.parent;\n        var point;\n        var radius = actObj.topLeftCircle.radius;\n        for (var i = 0; i < 5; i++) {\n            point = actObj.pointColl[i];\n            if (x >= (point.x - (radius * 2)) && x <= (point.x + (radius * 2)) &&\n                y >= (point.y - (radius * 2)) && y <= (point.y + (radius * 2))) {\n                actObj.centerLeftCircle.startX = actObj.centerLeftCircle.startY = 0;\n                this.dragElement = 'w-resize';\n                isResize = true;\n                break;\n            }\n        }\n        if (!isResize) {\n            for (var i = 1; i < 6; i++) {\n                point = actObj.pointColl[actObj.pointColl.length - i];\n                if (x >= (point.x - (radius * 2)) && x <= (point.x + (radius * 2)) &&\n                    y >= (point.y - (radius * 2)) && y <= (point.y + (radius * 2))) {\n                    actObj.centerRightCircle.startX = actObj.centerRightCircle.startY = 0;\n                    this.dragElement = 'e-resize';\n                    isResize = true;\n                    break;\n                }\n            }\n        }\n        if (!isResize) {\n            for (var i = 0; i < actObj.pointColl.length; i++) {\n                point = actObj.pointColl[i];\n                if (x >= (point.x - (radius * 2)) && x <= (point.x + (radius * 2)) &&\n                    y >= (point.y - (radius * 2)) && y <= (point.y + (radius * 2))) {\n                    parent.upperCanvas.style.cursor = parent.cursor = 'move';\n                    this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n                    this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n                    break;\n                }\n                else {\n                    parent.upperCanvas.style.cursor = parent.cursor = 'default';\n                }\n            }\n        }\n        return isResize;\n    };\n    Selection.prototype.updateCursorStylesForPath = function (x, y, actObj) {\n        var isResize = false;\n        var parent = this.parent;\n        this.pathAdjustedIndex = this.setCursorForLineArrow(actObj, x, y, parent.upperCanvas);\n        if (parent.cursor === 'move') {\n            isResize = true;\n            this.dragElement = 'pathDrag';\n        }\n        if (!isResize) {\n            parent.upperCanvas.style.cursor = parent.cursor = 'move';\n            this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n            this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n        }\n        return isResize;\n    };\n    Selection.prototype.setTextSelection = function (width, height) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var degree = parent.transform.degree;\n        if (parent.activeObj.shapeDegree === 0) {\n            degree = parent.transform.degree;\n        }\n        else {\n            degree = parent.transform.degree - parent.activeObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        for (var i = 0, len = parent.activeObj.flipObjColl.length; i < len; i++) {\n            var flip = parent.activeObj.flipObjColl[i].toLowerCase();\n            switch (degree) {\n                case 0:\n                    switch (flip) {\n                        case 'horizontal':\n                            actPoint = { startX: actPoint.endX - width, startY: actPoint.startY, endX: (actPoint.endX),\n                                endY: actPoint.startY + (height ? height : 0) };\n                            break;\n                        case 'vertical':\n                            actPoint.startY = actPoint.endY - height;\n                            actPoint = { startX: actPoint.startX, startY: actPoint.startY, endX: (actPoint.startX + (width ? width : 0)),\n                                endY: actPoint.endY };\n                            break;\n                        default:\n                            actPoint = { startX: actPoint.startX,\n                                startY: actPoint.startY, endX: (actPoint.startX + (width ? width : 0)), endY: actPoint.startY +\n                                    (height ? height : 0) };\n                            break;\n                    }\n                    break;\n                case 90:\n                    switch (flip) {\n                        case 'horizontal':\n                            actPoint.endX = actPoint.startX + height;\n                            actPoint = { startX: actPoint.startX, startY: actPoint.startY, endX: (actPoint.endX),\n                                endY: actPoint.startY + (width ? width : 0) };\n                            break;\n                        case 'vertical':\n                            actPoint.startX = actPoint.endX - height;\n                            actPoint = { startX: actPoint.startX, startY: actPoint.endY - width, endX: (actPoint.endX), endY: actPoint.endY };\n                            break;\n                        default:\n                            actPoint.startX = actPoint.endX - height;\n                            actPoint = { startX: actPoint.startX, startY: actPoint.startY, endX: (actPoint.endX),\n                                endY: actPoint.startY + (width ? width : 0) };\n                            break;\n                    }\n                    break;\n                case 180:\n                    switch (flip) {\n                        case 'horizontal':\n                            actPoint.startY = actPoint.endY - height;\n                            actPoint = { startX: actPoint.startX, startY: actPoint.startY, endX: (actPoint.startX + width),\n                                endY: actPoint.endY };\n                            break;\n                        case 'vertical':\n                            actPoint.endY = actPoint.startY + height;\n                            actPoint = { endX: actPoint.endX, endY: actPoint.endY, startX: (actPoint.endX - (width ? width : 0)),\n                                startY: actPoint.startY };\n                            break;\n                        default:\n                            actPoint = { endX: actPoint.endX, endY: actPoint.endY, startX: (actPoint.endX - (width ? width : 0)),\n                                startY: actPoint.endY - (height ? height : 0) };\n                            break;\n                    }\n                    break;\n                case 270:\n                    switch (flip) {\n                        case 'horizontal':\n                            actPoint.startX = actPoint.endX - height;\n                            actPoint = { startX: actPoint.startX, startY: actPoint.endY - (width ? width : 0), endX: actPoint.endX,\n                                endY: actPoint.endY };\n                            break;\n                        case 'vertical':\n                            actPoint = { startX: actPoint.startX, startY: actPoint.startY, endX: (actPoint.startX + height),\n                                endY: actPoint.startY + (width ? width : 0) };\n                            break;\n                        default:\n                            actPoint.endX = actPoint.startX + height;\n                            actPoint = { startX: actPoint.startX, startY: actPoint.endY - (width ? width : 0), endX: actPoint.endX,\n                                endY: actPoint.endY };\n                            break;\n                    }\n                    break;\n            }\n        }\n        if (parent.activeObj.flipObjColl.length === 0) {\n            switch (degree) {\n                case 0:\n                    actPoint = { startX: actPoint.startX, startY: actPoint.startY, endX: (actPoint.startX + (width ? width : 0)),\n                        endY: actPoint.startY + (height ? height : 0) };\n                    break;\n                case 90:\n                    actPoint.startX = actPoint.endX - height;\n                    actPoint = { startX: actPoint.startX, startY: actPoint.startY, endX: (actPoint.endX),\n                        endY: actPoint.startY + (width ? width : 0) };\n                    break;\n                case 180:\n                    actPoint = { endX: actPoint.endX, endY: actPoint.endY, startX: (actPoint.endX - (width ? width : 0)),\n                        startY: actPoint.endY - (height ? height : 0) };\n                    break;\n                case 270:\n                    actPoint.endX = actPoint.startX + height;\n                    actPoint = { startX: actPoint.startX, startY: actPoint.endY - (width ? width : 0), endX: actPoint.endX,\n                        endY: actPoint.endY };\n                    break;\n            }\n        }\n        actPoint.width = actPoint.endX - actPoint.startX;\n        actPoint.height = actPoint.endY - actPoint.startY;\n        parent.activeObj.activePoint = actPoint;\n        if (parent.transform.degree === 360 || parent.transform.degree === -360) {\n            parent.transform.degree = 0;\n        }\n    };\n    Selection.prototype.setActivePoint = function (startX, startY) {\n        var parent = this.parent;\n        var activePoint = parent.activeObj.activePoint;\n        if (isNullOrUndefined(activePoint)) {\n            return;\n        }\n        if (parent.currObjType.isText) {\n            var textWidth = startX ? startX : 0;\n            var textHeight = startY ? startY : parent.activeObj.textSettings.fontSize;\n            if (parent.activeObj.textSettings.fontSize === undefined) {\n                parent.activeObj.textSettings.fontSize = (Math.abs(parent.baseImgCanvas.width - parent.baseImgCanvas.height)) * 0.1;\n            }\n            this.setTextSelection(textWidth, textHeight);\n            this.mouseDownPoint.x = activePoint.endX;\n            this.mouseDownPoint.y = activePoint.endY;\n            if (parent.activeObj.horTopLine !== undefined) {\n                parent.activeObj.activePoint = extend({}, activePoint, {}, true);\n            }\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        }\n        else if (startX && startY) {\n            activePoint.startX = this.mouseDownPoint.x = startX;\n            activePoint.startY = this.mouseDownPoint.y = startY;\n            parent.currObjType.isDragging = true;\n        }\n        else {\n            var selectInfo = parent.activeObj;\n            activePoint = { startX: selectInfo.horTopLine.startX, startY: selectInfo.horTopLine.startY,\n                endX: selectInfo.horTopLine.endX, endY: selectInfo.horTopLine.endY };\n            activePoint.width = activePoint.endX - activePoint.startX;\n            activePoint.height = activePoint.endY - activePoint.startY;\n        }\n    };\n    Selection.prototype.mouseDownEventHandler = function (e) {\n        var parent = this.parent;\n        parent.isKBDNavigation = false;\n        this.mouseDown = e.currentTarget === parent.lowerCanvas || e.currentTarget === parent.upperCanvas ?\n            'canvas' : '';\n        if (e.type === 'touchstart') {\n            this.isTouch = true;\n        }\n        else {\n            this.isTouch = false;\n        }\n        if (e.type === 'touchstart' && e.currentTarget === parent.lowerCanvas && !parent.isImageLoaded) {\n            return;\n        }\n        this.isCropSelection = false;\n        this.isPan = true;\n        var splitWords;\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords !== undefined && splitWords[0] === 'crop') {\n            this.isCropSelection = true;\n        }\n        if (this.isCropSelection) {\n            this.dragCanvas = parent.togglePan = true;\n        }\n        if (parent.cursor === 'grabbing') {\n            var obj = { shapeSettingsObj: {} };\n            this.isGrabbing = true;\n            parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n            var shapeSettings = obj['shapeSettingsObj'];\n            var shapeResizingArgs = { cancel: false, action: 'rotate-start', previousShapeSettings: shapeSettings, allowShapeOverflow: this.allowOutofBound() };\n            var shapeMovingArgs = { cancel: false, action: 'rotate-start', previousShapeSettings: shapeSettings, allowShapeOverflow: this.allowOutofBound() };\n            this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'mouse-down');\n        }\n        var imageEditorClickEventArgs = { point: this.setXYPoints(e) };\n        parent.trigger('click', imageEditorClickEventArgs);\n        this.isMouseDown = true;\n        this.isMouseUp = false;\n        this.clickEvent(imageEditorClickEventArgs, e);\n    };\n    Selection.prototype.getImagePoints = function (x, y) {\n        var parent = this.parent;\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        if (x < destLeft) {\n            x = destLeft;\n        }\n        else if (x > destLeft + destWidth) {\n            x = destLeft + destWidth;\n        }\n        if (y < destTop) {\n            y = destTop;\n        }\n        else if (y > destTop + destHeight) {\n            y = destTop + destHeight;\n        }\n        return { x: x, y: y };\n    };\n    Selection.prototype.clickEvent = function (imageEditorClickEventArgs, e) {\n        var parent = this.parent;\n        var activePoint = parent.activeObj.activePoint;\n        var x = imageEditorClickEventArgs.point.x;\n        var y = imageEditorClickEventArgs.point.y;\n        var cursor = parent.activeObj.shape && parent.activeObj.shape === 'text' ?\n            parent.cursor : 'default';\n        var tempCursor = parent.upperCanvas.style.cursor;\n        if (parent.isResize) {\n            this.performEnterAction();\n            parent.upperCanvas.style.cursor = 'default';\n            return;\n        }\n        else if (JSON.stringify(parent.frameObj) !== JSON.stringify(parent.tempFrameObj)) {\n            parent.okBtn();\n        }\n        else if (this.currentDrawingShape !== '' && (!this.isShapeTouch(e, this.isCropSelection) &&\n            ((this.isTouch) || tempCursor === 'crosshair' || parent.isShapeDrawing))) {\n            if (parent.drawingShape && !parent.isShapeDrawing) {\n                parent.okBtn();\n                parent.enableShapeDrawing(parent.toPascalCase(parent.drawingShape), true);\n            }\n            activePoint = parent.activeObj.activePoint;\n            var object_1 = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object_1 } });\n            this.initialPrevObj = object_1['currObj'];\n            this.initialPrevObj.objColl = extend([], parent.objColl, [], true);\n            this.initialPrevObj.pointColl = extend([], parent.pointColl, [], true);\n            this.initialPrevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            this.initialPrevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            this.setActivePoint(x, y);\n            activePoint = parent.activeObj.activePoint;\n            if (this.currentDrawingShape === 'path') {\n                var point = this.getImagePoints(x, y);\n                parent.activeObj.pointColl.push({ x: point.x, y: point.y });\n                if (activePoint.width !== 0 && activePoint.height !== 0) {\n                    activePoint.width = 0;\n                    activePoint.height = 0;\n                    activePoint.startX = parent.activeObj.pointColl[parent.activeObj.pointColl.length - 1].x;\n                    activePoint.startY = parent.activeObj.pointColl[parent.activeObj.pointColl.length - 1].y;\n                }\n            }\n            activePoint.endX = activePoint.startX;\n            activePoint.endY = activePoint.startY;\n            if (this.currentDrawingShape === 'text') {\n                parent.activeObj.textSettings.fontSize = 11;\n                this.previousPoint.x = activePoint.startX;\n                this.previousPoint.y = activePoint.startY;\n                parent.notify('shape', { prop: 'updateFontStyles', onPropertyChange: false,\n                    value: { isTextBox: null } });\n                var width = this.upperContext.measureText(parent.activeObj.textSettings.text).width + parent.activeObj.textSettings.fontSize * 0.5;\n                activePoint.endX = activePoint.startX + width;\n                activePoint.endY = activePoint.startY + parent.activeObj.textSettings.fontSize;\n                activePoint.width = activePoint.endX - activePoint.startX;\n                activePoint.height = activePoint.endY - activePoint.startY;\n            }\n            else if (this.currentDrawingShape === 'arrow') {\n                parent.activeObj.start = this.arrowShape[0];\n                parent.activeObj.end = this.arrowShape[1];\n            }\n            parent.currObjType.isDragging = true;\n            var previousShapeSettings = this.updatePrevShapeSettings();\n            var shapeResizingArgs = { cancel: false, action: 'draw-start', previousShapeSettings: previousShapeSettings, allowShapeOverflow: this.allowOutofBound() };\n            var shapeMovingArgs = { cancel: false, action: 'move', previousShapeSettings: previousShapeSettings, allowShapeOverflow: this.allowOutofBound() };\n            this.shapeResizingArgs = shapeResizingArgs;\n            this.shapeMovingArgs = shapeMovingArgs;\n            this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'mouse-down');\n            parent.activeObj.activePoint = activePoint;\n            parent.isShapeDrawing = true;\n            this.tempActiveObj = extend({}, parent.activeObj, {}, true);\n            return;\n        }\n        parent.notify('draw', { prop: 'resetFrameZoom', onPropertyChange: false, value: { isOk: true } });\n        if (this.isCropSelection && this.dragCanvas) {\n            this.setCursor(x, y);\n            if (parent.cursor !== 'move' && parent.cursor !== 'crosshair' &&\n                parent.cursor !== 'default' && parent.cursor !== 'grab') {\n                this.isPan = false;\n            }\n        }\n        if (parent.activeObj.shape) {\n            this.isObjSelected = true;\n        }\n        else {\n            this.isObjSelected = false;\n        }\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        var activeObj = extend({}, parent.activeObj, null, true);\n        var isShape = this.isShapeTouch(e, this.isCropSelection);\n        var isFreehandDraw = this.isFreehandDrawTouch(e, this.isCropSelection);\n        var isShapeClick = isShape ? isShape : this.isShapeClick(e, this.isCropSelection);\n        var allowUndoRedoPush = this.applyCurrShape(isShapeClick);\n        var isTextArea = parent.textArea.style.display !== 'none' ? true : false;\n        if (this.isTouch && !isShape && activeObj.shape && !this.isCropSelection) {\n            if (this.applyObj(x, y)) {\n                parent.okBtn(true);\n                parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false, value: { prevActObj: null } });\n            }\n            var prevCropObj = extend({}, parent.cropObj, {}, true);\n            parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: parent.isCircleCrop } });\n            if (allowUndoRedoPush) {\n                parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            }\n        }\n        if (!isShape && !parent.togglePen && !this.isCropSelection && parent.activeObj.redactType !== 'blur' && parent.activeObj.redactType !== 'pixelate') {\n            parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            parent.notify('toolbar', { prop: 'close-contextual-toolbar', onPropertyChange: false });\n        }\n        if (this.dragCanvas && this.isPan && (parent.cursor === 'grab' || this.isTouch)\n            && !isShape && !isFreehandDraw && !parent.togglePen) {\n            if (this.applyObj(x, y)) {\n                parent.okBtn(true);\n                if (allowUndoRedoPush) {\n                    var cursor_1 = parent.cursor;\n                    parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                    parent.cursor = cursor_1;\n                }\n                parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false, value: { prevActObj: null } });\n            }\n            if (this.isFhdEditing) {\n                parent.notify('freehand-draw', { prop: 'applyFhd', onPropertyChange: false });\n                this.isFhdCustomized = false;\n                parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n            }\n            var shape = parent.activeObj.shape;\n            var shapeColl = ['rectangle', 'ellipse', 'line', 'arrow', 'path', 'text', 'image', 'redact'];\n            if (shape && shapeColl.indexOf(shape) > -1) {\n                parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                    value: { x: null, y: null, isMouseDown: null } });\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                parent.notify('toolbar', { prop: 'setCurrentToolbar', value: { type: 'main' } });\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            }\n            var isCropSelection = false;\n            if (parent.activeObj.shape && parent.activeObj.shape.indexOf('crop-') > -1) {\n                isCropSelection = true;\n            }\n            if (parent.element.querySelector('.e-contextual-toolbar-wrapper') && !isCropSelection) {\n                if (!parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.contains('e-hide')) {\n                    parent.okBtn();\n                    parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                }\n            }\n            this.canvasMouseDownHandler(e);\n        }\n        else {\n            var isLineArrow = false;\n            if (parent.activeObj.shape && (parent.activeObj.shape === 'line' ||\n                parent.activeObj.shape === 'arrow')) {\n                isLineArrow = true;\n            }\n            var points = this.setXYPoints(e);\n            var x_1 = points.x;\n            var y_1 = points.y;\n            if (this.applyObj(x_1, y_1)) {\n                parent.okBtn(true);\n                if (allowUndoRedoPush) {\n                    var cursor_2 = parent.cursor;\n                    parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                    parent.cursor = cursor_2;\n                }\n                parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false, value: { prevActObj: null } });\n            }\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: x_1, y: y_1, isMouseDown: true } });\n            var obj = { index: null };\n            parent.notify('freehand-draw', { prop: 'getFreehandDrawHoveredIndex', onPropertyChange: false, value: { obj: obj } });\n            var indexObj = { freehandSelectedIndex: null };\n            parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n            if (this.isFhdPoint || (this.isFhdCustomized && !parent.togglePen)) {\n                if (!isNullOrUndefined(indexObj['freehandSelectedIndex']) &&\n                    indexObj['freehandSelectedIndex'] !== obj['index']) {\n                    var tempHoveredIndex = obj['index'];\n                    parent.okBtn();\n                    this.isFhdCustomized = false;\n                    parent.notify('freehand-draw', { prop: 'setFreehandDrawHoveredIndex', onPropertyChange: false,\n                        value: { index: tempHoveredIndex } });\n                    if (obj['index'] > -1) {\n                        var strokeColor = parent.pointColl[obj['index']].strokeColor;\n                        parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                            value: { strokeColor: strokeColor, strokeWidth: parent.pointColl[obj['index']].strokeWidth } });\n                    }\n                }\n                indexObj['freehandSelectedIndex'] = null;\n                parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n                var objColl = extend([], parent.objColl, [], true);\n                if (!isNullOrUndefined(obj['index']) && obj['index'] > -1) {\n                    parent.notify('freehand-draw', { prop: 'selectFhd', value: { type: 'ok' } });\n                    parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                        value: { strokeColor: null, strokeWidth: null } });\n                    parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: true } });\n                }\n                else if (indexObj['freehandSelectedIndex']) {\n                    parent.okBtn();\n                    var strokeColor = parent.pointColl[indexObj['freehandSelectedIndex']].strokeColor;\n                    parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                        value: { strokeColor: strokeColor, strokeWidth: parent.pointColl[indexObj['freehandSelectedIndex']].strokeWidth } });\n                }\n                else if (this.findTargetObj(x_1, y_1, false)) {\n                    parent.objColl = objColl;\n                    this.findTarget(x_1, y_1, e.type);\n                    parent.notify('draw', { prop: 'redrawDownScale' });\n                }\n            }\n            else {\n                if (this.isFhdEditing) {\n                    parent.apply();\n                    var qbArea = document.getElementById(parent.element.id + '_quickAccessToolbarArea');\n                    if (qbArea) {\n                        qbArea.style.display = 'none';\n                    }\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    var point = parent.pointColl[indexObj['freehandSelectedIndex']];\n                    var shapeSettings = { id: 'pen_' + (indexObj['freehandSelectedIndex'] + 1), type: ShapeType.FreehandDraw,\n                        startX: point.points[0].x, startY: point.points[0].y, strokeColor: point.strokeColor,\n                        strokeWidth: point.strokeWidth, points: point.points, opacity: point.opacity,\n                        index: point.order };\n                    var shapeChangedArgs = { action: 'apply', currentShapeSettings: extend({}, shapeSettings, {}, true) };\n                    parent.trigger('shapeChange', shapeChangedArgs);\n                    parent.editCompleteArgs = shapeChangedArgs;\n                }\n                var isPenDraw = parent.togglePen;\n                parent.notify('toolbar', { prop: 'close-contextual-toolbar', onPropertyChange: false });\n                if (isPenDraw) {\n                    parent.freeHandDraw(true);\n                }\n                this.isFhdEditing = false;\n                if (isLineArrow) {\n                    this.setCursor(x_1, y_1);\n                }\n                else if (cursor !== 'default') {\n                    parent.upperCanvas.style.cursor = parent.cursor = cursor;\n                }\n                if (parent.cursor === 'crosshair' || (Browser.isDevice && parent.togglePen)) {\n                    if (parent.togglePen) {\n                        if (isNullOrUndefined(parent.activeObj.strokeSettings)) {\n                            var obj_1 = { strokeSettings: {} };\n                            parent.notify('shape', { prop: 'getStrokeSettings', onPropertyChange: false, value: { obj: obj_1 } });\n                            parent.activeObj.strokeSettings = obj_1['strokeSettings'];\n                        }\n                        var obj_2 = { penStrokeWidth: null };\n                        parent.notify('freehand-draw', { prop: 'getPenStrokeWidth', onPropertyChange: false, value: { obj: obj_2 } });\n                        if (isNullOrUndefined(obj_2['penStrokeWidth'])) {\n                            parent.notify('freehand-draw', { prop: 'setPenStrokeWidth', onPropertyChange: false, value: { value: 2 } });\n                        }\n                        this.upperContext.strokeStyle = parent.activeObj.strokeSettings.strokeColor;\n                        this.upperContext.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n                        parent.notify('freehand-draw', { prop: 'resetSelPoints', onPropertyChange: false });\n                        parent.notify('freehand-draw', { prop: 'freehandDownHandler', onPropertyChange: false,\n                            value: { e: e, canvas: parent.upperCanvas } });\n                    }\n                    else {\n                        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                    }\n                    parent.currObjType.isActiveObj = false;\n                    this.dragElement = '';\n                    this.dragPoint.startX = this.dragPoint.startY = this.dragPoint.endX = this.dragPoint.endY = 0;\n                }\n                if (((this.isTouch && tempCursor !== 'crosshair' || parent.cursor !== 'crosshair') &&\n                    e.type.toLowerCase() === 'touchstart') ||\n                    (parent.currObjType.isActiveObj && parent.cursor !== 'default' && !parent.togglePen)) {\n                    parent.notify('draw', { prop: 'updateTempObjColl' });\n                    parent.notify('draw', { prop: 'updateTempPointColl' });\n                    this.findTarget(x_1, y_1, e.type);\n                    parent.notify('draw', { prop: 'redrawDownScale' });\n                }\n                else if ((parent.currObjType.shape === '' || parent.currObjType.isCustomCrop) && !parent.togglePen && parent.cursor !== 'default') {\n                    this.setActivePoint(x_1, y_1);\n                }\n                if (isTextArea) {\n                    parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n                }\n            }\n        }\n        this.isShapeInserted = false;\n        this.tempActiveObj = extend({}, parent.activeObj, {}, true);\n    };\n    Selection.prototype.mouseMoveEventHandler = function (e) {\n        var parent = this.parent;\n        var cursor = parent.cursor;\n        var canvasCursor = parent.upperCanvas.style.cursor;\n        e.preventDefault();\n        if (this.isPreventShaping || (parent.isShapeDrawing && parent.currObjType.isDragging && this.isTouch &&\n            parent.activeObj.shape && parent.activeObj.shape === 'path')) {\n            return;\n        }\n        if (parent.cursor === 'grabbing' && this.isGrabbing) {\n            var obj = { shapeSettingsObj: {} };\n            parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n            var shapeSettings = obj['shapeSettingsObj'];\n            var shapeResizingArgs = { cancel: false, action: 'rotating', previousShapeSettings: shapeSettings, allowShapeOverflow: this.allowOutofBound() };\n            var shapeMovingArgs = { cancel: false, action: 'rotating', previousShapeSettings: shapeSettings, allowShapeOverflow: this.allowOutofBound() };\n            this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'mouse-down');\n        }\n        if (this.timer && this.timer > 0 && this.dragPoint.startX && this.dragPoint.startY) {\n            var width = Math.abs(this.dragPoint.startX - e.touches[0].clientX);\n            var height = Math.abs(this.dragPoint.startY - e.touches[0].clientY);\n            if (width > 10 || height > 10) {\n                this.timer = 0;\n            }\n        }\n        var bbox = parent.lowerCanvas.getBoundingClientRect();\n        if (e.type === 'touchmove' && e.touches.length === 2) {\n            if (this.isFirstMove) {\n                this.startTouches = this.targetTouches(e.touches);\n                this.tempTouches = [];\n                this.tempTouches.push({ x: (e.touches[0].clientX || (e.touches[0].pageX - parent.lowerCanvas.offsetLeft) - bbox.left),\n                    y: (e.touches[0].clientY || (e.touches[0].pageY - parent.lowerCanvas.offsetTop)) - bbox.top });\n                this.tempTouches.push({ x: (e.touches[1].clientX || (e.touches[1].pageX - parent.lowerCanvas.offsetLeft)) - bbox.left,\n                    y: (e.touches[1].clientY || (e.touches[1].pageY - parent.lowerCanvas.offsetTop)) - bbox.top });\n            }\n            else {\n                var firstFingerX = (e.touches[0].clientX || (e.touches[0].pageX - parent.lowerCanvas.offsetLeft)) - bbox.left;\n                var firstFingerY = (e.touches[0].clientY || (e.touches[0].pageY - parent.lowerCanvas.offsetTop)) - bbox.top;\n                var secondFingerX = (e.touches[1].clientX || (e.touches[1].pageX - parent.lowerCanvas.offsetLeft)) - bbox.left;\n                var secondFingerY = (e.touches[1].clientY || (e.touches[1].pageY - parent.lowerCanvas.offsetTop)) - bbox.top;\n                var center = { x: firstFingerX < secondFingerX ? secondFingerX - ((secondFingerX - firstFingerX) / 2) :\n                        firstFingerX - ((firstFingerX - secondFingerX) / 2), y: firstFingerY < secondFingerY ?\n                        secondFingerY - ((secondFingerY - firstFingerY) / 2) : firstFingerY - ((firstFingerY - secondFingerY) / 2) };\n                if (this.currMousePoint.x !== center.x && this.currMousePoint.y !== center.y) {\n                    var type = '';\n                    if (e.type === 'touchmove' && (parent.zoomSettings.zoomTrigger & ZoomTrigger.Pinch) === ZoomTrigger.Pinch) {\n                        this.zoomType = 'Pinch';\n                        var scale = this.calculateScale(this.startTouches, this.targetTouches(e.touches));\n                        this.startTouches = this.targetTouches(e.touches);\n                        if (scale > 1) {\n                            type = 'zoomIn';\n                        }\n                        else if (scale < 1) {\n                            type = 'zoomOut';\n                        }\n                    }\n                    if (type !== '') {\n                        parent.isZoomBtnClick = true;\n                        parent.notify('draw', { prop: 'performPointZoom', onPropertyChange: false,\n                            value: { x: center.x, y: center.y, type: type, isResize: null } });\n                    }\n                    this.tempTouches = [];\n                    this.tempTouches.push({ x: e.touches[0].clientX || (e.touches[0].pageX - parent.lowerCanvas.offsetLeft),\n                        y: e.touches[0].clientY || (e.touches[0].pageY - parent.lowerCanvas.offsetTop) });\n                    this.tempTouches.push({ x: e.touches[1].clientX || (e.touches[1].pageX - parent.lowerCanvas.offsetLeft),\n                        y: e.touches[1].clientY || (e.touches[1].pageY - parent.lowerCanvas.offsetTop) });\n                    this.currMousePoint.x = center.x;\n                    this.currMousePoint.y = center.y;\n                    this.isPinching = true;\n                }\n            }\n            this.isFirstMove = false;\n            return;\n        }\n        var x;\n        var y;\n        if (e.type === 'mousemove') {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        else {\n            this.touchEndPoint.x = x = e.touches[0].clientX;\n            this.touchEndPoint.y = y = e.touches[0].clientY;\n        }\n        x -= bbox.left;\n        y -= bbox.top;\n        this.canvasMouseMoveHandler(e);\n        var isCropSelection = false;\n        var splitWords;\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (isCropSelection) {\n            parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n        }\n        parent.upperCanvas.style.cursor = canvasCursor;\n        parent.cursor = cursor;\n        if (parent.currObjType.isActiveObj && (parent.activeObj.activePoint !== undefined || parent.objColl.length > 0) &&\n            !this.dragCanvas || parent.activeObj.activePoint !== undefined) {\n            if (this.dragElement === '') {\n                this.setCursor(x, y);\n                if ((parent.activeObj.activePoint &&\n                    (parent.activeObj.activePoint.width === 0 || (!isNullOrUndefined(parent.activeObj.currIndex) &&\n                        this.cursorTargetId !== parent.activeObj.currIndex)))\n                    && parent.cursor !== 'default' &&\n                    parent.cursor !== 'move' && parent.cursor !== 'crosshair'\n                    && parent.cursor !== 'grab' && parent.cursor !== 'pointer') {\n                    parent.upperCanvas.style.cursor = parent.cursor = 'move';\n                }\n                this.findTarget(x, y, e.type);\n            }\n        }\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        if (parent.currObjType.isDragging) {\n            if (parent.activeObj.shape && parent.activeObj.preventShapeDragOut) {\n                if (x < destLeft || x > destLeft + destWidth || y < destTop || y > destTop + destHeight) {\n                    return;\n                }\n            }\n            this.upperContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            this.updateActivePoint(x, y, isCropSelection);\n            parent.notify('shape', { prop: 'updateTrianglePoints', onPropertyChange: false, value: { obj: parent.activeObj } });\n            if (this.isPreventDragging) {\n                if (!this.isShapeDragOut()) {\n                    this.isPreventDragging = false;\n                }\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: null, isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n            }\n            else {\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: null, isCropRatio: null,\n                        points: null, isPreventDrag: null, saveContext: null, isPreventSelection: null } });\n            }\n            if (isCropSelection) {\n                this.dragCanvas = parent.togglePan = true;\n            }\n        }\n        this.isMouseDown = false;\n        this.isMouseUp = false;\n    };\n    Selection.prototype.mouseUpEventHandler = function (e) {\n        var parent = this.parent;\n        var id = parent.element.id;\n        parent.isKBDNavigation = this.isMouseDown = false;\n        this.isMouseUp = true;\n        if (!Browser.isDevice && ((parent.element.querySelector('#' + id + '_contextualToolbar') &&\n            !parent.element.querySelector('#' + id + '_contextualToolbar').parentElement.classList.contains('e-hide')) ||\n            (parent.element.querySelector('#' + id + '_headWrapper')\n                && !parent.element.querySelector('#' + id + '_headWrapper').parentElement.classList.contains('e-hide')))) {\n            if (!(parent.activeObj.shape && parent.activeObj.shape === 'redact' && parent.isShapeDrawing)) {\n                return;\n            }\n        }\n        if (parent.cursor === 'grabbing' && this.isGrabbing) {\n            var obj = { shapeSettingsObj: {} };\n            parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n            var shapeSettings = obj['shapeSettingsObj'];\n            var shapeResizingArgs = { cancel: false, action: 'rotate-end', previousShapeSettings: shapeSettings, allowShapeOverflow: this.allowOutofBound() };\n            var shapeMovingArgs = { cancel: false, action: 'rotate-end', previousShapeSettings: shapeSettings, allowShapeOverflow: this.allowOutofBound() };\n            this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'mouse-up');\n        }\n        this.isGrabbing = false;\n        if (this.isPreventShaping) {\n            this.isPreventShaping = false;\n        }\n        if (this.mouseDown === 'canvas' || this.isSliderActive ||\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            e.target.closest('.e-image-editor') || e.target.closest('.e-ie-ddb-popup')) {\n            if (e.type === 'touchstart') {\n                this.isTouch = false;\n            }\n            else if (e.type === 'touchend') {\n                e.stopImmediatePropagation();\n            }\n            e.preventDefault();\n            if (parent.togglePan) {\n                this.canvasMouseUpHandler(e);\n            }\n            var x = void 0;\n            var y = void 0;\n            if (e.type === 'mouseup') {\n                x = e.clientX;\n                y = e.clientY;\n            }\n            else if (!this.isTouchDblClick) {\n                x = this.touchEndPoint.x;\n                y = this.touchEndPoint.y;\n            }\n            var bbox = parent.lowerCanvas.getBoundingClientRect();\n            x -= bbox.left;\n            y -= bbox.top;\n            var activeObjShape = void 0;\n            var currentDrawingShape = this.currentDrawingShape;\n            var dummyClick = false;\n            if (e.type === 'touchend') {\n                this.startTouches = this.tempTouches = [];\n                this.isFirstMove = false;\n                if (parent.textArea.style.display === 'none') {\n                    this.timer = 0;\n                }\n                if (this.isPinching) {\n                    this.isPinching = false;\n                    parent.notify('draw', { prop: 'redrawDownScale' });\n                    if (parent.isCropTab || parent.activeObj.shape) {\n                        parent.notify('draw', { prop: 'setStraightenActObj', value: { activeObj: null } });\n                        parent.notify('freehand-draw', { prop: 'resetStraightenPoint' });\n                    }\n                    if (parent.isStraightening) {\n                        parent.notify('draw', { prop: 'resetStraightenDestPoints' });\n                        parent.notify('draw', { prop: 'setDestForStraighten' });\n                    }\n                    return;\n                }\n            }\n            var isCropSelection = false;\n            var splitWords = void 0;\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (splitWords !== undefined && splitWords[0] === 'crop') {\n                isCropSelection = true;\n            }\n            if (this.currentDrawingShape === 'path' && parent.isShapeDrawing) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                var elem = e.srcElement;\n                var elemId = elem.parentElement.id;\n                var id_1 = parent.element.id;\n                // eslint-disable-next-line max-len\n                if (e.currentTarget !== parent.upperCanvas && e.currentTarget !== parent.lowerCanvas && parent.activeObj.pointColl.length > 0 &&\n                    (elem.classList.contains('e-upload-icon') || elemId === id_1 + '_zoomIn' ||\n                        elemId === id_1 + '_zoomOut' || elemId === id_1 + '_annotationBtn' ||\n                        elemId === id_1 + '_borderColorBtn' || elemId === id_1 + '_borderWidthBtn')) {\n                    parent.notify('shape', { prop: 'stopPathDrawing', onPropertyChange: false, value: { e: e, isApply: true } });\n                    this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                    parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj, isCropRatio: null,\n                            points: null, isPreventDrag: true, saveContext: null, isPreventSelection: true } });\n                }\n                if (parent.currObjType.isDragging && this.isTouch &&\n                    parent.activeObj.shape && parent.activeObj.shape === 'path') {\n                    this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                    parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj, isCropRatio: null,\n                            points: null, isPreventDrag: true, saveContext: null, isPreventSelection: true } });\n                }\n                return;\n            }\n            if (e.currentTarget === parent.upperCanvas && !parent.isResize) {\n                this.pathAdjustedIndex = null;\n                if (this.currentDrawingShape !== '') {\n                    if (this.currentDrawingShape === 'text') {\n                        var prevCropObj_1 = extend({}, parent.cropObj, {}, true);\n                        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                            value: { operation: 'shapeInsert', previousObj: this.initialPrevObj, previousObjColl: this.initialPrevObj.objColl,\n                                previousPointColl: this.initialPrevObj.pointColl, previousSelPointColl: this.initialPrevObj.selPointColl,\n                                previousCropObj: prevCropObj_1, previousText: null,\n                                currentText: null, previousFilter: null, isCircleCrop: null } });\n                    }\n                    else {\n                        parent.notify('undo-redo', { prop: 'updateUrObj', onPropertyChange: false, value: { objColl: this.initialPrevObj.objColl, operation: 'shapeInsert' } });\n                    }\n                    this.isShapeInserted = true;\n                    this.currentDrawingShape = '';\n                    if ((parent.activeObj.shape && parent.activeObj.shape === 'path' && parent.activeObj.pointColl.length === 0) ||\n                        ((!parent.activeObj.shape || parent.activeObj.shape !== 'path') && parent.activeObj.activePoint.width === 0 &&\n                            parent.activeObj.activePoint.height === 0)) {\n                        dummyClick = true;\n                        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                    }\n                    var previousShapeSettings = this.updatePrevShapeSettings();\n                    var shapeResizingArgs = { cancel: false, action: 'draw-end', previousShapeSettings: previousShapeSettings };\n                    var shapeMovingArgs = { cancel: false, action: 'move', previousShapeSettings: previousShapeSettings };\n                    this.shapeResizingArgs = shapeResizingArgs;\n                    this.shapeMovingArgs = shapeMovingArgs;\n                    this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'mouse-up');\n                }\n                if (parent.activeObj.shape && parent.activeObj.shape === 'path' && parent.activeObj.pointColl.length > 0) {\n                    parent.activeObj.activePoint = parent.getSquarePointForPath(parent.activeObj);\n                }\n                this.adjustActObjForLineArrow();\n                this.updPtCollForShpRot();\n                parent.currObjType.shape = parent.currObjType.shape.toLowerCase();\n                var prevCropObj = extend({}, parent.cropObj, {}, true);\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                var prevObj = object['currObj'];\n                prevObj.objColl = extend([], parent.objColl, [], true);\n                prevObj.pointColl = extend([], parent.pointColl, [], true);\n                prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n                var selPointCollObj = { selPointColl: null };\n                parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                    value: { obj: selPointCollObj } });\n                prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n                if (!parent.togglePen && !isCropSelection) {\n                    if (this.tempObjColl && parent.activeObj.activePoint.width !== 0) {\n                        parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n                        parent.objColl.push(parent.activeObj);\n                        if (JSON.stringify(parent.activeObj.activePoint) !== JSON.stringify(this.tempActiveObj.activePoint)) {\n                            parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                                value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: this.tempObjColl,\n                                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                                    previousCropObj: prevCropObj, previousText: null,\n                                    currentText: null, previousFilter: null, isCircleCrop: null } });\n                        }\n                        var tempObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n                        parent.objColl.pop();\n                        this.redrawShape(tempObj);\n                        this.tempObjColl = undefined;\n                    }\n                    if (!this.isFhdEditing) {\n                        this.applyCurrActObj(x, y);\n                        parent.currObjType.isResize = false;\n                        parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                    }\n                }\n                else if (isCropSelection && this.isMouseUp && parent.cursor.indexOf('resize') > -1) {\n                    var previousShapeSettings = this.updatePrevShapeSettings();\n                    var shapeResizingArgs = { cancel: false, action: 'resize-end', previousShapeSettings: previousShapeSettings };\n                    this.triggerShapeChange(shapeResizingArgs, shapeResizingArgs, 'resize');\n                }\n                if (parent.activeObj) {\n                    var isCropSelection_1 = false;\n                    var splitWords_1;\n                    if (parent.activeObj.shape !== undefined) {\n                        splitWords_1 = parent.activeObj.shape.split('-');\n                    }\n                    if (splitWords_1 === undefined && (parent.currObjType.isCustomCrop || parent.togglePen)) {\n                        isCropSelection_1 = true;\n                    }\n                    else if (splitWords_1 !== undefined && splitWords_1[0] === 'crop') {\n                        isCropSelection_1 = true;\n                    }\n                    var shape = parent.activeObj.shape;\n                    activeObjShape = shape;\n                    var shapeColl = ['rectangle', 'ellipse', 'line', 'arrow', 'path'];\n                    if (shapeColl.indexOf(shape) > -1) {\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    else if (shape === 'text') {\n                        if (parent.textArea.style.display === 'none') {\n                            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'text',\n                                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        }\n                    }\n                    else if (shape === 'redact') {\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'redact',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    else if (this.isFhdEditing) {\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'pen',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    else if (!isCropSelection_1) {\n                        var eventargs = { type: 'main', isApplyBtn: null, isCropping: false, isZooming: null };\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: eventargs });\n                    }\n                    parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                    if (!this.isFhdEditing) {\n                        if (parent.activeObj.shape && parent.activeObj.shape === 'text' &&\n                            parent.activeObj.textSettings.fontSize === 11 && Math.floor(parent.activeObj.activePoint.width) === 55 &&\n                            Math.floor(parent.activeObj.activePoint.height) === 11) {\n                            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                            if (parent.drawingShape === 'text' && !parent.activeObj.keyHistory) {\n                                parent.activeObj.keyHistory = 'Enter Text';\n                            }\n                        }\n                        if (!isCropSelection_1) {\n                            this.adjustActObjForLineArrow();\n                            if (parent.isShapeDrawing) {\n                                var temp = this.currentDrawingShape;\n                                parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                                this.currentDrawingShape = temp;\n                            }\n                            else {\n                                parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                            }\n                        }\n                    }\n                }\n            }\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (splitWords !== undefined && splitWords[0] === 'crop') {\n                isCropSelection = true;\n            }\n            if (parent.activeObj.shape && !isCropSelection && e.currentTarget === parent.upperCanvas &&\n                parent.textArea.style.display === 'none') {\n                if (parent.activeObj.shape === 'text') {\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'text',\n                            isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                }\n                else if (parent.activeObj.shape === 'redact') {\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'redact',\n                            isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                }\n                else {\n                    var temp = this.currentDrawingShape;\n                    this.currentDrawingShape = '';\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                            isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    this.currentDrawingShape = temp;\n                }\n                parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n            }\n            var obj = { freehandDrawSelectedId: null };\n            parent.notify('freehand-draw', { prop: 'getFreehandDrawSelectedId', onPropertyChange: false, value: { obj: obj } });\n            if (parent.togglePen && e.currentTarget === parent.upperCanvas && !obj['freehandDrawSelectedId']) {\n                parent.notify('freehand-draw', { prop: 'freehandUpHandler', onPropertyChange: false,\n                    value: { e: e, canvas: parent.upperCanvas, context: this.upperContext } });\n                if (parent.togglePen && !parent.isMaskImage && (isNullOrUndefined(parent.toolbar) ||\n                    (parent.toolbar && parent.toolbar.length > 0) || !isNullOrUndefined(parent.toolbarTemplate))) {\n                    parent.okBtn();\n                    parent.freeHandDraw(true);\n                }\n            }\n            else {\n                parent.currObjType.shape = '';\n            }\n            this.dragElement = '';\n            this.mouseDown = '';\n            this.isSliderActive = false;\n            parent.currObjType.isInitialLine = parent.currObjType.isDragging = false;\n            this.selMouseUpEvent();\n            if (isNullOrUndefined(parent.drawingShape) && activeObjShape && currentDrawingShape !== '') {\n                parent.drawingShape = activeObjShape;\n            }\n            if (parent.drawingShape) {\n                this.currentDrawingShape = parent.drawingShape.toLowerCase();\n                if (dummyClick) {\n                    parent.enableShapeDrawing(parent.toPascalCase(parent.drawingShape), true);\n                    parent.upperCanvas.style.cursor = 'crosshair';\n                }\n            }\n            parent.isShapeDrawing = false;\n            parent.notify('freehand-draw', { prop: 'resetSelPoints', onPropertyChange: false });\n        }\n        this.isMouseUp = false;\n    };\n    Selection.prototype.adjustActObjForLineArrow = function (obj) {\n        var isAdjusted = false;\n        var parent = this.parent;\n        obj = obj ? obj : parent.activeObj;\n        if (obj.shape && (obj.shape === 'line' || parent.activeObj.shape === 'arrow')) {\n            var temp = void 0;\n            if ((this.dragElement === 'e-resize' && obj.activePoint.endX < obj.activePoint.startX) ||\n                (this.dragElement === 'w-resize' && obj.activePoint.startX > obj.activePoint.endX)) {\n                isAdjusted = true;\n                temp = obj.activePoint.startX;\n                obj.activePoint.startX = obj.activePoint.endX;\n                obj.activePoint.endX = temp;\n                temp = obj.activePoint.startY;\n                obj.activePoint.startY = obj.activePoint.endY;\n                obj.activePoint.endY = temp;\n            }\n            obj.activePoint.width = Math.abs(obj.activePoint.endX - obj.activePoint.startX);\n            obj.activePoint.height = Math.abs(obj.activePoint.endY - obj.activePoint.startY);\n            if (parent.activeObj.shape !== 'path') {\n                parent.notify('shape', { prop: 'setPointCollForLineArrow', onPropertyChange: false,\n                    value: { obj: obj } });\n                for (var i = 0; i < obj.pointColl.length; i++) {\n                    obj.pointColl[i].ratioX = (obj.pointColl[i].x -\n                        parent.img.destLeft) / parent.img.destWidth;\n                    obj.pointColl[i].ratioY = (obj.pointColl[i].y -\n                        parent.img.destTop) / parent.img.destHeight;\n                }\n            }\n        }\n        return isAdjusted;\n    };\n    Selection.prototype.updPtCollForShpRot = function (obj) {\n        var parent = this.parent;\n        obj = obj ? obj : parent.activeObj;\n        if (obj.shape && obj.rotatedAngle !== 0) {\n            parent.notify('shape', { prop: 'setPointCollForShapeRotation', onPropertyChange: false, value: { obj: obj } });\n            var _a = parent.img, destLeft_1 = _a.destLeft, destTop_1 = _a.destTop, destWidth_1 = _a.destWidth, destHeight_1 = _a.destHeight;\n            var horTopLinePointColl = obj.horTopLinePointColl, horBottomLinePointColl = obj.horBottomLinePointColl, verLeftLinePointColl = obj.verLeftLinePointColl, verRightLinePointColl = obj.verRightLinePointColl;\n            // eslint-disable-next-line @typescript-eslint/tslint/config\n            var setRatio = function (point) {\n                point.ratioX = (point.x - destLeft_1) / destWidth_1;\n                point.ratioY = (point.y - destTop_1) / destHeight_1;\n            };\n            horTopLinePointColl.forEach(setRatio);\n            horBottomLinePointColl.forEach(setRatio);\n            verLeftLinePointColl.forEach(setRatio);\n            verRightLinePointColl.forEach(setRatio);\n        }\n    };\n    Selection.prototype.setXYPoints = function (e) {\n        e.preventDefault();\n        var x;\n        var y;\n        if (e.type === 'mousedown') {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        else {\n            this.touchEndPoint.x = x = e.touches[0].clientX;\n            this.touchEndPoint.y = y = e.touches[0].clientY;\n        }\n        var bbox = this.parent.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        return { x: x, y: y };\n    };\n    Selection.prototype.getCurrentIndex = function () {\n        var index;\n        var parent = this.parent;\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            if (parent.activeObj.currIndex === parent.objColl[i].currIndex) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    };\n    Selection.prototype.isShapeClick = function (e, isCropSelection) {\n        var parent = this.parent;\n        var isShape = false;\n        if (parent.togglePen) {\n            return isShape;\n        }\n        if (parent.activeObj.shape && parent.activeObj.shape === 'text' && this.isShapeInserted) {\n            var isTextArea = (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block')\n                ? true : false;\n            var activeObj = extend({}, parent.activeObj, null, true);\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: true } });\n            var points = this.setXYPoints(e);\n            var x = points.x;\n            var y = points.y;\n            isShape = this.findTargetObj(x, y, isCropSelection);\n            if (!isCropSelection) {\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                if (isShape) {\n                    parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                        value: { x: null, y: null, isMouseDown: true } });\n                }\n            }\n            if (isTextArea) {\n                parent.textArea.value = parent.objColl[parent.objColl.length - 1].keyHistory;\n                parent.textArea.style.display = 'block';\n                parent.activeObj = activeObj;\n                var index = this.getCurrentIndex();\n                if (isNullOrUndefined(index)) {\n                    parent.objColl.pop();\n                }\n                else {\n                    parent.objColl.splice(index, 1);\n                }\n            }\n            else if (!isShape && activeObj.shape) {\n                parent.activeObj = activeObj;\n                var index = this.getCurrentIndex();\n                if ((!isNullOrUndefined(index) &&\n                    JSON.stringify(parent.activeObj.activePoint) === JSON.stringify(parent.objColl[index].activePoint))) {\n                    parent.objColl.splice(index, 1);\n                }\n                else if (isNullOrUndefined(parent.activeObj.currIndex)) {\n                    parent.objColl.pop();\n                }\n            }\n        }\n        return isShape;\n    };\n    Selection.prototype.isShapeTouch = function (e, isCropSelection) {\n        var parent = this.parent;\n        var isShape = false;\n        if (e.type === 'touchstart' && !parent.togglePen) {\n            if (parent.activeObj && parent.activeObj.shape === 'text') {\n                this.timer = setTimeout(this.setTimer.bind(this), 1000, e);\n            }\n            var isTextArea = (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block')\n                ? true : false;\n            var activeObj = extend({}, parent.activeObj, null, true);\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: true } });\n            var points = this.setXYPoints(e);\n            var x = points.x;\n            var y = points.y;\n            isShape = this.findTargetObj(x, y, isCropSelection);\n            if (!isCropSelection) {\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            }\n            if (isTextArea) {\n                parent.textArea.value = parent.objColl[parent.objColl.length - 1].keyHistory;\n                parent.textArea.style.display = 'block';\n                parent.activeObj = activeObj;\n                var index = this.getCurrentIndex();\n                if (isNullOrUndefined(index)) {\n                    parent.objColl.pop();\n                }\n                else {\n                    parent.objColl.splice(index, 1);\n                }\n            }\n            else if (!isShape && activeObj.shape && (activeObj.activePoint.width !== 0 || activeObj.activePoint.height !== 0 ||\n                (activeObj.shape === 'path' && activeObj.pointColl.length > 0))) {\n                parent.activeObj = activeObj;\n                var index = this.getCurrentIndex();\n                if (!isCropSelection) {\n                    if ((!isNullOrUndefined(index) && JSON.stringify(parent.activeObj.activePoint) ===\n                        JSON.stringify(parent.objColl[index].activePoint))) {\n                        parent.objColl.splice(index, 1);\n                    }\n                    else if (isNullOrUndefined(parent.activeObj.currIndex)) {\n                        parent.objColl.pop();\n                    }\n                }\n            }\n        }\n        return isShape;\n    };\n    Selection.prototype.isFreehandDrawTouch = function (e, isCropSelection) {\n        var parent = this.parent;\n        var isFreehandDraw = false;\n        if (e.type === 'touchstart' && !isCropSelection && !parent.togglePen) {\n            var isTextArea = (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block')\n                ? true : false;\n            var activeObj = extend({}, parent.activeObj, null, true);\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: true } });\n            var points = this.setXYPoints(e);\n            var x = points.x;\n            var y = points.y;\n            this.setCursor(x, y);\n            if (this.isFhdPoint) {\n                isFreehandDraw = true;\n            }\n            if (isTextArea) {\n                parent.textArea.value = parent.objColl[parent.objColl.length - 1].keyHistory;\n                parent.textArea.style.display = 'block';\n                parent.activeObj = activeObj;\n                var index = this.getCurrentIndex();\n                if (isNullOrUndefined(index)) {\n                    parent.objColl.pop();\n                }\n                else {\n                    parent.objColl.splice(index, 1);\n                }\n            }\n            else if (activeObj.shape) {\n                parent.activeObj = activeObj;\n                var index = this.getCurrentIndex();\n                if (!isCropSelection) {\n                    if ((!isNullOrUndefined(index) && JSON.stringify(parent.activeObj.activePoint) ===\n                        JSON.stringify(parent.objColl[index].activePoint))) {\n                        parent.objColl.splice(index, 1);\n                    }\n                    else if (isNullOrUndefined(parent.activeObj.currIndex)) {\n                        parent.objColl.pop();\n                    }\n                }\n            }\n        }\n        return isFreehandDraw;\n    };\n    Selection.prototype.applyObj = function (x, y) {\n        var parent = this.parent;\n        var isApply = false;\n        if (parent.activeObj.activePoint.width === 0 && parent.activeObj.activePoint.height === 0) {\n            return false;\n        }\n        var shapeColl = ['rectangle', 'ellipse', 'line', 'arrow', 'path', 'image', 'text'];\n        var _a = parent.activeObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        if (parent.activeObj.shape && shapeColl.indexOf(parent.activeObj.shape) > -1) {\n            var radius = parent.activeObj.topLeftCircle.radius;\n            if (x >= (startX - (radius * 2)) && x <= (endX + (radius * 2)) && y >= (startY - (radius * 2)) &&\n                y <= (endY + (radius * 2))) {\n                isApply = false;\n            }\n            else if (parent.upperCanvas.style.cursor !== 'default' && parent.upperCanvas.style.cursor !== 'grab' &&\n                parent.upperCanvas.style.cursor !== 'crosshair' && parent.upperCanvas.style.cursor !== 'pointer' &&\n                parent.upperCanvas.style.cursor !== 'move') {\n                isApply = false;\n            }\n            else {\n                isApply = true;\n            }\n        }\n        return isApply;\n    };\n    Selection.prototype.applyCurrShape = function (isShapeClick) {\n        var parent = this.parent;\n        var isApply = false;\n        if (parent.togglePen) {\n            return isApply;\n        }\n        var obj = extend({}, parent.activeObj, null, true);\n        if (this.isShapeInserted && parent.activeObj.shape === 'text' && isShapeClick) {\n            this.isInitialTextEdited = true;\n            parent.notify('draw', { prop: 'setShapeTextInsert', onPropertyChange: false, value: { bool: true } });\n        }\n        if (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block') {\n            var activeObj = extend({}, parent.activeObj, null, true);\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: null } });\n            obj = extend({}, parent.objColl[parent.objColl.length - 1], null, true);\n            parent.objColl.pop();\n            parent.activeObj = extend({}, activeObj, null, true);\n            parent.textArea.value = obj.keyHistory;\n            parent.textArea.style.display = 'block';\n            var strokeColor = obj.strokeSettings && obj.strokeSettings.strokeColor ? obj.strokeSettings.strokeColor.split('(')[0] === 'rgb' ?\n                this.rgbToHex(parseFloat(obj.strokeSettings.strokeColor.split('(')[1].split(',')[0]), parseFloat(obj.strokeSettings.strokeColor.split('(')[1].split(',')[1]), parseFloat(obj.strokeSettings.strokeColor.split('(')[1].split(',')[2]), parseFloat(obj.strokeSettings.strokeColor.split('(')[1].split(',')[3])) :\n                obj.strokeSettings.strokeColor : null;\n            if (strokeColor && strokeColor === '#ffffff') {\n                strokeColor = '#fff';\n            }\n            if (this.tempActiveObj.strokeSettings && this.tempActiveObj.strokeSettings.strokeColor &&\n                this.tempActiveObj.strokeSettings.strokeColor === '#ffffff') {\n                this.tempActiveObj.strokeSettings.strokeColor = '#fff';\n            }\n            if (obj.keyHistory !== this.tempActiveObj.keyHistory ||\n                (strokeColor && (strokeColor !== this.tempActiveObj.strokeSettings.strokeColor)) ||\n                (obj.textSettings && obj.textSettings.fontFamily !== this.tempActiveObj.textSettings.fontFamily) ||\n                (obj.textSettings && Math.round(obj.textSettings.fontSize) !== Math.round(this.tempActiveObj.textSettings.fontSize)) ||\n                (obj.textSettings && Math.round(obj.textSettings.fontRatio) !== Math.round(this.tempActiveObj.textSettings.fontRatio)) ||\n                (obj.textSettings && obj.textSettings.bold !== this.tempActiveObj.textSettings.bold) ||\n                (obj.textSettings && obj.textSettings.italic !== this.tempActiveObj.textSettings.italic) ||\n                (obj.textSettings && obj.textSettings.underline !== this.tempActiveObj.textSettings.underline)) {\n                isApply = true;\n            }\n            if (this.isInitialTextEdited && !isApply) {\n                isApply = true;\n                this.isInitialTextEdited = false;\n            }\n        }\n        else {\n            this.tempActiveObj.activePoint.height = Math.abs(this.tempActiveObj.activePoint.height);\n            isApply = JSON.stringify(obj) !== JSON.stringify(this.tempActiveObj);\n        }\n        return isApply;\n    };\n    Selection.prototype.canvasMouseDownHandler = function (e) {\n        var parent = this.parent;\n        e.preventDefault();\n        var x;\n        var y;\n        if (e.type === 'mousedown') {\n            x = e.offsetX || (e.pageX - parent.lowerCanvas.offsetLeft);\n            y = e.offsetY || (e.pageY - parent.lowerCanvas.offsetTop);\n        }\n        else {\n            x = e.touches[0].clientX || (e.touches[0].pageX - parent.lowerCanvas.offsetLeft);\n            y = e.touches[0].clientY || (e.touches[0].pageY - parent.lowerCanvas.offsetTop);\n        }\n        var bbox = parent.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        this.panDown = { x: x, y: y };\n        var tempPanMoveObj = { tempPanMove: null };\n        parent.notify('transform', { prop: 'getTempPanMove', onPropertyChange: false,\n            value: { obj: tempPanMoveObj } });\n        if (isNullOrUndefined(tempPanMoveObj['tempPanMove'])) {\n            parent.notify('transform', { prop: 'setTempPanMove', onPropertyChange: false,\n                value: { point: { x: x, y: y } } });\n        }\n    };\n    Selection.prototype.canvasMouseMoveHandler = function (e) {\n        var parent = this.parent;\n        var frameObject = { bool: null };\n        parent.notify('toolbar', { prop: 'getFrameToolbar', onPropertyChange: false, value: { obj: frameObject } });\n        if (parent.isResize || frameObject['bool']) {\n            parent.upperCanvas.style.cursor = 'default';\n            return;\n        }\n        if (this.dragCanvas) {\n            parent.lowerCanvas.style.cursor = 'grab';\n        }\n        else {\n            this.dragCanvas = parent.togglePan = false;\n            parent.lowerCanvas.style.cursor = parent.upperCanvas.style.cursor = parent.cursor = 'default';\n        }\n        var x;\n        var y;\n        if (e.type === 'mousemove') {\n            x = e.offsetX;\n            y = e.offsetY;\n        }\n        else {\n            x = e.touches[0].clientX || (e.touches[0].pageX - parent.lowerCanvas.offsetLeft);\n            y = e.touches[0].clientY || (e.touches[0].pageY - parent.lowerCanvas.offsetTop);\n        }\n        var bbox = parent.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        var panMove = { x: x, y: y };\n        parent.notify('transform', { prop: 'setPanMove', onPropertyChange: false,\n            value: { point: { x: x, y: y } } });\n        if (this.panDown && panMove && parent.togglePan && this.dragCanvas) {\n            if (parent.isCropTab || parent.activeObj.shape) {\n                parent.notify('draw', { prop: 'setStraightenActObj', value: { activeObj: null } });\n                parent.notify('freehand-draw', { prop: 'resetStraightenPoint' });\n            }\n            parent.notify('transform', { prop: 'drawPannedImage', onPropertyChange: false,\n                value: { xDiff: null, yDiff: null } });\n        }\n    };\n    Selection.prototype.canvasMouseUpHandler = function (e) {\n        var parent = this.parent;\n        e.preventDefault();\n        var panMoveObj = { panMove: null };\n        parent.notify('transform', { prop: 'getPanMove', onPropertyChange: false,\n            value: { obj: panMoveObj } });\n        if (parent.togglePan) {\n            if (this.panDown && panMoveObj['panMove'] && parent.togglePan && this.dragCanvas) {\n                this.panDown = null;\n                parent.notify('transform', { prop: 'setPanMove', onPropertyChange: false,\n                    value: { point: null } });\n            }\n        }\n        parent.notify('transform', { prop: 'setTempPanMove', onPropertyChange: false,\n            value: { point: null } });\n        if (this.currentDrawingShape !== 'path') {\n            parent.currObjType.isDragging = false;\n        }\n    };\n    Selection.prototype.touchStartHandler = function (e) {\n        e.preventDefault();\n        var parent = this.parent;\n        if (this.touchTime === 0) {\n            this.touchTime = new Date().getTime();\n        }\n        else {\n            if (((new Date().getTime()) - this.touchTime) < 400) {\n                this.isTouchDblClick = true;\n                var temp = parent.isShapeDrawing;\n                parent.notify('shape', { prop: 'stopPathDrawing', onPropertyChange: false, value: { e: e, isApply: null } });\n                this.isTouchDblClick = false;\n                this.touchTime = 0;\n                if (temp !== parent.isShapeDrawing && parent.activeObj.shape &&\n                    parent.activeObj.shape === 'path') {\n                    return;\n                }\n            }\n            else {\n                this.touchTime = new Date().getTime();\n            }\n        }\n        if (e.touches.length === 2) {\n            this.isFirstMove = true;\n        }\n        else {\n            this.mouseDownEventHandler(e);\n        }\n        EventHandler.add(parent.lowerCanvas, 'touchend', this.mouseUpEventHandler, this);\n        EventHandler.add(parent.lowerCanvas, 'touchmove', this.mouseMoveEventHandler, this);\n        EventHandler.add(parent.upperCanvas, 'touchend', this.mouseUpEventHandler, this);\n        EventHandler.add(parent.upperCanvas, 'touchmove', this.mouseMoveEventHandler, this);\n    };\n    Selection.prototype.unwireEvent = function () {\n        var parent = this.parent;\n        EventHandler.remove(parent.lowerCanvas, 'touchend', this.mouseUpEventHandler);\n        EventHandler.remove(parent.lowerCanvas, 'touchmove', this.mouseMoveEventHandler);\n        EventHandler.remove(parent.upperCanvas, 'touchend', this.mouseUpEventHandler);\n        EventHandler.remove(parent.upperCanvas, 'touchmove', this.mouseMoveEventHandler);\n    };\n    Selection.prototype.keyDownEventHandler = function (e) {\n        var parent = this.parent;\n        if (e.ctrlKey && (e.key === '+' || e.key === '-')) {\n            e.preventDefault();\n        }\n        var obj = { fileName: '', fileType: null };\n        parent.notify('draw', { prop: 'getFileName', onPropertyChange: false, value: { obj: obj } });\n        var beforeSave = { fileName: obj['fileName'], fileType: obj['fileType'], cancel: false };\n        switch (e.key) {\n            case (e.ctrlKey && 's'):\n                parent.trigger('beforeSave', beforeSave);\n                this.beforeSaveEvent(beforeSave, e);\n                break;\n            case (e.ctrlKey && 'z'):\n                if (parent.allowUndoRedo) {\n                    parent.noPushUndo = false;\n                    if (parent.togglePen || parent.drawingShape) {\n                        parent.okBtn();\n                        parent.drawingShape = null;\n                    }\n                    parent.notify('undo-redo', { prop: 'call-undo' });\n                }\n                break;\n            case (e.ctrlKey && 'y'):\n                if (parent.allowUndoRedo) {\n                    parent.noPushUndo = false;\n                    if (parent.togglePen || parent.drawingShape) {\n                        parent.okBtn();\n                        parent.drawingShape = null;\n                    }\n                    parent.notify('undo-redo', { prop: 'call-redo' });\n                }\n                break;\n            case (e.ctrlKey && '+'):\n                if ((parent.zoomSettings.zoomTrigger & ZoomTrigger.Commands) === ZoomTrigger.Commands) {\n                    this.zoomType = 'Commands';\n                    parent.isZoomBtnClick = true;\n                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                        value: { zoomFactor: .1, zoomPoint: null }, isResize: null });\n                    parent.notify('draw', { prop: 'redrawDownScale' });\n                    if (parent.isCropTab || parent.activeObj.shape) {\n                        parent.notify('draw', { prop: 'setStraightenActObj', value: { activeObj: null } });\n                        parent.notify('freehand-draw', { prop: 'resetStraightenPoint' });\n                    }\n                    if (parent.isStraightening) {\n                        parent.notify('draw', { prop: 'resetStraightenDestPoints' });\n                        parent.notify('draw', { prop: 'setDestForStraighten' });\n                    }\n                }\n                break;\n            case (e.ctrlKey && '-'):\n                if ((parent.zoomSettings.zoomTrigger & ZoomTrigger.Commands) === ZoomTrigger.Commands) {\n                    this.zoomType = 'Commands';\n                    parent.isZoomBtnClick = true;\n                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                        value: { zoomFactor: -.1, zoomPoint: null }, isResize: null });\n                    parent.notify('draw', { prop: 'redrawDownScale' });\n                    if (parent.isCropTab || parent.activeObj.shape) {\n                        parent.notify('draw', { prop: 'setStraightenActObj', value: { activeObj: null } });\n                        parent.notify('freehand-draw', { prop: 'resetStraightenPoint' });\n                    }\n                    if (parent.isStraightening) {\n                        parent.notify('draw', { prop: 'resetStraightenDestPoints' });\n                        parent.notify('draw', { prop: 'setDestForStraighten' });\n                    }\n                }\n                break;\n            case 'Delete':\n                this.deleteItem();\n                break;\n            case 'Escape':\n                parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null, isFinalCancel: true } });\n                break;\n            case 'Enter':\n                this.performEnterAction(e);\n                break;\n            case 'Tab':\n                this.performTabAction();\n                break;\n            default:\n                if (Browser.isDevice && (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block')) {\n                    setTimeout(this.textKeyDown.bind(this), 1, e);\n                }\n                break;\n        }\n    };\n    Selection.prototype.performEnterAction = function (e) {\n        var parent = this.parent;\n        if (parent.isResize) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var target = e.target;\n            var isIcon = target.id.indexOf('aspectratio') ||\n                target.id.indexOf('non-aspectratio') > -1 ? true : false;\n            var isValue = this.isValueUpdated();\n            if (!isValue) {\n                if (isIcon) {\n                    this.focusRatioBtn();\n                }\n                return;\n            }\n            var point = this.getNumTextValue();\n            var aspectRatioElement = parent.element.querySelector('#' + parent.element.id + '_aspectratio');\n            var blrAspRatElem = parent.element.querySelector('.e-ie-toolbar-aspect-ratio-btn');\n            if (point && point.x && point.y) {\n                if (aspectRatioElement || (blrAspRatElem && !blrAspRatElem.classList.contains('e-hidden'))) {\n                    parent.notify('transform', { prop: 'resize', value: { width: point.x, height: null, isAspectRatio: true } });\n                }\n                else {\n                    parent.notify('transform', { prop: 'resize', value: { width: point.x, height: point.y, isAspectRatio: false } });\n                }\n            }\n            var aspectRatioHeight = parent.element.querySelector('#' + parent.element.id + '_resizeHeight');\n            var aspectRatioWidth = parent.element.querySelector('#' + parent.element.id + '_resizeWidth');\n            if (isNullOrUndefined(aspectRatioElement)) {\n                if (aspectRatioHeight) {\n                    var elem = getComponent(aspectRatioHeight, 'numerictextbox');\n                    if (aspectRatioHeight && aspectRatioHeight.value === '') {\n                        elem.value = parseFloat(elem.placeholder);\n                        aspectRatioHeight.value = elem.placeholder + 'px';\n                    }\n                }\n                if (aspectRatioWidth) {\n                    var elem = getComponent(aspectRatioWidth, 'numerictextbox');\n                    if (aspectRatioWidth && aspectRatioWidth.value === '') {\n                        elem.value = parseFloat(elem.placeholder);\n                        aspectRatioWidth.value = elem.placeholder + 'px';\n                    }\n                }\n            }\n            parent.notify('draw', { prop: 'redrawDownScale' });\n            if (isIcon) {\n                this.focusRatioBtn();\n            }\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        }\n        else if (e.target.classList.contains('e-upload')) {\n            var upload = parent.element.querySelector('.e-image-upload');\n            if (upload && upload.querySelector('.e-tbar-btn')) {\n                upload.querySelector('.e-tbar-btn').click();\n            }\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        }\n        else if (e.target.classList.contains('filter-wrapper')) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            e.target.parentElement.click();\n        }\n        else {\n            var splitWords = void 0;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (e && this.isKeyBoardCrop(e) &&\n                parent.activeObj.horTopLine && (parent.activeObj.shape && splitWords[0] === 'crop')) {\n                parent.crop();\n            }\n        }\n    };\n    Selection.prototype.focusRatioBtn = function () {\n        var id = this.parent.element.id;\n        if (this.parent.isKBDNavigation) {\n            // eslint-disable-next-line @typescript-eslint/tslint/config\n            setTimeout(function () {\n                if (document.getElementById(id + '_aspectratio')) {\n                    document.getElementById(id + '_aspectratio').focus();\n                }\n                else if (document.getElementById(id + '_nonaspectratio')) {\n                    document.getElementById(id + '_nonaspectratio').focus();\n                }\n            }, 50);\n        }\n    };\n    Selection.prototype.isKeyBoardCrop = function (e) {\n        var bool = false;\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var target = e.target;\n        if (target.id === this.parent.element.id + '_ok' || target.id === '') {\n            bool = true;\n        }\n        return bool;\n    };\n    Selection.prototype.beforeSaveEvent = function (observableSaveArgs, e) {\n        var parent = this.parent;\n        if (!observableSaveArgs.cancel) {\n            parent.notify('export', { prop: 'export', onPropertyChange: false,\n                value: { type: observableSaveArgs.fileType, fileName: observableSaveArgs.fileName } });\n        }\n        e.preventDefault();\n        e.stopImmediatePropagation();\n    };\n    Selection.prototype.handleScroll = function (e) {\n        this.mouseWheel++;\n        var parent = this.parent;\n        var x;\n        var y;\n        var isInsideCanvas = false;\n        if (e.type === 'mousewheel') {\n            // eslint-disable-next-line\n            x = e.clientX;\n            y = e.clientY;\n        }\n        var bbox = parent.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        if (x > parent.img.destLeft && x < parent.img.destLeft + parent.img.destWidth && y > parent.img.destTop &&\n            y < parent.img.destTop + parent.img.destHeight) {\n            isInsideCanvas = true;\n        }\n        if (this.mouseWheel === 2) {\n            this.mouseWheel = 0;\n            if (e.ctrlKey === true && isInsideCanvas) {\n                e.preventDefault();\n            }\n            return;\n        }\n        e.stopPropagation();\n        if (e.ctrlKey === true && isInsideCanvas) {\n            e.preventDefault();\n            if (!parent.isCropTab && (parent.activeObj.shape && parent.activeObj.shape.split('-')[0] !== 'crop')) {\n                parent.okBtn(null, true);\n                parent.notify('toolbar', { prop: 'close-contextual-toolbar', onPropertyChange: false });\n            }\n            var type = '';\n            if (e.type === 'mousewheel' && (parent.zoomSettings.zoomTrigger & ZoomTrigger.MouseWheel) === ZoomTrigger.MouseWheel) {\n                this.zoomType = 'MouseWheel';\n                // eslint-disable-next-line\n                if (e.wheelDelta > 0) {\n                    type = 'zoomIn';\n                }\n                else {\n                    type = 'zoomOut';\n                }\n            }\n            if (type !== '') {\n                parent.isZoomBtnClick = true;\n                parent.notify('draw', { prop: 'performPointZoom', onPropertyChange: false,\n                    value: { x: x, y: y, type: type, isResize: null } });\n                parent.notify('draw', { prop: 'redrawDownScale' });\n                if (parent.isCropTab || parent.activeObj.shape) {\n                    parent.notify('draw', { prop: 'setStraightenActObj', value: { activeObj: null } });\n                    parent.notify('freehand-draw', { prop: 'resetStraightenPoint' });\n                }\n                if (parent.isStraightening) {\n                    parent.notify('draw', { prop: 'resetStraightenDestPoints' });\n                    parent.notify('draw', { prop: 'setDestForStraighten' });\n                }\n            }\n        }\n    };\n    Selection.prototype.textKeyDown = function (e) {\n        var parent = this.parent;\n        if (parent.activeObj.rotatedAngle !== 0) {\n            return;\n        }\n        if (String.fromCharCode(e.which) === '\\r') {\n            this.textRow += 1;\n        }\n        parent.textArea.setAttribute('rows', this.textRow.toString());\n        parent.textArea.style.height = 'auto';\n        parent.textArea.style.height = parent.textArea.scrollHeight + 'px';\n        parent.notify('shape', { prop: 'setTextBoxWidth', onPropertyChange: false, value: { e: e } });\n        if (Browser.isDevice) {\n            parent.textArea.style.width = parseFloat(parent.textArea.style.width) + parent.textArea.style.fontSize + 'px';\n        }\n        var rows = parent.textArea.value.split('\\n');\n        this.textRow = rows.length;\n        parent.textArea.setAttribute('rows', this.textRow.toString());\n        this.isInitialTextEdited = false;\n    };\n    Selection.prototype.clearSelection = function (resetCrop) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (resetCrop) {\n                parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n            }\n            else {\n                parent.togglePen = false;\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                this.dragElement = '';\n                this.dragPoint.startX = this.dragPoint.startY = this.dragPoint.endX = this.dragPoint.endY = 0;\n                parent.currObjType.shape = '';\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                parent.currObjType.isActiveObj = true;\n                parent.currObjType.isCustomCrop = false;\n                parent.upperCanvas.style.cursor = parent.cursor = 'default';\n            }\n        }\n    };\n    Selection.prototype.setDragDirection = function (width, height) {\n        var arcRadius = (7.5);\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        if (parent.img.destWidth > parent.img.destHeight) {\n            actPoint.startX = this.dragPoint.startX = ((width / 2) - (height / 2)) + arcRadius;\n            actPoint.startY = this.dragPoint.startY = ((height / 2) - (height / 2)) + arcRadius;\n            actPoint.endX = ((width / 2) + (height / 2)) - arcRadius;\n            actPoint.endY = ((height / 2) + (height / 2)) - arcRadius;\n        }\n        else {\n            actPoint.startY = this.dragPoint.startX = ((height / 2) - (width) / 2) + arcRadius;\n            actPoint.endY = ((height / 2) + (width) / 2) - arcRadius;\n            actPoint.startX = this.dragPoint.startX = arcRadius;\n            actPoint.endX = width - arcRadius;\n        }\n    };\n    Selection.prototype.calcShapeRatio = function (x, y, imgWidth, imgHeight) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var arcRadius = (7.5);\n        var presetRatio = x / y;\n        var originalWidth = imgWidth;\n        var originalHeight = imgHeight;\n        var standardSize = originalWidth >= originalHeight ? originalWidth : originalHeight;\n        var width = standardSize * presetRatio;\n        var height = standardSize;\n        var scaleWidth = this.getScale(width, originalWidth);\n        var snippetArray = [];\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        for (var i = 0; i < 2; i++) {\n            if (i === 0) {\n                snippetArray.push(width * scaleWidth);\n            }\n            else {\n                snippetArray.push(height * scaleWidth);\n            }\n        }\n        width = snippetArray[0];\n        height = snippetArray[1];\n        var scaleHeight = this.getScale(height, originalHeight);\n        var snippetArray1 = [];\n        for (var i = 0; i < 2; i++) {\n            if (i === 0) {\n                snippetArray1.push(width * scaleHeight);\n            }\n            else {\n                snippetArray1.push(height * scaleHeight);\n            }\n        }\n        width = snippetArray1[0];\n        height = snippetArray1[1];\n        actPoint.width = width;\n        actPoint.height = height;\n        actPoint.startX = (this.dragPoint.startX = (originalWidth - width) / 2) + arcRadius;\n        actPoint.startY = (this.dragPoint.startY = (originalHeight - height) / 2) + arcRadius;\n        actPoint.endX = actPoint.startX + actPoint.width;\n        actPoint.endY = actPoint.startY + actPoint.height;\n        if (actPoint.startX < destLeft && destLeft + destWidth > parent.lowerCanvas.clientWidth) {\n            actPoint.startX = destLeft;\n            actPoint.endX = actPoint.startX + width - arcRadius;\n        }\n        if (actPoint.startY < destTop && destTop + destHeight > parent.lowerCanvas.clientHeight) {\n            actPoint.startY = destTop;\n            actPoint.endY = actPoint.startY + height - arcRadius;\n        }\n        actPoint.width = actPoint.endX - actPoint.startX;\n        actPoint.height = actPoint.endY - actPoint.startY;\n    };\n    Selection.prototype.getScale = function (value, originalValue) {\n        return value > originalValue ? originalValue / value : 1;\n    };\n    Selection.prototype.findTarget = function (x, y, type) {\n        var parent = this.parent;\n        if (type.toLowerCase() === 'mousedown' || type.toLowerCase() === 'touchstart') {\n            var splitWords = void 0;\n            var isCrop = false;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n                if (splitWords[0] === 'crop') {\n                    isCrop = true;\n                }\n            }\n            this.findTargetObj(x, y, isCrop);\n            this.updateCursorStyles(x, y, type);\n        }\n        else {\n            var _a = parent.activeObj, topLeftCircle = _a.topLeftCircle, topCenterCircle = _a.topCenterCircle, topRightCircle = _a.topRightCircle, centerLeftCircle = _a.centerLeftCircle, centerRightCircle = _a.centerRightCircle, bottomLeftCircle = _a.bottomLeftCircle, bottomCenterCircle = _a.bottomCenterCircle, bottomRightCircle = _a.bottomRightCircle;\n            switch (this.dragElement.toLowerCase()) {\n                case 'nw-resize':\n                    topLeftCircle.startX = x;\n                    topLeftCircle.startY = y;\n                    break;\n                case 'n-resize':\n                    topCenterCircle.startX = x;\n                    topCenterCircle.startY = y;\n                    break;\n                case 'ne-resize':\n                    topRightCircle.startX = x;\n                    topRightCircle.startY = y;\n                    break;\n                case 'w-resize':\n                    centerLeftCircle.startX = x;\n                    centerLeftCircle.startY = y;\n                    break;\n                case 'e-resize':\n                    centerRightCircle.startX = x;\n                    centerRightCircle.startY = y;\n                    break;\n                case 'sw-resize':\n                    bottomLeftCircle.startX = x;\n                    bottomLeftCircle.startY = y;\n                    break;\n                case 's-resize':\n                    bottomCenterCircle.startX = x;\n                    bottomCenterCircle.startY = y;\n                    break;\n                case 'se-resize':\n                    bottomRightCircle.startX = x;\n                    bottomRightCircle.startY = y;\n                    break;\n                default:\n                    if (this.dragPoint.startX && this.dragPoint.startY) {\n                        this.previousPoint.x = this.dragPoint.endX;\n                        this.previousPoint.y = this.dragPoint.endY;\n                        this.dragPoint.endX = x;\n                        this.dragPoint.endY = y;\n                    }\n                    break;\n            }\n        }\n    };\n    Selection.prototype.findTargetObj = function (x, y, isCrop) {\n        var parent = this.parent;\n        var isShape = false;\n        if (parent.objColl.length !== 0 && !parent.currObjType.isCustomCrop && !isCrop) {\n            var prevIndex = 0;\n            var i = void 0;\n            for (var index = 0; index < parent.objColl.length; index++) {\n                var cursor = parent.upperCanvas.style.cursor;\n                this.setCursor(x, y);\n                var actObj = extend({}, parent.objColl[index], {}, true);\n                var radius = actObj.topLeftCircle.radius;\n                if (actObj.shape === 'line' || actObj.shape === 'arrow') {\n                    for (var j = 0; j < actObj.pointColl.length; j++) {\n                        if (x >= actObj.pointColl[j].x - (radius * 2) &&\n                            x <= actObj.pointColl[j].x + (radius * 2) &&\n                            y >= actObj.pointColl[j].y - (radius * 2) &&\n                            y <= actObj.pointColl[j].y + (radius * 2)) {\n                            if (this.tempActiveObj && this.tempActiveObj.activePoint &&\n                                JSON.stringify(this.tempActiveObj.activePoint) === JSON.stringify(actObj.activePoint)) {\n                                i = index;\n                                break;\n                            }\n                            else {\n                                if (this.isTouch || parent.cursor === 'move' ||\n                                    parent.cursor === 'grab' || this.isShapeInserted) {\n                                    if (prevIndex === 0 || prevIndex < actObj.order) {\n                                        prevIndex = actObj.order;\n                                        i = index;\n                                    }\n                                }\n                                else if (parent.objColl[index].currIndex === this.tempActiveObj.currIndex) {\n                                    i = index;\n                                }\n                            }\n                            break;\n                        }\n                    }\n                }\n                else if (actObj.shape === 'path') {\n                    var cursor_3 = this.setCursorForPath(actObj, x, y, parent.upperCanvas);\n                    if (cursor_3 !== 'default' && cursor_3 !== 'grab') {\n                        if (this.tempActiveObj && this.tempActiveObj.activePoint &&\n                            JSON.stringify(this.tempActiveObj.activePoint) === JSON.stringify(actObj.activePoint)) {\n                            i = index;\n                            break;\n                        }\n                        else {\n                            if (this.isTouch || parent.cursor === 'move' || parent.cursor === 'grab' || this.isShapeInserted) {\n                                if (prevIndex === 0 || prevIndex < actObj.order) {\n                                    prevIndex = actObj.order;\n                                    i = index;\n                                }\n                            }\n                            else if (parent.objColl[index].currIndex === this.tempActiveObj.currIndex) {\n                                i = index;\n                            }\n                        }\n                    }\n                }\n                else if (actObj.rotatedAngle !== 0) {\n                    var cursor_4 = this.setCursorForRotatedObject(actObj, x, y, parent.upperCanvas);\n                    if (cursor_4 !== 'default' && cursor_4 !== 'grab') {\n                        if (this.tempActiveObj && this.tempActiveObj.activePoint &&\n                            JSON.stringify(this.tempActiveObj.activePoint) === JSON.stringify(actObj.activePoint)) {\n                            i = index;\n                            break;\n                        }\n                        else {\n                            if (this.isTouch || parent.cursor === 'move' || parent.cursor === 'grab' || this.isShapeInserted) {\n                                if (prevIndex === 0 || (prevIndex < actObj.order && (actObj.shape !== 'redact' || parent.drawingShape === 'redact'))) {\n                                    prevIndex = actObj.order;\n                                    i = index;\n                                }\n                            }\n                            else if (parent.objColl[index].currIndex === this.tempActiveObj.currIndex) {\n                                i = index;\n                            }\n                        }\n                    }\n                }\n                else {\n                    var rotationCirclePoint = this.getTransRotationPoint(actObj);\n                    if ((x >= (actObj.activePoint.startX - (radius * 2)) &&\n                        x <= (actObj.activePoint.endX + (radius * 2)) &&\n                        y >= (actObj.activePoint.startY - (radius * 2)) &&\n                        y <= (actObj.activePoint.endY + (radius * 2))) ||\n                        (rotationCirclePoint &&\n                            x >= (rotationCirclePoint.x - (radius * 2)) &&\n                            x <= (rotationCirclePoint.x + (radius * 2)) &&\n                            y >= (rotationCirclePoint.y - (radius * 2)) &&\n                            y <= (rotationCirclePoint.y + (radius * 2)))) {\n                        if (this.tempActiveObj && this.tempActiveObj.activePoint &&\n                            JSON.stringify(this.tempActiveObj.activePoint) === JSON.stringify(actObj.activePoint)) {\n                            i = index;\n                            break;\n                        }\n                        else {\n                            if (this.isTouch || cursor === 'move' || cursor === 'grabbing' || this.isShapeInserted\n                                || parent.cursor === 'move' || parent.cursor === 'grabbing') {\n                                if (prevIndex === 0 || (prevIndex < actObj.order && (actObj.shape !== 'redact' || parent.drawingShape === 'redact'))) {\n                                    prevIndex = actObj.order;\n                                    i = index;\n                                }\n                            }\n                            else if (parent.objColl[index].currIndex === this.tempActiveObj.currIndex) {\n                                i = index;\n                            }\n                        }\n                    }\n                }\n            }\n            if (isNullOrUndefined(i)) {\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                isShape = false;\n            }\n            else {\n                this.tempObjColl = extend([], parent.objColl, [], true);\n                parent.currObjType.isCustomCrop = false;\n                parent.activeObj = extend({}, parent.objColl[i], {}, true);\n                var temp = extend({}, parent.objColl[i], {}, true);\n                parent.objColl.splice(i, 1);\n                if (parent.transform.degree === 0) {\n                    var temp_1 = this.lowerContext.filter;\n                    this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n                    parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n                    this.lowerContext.filter = 'none';\n                    parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                        value: { ctx: this.lowerContext, shape: 'iterate', pen: 'iterate', isPreventApply: null } });\n                    parent.activeObj = extend({}, temp_1, {}, true);\n                    this.lowerContext.filter = temp_1;\n                    this.getCurrentFlipState();\n                }\n                else {\n                    var totalPannedInternalPoint = extend({}, parent.panPoint.totalPannedInternalPoint, {}, true);\n                    var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                        height: parent.img.destHeight };\n                    parent.notify('draw', { prop: 'callUpdateCurrTransState', onPropertyChange: false });\n                    parent.panPoint.totalPannedInternalPoint = totalPannedInternalPoint;\n                    parent.img.destLeft = destPoints.startX;\n                    parent.img.destTop = destPoints.startY;\n                    parent.img.destWidth = destPoints.width;\n                    parent.img.destHeight = destPoints.height;\n                    parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                        value: { ctx: this.lowerContext, shape: 'iterate', pen: 'iterate', isPreventApply: null } });\n                }\n                parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n                if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n                    parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                        value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                }\n                parent.activeObj = extend({}, temp, {}, true);\n                this.setActivePoint();\n                parent.activeObj = extend({}, temp, {}, true);\n                var tempStrokeSettings = extend({}, parent.activeObj.strokeSettings, {}, true);\n                parent.notify('draw', { prop: 'setTempStrokeSettings', onPropertyChange: false,\n                    value: { tempStrokeSettings: tempStrokeSettings } });\n                var tempTextSettings = extend({}, parent.activeObj.textSettings, {}, true);\n                parent.notify('draw', { prop: 'setTempTextSettings', onPropertyChange: false, value: { tempTextSettings: tempTextSettings } });\n                var shapeSettings = this.updatePrevShapeSettings();\n                var shapeChangingArgs = { cancel: false, action: 'select', previousShapeSettings: shapeSettings,\n                    currentShapeSettings: shapeSettings, allowShapeOverflow: this.allowOutofBound() };\n                if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow') {\n                    shapeChangingArgs.currentShapeSettings.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n                    shapeChangingArgs.currentShapeSettings.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n                }\n                this.isCropSelection = false;\n                var splitWords = void 0;\n                if (parent.activeObj.shape !== undefined) {\n                    splitWords = parent.activeObj.shape.split('-');\n                }\n                if (splitWords !== undefined && splitWords[0] === 'crop') {\n                    this.isCropSelection = true;\n                }\n                if (!this.isCropSelection && parent.activeObj.shape !== 'redact') {\n                    parent.trigger('shapeChanging', shapeChangingArgs);\n                    this.shapeEvent(shapeChangingArgs);\n                    parent.editCompleteArgs = shapeChangingArgs;\n                }\n                else {\n                    if (this.isMouseDown) {\n                        shapeChangingArgs.action = 'resize-start';\n                    }\n                    else if (this.isMouseUp) {\n                        shapeChangingArgs.action = 'resize-end';\n                    }\n                    var selectionChangingArgs = { action: shapeChangingArgs.action,\n                        previousSelectionSettings: { type: parent.getSelectionType(parent.activeObj.shape),\n                            startX: shapeChangingArgs.previousShapeSettings.startX,\n                            startY: shapeChangingArgs.previousShapeSettings.startY,\n                            width: shapeChangingArgs.previousShapeSettings.width,\n                            height: shapeChangingArgs.previousShapeSettings.height },\n                        currentSelectionSettings: { type: parent.getSelectionType(parent.activeObj.shape),\n                            startX: shapeChangingArgs.currentShapeSettings.startX,\n                            startY: shapeChangingArgs.currentShapeSettings.startY,\n                            width: shapeChangingArgs.currentShapeSettings.width,\n                            height: shapeChangingArgs.currentShapeSettings.height } };\n                    parent.trigger('selectionChanging', selectionChangingArgs);\n                    parent.editCompleteArgs = selectionChangingArgs;\n                    shapeChangingArgs.currentShapeSettings.startX = selectionChangingArgs.currentSelectionSettings.startX;\n                    shapeChangingArgs.currentShapeSettings.startY = selectionChangingArgs.currentSelectionSettings.startY;\n                    shapeChangingArgs.currentShapeSettings.width = selectionChangingArgs.currentSelectionSettings.width;\n                    shapeChangingArgs.currentShapeSettings.height = selectionChangingArgs.currentSelectionSettings.height;\n                    this.shapeEvent(shapeChangingArgs);\n                }\n                isShape = true;\n            }\n        }\n        return isShape;\n    };\n    Selection.prototype.shapeEvent = function (shapeChangingArgs) {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n            value: { shapeSettings: shapeChangingArgs.currentShapeSettings, allowShapeOverflow: shapeChangingArgs.allowShapeOverflow } });\n        if (parent.activeObj.activePoint) {\n            var obj = { prevActObj: null };\n            parent.notify('draw', { prop: 'getPrevActObj', onPropertyChange: false, value: { obj: obj } });\n            if (isNullOrUndefined(obj['prevActObj'])) {\n                parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false,\n                    value: { prevActObj: extend({}, parent.activeObj, {}, true) } });\n            }\n            if (parent.activeObj.shape === 'image' && !this.isImageClarity) {\n                this.upgradeImageQuality();\n                this.isImageClarity = true;\n            }\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj, isCropRatio: null,\n                    points: null, isPreventDrag: true, saveContext: null, isPreventSelection: true } });\n            if (!this.isShapeInserted) {\n                this.isPreventDragging = this.isShapeDragOut();\n            }\n        }\n    };\n    Selection.prototype.upgradeImageQuality = function () {\n        var parent = this.parent;\n        if (!parent.activeObj.imageCanvas) {\n            return;\n        }\n        var activeObj = extend({}, parent.activeObj, null, true);\n        var ctx = parent.activeObj.imageCanvas.getContext('2d');\n        var dimObj = { width: 0, height: 0 };\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false, value: { width: parent.activeObj.imageElement.width,\n                height: parent.activeObj.imageElement.height, obj: dimObj, isImgShape: null } });\n        parent.notify('shape', { prop: 'updateObj', onPropertyChange: false, value: { dimObj: dimObj, x: null, y: null } });\n        ctx.clearRect(0, 0, parent.activeObj.imageCanvas.width, parent.activeObj.imageCanvas.height);\n        this.applyTransformToImg(ctx);\n        parent.activeObj = activeObj;\n    };\n    Selection.prototype.applyTransformToImg = function (ctx) {\n        var parent = this.parent;\n        if (parent.activeObj.isHorImageFlip && parent.activeObj.isVerImageFlip) {\n            parent.activeObj.isHorImageFlip = parent.activeObj.isVerImageFlip = false;\n            parent.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n                value: { ctx: ctx, isImgAnnotation: true, isHFlip: true, isVFlip: true } });\n        }\n        else if (parent.activeObj.isHorImageFlip) {\n            parent.activeObj.isHorImageFlip = false;\n            parent.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n                value: { ctx: ctx, isImgAnnotation: true, isHFlip: true, isVFlip: false } });\n        }\n        else if (parent.activeObj.isVerImageFlip) {\n            parent.activeObj.isVerImageFlip = false;\n            parent.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n                value: { ctx: ctx, isImgAnnotation: true, isHFlip: false, isVFlip: true } });\n        }\n        else {\n            parent.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n                value: { ctx: ctx, isImgAnnotation: true, isHFlip: false, isVFlip: false } });\n        }\n    };\n    // eslint-disable-next-line\n    Selection.prototype.targetTouches = function (touches) {\n        var bbox = this.parent.lowerCanvas.getBoundingClientRect();\n        var p1 = { x: touches[0].pageX - bbox.left, y: touches[0].pageY - bbox.top };\n        var p2 = { x: touches[1].pageX - bbox.left, y: touches[1].pageY - bbox.top };\n        var points = [p1, p2];\n        return points;\n    };\n    Selection.prototype.calculateScale = function (startTouches, endTouches) {\n        var startDistance = this.getDistance(startTouches[0], startTouches[1]);\n        var endDistance = this.getDistance(endTouches[0], endTouches[1]);\n        return endDistance / startDistance;\n    };\n    Selection.prototype.getDistance = function (a, b) {\n        var x = 0;\n        var y = 0;\n        if (a && b) {\n            x = a.x - b.x;\n            y = a.y - b.y;\n        }\n        return Math.sqrt(x * x + y * y);\n    };\n    Selection.prototype.redrawShape = function (obj, isMouseUp) {\n        var parent = this.parent;\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            if (JSON.stringify(obj) === JSON.stringify(parent.objColl[i])) {\n                parent.objColl.splice(i, 1);\n                if (obj.shape && parent.textArea.style.display === 'none') {\n                    var actObj = extend({}, obj, {}, true);\n                    parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                    this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n                    if (parent.rotateFlipColl.length > 0 && (parent.panPoint.totalPannedClientPoint.x !== 0 ||\n                        parent.panPoint.totalPannedClientPoint.y !== 0)) {\n                        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n                    }\n                    obj = parent.activeObj = actObj;\n                }\n                break;\n            }\n        }\n        if ((obj.shape === 'path' && obj.pointColl.length === 0) ||\n            (obj.shape !== 'path' && (obj.activePoint.width === 0 && obj.activePoint.height === 0))) {\n            return;\n        }\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        if (this.isPreventDragging) {\n            if (parent.activeObj.activePoint.startX > parent.img.destLeft) {\n                this.isPreventDragging = false;\n            }\n            if (isMouseUp && parent.activeObj.rotatedAngle !== 0) {\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: null, isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n            }\n            else {\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: null, isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n            }\n        }\n        else {\n            if (isMouseUp && parent.activeObj.rotatedAngle !== 0) {\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: null, isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n            }\n            else {\n                if (parent.activeObj.shape === 'redact') {\n                    this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n                    parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n                    parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n                }\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: null, isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n            }\n        }\n    };\n    Selection.prototype.setTimer = function (e) {\n        var parent = this.parent;\n        if (this.timer > 10) {\n            clearTimeout(this.timer);\n            this.timer = 0;\n            parent.notify('shape', { prop: 'findTextTarget', onPropertyChange: false, value: { e: e } });\n            if (Browser.isDevice) {\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            }\n        }\n    };\n    Selection.prototype.applyCurrActObj = function (x, y) {\n        var parent = this.parent;\n        var isInside = false;\n        var actObj = extend({}, parent.activeObj, {}, true);\n        if (isNullOrUndefined(actObj.activePoint)) {\n            return;\n        }\n        var _a = actObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        var radius = actObj.topLeftCircle ? actObj.topLeftCircle.radius : 0;\n        if ((x >= Math.floor(startX) && x <= Math.ceil(endX) && y >= Math.floor(startY) && y <= Math.ceil(endY))) {\n            isInside = true;\n        }\n        else if (radius !== 0 && (x >= Math.floor(startX) - radius && x <= Math.ceil(endX) + radius &&\n            y >= Math.floor(startY) - radius && y <= Math.ceil(endY) + radius)) {\n            isInside = true;\n            this.tempActiveObj = { activePoint: { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 },\n                flipObjColl: [], triangle: [], triangleRatio: [] };\n        }\n        else if ((actObj.shape === 'text' || actObj.shape === 'image') && this.dragElement !== '') {\n            isInside = true;\n        }\n        else if (actObj.shape === 'line' || actObj.shape === 'arrow') {\n            var smallPoint = { x: startX < endX ? startX : endX, y: startY < endY ? startY : endY };\n            var largePoint = { x: startX > endX ? startX : endX, y: startY > endY ? startY : endY };\n            if ((x >= (Math.floor(smallPoint.x) - 5) && x <= (Math.ceil(largePoint.x) + 5) &&\n                y >= (Math.floor(smallPoint.y) - 5) && y <= (Math.ceil(largePoint.y) + 5)) ||\n                parent.activeObj.preventShapeDragOut) {\n                isInside = true;\n            }\n        }\n        else if (actObj.shape === 'path') {\n            var cursor = this.setCursorForPath(actObj, x, y, parent.upperCanvas);\n            if (cursor === 'move') {\n                isInside = true;\n            }\n        }\n        else if (this.dragElement === 'grabbing') {\n            isInside = true;\n        }\n        else if (actObj.rotatedAngle !== 0) {\n            var cursor = this.setCursorForRotatedObject(actObj, x, y, parent.upperCanvas);\n            if ((cursor !== 'default' && cursor !== 'grab') || this.dragElement === 'n-resize' || this.dragElement === 'e-resize' ||\n                this.dragElement === 's-resize' || this.dragElement === 'w-resize') {\n                isInside = true;\n            }\n        }\n        else if (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block') {\n            isInside = true;\n        }\n        if (!isInside) {\n            if (isNullOrUndefined(parent.activeObj.currIndex)) {\n                var shapeIDObj = { id: 'shape_' + (parent.objColl.length + 1) };\n                parent.notify('shape', { prop: 'getNewShapeId', onPropertyChange: false, value: { obj: shapeIDObj } });\n                parent.activeObj.currIndex = shapeIDObj['id'];\n            }\n            parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n            if (parent.activeObj.horTopLine !== undefined && parent.activeObj.horTopLine.startX !== 0 && parent.activeObj.horTopLine.endX\n                !== 0 && !parent.currObjType.isCustomCrop && parent.currObjType.shape !== '') {\n                if (parent.objColl.length > 0 &&\n                    JSON.stringify(parent.objColl[parent.objColl.length - 1].activePoint) !==\n                        JSON.stringify(parent.activeObj.activePoint)) {\n                    parent.objColl.push(extend({}, parent.activeObj, {}, true));\n                }\n            }\n            var shapeColl = ['rectangle', 'ellipse', 'line', 'arrow', 'path', 'text', 'image'];\n            if (shapeColl.indexOf(parent.activeObj.shape) > -1) {\n                var tempFilter = this.lowerContext.filter;\n                this.lowerContext.filter = 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n                    'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' +\n                    'invert(0%)';\n                parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                    value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n                this.lowerContext.filter = tempFilter;\n                if (parent.activeObj.shape) {\n                    parent.notify('shape', { prop: 'apply', onPropertyChange: false,\n                        value: { shape: null, obj: null, canvas: null } });\n                }\n                parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n                parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n                if (parent.isCircleCrop) {\n                    parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                        value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                }\n            }\n            parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n        }\n    };\n    Selection.prototype.getCurrentFlipState = function () {\n        var parent = this.parent;\n        if (parent.rotateFlipColl.length !== 0) {\n            var totalPannedInternalPoint = extend({}, parent.panPoint.totalPannedInternalPoint, {}, true);\n            parent.notify('draw', { prop: 'callUpdateCurrTransState', onPropertyChange: false });\n            parent.panPoint.totalPannedInternalPoint = totalPannedInternalPoint;\n        }\n        else {\n            parent.notify('draw', { prop: 'callUpdateCurrTransState', onPropertyChange: false });\n        }\n    };\n    Selection.prototype.setTextBoxStylesToActObj = function () {\n        var parent = this.parent;\n        parent.activeObj.textSettings.fontFamily = parent.textArea.style.fontFamily;\n        parent.activeObj.strokeSettings.strokeColor = parent.textArea.style.color !== '' &&\n            parent.textArea.style.color.split('(')[1] && parent.textArea.style.color.split('(')[1].split(',')[0] &&\n            parent.textArea.style.color.split('(')[1].split(',')[1] && parent.textArea.style.color.split('(')[1].split(',')[2]\n            && parent.textArea.style.color.split('(')[1].split(',')[3] ?\n            this.rgbToHex(parseFloat(parent.textArea.style.color.split('(')[1].split(',')[0]), parseFloat(parent.textArea.style.color.split('(')[1].split(',')[1]), parseFloat(parent.textArea.style.color.split('(')[1].split(',')[2]), parseFloat(parent.textArea.style.color.split('(')[1].split(',')[3])) :\n            parent.textArea.style.color;\n        parent.activeObj.strokeSettings.fillColor = parent.textArea.style.backgroundColor !== '' &&\n            parent.textArea.style.backgroundColor.split('(')[1] && parent.textArea.style.backgroundColor.split('(')[1].split(',')[0] &&\n            parent.textArea.style.backgroundColor.split('(')[1].split(',')[1] && parent.textArea.style.backgroundColor.split('(')[1].split(',')[2]\n            && parent.textArea.style.backgroundColor.split('(')[1].split(',')[3] ?\n            this.rgbToHex(parseFloat(parent.textArea.style.backgroundColor.split('(')[1].split(',')[0]), parseFloat(parent.textArea.style.backgroundColor.split('(')[1].split(',')[1]), parseFloat(parent.textArea.style.backgroundColor.split('(')[1].split(',')[2]), parseFloat(parent.textArea.style.backgroundColor.split('(')[1].split(',')[3])) :\n            parent.textArea.style.backgroundColor;\n        parent.activeObj.strokeSettings.outlineColor = parent.textArea.style.textShadow !== '' &&\n            parent.textArea.style.textShadow.split('(')[1] && parent.textArea.style.textShadow.split('(')[1].split(',')[0] &&\n            parent.textArea.style.textShadow.split('(')[1].split(',')[1] && parent.textArea.style.textShadow.split('(')[1].split(',')[2]\n            && parent.textArea.style.textShadow.split('(')[1].split(',')[3] ?\n            this.rgbToHex(parseFloat(parent.textArea.style.textShadow.split('(')[1].split(',')[0]), parseFloat(parent.textArea.style.textShadow.split('(')[1].split(',')[1]), parseFloat(parent.textArea.style.textShadow.split('(')[1].split(',')[2]), parseFloat(parent.textArea.style.textShadow.split('(')[1].split(',')[3])) :\n            (parent.textArea.style.textShadow.match(/^(\\s*[\\w#]+)\\s/) ?\n                parent.textArea.style.textShadow.match(/^(\\s*[\\w#]+)\\s/)[1].trim() :\n                parent.textArea.style.textShadow);\n        if (parent.textArea.style.fontWeight === 'bold') {\n            parent.activeObj.textSettings.bold = true;\n        }\n        else {\n            parent.activeObj.textSettings.bold = false;\n        }\n        if (parent.textArea.style.fontStyle === 'italic') {\n            parent.activeObj.textSettings.italic = true;\n        }\n        else {\n            parent.activeObj.textSettings.italic = false;\n        }\n        parent.activeObj.textSettings.fontSize = (parseFloat(parent.textArea.style.fontSize));\n    };\n    Selection.prototype.rgbToHex = function (r, g, b, a) {\n        r = Math.max(0, Math.min(255, Math.round(r)));\n        g = Math.max(0, Math.min(255, Math.round(g)));\n        b = Math.max(0, Math.min(255, Math.round(b)));\n        a = Math.max(0, Math.min(1, a));\n        var hexR = this.padLeft(r.toString(16), 2, '0');\n        var hexG = this.padLeft(g.toString(16), 2, '0');\n        var hexB = this.padLeft(b.toString(16), 2, '0');\n        var hexA = this.padLeft(Math.round(a * 255).toString(16), 2, '0');\n        var hex;\n        if (isNaN(Number(hexA))) {\n            hex = \"#\" + hexR + hexG + hexB;\n        }\n        else {\n            hex = \"#\" + hexR + hexG + hexB + hexA;\n        }\n        return hex;\n    };\n    Selection.prototype.padLeft = function (value, length, padChar) {\n        while (value.length < length) {\n            value = padChar + value;\n        }\n        return value;\n    };\n    Selection.prototype.deleteItem = function () {\n        var parent = this.parent;\n        var shapeChangingArgs = { cancel: false };\n        var previousShapeSettings = {};\n        if (this.isFhdEditing) {\n            this.updateFreehandDrawColorChange();\n            var prevCropObj = extend({}, parent.cropObj, {}, true);\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var prevObj = object['currObj'];\n            prevObj.objColl = extend([], parent.objColl, [], true);\n            prevObj.pointColl = extend([], parent.pointColl, [], true);\n            prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            var obj = { freehandDrawSelectedId: null };\n            parent.notify('freehand-draw', { prop: 'getFreehandDrawSelectedId', onPropertyChange: false, value: { obj: obj } });\n            parent.notify('freehand-draw', { prop: 'deleteFhd', value: { id: obj['freehandDrawSelectedId'] } });\n            parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'deleteFreehandDrawing', previousObj: prevObj, previousObjColl: this.tempObjColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            parent.notify('freehand-draw', { prop: 'resetFreehandDrawSelectedId' });\n        }\n        else if (parent.textArea.style.display === 'none') {\n            var obj = { prevActObj: null };\n            parent.notify('draw', { prop: 'getPrevActObj', onPropertyChange: false, value: { obj: obj } });\n            if (obj['prevActObj']) {\n                obj['prevActObj']['activePoint']['width'] = Math.abs(obj['prevActObj']['activePoint']['width']);\n                obj['prevActObj']['activePoint']['height'] = Math.abs(obj['prevActObj']['activePoint']['height']);\n            }\n            if (obj['prevActObj'] && JSON.stringify(obj['prevActObj']) !== JSON.stringify(parent.activeObj)) {\n                var index = parent.activeObj.currIndex;\n                parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null, isFinalCancel: true } });\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    if (parent.objColl[i].currIndex === index) {\n                        parent.objColl.splice(i, 1);\n                        parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n                        break;\n                    }\n                }\n            }\n            var object = { isNewPath: null };\n            parent.notify('draw', { prop: 'getNewPath', value: { obj: object } });\n            if (object['isNewPath']) {\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            }\n            else if (parent.activeObj.shape) {\n                parent.objColl.push(parent.activeObj);\n                var prevCropObj = extend({}, parent.cropObj, {}, true);\n                var object_2 = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object_2 } });\n                var prevObj = object_2['currObj'];\n                prevObj.objColl = extend([], parent.objColl, [], true);\n                prevObj.pointColl = extend([], parent.pointColl, [], true);\n                prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n                var selPointCollObj = { selPointColl: null };\n                parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                    value: { obj: selPointCollObj } });\n                prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n                parent.objColl.pop();\n                previousShapeSettings = this.updatePrevShapeSettings();\n                shapeChangingArgs = { cancel: false, action: 'delete', previousShapeSettings: previousShapeSettings, currentShapeSettings: null };\n                parent.notify('shape', { prop: 'setKeyHistory', onPropertyChange: false, value: { keyHistory: '' } });\n                parent.clearSelection();\n                parent.trigger('shapeChanging', shapeChangingArgs);\n                parent.editCompleteArgs = shapeChangingArgs;\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n                parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n                if (!isNullOrUndefined(prevObj.objColl[prevObj.objColl.length - 1].currIndex)) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                        value: { operation: 'deleteObj', previousObj: prevObj, previousObjColl: this.tempObjColl,\n                            previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                            previousCropObj: prevCropObj, previousText: null,\n                            currentText: null, previousFilter: null, isCircleCrop: null } });\n                    parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                }\n            }\n            parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false, value: { prevActObj: null } });\n            if (parent.drawingShape) {\n                this.currentDrawingShape = parent.drawingShape.toLowerCase();\n                parent.enableShapeDrawing(parent.toPascalCase(parent.drawingShape), true);\n                parent.upperCanvas.style.cursor = 'crosshair';\n            }\n        }\n        if (document.getElementById(parent.element.id + '_quickAccessToolbarArea')) {\n            document.getElementById(parent.element.id + '_quickAccessToolbarArea').style.display = 'none';\n        }\n    };\n    Selection.prototype.updateFreehandDrawColorChange = function () {\n        var parent = this.parent;\n        var indexObj = { freehandSelectedIndex: null };\n        parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n        if (!isNullOrUndefined(indexObj['freehandSelectedIndex']) && !isNullOrUndefined(parent.pointColl[indexObj['freehandSelectedIndex']])\n            && parent.pointColl[indexObj['freehandSelectedIndex']].strokeColor === '#42a5f5') {\n            var obj = { tempFreeHandDrawEditingStyles: null };\n            parent.notify('freehand-draw', { prop: 'getTempFreeHandDrawEditingStyles', value: { obj: obj } });\n            parent.pointColl[indexObj['freehandSelectedIndex']].strokeColor = obj['tempFreeHandDrawEditingStyles'].strokeColor;\n        }\n    };\n    Selection.prototype.updatePrevShapeSettings = function (obj) {\n        var parent = this.parent;\n        var fontStyle = [];\n        if (isNullOrUndefined(parent.activeObj.currIndex)) {\n            var shapeIDObj = { id: 'shape_' + (parent.objColl.length + 1) };\n            parent.notify('shape', { prop: 'getNewShapeId', onPropertyChange: false, value: { obj: shapeIDObj } });\n            parent.activeObj.currIndex = shapeIDObj['id'];\n        }\n        if (parent.activeObj.shape === 'text' && parent.activeObj.textSettings) {\n            if (parent.activeObj.textSettings.bold) {\n                fontStyle.push('bold');\n            }\n            if (parent.activeObj.textSettings.italic) {\n                fontStyle.push('italic');\n            }\n            if (parent.activeObj.textSettings.underline) {\n                fontStyle.push('underline');\n            }\n        }\n        var _a = parent.activeObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY, width = _a.width, height = _a.height;\n        var _b = parent.activeObj, keyHistory = _b.keyHistory, currIndex = _b.currIndex, shape = _b.shape, textSettings = _b.textSettings, strokeSettings = _b.strokeSettings, rotatedAngle = _b.rotatedAngle, imageElement = _b.imageElement, opacity = _b.opacity;\n        var shapeSettingsObj = {\n            id: !isNullOrUndefined(currIndex) ? currIndex : null,\n            type: parent.toPascalCase(shape),\n            startX: startX, startY: startY, width: width, height: height,\n            strokeColor: strokeSettings ? strokeSettings.strokeColor : null,\n            strokeWidth: strokeSettings ? strokeSettings.strokeWidth : null,\n            fillColor: strokeSettings ? strokeSettings.fillColor : null,\n            radius: shape === 'ellipse' ? width / 2 : null,\n            length: shape === 'line' || shape === 'arrow' ? width : null,\n            text: shape === 'text' ? (keyHistory ? keyHistory : (textSettings.text ? textSettings.text : null)) : null,\n            fontSize: shape === 'text' ? (textSettings ? textSettings.fontSize : null) : null,\n            fontFamily: shape === 'text' ? (textSettings ? textSettings.fontFamily : null) : null,\n            fontStyle: shape === 'text' ? fontStyle : null,\n            color: shape === 'text' ? (strokeSettings ? strokeSettings.strokeColor : null) : null,\n            degree: shape === 'ellipse' || shape === 'rectangle' || shape === 'image' || shape === 'text' ? rotatedAngle * (180 / Math.PI) : null,\n            imageData: shape === 'image' ? imageElement.src : null,\n            opacity: shape === 'image' ? opacity : null,\n            radiusX: shape === 'ellipse' ? width / 2 : null,\n            radiusY: shape === 'ellipse' ? height / 2 : null,\n            endX: shape === 'line' || shape === 'arrow' ? endX : null,\n            endY: shape === 'line' || shape === 'arrow' ? endY : null,\n            arrowHead: shape === 'arrow' ? this.getArrowType(parent.activeObj.start) : null,\n            arrowTail: shape === 'arrow' ? this.getArrowType(parent.activeObj.end) : null,\n            points: shape === 'path' ? parent.activeObj.pointColl : null,\n            index: parent.activeObj.order\n        };\n        if (obj) {\n            obj['shapeSettingsObj'] = shapeSettingsObj;\n        }\n        return shapeSettingsObj;\n    };\n    Selection.prototype.getArrowType = function (type) {\n        var typeToArrowType = { 'none': 'None', 'arrow': 'Arrow', 'arrowSolid': 'SolidArrow',\n            'circle': 'Circle', 'circleSolid': 'SolidCircle', 'square': 'Square', 'squareSolid': 'SolidSquare', 'bar': 'Bar' };\n        return typeToArrowType[\"\" + type];\n    };\n    Selection.prototype.getRectanglePoints = function (rectX, rectY, rectWidth, rectHeight, rectAngle, pointX, pointY) {\n        var centerX = rectX + rectWidth / 2;\n        var centerY = rectY + rectHeight / 2;\n        var angleRad = rectAngle * (Math.PI / 180);\n        var cosAngle = Math.cos(angleRad);\n        var sinAngle = Math.sin(angleRad);\n        var localX = pointX - centerX;\n        var localY = pointY - centerY;\n        var rotatedX = localX * cosAngle + localY * sinAngle;\n        var rotatedY = -localX * sinAngle + localY * cosAngle;\n        var halfWidth = rectWidth / 2;\n        var halfHeight = rectHeight / 2;\n        if (rotatedX >= -halfWidth && rotatedX <= halfWidth && rotatedY >= -halfHeight &&\n            rotatedY <= halfHeight) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Selection.prototype.getTransRotationPoint = function (obj, object) {\n        var rotationCirclePoint;\n        var degree;\n        var isHorizontalflip = false;\n        var isVerticalflip = false;\n        degree = (obj.shapeDegree === 0) ? this.parent.transform.degree : this.parent.transform.degree - obj.shapeDegree;\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        if (obj.flipObjColl) {\n            for (var i = 0, iLen = obj.flipObjColl.length; i < iLen; i++) {\n                if (obj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                    isHorizontalflip = true;\n                }\n                else if (obj.flipObjColl[i].toLowerCase() === 'vertical') {\n                    isVerticalflip = true;\n                }\n            }\n        }\n        if (degree === 0 || degree === 360) {\n            if (isVerticalflip) {\n                rotationCirclePoint = { x: obj.topCenterCircle.startX, y: obj.topCenterCircle.startY - obj.rotationCircleLine };\n            }\n            else {\n                rotationCirclePoint = { x: obj.bottomCenterCircle.startX, y: obj.bottomCenterCircle.startY + obj.rotationCircleLine };\n            }\n        }\n        else if (degree === 90 || degree === -270) {\n            if (isHorizontalflip) {\n                rotationCirclePoint = { x: obj.centerRightCircle.startX + obj.rotationCircleLine, y: obj.centerLeftCircle.startY };\n            }\n            else {\n                rotationCirclePoint = { x: obj.centerLeftCircle.startX - obj.rotationCircleLine, y: obj.centerLeftCircle.startY };\n            }\n        }\n        else if (degree === 180 || degree === -180) {\n            if (isVerticalflip) {\n                rotationCirclePoint = { x: obj.bottomCenterCircle.startX, y: obj.bottomCenterCircle.startY + obj.rotationCircleLine };\n            }\n            else {\n                rotationCirclePoint = { x: obj.topCenterCircle.startX, y: obj.topCenterCircle.startY - obj.rotationCircleLine };\n            }\n        }\n        else if (degree === 270 || degree === -90) {\n            if (isHorizontalflip) {\n                rotationCirclePoint = { x: obj.centerLeftCircle.startX - obj.rotationCircleLine, y: obj.centerLeftCircle.startY };\n            }\n            else {\n                rotationCirclePoint = { x: obj.centerRightCircle.startX + obj.rotationCircleLine, y: obj.centerLeftCircle.startY };\n            }\n        }\n        if (object) {\n            object['rotationCirclePoint'] = rotationCirclePoint;\n        }\n        return rotationCirclePoint;\n    };\n    Selection.prototype.getNumTextValue = function (obj) {\n        var parent = this.parent;\n        var elem = parent.element;\n        var height;\n        var width;\n        var widthElement;\n        var heightElement;\n        widthElement = elem.querySelector('#' + elem.id + '_resizeWidth');\n        heightElement = elem.querySelector('#' + elem.id + '_resizeHeight');\n        if (widthElement && heightElement) {\n            var heightString = heightElement.value.replace(/,/g, '');\n            var widthString = widthElement.value.replace(/,/g, '');\n            if (heightString === '') {\n                heightString = heightElement.placeholder.replace(/,/g, '');\n            }\n            if (widthString === '') {\n                widthString = widthElement.placeholder.replace(/,/g, '');\n            }\n            height = parseFloat(heightString);\n            width = parseFloat(widthString);\n        }\n        if (obj) {\n            obj['width'] = width;\n            obj['height'] = height;\n        }\n        return { x: width, y: height };\n    };\n    Selection.prototype.isValueUpdated = function () {\n        var isValue = true;\n        var widthElement;\n        var heightElement;\n        widthElement = this.parent.element.querySelector('#' + this.parent.element.id + '_resizeWidth');\n        heightElement = this.parent.element.querySelector('#' + this.parent.element.id + '_resizeHeight');\n        if (widthElement && heightElement) {\n            if (heightElement.value.replace(/,/g, '') === '' && widthElement.value.replace(/,/g, '') === '') {\n                isValue = false;\n            }\n        }\n        return isValue;\n    };\n    Selection.prototype.allowOutofBound = function () {\n        var shapes = ['ellipse', 'rectangle', 'text', 'image', 'redact'];\n        // eslint-disable-next-line max-len\n        var allowOutofBound = (shapes.indexOf(this.parent.activeObj.shape) !== -1 && this.parent.activeObj.rotatedAngle === 0) ? false : true;\n        return allowOutofBound;\n    };\n    return Selection;\n}());\nexport { Selection };\n","/* eslint-disable no-constant-condition */\nimport { EventHandler, extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ShapeType, RedactType } from '../index';\nvar Shape = /** @class */ (function () {\n    function Shape(parent) {\n        this.textSettings = { text: 'Enter Text', fontFamily: '', fontSize: null, fontRatio: null, bold: false, italic: false, underline: false };\n        this.strokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null, radius: null, outlineColor: '', outlineWidth: null };\n        this.keyHistory = ''; // text history\n        this.preventFrameAnnotation = false;\n        this.redactType = 'blur';\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Shape.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Shape.prototype.addEventListener = function () {\n        this.parent.on('shape', this.shape, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Shape.prototype.removeEventListener = function () {\n        this.parent.off('shape', this.shape);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Shape.prototype.shape = function (args) {\n        var parent = this.parent;\n        this.initShapePvtProps();\n        var uploader;\n        switch (args.prop) {\n            case 'drawEllipse':\n                this.drawEllipse(args.value['x'], args.value['y'], args.value['radiusX'], args.value['radiusY'], args.value['strokeWidth'], args.value['strokeColor'], args.value['fillColor'], args.value['degree'], args.value['isSelected']);\n                break;\n            case 'drawLine':\n                this.drawLine(args.value['startX'], args.value['startY'], args.value['endX'], args.value['endY'], args.value['strokeWidth'], args.value['strokeColor'], args.value['isSelected']);\n                break;\n            case 'drawArrow':\n                this.drawArrow(args.value['startX'], args.value['startY'], args.value['endX'], args.value['endY'], args.value['strokeWidth'], args.value['strokeColor'], args.value['arrowStart'], args.value['arrowEnd'], args.value['isSelected']);\n                break;\n            case 'drawPath':\n                this.drawPath(args.value['pointColl'], args.value['strokeWidth'], args.value['strokeColor'], args.value['isSelected']);\n                break;\n            case 'drawRectangle':\n                this.drawRectangle(args.value['x'], args.value['y'], args.value['width'], args.value['height'], args.value['strokeWidth'], args.value['strokeColor'], args.value['fillColor'], args.value['degree'], args.value['isSelected'], args.value['radius']);\n                break;\n            case 'drawText':\n                this.drawText(args.value['x'], args.value['y'], args.value['text'], args.value['fontFamily'], args.value['fontSize'], args.value['bold'], args.value['italic'], args.value['color'], args.value['isSelected'], args.value['degree'], args.value['fillColor'], args.value['outlineColor'], args.value['outlineWidth']);\n                break;\n            case 'redrawActObj':\n                this.redrawActObj(args.value['x'], args.value['y'], args.value['isMouseDown']);\n                break;\n            case 'apply':\n                this.apply(args.value['shape'], args.value['obj'], args.value['canvas']);\n                break;\n            case 'updateShapeChangeEventArgs':\n                this.updateShapeChangeEventArgs(args.value['shapeSettings'], args.value['allowShapeOverflow']);\n                break;\n            case 'updSelChangeEventArgs':\n                this.updSelChangeEventArgs(args.value['selectionSettings']);\n                break;\n            case 'iterateObjColl':\n                this.iterateObjColl();\n                break;\n            case 'updImgRatioForActObj':\n                this.updImgRatioForActObj();\n                break;\n            case 'redrawObj':\n                this.redrawObj(args.value['degree']);\n                break;\n            case 'redraw-text':\n                this.redrawText();\n                break;\n            case 'draw-shape':\n                this.drawShape(args.value['obj'], args.value['strokeWidth'], args.value['strokeColor'], args.value['fillColor'], args.value['start'], args.value['width'], args.value['height']);\n                break;\n            case 'renderTextArea':\n                this.renderTextArea(args.value['x'], args.value['y'], args.value['actObj']);\n                break;\n            case 'setTextBoxWidth':\n                this.setTextBoxWidth(args.value['e']);\n                break;\n            case 'findTextTarget':\n                this.findTextTarget(args.value['e']);\n                break;\n            case 'updateFontStyles':\n                this.updateFontStyles(args.value['isTextBox']);\n                break;\n            case 'applyFontStyle':\n                this.applyFontStyle(args.value['item']);\n                break;\n            case 'updateFontRatio':\n                this.updateFontRatio(args.value['obj'], args.value['isTextArea']);\n                break;\n            case 'updateFontSize':\n                this.updateFontSize(args.value['obj']);\n                break;\n            case 'pushActItemIntoObj':\n                this.pushActItemIntoObj();\n                break;\n            case 'clearActObj':\n                this.clearActObj();\n                break;\n            case 'refreshActiveObj':\n                this.refreshActiveObj();\n                break;\n            case 'applyActObj':\n                this.applyActObj(args.value['isMouseDown']);\n                break;\n            case 'wireEvent':\n                EventHandler.add(parent.upperCanvas, 'dblclick', this.findTextTarget, this);\n                EventHandler.add(parent.textArea, 'mousedown', this.findTextTarget, this);\n                uploader = document.getElementById(parent.element.id + '_fileUpload');\n                if (uploader) {\n                    EventHandler.add(uploader, 'change', this.fileChanged, this);\n                }\n                break;\n            case 'unWireEvent':\n                EventHandler.remove(parent.upperCanvas, 'dblclick', this.findTextTarget);\n                EventHandler.remove(parent.textArea, 'mousedown', this.findTextTarget);\n                uploader = document.getElementById(parent.element.id + '_fileUpload');\n                if (uploader) {\n                    EventHandler.remove(uploader, 'change', this.fileChanged);\n                }\n                break;\n            case 'getShapeSetting':\n                this.getShapeSetting(args.value['id'], args.value['obj']);\n                break;\n            case 'getShapeSettings':\n                this.getShapeSettings(args.value['obj']);\n                break;\n            case 'getRedactSettings':\n                this.getRedactSettings(args.value['obj']);\n                break;\n            case 'isPointsInRange':\n                this.isPointsInRange(args.value['x'], args.value['y'], args.value['obj']);\n                break;\n            case 'alignRotateFlipColl':\n                this.alignRotateFlipColl(args.value['collection'], args.value['isRotateFlipCollection'], args.value['obj']);\n                break;\n            case 'selectShape':\n                this.selectShape(args.value['id'], args.value['obj']);\n                break;\n            case 'deleteShape':\n                this.deleteShape(args.value['id']);\n                break;\n            case 'getMaxText':\n                this.getMaxText(args.value['isTextBox'], args.value['text'], args.value['obj']);\n                break;\n            case 'setPointCollForLineArrow':\n                args.value['obj'].pointColl = this.getLinePoints(args.value['obj'].activePoint.startX, args.value['obj'].activePoint.startY, args.value['obj'].activePoint.endX, args.value['obj'].activePoint.endY);\n                break;\n            case 'setPointCollForShapeRotation':\n                this.setPointCollForShapeRotation(args.value['obj']);\n                break;\n            case 'setTextSettings':\n                if (args.value['textSettings']) {\n                    this.textSettings = args.value['textSettings'];\n                }\n                else if (args.value['fontFamily']) {\n                    this.textSettings.fontFamily = args.value['fontFamily'];\n                }\n                else if (args.value['fontSize']) {\n                    this.textSettings.fontSize = args.value['fontSize'];\n                }\n                else if (args.value['radius']) {\n                    this.strokeSettings.radius = args.value['radius'];\n                }\n                break;\n            case 'setStrokeSettings':\n                if (args.value['strokeSettings']) {\n                    this.strokeSettings = args.value['strokeSettings'];\n                }\n                else if (args.value['strokeColor']) {\n                    this.strokeSettings.strokeColor = args.value['strokeColor'];\n                }\n                else if (args.value['fillColor']) {\n                    this.strokeSettings.fillColor = args.value['fillColor'];\n                }\n                else if (args.value['strokeWidth']) {\n                    this.strokeSettings.strokeWidth = args.value['strokeWidth'];\n                }\n                else if (args.value['outlineColor']) {\n                    this.strokeSettings.outlineColor = args.value['outlineColor'];\n                }\n                else if (args.value['radius']) {\n                    this.strokeSettings.radius = args.value['radius'];\n                }\n                else if (args.value['outlineWidth']) {\n                    this.strokeSettings.outlineWidth = args.value['outlineWidth'];\n                }\n                break;\n            case 'getStrokeSettings':\n                args.value['obj']['strokeSettings'] = this.strokeSettings;\n                break;\n            case 'setKeyHistory':\n                this.keyHistory = args.value['keyHistory'];\n                break;\n            case 'getKeyHistory':\n                args.value['obj']['keyHistory'] = this.keyHistory;\n                break;\n            case 'setTextBoxPos':\n                this.setTextBoxPos(args.value['actObj'], args.value['degree'], args.value['flip'], args.value['x'], args.value['y']);\n                break;\n            case 'setTextBoxPoints':\n                this.setTextBoxPoints(args.value['actObj'], args.value['degree'], args.value['flip'], args.value['x'], args.value['y']);\n                break;\n            case 'alignTextAreaIntoCanvas':\n                this.alignTextAreaIntoCanvas();\n                break;\n            case 'initializeTextShape':\n                this.initializeTextShape(args.value['text'], args.value['fontFamily'], args.value['fontSize'], args.value['bold'], args.value['italic'], args.value['strokeColor'], args.value['fillColor'], args.value['outlineColor'], args.value['outlineWidth']);\n                break;\n            case 'stopPathDrawing':\n                this.stopPathDrawing(args.value['e'], args.value['isApply']);\n                break;\n            case 'updateArrowRatio':\n                this.updateArrowRatio(args.value['obj']);\n                break;\n            case 'getSquarePointForRotatedShape':\n                this.getSquarePointForRotatedShape(args.value['obj'], args.value['object']);\n                break;\n            case 'drawImage':\n                this.drawImage(args.value['x'], args.value['y'], args.value['width'], args.value['height'], args.value['src'], args.value['degree'], args.value['isAspectRatio'], args.value['opacity'], args.value['isSelected']);\n                break;\n            case 'reset':\n                this.reset();\n                break;\n            case 'updateObj':\n                this.updateObj(args.value['dimObj'], args.value['x'], args.value['y']);\n                break;\n            case 'straightenShapes':\n                this.straightenShapes();\n                break;\n            case 'straightenShapePoints':\n                this.straightenShapePoints(args.value['obj'], args.value['isReverse']);\n                break;\n            case 'straightenPath':\n                this.straightenPath(args.value['obj']);\n                break;\n            case 'straightenFHD':\n                this.straightenFHD();\n                break;\n            case 'getTextBoxPosition':\n                this.getTextBoxPosition(args.value['obj'], args.value['object']);\n                break;\n            case 'setFlipState':\n                this.setFlipState(args.value['x'], args.value['y'], args.value['obj'], args.value['object']);\n                break;\n            case 'getNewShapeId':\n                args.value['obj']['id'] = this.getNewShapeId();\n                break;\n            case 'z-order':\n                this.updateZOrder(args.value['obj'], args.value['value']);\n                break;\n            case 'getSmallestIndex':\n                args.value['obj']['index'] = this.getSmallestIndex();\n                break;\n            case 'isIndexInObjColl':\n                args.value['obj']['bool'] = this.isIndexInObjColl(args.value['index']);\n                break;\n            case 'drawAnnotations':\n                this.drawAnnotations(args.value['ctx'], args.value['shape'], args.value['pen'], args.value['isPreventApply'], args.value['x'], args.value['y'], args.value['panRegion']);\n                break;\n            case 'updateShapeColl':\n                this.updateShapeColl();\n                break;\n            case 'getNewOrder':\n                args.value['obj']['order'] = this.getNewOrder();\n                break;\n            case 'getHighestOrder':\n                args.value['obj']['order'] = this.getHighestOrder();\n                break;\n            case 'getLowestOrder':\n                args.value['obj']['order'] = this.getLowestOrder();\n                break;\n            case 'drawRedact':\n                this.drawRedact(args.value['x'], args.value['y'], args.value['width'], args.value['height'], args.value['type'], args.value['value']);\n                break;\n            case 'setRedactType':\n                this.redactType = args.value['redactType'];\n                break;\n        }\n    };\n    Shape.prototype.getModuleName = function () {\n        return 'shape';\n    };\n    Shape.prototype.initShapePvtProps = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n        if (parent.upperCanvas) {\n            this.upperContext = parent.upperCanvas.getContext('2d');\n        }\n        if (isNullOrUndefined(this.shapeImg)) {\n            this.shapeImg = parent.createElement('img', {\n                id: parent.element.id + '_shapeImg', attrs: { name: 'Image', crossorigin: 'anonymous' }\n            });\n        }\n        if (this.textSettings.fontFamily === '') {\n            this.textSettings.fontFamily = parent.fontFamily.default;\n        }\n    };\n    Shape.prototype.reset = function () {\n        this.textSettings =\n            { text: 'Enter Text', fontFamily: this.parent.fontFamily.default, fontSize: null, fontRatio: null, bold: false, italic: false, underline: false };\n        this.strokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null, radius: null, outlineColor: '', outlineWidth: null };\n        this.preventFrameAnnotation = false;\n    };\n    Shape.prototype.drawEllipse = function (x, y, radiusX, radiusY, strokeWidth, strokeColor, fillColor, degree, isSelected) {\n        this.initializeShape('ellipse');\n        var start = x && y ? { x: x, y: y } : null;\n        this.drawShape('ellipse', strokeWidth, strokeColor, fillColor, start, radiusX, radiusY, null, null, null, degree, null, isSelected);\n    };\n    Shape.prototype.drawLine = function (startX, startY, endX, endY, strokeWidth, strokeColor, isSelected) {\n        this.initializeShape('line');\n        var start = startX && startY ? { x: startX, y: startY } : null;\n        var width = endX - startX;\n        var height = endY - startY;\n        this.drawShape('line', strokeWidth, strokeColor, null, start, width, height, null, null, null, null, null, isSelected);\n    };\n    Shape.prototype.drawPath = function (pointColl, strokeWidth, strokeColor, isSelected) {\n        this.initializeShape('path');\n        if (pointColl) {\n            this.drawShape('path', strokeWidth, strokeColor, null, null, null, null, pointColl, null, null, null, null, isSelected);\n        }\n    };\n    Shape.prototype.drawArrow = function (startX, startY, endX, endY, strokeWidth, strokeColor, arrowStart, arrowEnd, isSelected) {\n        this.initializeShape('arrow');\n        var start = startX && startY ? { x: startX, y: startY } : null;\n        var width = endX - startX;\n        var height = endY - startY;\n        this.drawShape('arrow', strokeWidth, strokeColor, null, start, width, height, null, arrowStart, arrowEnd, null, null, isSelected);\n    };\n    Shape.prototype.drawRectangle = function (x, y, width, height, strokeWidth, strokeColor, fillColor, degree, isSelected, radius) {\n        this.initializeShape('rectangle');\n        var start = x && y ? { x: x, y: y } : null;\n        this.drawShape('rectangle', strokeWidth, strokeColor, fillColor, start, width, height, null, null, null, degree, null, isSelected, radius);\n    };\n    // eslint-disable-next-line @typescript-eslint/tslint/config\n    Shape.prototype.drawRedact = function (x, y, width, height, type, value) {\n        this.initializeShape('redact');\n        var start = x && y ? { x: x, y: y } : null;\n        this.drawShape('redact', null, null, null, start, width, height, null, null, null, null, null, null, null, type, value);\n    };\n    Shape.prototype.drawText = function (x, y, text, fontFamily, fontSize, bold, italic, color, isSelected, degree, fillColor, outlineColor, outlineWidth) {\n        this.drawShapeText(text, fontFamily, fontSize, bold, italic, color, x, y, isSelected, degree, fillColor, outlineColor, outlineWidth);\n    };\n    Shape.prototype.initializeShape = function (type) {\n        var parent = this.parent;\n        this.redrawActObj();\n        parent.activeObj.shape = type;\n        parent.currObjType.isCustomCrop = false;\n    };\n    Shape.prototype.updateWidthHeight = function (obj) {\n        obj.activePoint.width = obj.activePoint.endX - obj.activePoint.startX;\n        obj.activePoint.height = obj.activePoint.endY - obj.activePoint.startY;\n        return obj;\n    };\n    Shape.prototype.setDimension = function (width, height) {\n        var parent = this.parent;\n        var shape = parent.activeObj.shape;\n        if ((width && height) || ((shape === 'line' || shape === 'arrow') && (width || height))) {\n            parent.activeObj.activePoint.width = width;\n            parent.activeObj.activePoint.height = height;\n            if (parent.currObjType.shape.toLowerCase() === 'ellipse') {\n                parent.activeObj.activePoint.width = 2 * width;\n                parent.activeObj.activePoint.height = 2 * height;\n            }\n        }\n    };\n    Shape.prototype.getArrowType = function (type) {\n        var arrowType = type;\n        if (type) {\n            var typeToArrowType = { 'None': 'none', 'Arrow': 'arrow', 'SolidArrow': 'arrowSolid',\n                'Circle': 'circle', 'SolidCircle': 'circleSolid', 'Square': 'square', 'SolidSquare': 'squareSolid', 'Bar': 'bar' };\n            arrowType = typeToArrowType[\"\" + type];\n        }\n        return arrowType;\n    };\n    Shape.prototype.drawShape = function (type, strokeWidth, strokeColor, fillColor, start, width, height, pointColl, arrowStart, arrowEnd, degree, opacity, isSelected, radius, redactType, value) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n            this.redrawActObj();\n            var objColl = extend([], parent.objColl, [], true);\n            parent.togglePen = false;\n            this.keyHistory = '';\n            parent.upperCanvas.style.display = 'block';\n            this.refreshActiveObj();\n            parent.currObjType.shape = type = type.toLowerCase();\n            if (type !== 'freehanddraw' && type !== '') {\n                parent.activeObj.shape = type;\n                var strokeSettings = parent.activeObj.strokeSettings;\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                if (isNullOrUndefined(strokeSettings)) {\n                    strokeSettings = this.strokeSettings;\n                }\n                if (type === 'path' && pointColl) {\n                    parent.activeObj.pointColl = pointColl;\n                }\n                if (opacity !== null && opacity !== undefined) {\n                    parent.activeObj.opacity = opacity;\n                }\n                strokeSettings.strokeWidth = strokeWidth ? strokeWidth : strokeSettings.strokeWidth;\n                var shape = parent.activeObj.shape;\n                if ((shape === 'rectangle' || shape === 'ellipse') && strokeWidth === 0) {\n                    strokeSettings.strokeWidth = 0;\n                }\n                strokeSettings.strokeColor = strokeColor ? strokeColor : strokeSettings.strokeColor;\n                strokeSettings.fillColor = fillColor || fillColor === '' ? fillColor : strokeSettings.fillColor;\n                strokeSettings.radius = radius ? radius : strokeSettings.radius;\n                var tempWidth = parent.img.destWidth > 100 ? 100 : parent.img.destWidth / 2;\n                var tempHeight = parent.img.destHeight > 100 ? 100 : parent.img.destHeight / 2;\n                parent.activeObj.activePoint.width = tempWidth;\n                parent.activeObj.activePoint.height = tempHeight;\n                if (type === 'line' || type === 'arrow') {\n                    parent.activeObj.lineDraw = 'horizontal';\n                    parent.activeObj.activePoint.height = 0;\n                    if (type === 'arrow') {\n                        parent.activeObj.activePoint.width += 50;\n                        parent.activeObj.start = this.getArrowType(arrowStart);\n                        parent.activeObj.end = this.getArrowType(arrowEnd);\n                    }\n                }\n                else if (type === 'rectangle') {\n                    parent.activeObj.activePoint.width += parent.activeObj.activePoint.width / 2;\n                }\n                else if (type === 'redact') {\n                    if (redactType) {\n                        parent.activeObj.redactType = redactType.toLowerCase();\n                        if (redactType === RedactType.Blur) {\n                            if (value) {\n                                parent.activeObj.redactBlur = value;\n                            }\n                        }\n                        else {\n                            if (value) {\n                                parent.activeObj.redactPixelate = value;\n                            }\n                        }\n                        parent.activeObj.redactImage = parent.createElement('canvas');\n                    }\n                }\n                this.setDimension(width, height);\n                if (start) {\n                    parent.activeObj.activePoint.startX = start.x;\n                    parent.activeObj.activePoint.startY = start.y;\n                    parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX +\n                        parent.activeObj.activePoint.width;\n                    parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY +\n                        parent.activeObj.activePoint.height;\n                }\n                else {\n                    this.setCenterPoints();\n                }\n                this.setPointCollForLineAndArrow();\n                if (type === 'arrow') {\n                    parent.activeObj.triangleDirection = 'right';\n                }\n                parent.currObjType.isDragging = parent.currObjType.isCustomCrop = false;\n                this.initShapeProps();\n                var obj = { shapeSettingsObj: {} };\n                parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n                var shapeSettings = obj['shapeSettingsObj'];\n                var shapeChangingArgs = { cancel: false, action: 'insert', previousShapeSettings: shapeSettings,\n                    currentShapeSettings: shapeSettings };\n                parent.trigger('shapeChanging', shapeChangingArgs);\n                parent.editCompleteArgs = shapeChangingArgs;\n                this.updateShapeChangeEventArgs(shapeChangingArgs.currentShapeSettings, shapeChangingArgs.allowShapeOverflow);\n                this.setDimension(width, height);\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n                if (degree) {\n                    parent.activeObj.rotatedAngle = degree * (Math.PI / 180);\n                    parent.notify('selection', { prop: 'updPtCollForShpRot', onPropertyChange: false, value: { obj: parent.activeObj } });\n                }\n                parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n                parent.notify('selection', { prop: 'isShapeInserted', onPropertyChange: false, value: { bool: true } });\n                parent.notify('undo-redo', { prop: 'updateUrObj', onPropertyChange: false, value: { objColl: objColl } });\n                if (type === 'redact') {\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'redact',\n                            isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                }\n                else {\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                            isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                }\n                parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                if (parent.isPublicMethod && !isSelected) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedo', value: { operation: 'shapeInsert' }, onPropertyChange: false });\n                }\n                parent.isPublicMethod = false;\n            }\n        }\n    };\n    Shape.prototype.initShapeProps = function () {\n        var parent = this.parent;\n        parent.activeObj.shapeDegree = parent.transform.degree;\n        parent.activeObj.shapeFlip = parent.transform.currFlipState;\n        parent.activeObj.textFlip = parent.transform.currFlipState;\n        parent.activeObj.flipObjColl = [];\n        parent.activeObj.order = this.getNewOrder();\n    };\n    Shape.prototype.setPointCollForLineAndArrow = function () {\n        var parent = this.parent;\n        var shape = parent.activeObj.shape;\n        var _a = parent.activeObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        if (shape === 'line' || shape === 'arrow') {\n            parent.activeObj.pointColl = this.getLinePoints(startX, startY, endX, endY);\n            if (parent.activeObj.pointColl) {\n                for (var i = 0, len = parent.activeObj.pointColl.length; i < len; i++) {\n                    parent.activeObj.pointColl[i].ratioX = (parent.activeObj.pointColl[i].x -\n                        parent.img.destLeft) / parent.img.destWidth;\n                    parent.activeObj.pointColl[i].ratioY = (parent.activeObj.pointColl[i].y -\n                        parent.img.destTop) / parent.img.destHeight;\n                }\n            }\n        }\n    };\n    Shape.prototype.prevObjColl = function () {\n        var parent = this.parent;\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        this.prevObj = object['currObj'];\n        this.prevObj.objColl = extend([], parent.objColl, [], true);\n        this.prevObj.pointColl = extend([], parent.pointColl, [], true);\n        this.prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        this.prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n    };\n    Shape.prototype.drawShapeText = function (text, fontFamily, fontSize, bold, italic, strokeColor, x, y, isSelected, degree, fillColor, outlineColor, outlineWidth) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (parent.currObjType.shape === 'freehanddraw') {\n                this.apply();\n                parent.upperCanvas.style.cursor = parent.cursor = 'default';\n                parent.currObjType.shape = '';\n            }\n            parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n            parent.togglePen = false;\n            this.redrawActObj();\n            this.prevObjColl();\n            this.refreshActiveObj();\n            parent.activeObj.shape = parent.currObjType.shape = 'text';\n            parent.currObjType.isCustomCrop = false;\n            this.initializeTextShape(text, fontFamily, fontSize, bold, italic, strokeColor, fillColor, outlineColor, outlineWidth);\n            parent.currObjType.isText = parent.currObjType.isInitialText = true;\n            if (isNullOrUndefined(parent.activeObj.textSettings.fontSize)) {\n                parent.getFontSizes();\n                parent.activeObj.textSettings.fontSize = parseInt(parent.fontSizeColl[(parseInt('3', 10) - 1)].text, 10);\n            }\n            if (parent.img.destWidth < 100) {\n                parent.activeObj.textSettings.fontSize = Math.floor((parent.img.destWidth / 20));\n            }\n            else if (parent.img.destHeight < 100) {\n                parent.activeObj.textSettings.fontSize = Math.floor((parent.img.destHeight / 20));\n            }\n            parent.activeObj.shapeDegree = parent.transform.degree;\n            parent.activeObj.shapeFlip = parent.transform.currFlipState;\n            parent.activeObj.flipObjColl = [];\n            this.updateFontStyles();\n            parent.activeObj.order = this.getNewOrder();\n            var width = this.upperContext.measureText(parent.activeObj.textSettings.text).width +\n                parent.activeObj.textSettings.fontSize * 0.5;\n            var height = parent.activeObj.textSettings.fontSize;\n            if (!isNullOrUndefined(x) && !isNullOrUndefined(y)) {\n                parent.activeObj.activePoint.startX = x;\n                parent.activeObj.activePoint.startY = y;\n                parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + width;\n                parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY + height;\n            }\n            else {\n                this.setCenterPoints(true, width, height);\n            }\n            var obj = { shapeSettingsObj: {} };\n            parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n            var shapeSettings = obj['shapeSettingsObj'];\n            var shapeChangingArgs = { cancel: false, action: 'insert', previousShapeSettings: shapeSettings,\n                currentShapeSettings: shapeSettings };\n            parent.trigger('shapeChanging', shapeChangingArgs);\n            parent.editCompleteArgs = shapeChangingArgs;\n            this.drawShapeTextEvent(shapeChangingArgs);\n            if (degree) {\n                parent.activeObj.rotatedAngle = degree * (Math.PI / 180);\n                parent.notify('selection', { prop: 'updPtCollForShpRot', onPropertyChange: false, value: { obj: parent.activeObj } });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj, isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n                parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n            }\n            if (text && text.indexOf('\\n') > -1 && parent.isPublicMethod) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var fontSizeInd = String(parent.fontSizeColl.findIndex(function (item) { return item.text === String(parent.activeObj.textSettings.fontSize); }) + 1);\n                parent.noPushUndo = true;\n                parent.updateFontSize('5');\n                if (parseInt(fontSizeInd, 10) > 0) {\n                    parent.updateFontSize(fontSizeInd);\n                }\n                parent.noPushUndo = false;\n            }\n            if (parent.isPublicMethod && !isSelected) {\n                parent.notify('undo-redo', { prop: 'updateUndoRedo', value: { operation: 'shapeInsert' }, onPropertyChange: false });\n            }\n            parent.isPublicMethod = false;\n        }\n    };\n    Shape.prototype.drawShapeImageEvent = function (shapeChangingArgs, isSelect) {\n        var parent = this.parent;\n        this.updateShapeChangeEventArgs(shapeChangingArgs.currentShapeSettings, shapeChangingArgs.allowShapeOverflow);\n        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        parent.objColl.push(parent.activeObj);\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: 'shapeInsert', previousObj: this.prevObj, previousObjColl: this.prevObj.objColl,\n                previousPointColl: this.prevObj.pointColl, previousSelPointColl: this.prevObj.selPointColl, previousCropObj: prevCropObj,\n                previousText: null, currentText: null, previousFilter: null, isCircleCrop: null } });\n        parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false,\n            value: { obj: parent.objColl[parent.objColl.length - 1] } });\n        if (isSelect) {\n            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n            parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n            parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n        }\n        else {\n            parent.okBtn(null, true);\n        }\n        parent.notify('selection', { prop: 'isShapeInserted', onPropertyChange: false, value: { bool: true } });\n    };\n    Shape.prototype.drawShapeTextEvent = function (shapeChangingArgs) {\n        var parent = this.parent;\n        this.updateShapeChangeEventArgs(shapeChangingArgs.currentShapeSettings, shapeChangingArgs.allowShapeOverflow);\n        this.addLetter(parent.activeObj.textSettings.text);\n        parent.activeObj.textFlip = parent.transform.currFlipState;\n        this.updateFontRatio(parent.activeObj);\n        parent.objColl.push(parent.activeObj);\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: 'shapeInsert', previousObj: this.prevObj, previousObjColl: this.prevObj.objColl,\n                previousPointColl: this.prevObj.pointColl, previousSelPointColl: this.prevObj.selPointColl,\n                previousCropObj: prevCropObj, previousText: null, currentText: null, previousFilter: null, isCircleCrop: null } });\n        parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false,\n            value: { obj: parent.objColl[parent.objColl.length - 1] } });\n        parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n        parent.notify('selection', { prop: 'isShapeInserted', onPropertyChange: false, value: { bool: true } });\n        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'text',\n                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n        parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n    };\n    Shape.prototype.initializeTextShape = function (text, fontFamily, fontSize, bold, italic, strokeColor, fillColor, outlineColor, outlineWidth) {\n        var parent = this.parent;\n        this.keyHistory = '';\n        parent.upperCanvas.style.display = 'block';\n        parent.activeObj.strokeSettings.strokeColor = strokeColor || parent.activeObj.strokeSettings.strokeColor;\n        parent.activeObj.strokeSettings.fillColor = fillColor || parent.activeObj.strokeSettings.fillColor;\n        parent.activeObj.textSettings.text = text || parent.activeObj.textSettings.text;\n        parent.activeObj.textSettings.fontFamily = fontFamily || parent.activeObj.textSettings.fontFamily;\n        parent.activeObj.textSettings.fontSize = fontSize || parent.activeObj.textSettings.fontSize;\n        parent.activeObj.textSettings.bold = bold || parent.activeObj.textSettings.bold;\n        parent.activeObj.textSettings.italic = italic || parent.activeObj.textSettings.italic;\n        parent.activeObj.strokeSettings.outlineColor = outlineColor || parent.activeObj.strokeSettings.outlineColor;\n        parent.activeObj.strokeSettings.outlineWidth = outlineWidth || parent.activeObj.strokeSettings.outlineWidth;\n    };\n    Shape.prototype.drawImage = function (x, y, width, height, src, degree, isAspectRatio, opacity, isSelected) {\n        this.initializeShape('image');\n        this.onLoadImgShape(x, y, width, height, src, null, degree, isAspectRatio, opacity, isSelected);\n    };\n    Shape.prototype.redrawActObj = function (x, y, isMouseDown) {\n        var splitWords;\n        var parent = this.parent;\n        if (parent.activeObj.shape) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (parent.activeObj.horTopLine && (parent.activeObj.shape && splitWords[0] !== 'crop')) {\n            if (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block') {\n                parent.notify('selection', { prop: 'setTextBoxStylesToActObj', onPropertyChange: false });\n                this.updateFontRatio(parent.activeObj, true);\n                if (x && y) {\n                    if ((x !== parent.activeObj.activePoint.startX) && (y !== parent.activeObj.activePoint.startY)) {\n                        this.updateTextFromTextArea();\n                    }\n                }\n                else {\n                    this.updateTextFromTextArea();\n                    parent.textArea.style.transform = '';\n                    parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n                }\n                this.refreshActiveObj();\n            }\n            else {\n                this.applyActObj(isMouseDown);\n            }\n        }\n    };\n    Shape.prototype.apply = function (shape, obj, canvas) {\n        var parent = this.parent;\n        if (!parent.disabled) {\n            if (parent.togglePen && !parent.currObjType.isCustomCrop) {\n                var destLeft = parent.img.destLeft;\n                var destTop = parent.img.destTop;\n                var destWidth = parent.img.destWidth;\n                var destHeight = parent.img.destHeight;\n                parent.notify('draw', { prop: 'callUpdateCurrTransState', onPropertyChange: false });\n                var temp = this.lowerContext.filter;\n                this.lowerContext.filter = 'none';\n                parent.togglePen = false;\n                if (parent.isCircleCrop || (parent.currSelectionPoint &&\n                    parent.currSelectionPoint.shape === 'crop-circle')) {\n                    parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                        value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                }\n                parent.img.destLeft = destLeft;\n                parent.img.destTop = destTop;\n                parent.img.destWidth = destWidth;\n                parent.img.destHeight = destHeight;\n                this.lowerContext.filter = temp;\n            }\n            else {\n                canvas = canvas ? canvas : 'original';\n                if (isNullOrUndefined(parent.activeObj.shape) && isNullOrUndefined(shape)) {\n                    parent.currObjType.shape = '';\n                }\n                else {\n                    parent.currObjType.shape = shape || parent.currObjType.shape;\n                }\n                if (parent.currObjType.shape !== '') {\n                    this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                    if (parent.activeObj.shape === 'text') {\n                        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: canvas, obj: obj, isCropRatio: null,\n                                points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n                    }\n                    else {\n                        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: canvas, obj: obj } });\n                    }\n                    parent.activeObj.shape = parent.currObjType.shape.toLowerCase();\n                    if (!shape && parent.currObjType.shape !== '' && !parent.currObjType.isCustomCrop) {\n                        parent.objColl.push(extend({}, parent.activeObj, {}, true));\n                    }\n                    this.keyHistory = '';\n                }\n            }\n        }\n    };\n    Shape.prototype.setCenterPoints = function (text, width, height) {\n        var parent = this.parent;\n        var renderWidth;\n        var renderHeight;\n        if (text && width && height) {\n            renderWidth = width;\n            renderHeight = height;\n        }\n        else {\n            renderWidth = parent.activeObj.activePoint.width;\n            renderHeight = parent.activeObj.activePoint.height;\n        }\n        parent.activeObj.activePoint.startX = (parent.lowerCanvas.width / 2) - renderWidth / 2;\n        parent.activeObj.activePoint.startY = (parent.lowerCanvas.height / 2) - renderHeight / 2;\n        parent.activeObj.activePoint.endX = (parent.lowerCanvas.width / 2) + renderWidth / 2;\n        parent.activeObj.activePoint.endY = (parent.lowerCanvas.height / 2) + renderHeight / 2;\n    };\n    Shape.prototype.updSelChangeEventArgs = function (selectionSettings) {\n        var parent = this.parent;\n        parent.activeObj.activePoint = { startX: selectionSettings.startX, startY: selectionSettings.startY,\n            endX: parent.activeObj.activePoint.startX + parent.activeObj.activePoint.width,\n            endY: parent.activeObj.activePoint.startY + parent.activeObj.activePoint.height,\n            width: selectionSettings.width, height: selectionSettings.height };\n        parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + parent.activeObj.activePoint.width;\n        parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY + parent.activeObj.activePoint.height;\n    };\n    Shape.prototype.updateShapeChangeEventArgs = function (shapeSettings, allowShapeOverflow) {\n        var parent = this.parent;\n        var shapeId;\n        if (shapeSettings.id && shapeSettings.id.indexOf('shape_') === -1 &&\n            shapeSettings.id.indexOf('pen_') === -1) {\n            if (parent.activeObj.currIndex) {\n                parent.activeObj.currIndex = 'shape_' + shapeSettings.id;\n            }\n            else {\n                parent.pointColl[shapeId].id = 'pen_' + shapeSettings.id;\n            }\n        }\n        if (shapeSettings.id && shapeSettings.id.split('_')[0] && shapeSettings.id.split('_')[0] === 'pen') {\n            shapeId = parseInt(shapeSettings.id.split('_')[1], 10) - 1;\n            parent.pointColl[shapeId].points = shapeSettings.points;\n            parent.pointColl[shapeId].strokeColor = shapeSettings.strokeColor;\n            parent.pointColl[shapeId].strokeWidth = shapeSettings.strokeWidth;\n            parent.pointColl[shapeId].opacity = shapeSettings.opacity;\n            parent.pointColl[shapeId].order = shapeSettings.index;\n        }\n        else {\n            parent.activeObj.activePoint.startX = shapeSettings.startX;\n            parent.activeObj.activePoint.startY = shapeSettings.startY;\n            if (shapeSettings.width && shapeSettings.height) {\n                parent.activeObj.activePoint.width = shapeSettings.width;\n                parent.activeObj.activePoint.height = shapeSettings.height;\n                parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + parent.activeObj.activePoint.width;\n                parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY + parent.activeObj.activePoint.height;\n            }\n            parent.activeObj.strokeSettings.strokeColor = shapeSettings.strokeColor;\n            parent.activeObj.strokeSettings.fillColor = shapeSettings.fillColor;\n            parent.activeObj.strokeSettings.strokeWidth = shapeSettings.strokeWidth;\n            parent.activeObj.opacity = shapeSettings.opacity;\n            parent.activeObj.order = shapeSettings.index;\n            parent.activeObj.preventShapeDragOut = !allowShapeOverflow;\n            if (isNullOrUndefined(shapeSettings.degree)) {\n                shapeSettings.degree = 0;\n            }\n            switch (parent.activeObj.shape) {\n                case 'ellipse':\n                    parent.activeObj.activePoint.width = shapeSettings.radiusX * 2;\n                    parent.activeObj.activePoint.height = shapeSettings.radiusY * 2;\n                    parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + parent.activeObj.activePoint.width;\n                    parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY + parent.activeObj.activePoint.height;\n                    if (shapeSettings.degree) {\n                        parent.activeObj.rotatedAngle = shapeSettings.degree * (Math.PI / 180);\n                    }\n                    break;\n                case 'line':\n                case 'arrow':\n                    parent.activeObj.activePoint.width = shapeSettings.length;\n                    parent.activeObj.activePoint.endX = shapeSettings.endX;\n                    parent.activeObj.activePoint.endY = shapeSettings.endY;\n                    parent.activeObj.activePoint.width = parent.activeObj.activePoint.startX + parent.activeObj.activePoint.width;\n                    parent.activeObj.activePoint.height = parent.activeObj.activePoint.startY + parent.activeObj.activePoint.height;\n                    if (parent.activeObj.shape === 'arrow') {\n                        parent.activeObj.start = this.getArrowType(shapeSettings.arrowHead);\n                        parent.activeObj.end = this.getArrowType(shapeSettings.arrowTail);\n                    }\n                    break;\n                case 'text':\n                    parent.activeObj.keyHistory = parent.activeObj.textSettings.text = shapeSettings.text;\n                    parent.activeObj.textSettings.fontSize = shapeSettings.fontSize;\n                    parent.activeObj.strokeSettings.strokeColor = shapeSettings.color;\n                    parent.activeObj.textSettings.fontFamily = shapeSettings.fontFamily;\n                    if (shapeSettings.degree) {\n                        parent.activeObj.rotatedAngle = shapeSettings.degree * (Math.PI / 180);\n                    }\n                    this.updateFontRatio(parent.activeObj);\n                    break;\n                case 'rectangle':\n                case 'image':\n                    if (shapeSettings.degree) {\n                        parent.activeObj.rotatedAngle = shapeSettings.degree * (Math.PI / 180);\n                    }\n                    // Prevented setting image src as it cannot be set in canvas\n                    break;\n                case 'path':\n                    parent.activeObj.pointColl = shapeSettings.points;\n                    break;\n            }\n            if (parent.activeObj.shape === 'text' && parent.activeObj.textSettings) {\n                parent.activeObj.textSettings.bold = false;\n                parent.activeObj.textSettings.italic = false;\n                parent.activeObj.textSettings.underline = false;\n                for (var i = 0; i < shapeSettings.fontStyle.length; i++) {\n                    switch (shapeSettings.fontStyle[i]) {\n                        case 'bold':\n                            parent.activeObj.textSettings.bold = true;\n                            break;\n                        case 'italic':\n                            parent.activeObj.textSettings.italic = true;\n                            break;\n                    }\n                }\n            }\n        }\n    };\n    Shape.prototype.addLetter = function (letter) {\n        var parent = this.parent;\n        if (parent.textArea.style.display === 'none' && (parent.currObjType.isText || parent.activeObj.shape === 'text')) {\n            var fontSize = parent.activeObj.textSettings.fontSize;\n            if (letter === 'Backspace') {\n                this.keyHistory = this.keyHistory.slice(0, -1);\n            }\n            else {\n                this.keyHistory += letter;\n            }\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            this.updateFontStyles();\n            var width = this.upperContext.measureText(this.keyHistory).width + fontSize * 0.5;\n            var height = fontSize;\n            this.upperContext.fillText(this.keyHistory, parent.activeObj.activePoint.startX, parent.activeObj.activePoint.startY + fontSize);\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            parent.currObjType.isText = true;\n            parent.notify('selection', { prop: 'setActivePoint', onPropertyChange: false,\n                value: { startX: width, startY: height } });\n        }\n    };\n    Shape.prototype.redrawText = function () {\n        var parent = this.parent;\n        var _a = parent.activeObj.textSettings, fontSize = _a.fontSize, fontFamily = _a.fontFamily, bold = _a.bold, italic = _a.italic;\n        var fontStyle = '';\n        if (bold) {\n            fontStyle += 'bold ';\n        }\n        if (italic) {\n            fontStyle += 'italic ';\n        }\n        this.upperContext.font = fontStyle + fontSize + 'px ' + fontFamily;\n        var rows = parent.activeObj.keyHistory.split('\\n');\n        var text = (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block') ?\n            this.getMaxText(true) : this.getMaxText();\n        var width = this.upperContext.measureText(text).width + fontSize * 0.5;\n        var height = rows.length * fontSize;\n        if (rows.length > 1) {\n            height += (fontSize * 0.50);\n        }\n        parent.notify('selection', { prop: 'setTextSelection', onPropertyChange: false,\n            value: { width: width, height: height } });\n        parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: parent.activeObj.activePoint, obj: parent.activeObj,\n                isMouseMove: null, x: null, y: null } });\n        parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false,\n            value: { obj: parent.activeObj } });\n    };\n    Shape.prototype.updateTextFromTextArea = function () {\n        var parent = this.parent;\n        var allowUndoRedo = false;\n        var fontSize = parent.activeObj.textSettings.fontSize;\n        var tempActiveObj = extend({}, parent.activeObj, {}, true);\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], parent.objColl, [], true);\n        prevObj.pointColl = extend([], parent.pointColl, [], true);\n        prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        if (parent.activeObj.keyHistory !== parent.textArea.value) {\n            allowUndoRedo = true;\n        }\n        parent.activeObj.keyHistory = parent.textArea.value;\n        parent.textArea.style.display = 'none';\n        parent.textArea.value = '';\n        this.updateFontStyles();\n        var width = this.upperContext.measureText(parent.activeObj.keyHistory).width + fontSize * 0.5;\n        var height = fontSize;\n        var rows = parent.activeObj.keyHistory.split('\\n');\n        if (rows.length > 1) {\n            height *= rows.length;\n            height += (fontSize * 0.1 * rows.length);\n            var widthColl = [];\n            for (var i = 0, len = rows.length; i < len; i++) {\n                widthColl.push(this.upperContext.measureText(rows[i]).width + fontSize * 0.5);\n            }\n            width = Math.max.apply(Math, widthColl);\n        }\n        parent.notify('selection', { prop: 'setTextSelection', onPropertyChange: false,\n            value: { width: width, height: height } });\n        if (parent.activeObj.rotatedAngle !== 0) {\n            var width_1 = parent.activeObj.activePoint.width - tempActiveObj.activePoint.width;\n            var height_1 = parent.activeObj.activePoint.height - tempActiveObj.activePoint.height;\n            var value = '';\n            if (width_1 > 0 && height_1 > 0) {\n                value = 'widthHeight';\n            }\n            else if (width_1 !== 0) {\n                value = 'width';\n            }\n            else if (height_1 !== 0) {\n                value = 'height';\n            }\n            parent.activeObj.activePoint = extend({}, tempActiveObj.activePoint, {}, true);\n            parent.notify('selection', { prop: 'adjustRotationPoints', onPropertyChange: false, value: { rectangle: parent.activeObj.activePoint,\n                    x: width_1, y: height_1, angle: parent.activeObj.rotatedAngle, type: 'text', elem: value } });\n            parent.notify('shape', { prop: 'updateFontSize', onPropertyChange: false,\n                value: { obj: parent.activeObj } });\n        }\n        parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: parent.activeObj.activePoint, obj: parent.activeObj,\n                isMouseMove: null, x: null, y: null } });\n        this.updImgRatioForActObj();\n        if (parent.activeObj.rotatedAngle !== 0) {\n            parent.notify('selection', { prop: 'updPtCollForShpRot', onPropertyChange: false, value: { obj: parent.activeObj } });\n        }\n        if (allowUndoRedo) {\n            this.apply(parent.activeObj.shape, parent.activeObj);\n            parent.objColl.push(extend({}, parent.activeObj, {}, true));\n            parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'text', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: parent.activeObj.keyHistory,\n                    currentText: parent.textArea.value, previousFilter: null, isCircleCrop: null } });\n        }\n        else {\n            this.apply(parent.activeObj.shape, parent.activeObj);\n            parent.objColl.push(extend({}, parent.activeObj, {}, true));\n        }\n    };\n    Shape.prototype.iterateObjColl = function () {\n        var parent = this.parent;\n        if (parent.objColl.length > 0) {\n            var index = this.getSmallestIndex();\n            var objColl = extend([], parent.objColl, [], true);\n            while (objColl.length > 0) {\n                var found = false;\n                for (var i = 0; i < objColl.length; i++) {\n                    var currentObj = objColl[i];\n                    if (isNullOrUndefined(currentObj.order)) {\n                        objColl.splice(i, 1);\n                        i--;\n                        continue;\n                    }\n                    if (currentObj.order === index) {\n                        this.apply(currentObj.shape, currentObj);\n                        if (currentObj.shape === 'redact' && JSON.stringify(currentObj.activePoint) === JSON.stringify(parent.activeObj.activePoint) &&\n                            currentObj.redactImage !== parent.activeObj.redactImage) {\n                            currentObj.redactImage = parent.activeObj.redactImage;\n                            if (parent.objColl[i] && JSON.stringify(parent.objColl[i].activePoint) ===\n                                JSON.stringify(currentObj.activePoint)) {\n                                parent.objColl[i].redactImage = parent.activeObj.redactImage;\n                            }\n                        }\n                        this.refreshActiveObj();\n                        index++;\n                        if (!this.isIndexInObjColl(index)) {\n                            index++;\n                        }\n                        objColl.splice(i, 1);\n                        found = true;\n                        break; // Exit the loop to start from the beginning\n                    }\n                }\n                if (!found) {\n                    break; // If no matching order was found, exit the loop\n                }\n            }\n        }\n    };\n    Shape.prototype.getSmallestIndex = function () {\n        var parent = this.parent;\n        var smallestIndex;\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            var currentObj = parent.objColl[i];\n            if (isNullOrUndefined(currentObj.order)) {\n                continue;\n            }\n            if (isNullOrUndefined(smallestIndex) || currentObj.order < smallestIndex) {\n                smallestIndex = currentObj.order;\n            }\n        }\n        return smallestIndex;\n    };\n    Shape.prototype.isIndexInObjColl = function (index) {\n        var parent = this.parent;\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            var currentObj = parent.objColl[i];\n            if (isNullOrUndefined(currentObj.order)) {\n                continue;\n            }\n            if (currentObj.order === index) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Shape.prototype.updImgRatioForActObj = function () {\n        var parent = this.parent;\n        var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop,\n            width: parent.img.destWidth, height: parent.img.destHeight };\n        this.straightenShapes();\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        var activePoint = parent.activeObj.activePoint;\n        parent.activeObj.imageRatio = { startX: ((activePoint.startX - destLeft) /\n                destWidth), startY: ((activePoint.startY - destTop) / destHeight),\n            endX: ((activePoint.endX - destLeft) / destWidth),\n            endY: ((activePoint.endY - destTop) / destHeight),\n            width: destWidth / activePoint.width, height: destHeight / activePoint.height };\n        if (parent.activeObj.rotationCirclePointColl) {\n            parent.activeObj.rotationCirclePointColl.ratioX = (parent.activeObj.rotationCirclePointColl.x -\n                destLeft) / destWidth;\n            parent.activeObj.rotationCirclePointColl.ratioY = (parent.activeObj.rotationCirclePointColl.y -\n                destTop) / destHeight;\n        }\n        if (parent.activeObj.shape === 'path') {\n            this.updatePathRatio(parent.activeObj);\n        }\n        else if (parent.activeObj.shape === 'arrow') {\n            this.updateArrowRatio(parent.activeObj);\n        }\n        parent.img.destLeft = destPoints.startX;\n        parent.img.destTop = destPoints.startY;\n        parent.img.destWidth = destPoints.width;\n        parent.img.destHeight = destPoints.height;\n    };\n    Shape.prototype.zoomObjColl = function (preventApply) {\n        var parent = this.parent;\n        var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop,\n            width: parent.img.destWidth, height: parent.img.destHeight };\n        this.straightenShapes();\n        if (parent.objColl.length > 0) {\n            for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                var currObj = parent.objColl[i];\n                if (currObj.imageRatio) {\n                    currObj.activePoint.startX = (currObj.imageRatio.startX * parent.img.destWidth) + parent.img.destLeft;\n                    currObj.activePoint.startY = (currObj.imageRatio.startY * parent.img.destHeight) + parent.img.destTop;\n                    currObj.activePoint.endX = (currObj.imageRatio.endX * parent.img.destWidth) + parent.img.destLeft;\n                    currObj.activePoint.endY = (currObj.imageRatio.endY * parent.img.destHeight) + parent.img.destTop;\n                }\n                currObj = this.updateWidthHeight(currObj);\n                if (currObj.shape === 'text') {\n                    this.updateFontSize(currObj);\n                }\n                else if (currObj.shape === 'line' || currObj.shape === 'arrow') {\n                    currObj.pointColl = this.getLinePoints(currObj.activePoint.startX, currObj.activePoint.startY, currObj.activePoint.endX, currObj.activePoint.endY);\n                    for (var n = 0, len_1 = currObj.pointColl.length; n < len_1; n++) {\n                        currObj.pointColl[n].ratioX =\n                            (currObj.pointColl[n].x - parent.img.destLeft) / parent.img.destWidth;\n                        currObj.pointColl[n].ratioY =\n                            (currObj.pointColl[n].y - parent.img.destTop) / parent.img.destHeight;\n                    }\n                    if (currObj.shape === 'arrow') {\n                        this.updateArrowSize(currObj);\n                    }\n                    if (parent.transform.straighten !== 0 && (currObj.shape === 'line' || currObj.shape === 'arrow')) {\n                        this.straightenShapePoints(currObj);\n                    }\n                }\n                else if (currObj.shape === 'path') {\n                    for (var l = 0, len_2 = currObj.pointColl.length; l < len_2; l++) {\n                        currObj.pointColl[l].x = (currObj.pointColl[l].ratioX * parent.img.destWidth) +\n                            parent.img.destLeft;\n                        currObj.pointColl[l].y = (currObj.pointColl[l].ratioY * parent.img.destHeight) +\n                            parent.img.destTop;\n                    }\n                    this.updatePathRatio(currObj);\n                    if (parent.transform.straighten !== 0) {\n                        this.straightenPath(currObj);\n                    }\n                }\n                parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint,\n                        obj: currObj } });\n                if (currObj.shape !== 'line' && currObj.shape !== 'arrow' && currObj.shape !== 'path' && currObj.rotatedAngle !== 0) {\n                    this.setPointCollForShapeRotation(currObj);\n                    currObj.rotationCirclePoint.x =\n                        (currObj.rotationCirclePoint.ratioX * parent.img.destWidth) + parent.img.destLeft;\n                    currObj.rotationCirclePoint.y =\n                        (currObj.rotationCirclePoint.ratioY * parent.img.destHeight) + parent.img.destTop;\n                    if (currObj.rotationCirclePointColl) {\n                        currObj.rotationCirclePointColl.x =\n                            (currObj.rotationCirclePointColl.ratioX * parent.img.destWidth) + parent.img.destLeft;\n                        currObj.rotationCirclePointColl.y =\n                            (currObj.rotationCirclePointColl.ratioY * parent.img.destHeight) + parent.img.destTop;\n                    }\n                }\n            }\n            if (isNullOrUndefined(preventApply)) {\n                var temp = this.lowerContext.filter;\n                this.lowerContext.filter = 'none';\n                this.iterateObjColl();\n                this.lowerContext.filter = temp;\n            }\n        }\n        parent.img.destLeft = destPoints.startX;\n        parent.img.destTop = destPoints.startY;\n        parent.img.destWidth = destPoints.width;\n        parent.img.destHeight = destPoints.height;\n    };\n    Shape.prototype.straightenPath = function (obj) {\n        var point;\n        for (var j = 0, len = obj.pointColl.length; j < len; j++) {\n            point = this.straightenPoints(obj.pointColl[j].x, obj.pointColl[j].y);\n            obj.pointColl[j].x = point.x;\n            obj.pointColl[j].y = point.y;\n        }\n    };\n    Shape.prototype.straightenFHD = function () {\n        var parent = this.parent;\n        for (var i = 0, fLen = parent.freehandCounter; i < fLen; i++) {\n            parent.points = extend([], parent.pointColl[i].points, []);\n            var len = parent.points.length;\n            var point = void 0;\n            for (var l = 0; l < len; l++) {\n                point = this.straightenPoints(parent.points[l].x, parent.points[l].y);\n                parent.points[l].x = point.x;\n                parent.points[l].y = point.y;\n            }\n        }\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false, value: { obj: selPointCollObj } });\n        for (var i = 0, fLen = parent.freehandCounter; i < fLen; i++) {\n            if (selPointCollObj['selPointColl'][i] && selPointCollObj['selPointColl'][i].points) {\n                var len = selPointCollObj['selPointColl'][i].points.length;\n                var point = void 0;\n                for (var l = 0; l < len; l++) {\n                    point = this.straightenPoints(selPointCollObj['selPointColl'][i].points[l].x, selPointCollObj['selPointColl'][i].points[l].y);\n                    selPointCollObj['selPointColl'][i].points[l].x = point.x;\n                    selPointCollObj['selPointColl'][i].points[l].y = point.y;\n                }\n            }\n        }\n        var straightenObj = { straightenPoint: null };\n        parent.notify('freehand-draw', { prop: 'getStraightenPoint', onPropertyChange: false, value: { obj: straightenObj } });\n        if (straightenObj['straightenPoint']['x'] && straightenObj['straightenPoint']['y']) {\n            var obj = { angle: 0 };\n            parent.notify('freehand-draw', { prop: 'getStraightenPointAngle', onPropertyChange: false, value: { obj: obj } });\n            var angle = (((parent.transform.straighten === 360 ? 0 : parent.transform.straighten) - obj['angle']) * (Math.PI / 180));\n            var point = this.straightenPoints(straightenObj['straightenPoint']['x'], straightenObj['straightenPoint']['y'], angle);\n            if (angle === 0) {\n                point.x = straightenObj['straightenPoint']['x'];\n                point.y = straightenObj['straightenPoint']['y'];\n            }\n            parent.notify('freehand-draw', { prop: 'setStraightenPoint', onPropertyChange: false, value: { x: point.x, y: point.y } });\n        }\n    };\n    Shape.prototype.straightenPoints = function (x, y, angle) {\n        var parent = this.parent;\n        var center = { x: parent.img.destLeft + (parent.img.destWidth / 2), y: parent.img.destTop + (parent.img.destHeight / 2) };\n        angle = angle ? angle : ((parent.transform.straighten) * (Math.PI / 180));\n        var point = { x: Math.cos(angle) * (x - center.x) - Math.sin(angle) * (y - center.y) + center.x,\n            y: Math.sin(angle) * (x - center.x) + Math.cos(angle) * (y - center.y) + center.y };\n        return point;\n    };\n    Shape.prototype.straightenShapes = function () {\n        var parent = this.parent;\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        var straightenObj = { bool: parent.isStraightening };\n        if (!straightenObj['bool'] || parent.transform.straighten === 0) {\n            return;\n        }\n        parent.notify('draw', { prop: 'updateImgCanvasPoints' });\n        var object = { points: null };\n        parent.notify('draw', { prop: 'getImageCanvasPoints', value: { obj: object } });\n        var center = { x: destLeft + (destWidth / 2), y: destTop + (destHeight / 2) };\n        var angle = -((parent.transform.straighten) * (Math.PI / 180));\n        var p1 = { x: Math.cos(angle) * (object['points'][0]['x'] - center.x) - Math.sin(angle) *\n                (object['points'][0]['y'] - center.y) + center.x,\n            y: Math.sin(angle) * (object['points'][0]['x'] - center.x) + Math.cos(angle) *\n                (object['points'][0]['y'] - center.y) + center.y };\n        var p2 = { x: Math.cos(angle) * (object['points'][1]['x'] - center.x) - Math.sin(angle) *\n                (object['points'][1]['y'] - center.y) + center.x,\n            y: Math.sin(angle) * (object['points'][1]['x'] - center.x) + Math.cos(angle) * (object['points'][1]['y']\n                - center.y) + center.y };\n        var p3 = { x: Math.cos(angle) * (object['points'][2]['x'] - center.x) - Math.sin(angle) *\n                (object['points'][2]['y'] - center.y) + center.x,\n            y: Math.sin(angle) * (object['points'][2]['x'] - center.x) + Math.cos(angle) * (object['points'][2]['y']\n                - center.y) + center.y };\n        parent.img.destWidth = p2.x - p1.x;\n        parent.img.destHeight = p3.y - p2.y;\n        parent.img.destLeft = p1.x;\n        parent.img.destTop = p1.y;\n    };\n    Shape.prototype.straightenShapePoints = function (obj, isReverse) {\n        var parent = this.parent;\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        var straightenObj = { bool: parent.isStraightening };\n        if (!straightenObj['bool']) {\n            return;\n        }\n        if (obj.shape === 'line' || obj.shape === 'arrow') {\n            obj.activePoint.width = obj.activePoint.endX > obj.activePoint.startX ? obj.activePoint.endX -\n                obj.activePoint.startX : obj.activePoint.startX - obj.activePoint.endX;\n            obj.activePoint.height = obj.activePoint.endY > obj.activePoint.startY ? obj.activePoint.endY -\n                obj.activePoint.startY : obj.activePoint.startY - obj.activePoint.endY;\n            var center = { x: destLeft + (destWidth / 2), y: destTop + (destHeight / 2) };\n            var angle = (isReverse ? -parent.transform.straighten : parent.transform.straighten) * (Math.PI / 180);\n            var start = { x: Math.cos(angle) * (obj.activePoint.startX - center.x) - Math.sin(angle) *\n                    (obj.activePoint.startY - center.y) + center.x, y: Math.sin(angle) * (obj.activePoint.startX - center.x) + Math.cos(angle)\n                    * (obj.activePoint.startY - center.y) + center.y };\n            var end = { x: Math.cos(angle) * (obj.activePoint.endX - center.x) -\n                    Math.sin(angle) * (obj.activePoint.endY - center.y) + center.x, y: Math.sin(angle) * (obj.activePoint.endX - center.x) +\n                    Math.cos(angle) * (obj.activePoint.endY - center.y) + center.y };\n            obj.activePoint.startX = start.x;\n            obj.activePoint.startY = start.y;\n            obj.activePoint.endX = end.x;\n            obj.activePoint.endY = end.y;\n            obj.activePoint.width = obj.activePoint.endX > obj.activePoint.startX ? obj.activePoint.endX -\n                obj.activePoint.startX : obj.activePoint.startX - obj.activePoint.endX;\n            obj.activePoint.height = obj.activePoint.endY > obj.activePoint.startY ? obj.activePoint.endY -\n                obj.activePoint.startY : obj.activePoint.startY - obj.activePoint.endY;\n            parent.notify('selection', { prop: 'adjustActObjForLineArrow', onPropertyChange: false, value: { obj: obj } });\n        }\n    };\n    Shape.prototype.redrawObj = function (degree) {\n        var parent = this.parent;\n        var isShape = false;\n        if (parent.objColl.length > 0) {\n            if (degree === 'horizontal' || degree === 'vertical' || degree === 'Horizontal' || degree === 'Vertical' ||\n                degree === 'horizontalVertical' || degree === 'verticalHorizontal') {\n                this.updateCurrentActiveObjPoint(degree.toLowerCase());\n            }\n            else if (typeof (degree) === 'number') {\n                this.updateCurrentActiveObjPoint(degree);\n                var tempFilter = this.lowerContext.filter;\n                this.lowerContext.filter = 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n                    'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    var splitWords = parent.objColl[i].shape.split('-');\n                    if (splitWords[0] !== 'crop') {\n                        this.apply(parent.objColl[i].shape, parent.objColl[i]);\n                        isShape = true;\n                    }\n                }\n                if (isShape) {\n                    parent.notify('draw', { prop: 'applyFrame', value: { ctx: this.lowerContext, frame: parent.frameObj.type, preventImg: true } });\n                }\n                this.lowerContext.filter = tempFilter;\n            }\n        }\n    };\n    Shape.prototype.updateCurrentActiveObjPoint = function (degree) {\n        var parent = this.parent;\n        var currActObjIndex;\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        for (var index = 0, len = parent.objColl.length; index < len; index++) {\n            var currObj = parent.objColl[index];\n            if (parent.activeObj.shape === currObj.shape &&\n                parent.activeObj.activePoint.startX === currObj.activePoint.startX &&\n                parent.activeObj.activePoint.startY === currObj.activePoint.startY &&\n                parent.activeObj.activePoint.endX === currObj.activePoint.endX &&\n                parent.activeObj.activePoint.endY === currObj.activePoint.endY &&\n                parent.activeObj.currIndex === currObj.currIndex) {\n                currActObjIndex = index;\n                break;\n            }\n        }\n        if (degree === 'horizontal' || degree === 'vertical' || degree === 'Horizontal' || degree === 'Vertical' ||\n            degree === 'horizontalvertical' || degree === 'verticalhorizontal') {\n            if (degree === 'horizontal' || degree === 'Horizontal') {\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    var currObj = parent.objColl[i];\n                    if (currObj.shapeFlip !== parent.transform.currFlipState) {\n                        if (currObj.activePoint.startX <= destLeft + (destWidth / 2)) {\n                            currObj.activePoint.endX = (destLeft + destWidth) - (currObj.activePoint.startX - destLeft);\n                            currObj.activePoint.startX = currObj.activePoint.endX - currObj.activePoint.width;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint, obj: currObj } });\n                        }\n                        else if (currObj.activePoint.startX >= destLeft + (destWidth / 2)) {\n                            currObj.activePoint.startX = destLeft + (destLeft + destWidth - currObj.activePoint.endX);\n                            currObj.activePoint.endX = currObj.activePoint.startX + currObj.activePoint.width;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint, obj: currObj } });\n                        }\n                        if (currObj.shape === 'line' || currObj.shape === 'arrow' || currObj.shape === 'path') {\n                            this.flipLineArrowObj(currObj, 'horizontal');\n                        }\n                        else if (currObj.rotatedAngle !== 0) {\n                            currObj.rotatedAngle = currObj.rotatedAngle + (Math.PI - currObj.rotatedAngle) * 2;\n                            if (currObj.rotationCirclePointColl.x <= destLeft + (destWidth / 2)) {\n                                currObj.rotationCirclePointColl.x = (destLeft + destWidth) -\n                                    (currObj.rotationCirclePointColl.x - destLeft);\n                            }\n                            else if (currObj.rotationCirclePointColl.x >= destLeft + (destWidth / 2)) {\n                                currObj.rotationCirclePointColl.x = destLeft +\n                                    (destLeft + destWidth - currObj.rotationCirclePointColl.x);\n                            }\n                            currObj.rotationCirclePointColl.ratioX =\n                                (currObj.rotationCirclePointColl.x - destLeft) / destWidth;\n                        }\n                        currObj.shapeFlip = parent.transform.currFlipState;\n                        currObj.imageRatio = { startX: ((currObj.activePoint.startX - destLeft) / destWidth),\n                            startY: ((currObj.activePoint.startY - destTop) / destHeight),\n                            endX: ((currObj.activePoint.endX - destLeft) / destWidth),\n                            endY: ((currObj.activePoint.endY - destTop) / destHeight),\n                            width: destWidth / currObj.activePoint.width,\n                            height: destHeight / currObj.activePoint.height };\n                    }\n                }\n            }\n            else if (degree === 'vertical' || degree === 'Vertical') {\n                for (var i = 0; i < parent.objColl.length; i++) {\n                    var currObj = parent.objColl[i];\n                    if (currObj.shapeFlip !== parent.transform.currFlipState) {\n                        if (currObj.activePoint.startY <= destTop + (destHeight / 2)) {\n                            currObj.activePoint.endY = (destTop + destHeight) - (currObj.activePoint.startY - destTop);\n                            currObj.activePoint.startY = currObj.activePoint.endY - currObj.activePoint.height;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint,\n                                    obj: currObj } });\n                        }\n                        else if (currObj.activePoint.startY >= parent.lowerCanvas.height / 2) {\n                            currObj.activePoint.startY = destTop + (destTop + destHeight - currObj.activePoint.endY);\n                            currObj.activePoint.endY = currObj.activePoint.startY + currObj.activePoint.height;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint,\n                                    obj: currObj } });\n                        }\n                        if (currObj.shape === 'line' || currObj.shape === 'arrow' ||\n                            currObj.shape === 'path') {\n                            this.flipLineArrowObj(currObj, 'vertical');\n                        }\n                        else if (currObj.rotatedAngle !== 0) {\n                            currObj.rotatedAngle = -currObj.rotatedAngle;\n                            if (currObj.rotationCirclePointColl.y <= destTop + (destHeight / 2)) {\n                                currObj.rotationCirclePointColl.y = (destTop + destHeight) - (currObj.rotationCirclePointColl.y - destTop);\n                            }\n                            else if (currObj.rotationCirclePointColl.y >= destTop +\n                                (destHeight / 2)) {\n                                currObj.rotationCirclePointColl.y = destTop + (destTop + destHeight - currObj.rotationCirclePointColl.y);\n                            }\n                            currObj.rotationCirclePointColl.ratioY =\n                                (currObj.rotationCirclePointColl.y - destTop) / destHeight;\n                        }\n                        currObj.shapeFlip = parent.transform.currFlipState;\n                        currObj.imageRatio = { startX: ((currObj.activePoint.startX - destLeft) / destWidth),\n                            startY: ((currObj.activePoint.startY - destTop) / destHeight),\n                            endX: ((currObj.activePoint.endX - destLeft) / destWidth),\n                            endY: ((currObj.activePoint.endY - destTop) / destHeight),\n                            width: destWidth / currObj.activePoint.width,\n                            height: destHeight / currObj.activePoint.height };\n                    }\n                }\n            }\n            else if (degree === 'verticalhorizontal' || degree === 'horizontalvertical') {\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    var currObj = parent.objColl[i];\n                    if (currObj.shapeFlip !== parent.transform.currFlipState) {\n                        if (currObj.activePoint.startX <= destLeft + (destWidth / 2)) {\n                            currObj.activePoint.endX = (destLeft + destWidth) - (currObj.activePoint.startX -\n                                destLeft);\n                            currObj.activePoint.startX = currObj.activePoint.endX - currObj.activePoint.width;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint, obj: currObj } });\n                        }\n                        else if (currObj.activePoint.startX >= destLeft + (destWidth / 2)) {\n                            currObj.activePoint.startX = destLeft + (destLeft +\n                                destWidth - currObj.activePoint.endX);\n                            currObj.activePoint.endX = currObj.activePoint.startX + currObj.activePoint.width;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint, obj: currObj } });\n                        }\n                        if (currObj.activePoint.startY <= destTop + (destHeight / 2)) {\n                            currObj.activePoint.endY = (destTop + destHeight) -\n                                (currObj.activePoint.startY - destTop);\n                            currObj.activePoint.startY = currObj.activePoint.endY -\n                                currObj.activePoint.height;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint, obj: currObj } });\n                        }\n                        else if (currObj.activePoint.startY >= parent.lowerCanvas.height / 2) {\n                            currObj.activePoint.startY = destTop + (destTop +\n                                destHeight - currObj.activePoint.endY);\n                            currObj.activePoint.endY = currObj.activePoint.startY +\n                                currObj.activePoint.height;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint, obj: currObj } });\n                        }\n                        if (currObj.shape === 'line' || currObj.shape === 'arrow' || currObj.shape === 'path') {\n                            this.flipLineArrowObj(currObj, degree);\n                        }\n                        currObj.shapeFlip = parent.transform.currFlipState;\n                        currObj.imageRatio = { startX: ((currObj.activePoint.startX - destLeft) / destWidth),\n                            startY: ((currObj.activePoint.startY - destTop) / destHeight),\n                            endX: ((currObj.activePoint.endX - destLeft) / destWidth),\n                            endY: ((currObj.activePoint.endY - destTop) / destHeight),\n                            width: destWidth / currObj.activePoint.width,\n                            height: destHeight / currObj.activePoint.height };\n                    }\n                }\n            }\n            if (currActObjIndex !== undefined) {\n                parent.activeObj = extend({}, parent.objColl[currActObjIndex], {}, true);\n            }\n        }\n        else if (degree === 90) {\n            this.rotateObjColl();\n        }\n        else if (degree === -90) {\n            for (var i = 0; i < 3; i++) {\n                this.rotateObjColl();\n            }\n        }\n        else if (typeof (degree) === 'number') {\n            if (degree > 0) {\n                this.rotateObjColl();\n            }\n            else {\n                for (var i = 0; i < 3; i++) {\n                    this.rotateObjColl();\n                }\n            }\n        }\n    };\n    Shape.prototype.rotateObjColl = function () {\n        var parent = this.parent;\n        var _a = parent.img, destWidth = _a.destWidth, destHeight = _a.destHeight, destLeft = _a.destLeft, destTop = _a.destTop;\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            var currObj = parent.objColl[i];\n            var shape = currObj.shape;\n            currObj.activePoint.startY = destTop + (destHeight * currObj.imageRatio.startX);\n            currObj.activePoint.endY = destTop + (destHeight * currObj.imageRatio.endX);\n            currObj.activePoint.startX = (destLeft + destWidth) - (destWidth * currObj.imageRatio.endY);\n            currObj.activePoint.endX = (destLeft + destWidth) - (destWidth * currObj.imageRatio.startY);\n            currObj = this.updateWidthHeight(parent.objColl[i]);\n            this.updateFontSize(currObj);\n            if (shape === 'line' || shape === 'arrow' || shape === 'path') {\n                this.rotateLineArrowObj(currObj);\n                if (shape === 'arrow') {\n                    this.updateArrowSize(currObj);\n                }\n            }\n            else if (currObj.rotatedAngle !== 0) {\n                currObj.rotationCirclePointColl.y = destTop + (destHeight * currObj.rotationCirclePointColl.ratioX);\n                currObj.rotationCirclePointColl.x = (destLeft + destWidth) -\n                    (destWidth * currObj.rotationCirclePointColl.ratioY);\n                currObj.rotationCirclePointColl.ratioX = (currObj.rotationCirclePointColl.x - destLeft) / destWidth;\n                currObj.rotationCirclePointColl.ratioY = (currObj.rotationCirclePointColl.y - destTop) / destHeight;\n            }\n        }\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: parent.objColl[i].activePoint, obj: parent.objColl[i] } });\n        }\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            var currObj = parent.objColl[i];\n            currObj.imageRatio = { startX: ((currObj.activePoint.startX - destLeft) / destWidth),\n                startY: ((currObj.activePoint.startY - destTop) / destHeight),\n                endX: ((currObj.activePoint.endX - destLeft) / destWidth),\n                endY: ((currObj.activePoint.endY - destTop) / destHeight),\n                width: destWidth / currObj.activePoint.width,\n                height: destHeight / currObj.activePoint.height };\n        }\n    };\n    Shape.prototype.rotateLineArrowObj = function (obj) {\n        if (isNullOrUndefined(obj.pointColl)) {\n            return;\n        }\n        var parent = this.parent;\n        var _a = parent.img, destWidth = _a.destWidth, destHeight = _a.destHeight, destLeft = _a.destLeft, destTop = _a.destTop;\n        if (obj.pointColl.length > 0) {\n            for (var n = 0; n < obj.pointColl.length; n++) {\n                obj.pointColl[n].y = destTop + (destHeight * obj.pointColl[n].ratioX);\n                obj.pointColl[n].x = (destLeft + destWidth) - (destWidth *\n                    obj.pointColl[n].ratioY);\n            }\n            for (var n = 0; n < obj.pointColl.length; n++) {\n                obj.pointColl[n].ratioX = (obj.pointColl[n].x - destLeft) / destWidth;\n                obj.pointColl[n].ratioY = (obj.pointColl[n].y - destTop) / destHeight;\n            }\n            var prevPoint = void 0;\n            if (isNullOrUndefined(obj.pointColl[obj.pointColl.length - 2])) {\n                prevPoint = { x: 0, y: 0 };\n            }\n            else {\n                prevPoint = { x: obj.pointColl[obj.pointColl.length - 2].x, y: obj.pointColl[obj.pointColl.length - 2].y };\n            }\n            var diffX = obj.pointColl[obj.pointColl.length - 1].x - prevPoint.x;\n            var diffY = obj.pointColl[obj.pointColl.length - 1].y - prevPoint.y;\n            obj.activePoint.startX = obj.pointColl[0].x;\n            obj.activePoint.startY = obj.pointColl[0].y;\n            obj.activePoint.endX = obj.pointColl[obj.pointColl.length - 1].x + (diffX / 2);\n            obj.activePoint.endY = obj.pointColl[obj.pointColl.length - 1].y + (diffY / 2);\n            obj = this.updateWidthHeight(obj);\n        }\n    };\n    Shape.prototype.flipLineArrowObj = function (obj, value) {\n        value = value.toLowerCase();\n        if (isNullOrUndefined(obj.pointColl)) {\n            return;\n        }\n        if (value === 'horizontal') {\n            this.lineArrowHorizontalFlip(obj);\n        }\n        else if (value === 'vertical') {\n            this.lineArrowVerticalFlip(obj);\n        }\n        else {\n            this.lineArrowHorizontalFlip(obj);\n            obj.shapeFlip = '';\n            this.lineArrowVerticalFlip(obj);\n        }\n        obj.activePoint.startX = obj.pointColl[0].x;\n        obj.activePoint.startY = obj.pointColl[0].y;\n        obj.activePoint.endX = obj.pointColl[obj.pointColl.length - 1].x;\n        obj.activePoint.endY = obj.pointColl[obj.pointColl.length - 1].y;\n        if (obj.activePoint.startX > obj.activePoint.endX) {\n            var temp = obj.activePoint.startX;\n            obj.activePoint.startX = obj.activePoint.endX;\n            obj.activePoint.endX = temp;\n            temp = obj.activePoint.startY;\n            obj.activePoint.startY = obj.activePoint.endY;\n            obj.activePoint.endY = temp;\n        }\n    };\n    Shape.prototype.lineArrowHorizontalFlip = function (obj) {\n        var parent = this.parent;\n        var _a = parent.img, destWidth = _a.destWidth, destHeight = _a.destHeight, destLeft = _a.destLeft, destTop = _a.destTop;\n        if (obj.shapeFlip !== parent.transform.currFlipState) {\n            for (var l = 0, len = obj.pointColl.length; l < len; l++) {\n                var currPoint = obj.pointColl[l];\n                if (currPoint.x <= destLeft + (destWidth / 2)) {\n                    currPoint.x = (destLeft + destWidth) - (currPoint.x - destLeft);\n                }\n                else if (currPoint.x >= destLeft + (destWidth / 2)) {\n                    currPoint.x = destLeft + (destLeft + destWidth - currPoint.x);\n                }\n                currPoint.ratioX = (currPoint.x - destLeft) / destWidth;\n                currPoint.ratioY = (currPoint.y - destTop) / destHeight;\n            }\n            if (obj.shape === 'arrow') {\n                var value = obj.start;\n                obj.start = obj.end;\n                obj.end = value;\n            }\n            obj.shapeFlip = parent.transform.currFlipState;\n        }\n    };\n    Shape.prototype.lineArrowVerticalFlip = function (obj) {\n        var parent = this.parent;\n        var _a = parent.img, destWidth = _a.destWidth, destHeight = _a.destHeight, destLeft = _a.destLeft, destTop = _a.destTop;\n        if (obj.shapeFlip !== parent.transform.currFlipState) {\n            for (var l = 0, len = obj.pointColl.length; l < len; l++) {\n                var currPoint = obj.pointColl[l];\n                if (currPoint.y <= destTop + (destHeight / 2)) {\n                    currPoint.y = (destTop + destHeight) - (currPoint.y - destTop);\n                }\n                else if (currPoint.y >= destTop + (destHeight / 2)) {\n                    currPoint.y = destTop + (destTop + destHeight - currPoint.y);\n                }\n                currPoint.ratioX = (currPoint.x - destLeft) / destWidth;\n                currPoint.ratioY = (currPoint.y - destTop) / destHeight;\n            }\n            obj.shapeFlip = parent.transform.currFlipState;\n        }\n    };\n    Shape.prototype.getRotDegOfShape = function (obj) {\n        var degree;\n        if (obj.shapeDegree === 0) {\n            degree = this.parent.transform.degree;\n        }\n        else {\n            degree = this.parent.transform.degree - obj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        return degree;\n    };\n    Shape.prototype.renderTextArea = function (x, y, actObj) {\n        var parent = this.parent;\n        var degree = this.getRotDegOfShape(parent.activeObj);\n        this.transformTextArea();\n        parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n        var zOrderElem = parent.element.querySelector('#' + parent.element.id + '_zOrderBtn');\n        var dupElem = parent.element.querySelector('#' + parent.element.id + '_duplicate');\n        var removeElem = parent.element.querySelector('#' + parent.element.id + '_remove');\n        var editTextElem = parent.element.querySelector('#' + parent.element.id + '_editText');\n        var shadowColor = actObj.strokeSettings.outlineColor;\n        var outlineWidth = actObj.strokeSettings.outlineWidth;\n        var shadows = [];\n        if (zOrderElem) {\n            zOrderElem.classList.add('e-overlay');\n        }\n        if (dupElem) {\n            dupElem.classList.add('e-overlay');\n        }\n        if (removeElem) {\n            removeElem.classList.add('e-overlay');\n        }\n        if (editTextElem) {\n            editTextElem.classList.add('e-overlay');\n        }\n        if (actObj.strokeSettings.fillColor !== '') {\n            parent.textArea.style.backgroundColor = actObj.strokeSettings.fillColor;\n        }\n        else {\n            parent.textArea.style.backgroundColor = 'transparent';\n        }\n        parent.textArea.style.display = 'block';\n        parent.textArea.style.left = x + 'px';\n        parent.textArea.style.top = y + 'px';\n        parent.textArea.style.fontFamily = actObj.textSettings.fontFamily;\n        parent.textArea.style.fontSize = actObj.textSettings.fontSize + 'px';\n        parent.textArea.style.color = actObj.strokeSettings.strokeColor;\n        var fontSize = actObj.textSettings.fontSize;\n        var baseWidth = Math.max(1, outlineWidth / 2);\n        var adjustedOutlineWidth = baseWidth * (Math.floor((fontSize - 1) / 16) * 0.5 + 0.5);\n        if (/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6}|[0-9A-Fa-f]{8})$|^[a-zA-Z]+$/.test(actObj.strokeSettings.outlineColor)) {\n            for (var x_1 = -adjustedOutlineWidth; x_1 <= adjustedOutlineWidth; x_1++) {\n                for (var y_1 = -adjustedOutlineWidth; y_1 <= adjustedOutlineWidth; y_1++) {\n                    if (x_1 !== 0 || y_1 !== 0) {\n                        shadows.push(x_1 / 2 + \"px \" + y_1 / 2 + \"px 0 \" + shadowColor);\n                    }\n                }\n            }\n            parent.textArea.style.textShadow = shadows.join(', ');\n        }\n        else {\n            parent.textArea.style.textShadow = null;\n        }\n        parent.textArea.style.fontWeight = actObj.textSettings.bold ? 'bold' : 'normal';\n        parent.textArea.style.fontStyle = actObj.textSettings.italic ? 'italic' : 'normal';\n        parent.textArea.style.border = '2px solid ' + parent.themeColl[parent.theme]['primaryColor'];\n        parent.textArea.value = actObj.keyHistory;\n        parent.textArea.style.overflow = 'hidden';\n        parent.textArea.style.width = 'auto';\n        parent.textArea.style.height = 'auto';\n        parent.textArea.focus();\n        var _a = actObj.activePoint, width = _a.width, height = _a.height;\n        if (degree % 90 === 0 && degree % 180 !== 0 && degree !== 0) {\n            parent.textArea.style.width = height + (height * 0.25) + 'px';\n            parent.textArea.style.height = width + (width * 0.25) + 'px';\n        }\n        else {\n            parent.textArea.style.width = width + (width * 0.25) + 'px';\n            parent.textArea.style.height = height + (height * 0.25) + 'px';\n        }\n        this.setTextBoxWidth();\n        var obj = { flipColl: null };\n        parent.notify('transform', { prop: 'getFlipColl', onPropertyChange: false, value: { obj: obj } });\n        if (obj['flipColl'].length <= 1) {\n            this.setTextBoxHeight();\n        }\n        if (parseFloat(parent.textArea.style.maxHeight) < parent.activeObj.textSettings.fontSize) {\n            parent.textArea.style.maxHeight = parent.activeObj.textSettings.fontSize + 'px';\n        }\n        if (degree % 90 === 0 && degree % 180 !== 0) {\n            if (parseFloat(parent.textArea.style.left) + parseFloat(parent.textArea.style.width) > parent.img.destTop +\n                parent.img.destHeight) {\n                this.alignTextAreaIntoCanvas();\n            }\n        }\n        else {\n            if (parseFloat(parent.textArea.style.left) + parseFloat(parent.textArea.style.width) > parent.img.destLeft +\n                parent.img.destWidth) {\n                this.alignTextAreaIntoCanvas();\n            }\n        }\n        // Limit text area\n        if (actObj.rotatedAngle !== 0) {\n            var tempLeft = parseFloat(parent.textArea.style.left);\n            var tempTop = parseFloat(parent.textArea.style.top);\n            if (actObj.flipObjColl.length > 0) {\n                var panObj = { panRegion: '' };\n                var _b = parent.lowerCanvas, clientWidth = _b.clientWidth, clientHeight = _b.clientHeight;\n                var center_1 = { x: 0, y: 0 };\n                parent.notify('crop', { prop: 'getCurrFlipState', onPropertyChange: false,\n                    value: { panObj: panObj } });\n                if (panObj['panRegion'] !== '') {\n                    if (panObj['panRegion'] === 'horizontal') {\n                        center_1.x = clientWidth - (clientWidth / 2);\n                        tempLeft = (center_1.x - tempLeft) + center_1.x;\n                    }\n                    else if (panObj['panRegion'] === 'vertical') {\n                        center_1.y = clientHeight - (clientHeight / 2);\n                        tempTop = (center_1.y - tempTop) + center_1.y;\n                    }\n                    else {\n                        center_1 = { x: clientWidth - (clientWidth / 2), y: clientHeight - (clientHeight / 2) };\n                        tempLeft = (center_1.x - tempLeft) + center_1.x;\n                        tempTop = (center_1.y - tempTop) + center_1.y;\n                    }\n                }\n            }\n            var left = tempLeft + parseFloat(parent.textArea.style.width);\n            var top_1 = tempTop + parseFloat(parent.textArea.style.height);\n            var width1 = parseFloat(parent.textArea.style.width);\n            var height1 = parseFloat(parent.textArea.style.height);\n            var center = { x: left - (width1 / 2), y: top_1 - (height1 / 2) };\n            var cosAngle = Math.cos(actObj.rotatedAngle);\n            var sinAngle = Math.sin(actObj.rotatedAngle);\n            var p1 = { x: cosAngle * (left - center.x) - sinAngle * (top_1 - center.y) + center.x,\n                y: sinAngle * (left - center.x) + cosAngle * (top_1 - center.y) + center.y };\n            if (p1.x > parent.img.destLeft && p1.x < parent.img.destLeft + parent.img.destWidth &&\n                // eslint-disable-next-line max-len\n                p1.y > parent.img.destTop && p1.y + parseFloat(parent.textArea.style.fontSize) < parent.img.destTop + parent.img.destHeight) {\n                // eslint-disable-next-line no-self-assign\n                parent.textArea.style.width = parent.textArea.style.width;\n            }\n            else {\n                var count = 0;\n                var width2 = parseFloat(parent.textArea.style.width);\n                while (true) {\n                    count++;\n                    width1 -= 1;\n                    left = tempLeft + width1;\n                    center = { x: left - (width1 / 2), y: top_1 - (height1 / 2) };\n                    p1 = { x: cosAngle * (left - center.x) - sinAngle * (top_1 - center.y) + center.x,\n                        y: sinAngle * (left - center.x) + cosAngle * (top_1 - center.y) + center.y };\n                    if ((p1.x > parent.img.destLeft && p1.x < parent.img.destLeft + parent.img.destWidth &&\n                        // eslint-disable-next-line max-len\n                        p1.y > parent.img.destTop && p1.y + parseFloat(parent.textArea.style.fontSize) < parent.img.destTop + parent.img.destHeight) ||\n                        count === width2) {\n                        parent.textArea.style.width = width1 + 'px';\n                        break;\n                    }\n                }\n            }\n        }\n        parent.notify('selection', { prop: 'clearUpperCanvas', onPropertyChange: false });\n    };\n    Shape.prototype.setTextBoxWidth = function (e) {\n        var parent = this.parent;\n        if (parent.activeObj.rotatedAngle !== 0) {\n            parent.textArea.style.whiteSpace = 'nowrap';\n            parent.textArea.style.textOverflow = 'ellipsis';\n            parent.textArea.style.display = 'inline-block';\n            return;\n        }\n        else {\n            parent.textArea.style.whiteSpace = '';\n            parent.textArea.style.textOverflow = '';\n            if (parent.textArea.style.display === 'inline-block') {\n                parent.textArea.style.display = 'block';\n            }\n        }\n        var text = this.getMaxText(true);\n        if (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block') {\n            this.updateFontStyles(true);\n        }\n        else {\n            this.updateFontStyles();\n        }\n        var textAreaWidth = (this.upperContext.measureText(text).width + (parseFloat(parent.textArea.style.fontSize) / 2));\n        var letterWidth = e ? this.upperContext.measureText(String.fromCharCode(e.which)).width : 0;\n        var actObj = extend({}, parent.activeObj, {}, true);\n        var flip = '';\n        var degree = this.getRotDegOfShape(actObj);\n        if (actObj.shapeFlip !== parent.transform.currFlipState) {\n            flip = '';\n        }\n        else {\n            flip = parent.transform.currFlipState;\n        }\n        if ((e && parseFloat(parent.textArea.style.width) < (textAreaWidth + letterWidth)) || isNullOrUndefined(e)) {\n            if (degree === 0) {\n                if (flip.toLowerCase() === 'horizontal') {\n                    if ((parseFloat(parent.textArea.style.left) - parent.img.destLeft) - textAreaWidth - letterWidth > 0) {\n                        parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n                else if ((parent.img.destWidth - (parseFloat(parent.textArea.style.left) -\n                    parent.img.destLeft)) > (textAreaWidth + letterWidth)) {\n                    parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                }\n            }\n            else if (degree === 90) {\n                if (flip.toLowerCase() === 'vertical') {\n                    if ((parseFloat(parent.textArea.style.top) - parent.img.destTop) - textAreaWidth - letterWidth > 0) {\n                        parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n                else if ((parent.img.destHeight - (parseFloat(parent.textArea.style.top) -\n                    parent.img.destTop)) > (textAreaWidth + letterWidth)) {\n                    parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                }\n            }\n            else if (degree === 180) {\n                var textAreaLeft = parseFloat(parent.textArea.style.left);\n                var destLeft = parent.img.destLeft;\n                if (flip.toLowerCase() === 'horizontal') {\n                    var remainingWidth = parent.img.destWidth - (textAreaLeft - destLeft);\n                    if (remainingWidth > textAreaWidth + letterWidth) {\n                        parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n                else {\n                    var distanceToLeft = textAreaLeft - destLeft;\n                    if (distanceToLeft - textAreaWidth - letterWidth > 0) {\n                        parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n            }\n            else if (degree === 270) {\n                var textAreaTop = parseFloat(parent.textArea.style.top);\n                var destTop = parent.img.destTop;\n                if (flip.toLowerCase() === 'vertical') {\n                    var remainingHeight = parent.img.destHeight - (textAreaTop - destTop);\n                    if (remainingHeight > textAreaWidth + letterWidth) {\n                        parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n                else {\n                    var distanceToTop = textAreaTop - destTop;\n                    if (distanceToTop - textAreaWidth - letterWidth > 0) {\n                        parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n            }\n        }\n    };\n    Shape.prototype.setTextBoxHeight = function () {\n        var parent = this.parent;\n        var textAreaTop;\n        var actObj = extend({}, parent.activeObj, {}, true);\n        var flip = '';\n        var degree = this.getRotDegOfShape(actObj);\n        if (actObj.textFlip === parent.transform.currFlipState) {\n            flip = '';\n        }\n        else if (actObj.textFlip === '') {\n            flip = parent.transform.currFlipState;\n        }\n        else {\n            flip = actObj.textFlip;\n        }\n        switch (degree) {\n            case 0:\n                if (flip.toLowerCase() === 'vertical') {\n                    parent.textArea.style.maxHeight = (parent.img.destHeight - (parent.img.destHeight -\n                        parseFloat(parent.textArea.style.top))) + 'px';\n                }\n                else {\n                    textAreaTop = parseFloat(parent.textArea.style.top) - parent.img.destTop;\n                    parent.textArea.style.maxHeight = (parent.img.destHeight - textAreaTop) + 'px';\n                }\n                break;\n            case 90:\n                if (flip.toLowerCase() === 'horizontal') {\n                    parent.textArea.style.maxHeight = (parent.img.destWidth - (parseFloat(parent.textArea.style.left) -\n                        parent.img.destLeft)) + 'px';\n                }\n                else {\n                    parent.textArea.style.maxHeight = (parseFloat(parent.textArea.style.left) - parent.img.destLeft) + 'px';\n                }\n                break;\n            case 180:\n                if (flip.toLowerCase() === 'vertical') {\n                    textAreaTop = parseFloat(parent.textArea.style.top) - parent.img.destTop;\n                    parent.textArea.style.maxHeight = (parent.img.destHeight - textAreaTop) + 'px';\n                }\n                else {\n                    parent.textArea.style.maxHeight = (parseFloat(parent.textArea.style.top) - parent.img.destTop) + 'px';\n                }\n                break;\n            case 270:\n                if (flip.toLowerCase() === 'horizontal') {\n                    parent.textArea.style.maxHeight = (parseFloat(parent.textArea.style.left) - parent.img.destLeft) + 'px';\n                }\n                else {\n                    parent.textArea.style.maxHeight = parent.img.destWidth - (parseFloat(parent.textArea.style.left)\n                        - parent.img.destLeft) + 'px';\n                }\n                break;\n        }\n    };\n    Shape.prototype.updatePathRatio = function (obj) {\n        var parent = this.parent;\n        for (var i = 0, len = obj.pointColl.length; i < len; i++) {\n            var currPoint = obj.pointColl[i];\n            currPoint.ratioX = (currPoint.x - parent.img.destLeft) / parent.img.destWidth;\n            currPoint.ratioY = (currPoint.y - parent.img.destTop) / parent.img.destHeight;\n        }\n    };\n    Shape.prototype.stopPathDrawing = function (e, isApply) {\n        var parent = this.parent;\n        if (parent.activeObj.shape === 'path') {\n            var obj = { shape: null };\n            parent.notify('selection', { prop: 'getCurrentDrawingShape', value: { obj: obj } });\n            if (obj['shape'] === 'path') {\n                var prevCropObj = extend({}, parent.cropObj, {}, true);\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                var prevObj = object['currObj'];\n                prevObj.objColl = extend([], parent.objColl, [], true);\n                prevObj.pointColl = extend([], parent.pointColl, [], true);\n                prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n                var selPointCollObj = { selPointColl: null };\n                parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                    value: { obj: selPointCollObj } });\n                prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n                parent.notify('selection', { prop: 'setCurrentDrawingShape', value: { value: '' } });\n                parent.currObjType.isDragging = false;\n                if (e && e.type !== 'touchstart' && isNullOrUndefined(isApply)) {\n                    parent.activeObj.pointColl.pop();\n                }\n                this.updatePathRatio(parent.activeObj);\n                if (isNullOrUndefined(parent.activeObj.imageRatio)) {\n                    parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n                }\n                parent.objColl.push(parent.activeObj);\n                parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                    value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                        previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                        previousCropObj: prevCropObj, previousText: null,\n                        currentText: null, previousFilter: null, isCircleCrop: null } });\n                parent.objColl.pop();\n                if (e) {\n                    parent.notify('selection', { prop: 'mouseUpEventHandler', value: { e: e } });\n                    this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n                    parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n                    if (parent.objColl.length > 0) {\n                        var obj1 = parent.activeObj.activePoint;\n                        var obj2 = parent.objColl[parent.objColl.length - 1].activePoint;\n                        if (Math.floor(obj1.startX) === Math.floor(obj2.startX) &&\n                            Math.floor(obj1.startY) === Math.floor(obj2.startY) &&\n                            Math.floor(obj1.endX) === Math.floor(obj2.endX) &&\n                            Math.floor(obj1.endY) === Math.floor(obj2.endY)) {\n                            this.refreshActiveObj();\n                        }\n                    }\n                }\n                parent.notify('draw', { prop: 'setNewPath', value: { bool: true } });\n                if (parent.objColl[parent.objColl.length - 1]) {\n                    var shape = parent.drawingShape;\n                    parent.notify('selection', { prop: 'setCurrentDrawingShape', value: { value: '' } });\n                    parent.noRedact = true;\n                    parent.selectShape(parent.objColl[parent.objColl.length - 1].currIndex);\n                    parent.notify('selection', { prop: 'setCurrentDrawingShape', value: { value: 'path' } });\n                    parent.drawingShape = shape;\n                }\n                parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n                var obj_1 = { shapeSettingsObj: {} };\n                parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj_1 } });\n                var shapeSettings = obj_1['shapeSettingsObj'];\n                var shapeResizingArgs = { cancel: false, action: 'draw-end', previousShapeSettings: shapeSettings };\n                var shapeMovingArgs = { cancel: false, action: 'move', previousShapeSettings: shapeSettings };\n                parent.notify('selection', { prop: 'triggerShapeChange', onPropertyChange: false,\n                    value: { shapeResizingArgs: shapeResizingArgs, shapeMovingArgs: shapeMovingArgs, type: 'mouse-up' } });\n                parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n            }\n        }\n    };\n    Shape.prototype.findTextTarget = function (e) {\n        var parent = this.parent;\n        if (!e) {\n            return;\n        }\n        if (parent.activeObj.shape !== 'text') {\n            if (parent.activeObj.shape === 'path') {\n                this.stopPathDrawing(e, null);\n                return;\n            }\n            else if (e.type === 'dblclick') {\n                parent.notify('selection', { prop: 'setPanDown', onPropertyChange: false, value: { panDown: null } });\n                var activeObj = extend({}, parent.activeObj, {}, true);\n                var objColl = extend([], parent.objColl, [], true);\n                var obj = { bool: null };\n                parent.notify('selection', { prop: 'findTargetObj', onPropertyChange: false,\n                    value: { x: e.clientX, y: e.clientY, isCrop: false, obj: obj } });\n                parent.objColl = objColl;\n                if (!obj['bool'] || parent.activeObj.shape !== 'text') {\n                    parent.activeObj = extend({}, activeObj, {}, true);\n                    return;\n                }\n            }\n            else {\n                return;\n            }\n        }\n        var x;\n        var y;\n        if (e.type === 'dblclick') {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        else if (e.type === 'touchstart') {\n            x = e.touches[0].clientX;\n            y = e.touches[0].clientY;\n            parent.notify('selection', { prop: 'setTouchEndPoint', onPropertyChange: false,\n                value: { x: e.touches[0].clientX, y: e.touches[0].clientY } });\n        }\n        parent.notify('toolbar', { prop: 'setPreventZoomBtn', onPropertyChange: false, value: { isPrevent: true } });\n        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'text',\n                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n        parent.notify('toolbar', { prop: 'setPreventZoomBtn', onPropertyChange: false, value: { isPrevent: false } });\n        parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n        if (!isNullOrUndefined(x) && !isNullOrUndefined(y)) {\n            var bbox = parent.lowerCanvas.getBoundingClientRect();\n            x -= bbox.left;\n            y -= bbox.top;\n            var flip = '';\n            var degree = this.getRotDegOfShape(parent.activeObj);\n            if (parent.activeObj.textFlip === '') {\n                if (parent.activeObj.textFlip === parent.transform.currFlipState) {\n                    flip = '';\n                }\n                else {\n                    flip = parent.transform.currFlipState;\n                }\n            }\n            else {\n                if (parent.activeObj.textFlip === parent.transform.currFlipState) {\n                    flip = '';\n                }\n                else if (parent.transform.currFlipState === '') {\n                    flip = parent.activeObj.textFlip;\n                }\n                else {\n                    flip = parent.transform.currFlipState;\n                }\n            }\n            var temp = void 0;\n            if (parent.textArea.style.display === 'none') {\n                temp = extend({}, parent.activeObj, {}, true);\n                for (var i = 0; i < parent.objColl.length; i++) {\n                    if (JSON.stringify(parent.activeObj) === JSON.stringify(parent.objColl[i])) {\n                        parent.objColl.splice(i, 1);\n                    }\n                }\n                this.refreshActiveObj();\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                this.lowerContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n                parent.notify('draw', { prop: 'redrawDownScale' });\n                parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n                parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n                if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n                    parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                        value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                }\n                parent.activeObj = temp;\n                this.updateFontStyles();\n                var actObj = extend({}, parent.activeObj, {}, true);\n                var radius = actObj.topLeftCircle.radius;\n                var _a = actObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY, width = _a.width, height = _a.height;\n                var center = { x: startX + (width / 2), y: startY +\n                        (height / 2) };\n                var cosAngle = Math.cos(actObj.rotatedAngle);\n                var sinAngle = Math.sin(actObj.rotatedAngle);\n                var p1 = { x: cosAngle * (startX - center.x) - sinAngle * (startY - center.y) + center.x,\n                    y: sinAngle * (startX - center.x) + cosAngle * (startY - center.y) + center.y };\n                var p2 = { x: cosAngle * (endX - center.x) - sinAngle * (startY - center.y) + center.x,\n                    y: sinAngle * (endX - center.x) + cosAngle * (startY - center.y) + center.y };\n                var p3 = { x: cosAngle * (startX - center.x) - sinAngle * (endY - center.y) + center.x,\n                    y: sinAngle * (startX - center.x) + cosAngle * (endY - center.y) + center.y };\n                var p4 = { x: cosAngle * (endX - center.x) - sinAngle * (endY - center.y) + center.x,\n                    y: sinAngle * (endX - center.x) + cosAngle * (endY - center.y) + center.y };\n                var obj = { position: null, x: x, y: y, x1: p1.x, y1: p1.y, x2: p2.x, y2: p2.y,\n                    x3: p3.x, y3: p3.y, x4: p4.x, y4: p4.y };\n                parent.notify('draw', { prop: 'checkPointPosition', onPropertyChange: false, value: { obj: obj } });\n                if ((actObj.rotatedAngle !== 0 && (obj['position'] === 'inside' || obj['position'] === 'on')) ||\n                    (actObj.rotatedAngle === 0 && x >= (actObj.activePoint.startX - (radius * 2)) &&\n                        x <= (actObj.activePoint.endX + (radius * 2)) &&\n                        y >= (actObj.activePoint.startY - (radius * 2)) &&\n                        y <= (actObj.activePoint.endY + (radius * 2)))) {\n                    this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                    if (actObj.flipObjColl.length === 4) {\n                        actObj.flipObjColl = [];\n                        flip = '';\n                        actObj.shapeFlip = '';\n                    }\n                    if (flip === '' && actObj.flipObjColl.length > 1) {\n                        flip = actObj.flipObjColl[actObj.flipObjColl.length - 1];\n                    }\n                    if (actObj.flipObjColl.length <= 1) {\n                        var points = this.setTextBoxPos(actObj, degree, flip, x, y);\n                        x = points.x;\n                        y = points.y;\n                    }\n                    else {\n                        var points = this.setTextBoxPoints(actObj, degree, flip, x, y);\n                        x = points.x;\n                        y = points.y;\n                    }\n                    if (parent.activeObj.rotatedAngle !== 0) {\n                        var point = this.getTextBoxPosition(parent.activeObj);\n                        x = point.x;\n                        y = point.y;\n                        point = this.setFlipState(x, y, parent.activeObj);\n                        x = point.x;\n                        y = point.y;\n                    }\n                    this.renderTextArea(x, y, actObj);\n                }\n                else {\n                    this.applyActObj();\n                }\n            }\n        }\n        else if ((parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block')\n            && this.selectedText() !== '' && e.type === 'mousedown') {\n            var temp = parent.textArea.value;\n            parent.textArea.value += 'a';\n            parent.textArea.value = temp;\n        }\n        else if (parent.textArea.style.display === 'none') {\n            parent.textArea.style.display = 'block';\n        }\n    };\n    Shape.prototype.getTextBoxPosition = function (obj, object) {\n        var point = { x: 0, y: 0 };\n        var _a = obj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY, width = _a.width, height = _a.height;\n        var center = { x: startX + (width / 2), y: startY + (height / 2) };\n        var cosAngle = Math.cos(obj.rotatedAngle);\n        var sinAngle = Math.sin(obj.rotatedAngle);\n        var p1 = { x: cosAngle * (startX - center.x) - sinAngle * (startY - center.y) + center.x,\n            y: sinAngle * (startX - center.x) + cosAngle * (startY - center.y) + center.y };\n        var p2 = { x: cosAngle * (endX - center.x) - sinAngle * (startY - center.y) + center.x,\n            y: sinAngle * (endX - center.x) + cosAngle * (startY - center.y) + center.y };\n        var p3 = { x: cosAngle * (startX - center.x) - sinAngle * (endY - center.y) + center.x,\n            y: sinAngle * (startX - center.x) + cosAngle * (endY - center.y) + center.y };\n        var p4 = { x: cosAngle * (endX - center.x) - sinAngle * (endY - center.y) + center.x,\n            y: sinAngle * (endX - center.x) + cosAngle * (endY - center.y) + center.y };\n        var degree = this.getRotDegOfShape(obj);\n        if (degree === 0 || degree === 360) {\n            point = { x: p1.x, y: p1.y };\n        }\n        else if (degree === 90 || degree === -270) {\n            point = { x: p2.x, y: p2.y };\n        }\n        else if (degree === 180 || degree === -180) {\n            point = { x: p4.x, y: p4.y };\n        }\n        else if (degree === 270 || degree === -90) {\n            point = { x: p3.x, y: p3.y };\n        }\n        if (object) {\n            object['x'] = point.x;\n            object['y'] = point.y;\n        }\n        return point;\n    };\n    Shape.prototype.setFlipState = function (x, y, obj, object) {\n        var parent = this.parent;\n        var panObj = { panRegion: '' };\n        var _a = parent.lowerCanvas, clientWidth = _a.clientWidth, clientHeight = _a.clientHeight;\n        var center = { x: 0, y: 0 };\n        parent.notify('crop', { prop: 'getCurrFlipState', onPropertyChange: false,\n            value: { panObj: panObj } });\n        if (panObj['panRegion'] !== '') {\n            if (panObj['panRegion'] === 'horizontal') {\n                center.x = clientWidth - (clientWidth / 2);\n                x = (center.x - x) + center.x;\n            }\n            else if (panObj['panRegion'] === 'vertical') {\n                center.y = clientHeight - (clientHeight / 2);\n                y = (center.y - y) + center.y;\n            }\n            else {\n                center = { x: clientWidth - (clientWidth / 2), y: clientHeight - (clientHeight / 2) };\n                x = (center.x - x) + center.x;\n                y = (center.y - y) + center.y;\n            }\n        }\n        if (object) {\n            object['x'] = x;\n            object['y'] = y;\n        }\n        return { x: x, y: y };\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Shape.prototype.fileChanged = function (e) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var filesData = e.target.files[0];\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var fileData = filesData;\n        var fileExtension = fileData.name && fileData.name.split('.').pop().toLowerCase();\n        if (fileExtension && ['jpg', 'jpeg', 'png', 'svg'].indexOf(fileExtension) === -1) {\n            this.refreshActiveObj();\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/tslint/config, @typescript-eslint/no-explicit-any\n        var URL = window.URL;\n        var url = URL.createObjectURL(e.target.files[0]);\n        this.onLoadImgShape(null, null, null, null, url.toString(), true);\n        document.getElementById(this.parent.element.id + '_fileUpload').value = '';\n    };\n    Shape.prototype.onLoadImgShape = function (x, y, width, height, url, isSelect, degree, isAspectRatio, opacity, isSelected) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        var parent = this.parent;\n        if (typeof (url) === 'string') {\n            this.shapeImg.src = url;\n        }\n        else {\n            parent.inMemoryCanvas.width = url.width;\n            parent.inMemoryCanvas.height = url.height;\n            parent.inMemoryCanvas.getContext('2d').putImageData(url, 0, 0);\n            this.shapeImg.src = parent.inMemoryCanvas.toDataURL();\n        }\n        this.prevObjColl();\n        parent.activeObj.shape = 'image';\n        this.initShapeProps();\n        this.shapeImg.onload = function () {\n            proxy.upperContext.drawImage(proxy.shapeImg, 0, 0, proxy.shapeImg.width, proxy.shapeImg.height);\n            proxy.updateImgCanvas(isSelect, x, y, width, height, degree, isAspectRatio, opacity, isSelected);\n        };\n    };\n    Shape.prototype.updateImgCanvas = function (isSelect, x, y, width, height, degree, isAspectRatio, opacity, isSelected) {\n        var parent = this.parent;\n        parent.activeObj.imageElement = this.shapeImg;\n        parent.activeObj.imageCanvas = parent.createElement('canvas');\n        var dimObj = { width: 0, height: 0 };\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: this.shapeImg.width, height: this.shapeImg.height, obj: dimObj, isImgShape: null } });\n        if (width && height) {\n            if (isAspectRatio) {\n                var obj_2 = { ratio: null };\n                parent.notify('selection', { prop: 'findImageRatio', onPropertyChange: false,\n                    value: { width: this.shapeImg.width, height: this.shapeImg.height, obj: obj_2 } });\n                dimObj = this.resizeImage(width, obj_2['ratio']);\n            }\n            else {\n                dimObj = { width: width, height: height };\n            }\n        }\n        this.updateObj(dimObj, x, y);\n        parent.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n            value: { ctx: parent.activeObj.imageCanvas.getContext('2d'), isImgAnnotation: true, isHFlip: null, isVFlip: null } });\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: this.shapeImg.width, height: this.shapeImg.height, obj: dimObj, isImgShape: true } });\n        if (width && height) {\n            if (isAspectRatio) {\n                var obj_3 = { ratio: null };\n                parent.notify('selection', { prop: 'findImageRatio', onPropertyChange: false,\n                    value: { width: this.shapeImg.width, height: this.shapeImg.height, obj: obj_3 } });\n                dimObj = this.resizeImage(width, obj_3['ratio']);\n            }\n            else {\n                dimObj = { width: width, height: height };\n            }\n        }\n        if (opacity !== null && opacity !== undefined) {\n            parent.activeObj.opacity = opacity;\n        }\n        this.updateObj(dimObj, x, y);\n        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        this.shapeImg = null;\n        if (degree) {\n            parent.activeObj.rotatedAngle = degree * (Math.PI / 180);\n            parent.notify('selection', { prop: 'updPtCollForShpRot', onPropertyChange: false, value: { obj: parent.activeObj } });\n        }\n        var obj = { shapeSettingsObj: {} };\n        parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n        var shapeSettings = obj['shapeSettingsObj'];\n        var shapeChangingArgs = { cancel: false, action: 'insert', previousShapeSettings: shapeSettings,\n            currentShapeSettings: shapeSettings };\n        parent.trigger('shapeChanging', shapeChangingArgs);\n        parent.editCompleteArgs = shapeChangingArgs;\n        isSelect = isSelect ? isSelect : isSelected;\n        this.drawShapeImageEvent(shapeChangingArgs, isSelect);\n        if (parent.isPublicMethod && !isSelected) {\n            parent.notify('undo-redo', { prop: 'updateUndoRedo', onPropertyChange: false });\n        }\n        else if (!parent.isPublicMethod) {\n            parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n        }\n        parent.isPublicMethod = false;\n    };\n    Shape.prototype.updateObj = function (dimObj, x, y) {\n        var parent = this.parent;\n        parent.activeObj.activePoint.width = dimObj['width'];\n        parent.activeObj.activePoint.height = dimObj['height'];\n        parent.activeObj.activePoint.startX = x ? x : (parent.lowerCanvas.width / 2) - (dimObj['width'] / 2);\n        parent.activeObj.activePoint.startY = y ? y : (parent.lowerCanvas.height / 2) - (dimObj['height'] / 2);\n        parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + dimObj['width'];\n        parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY + dimObj['height'];\n    };\n    Shape.prototype.resizeImage = function (newWidth, aspectRatio) {\n        var aspectRatioArray = aspectRatio.split(':');\n        var aspectRatioWidth = parseInt(aspectRatioArray[0], 10);\n        var aspectRatioHeight = parseInt(aspectRatioArray[1], 10);\n        var newHeight = Math.round((newWidth * aspectRatioHeight) / aspectRatioWidth);\n        return { width: newWidth, height: newHeight };\n    };\n    Shape.prototype.setTextBoxPos = function (actObj, degree, flip, x, y) {\n        var point = { x: x, y: y };\n        var _a = actObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        flip = flip.toLowerCase();\n        switch (degree) {\n            case 0:\n                if (flip === 'horizontal') {\n                    point.x = endX;\n                    point.y = startY;\n                }\n                else if (flip === 'vertical') {\n                    point.x = startX;\n                    point.y = endY;\n                }\n                else {\n                    point.x = startX;\n                    point.y = startY;\n                }\n                break;\n            case 90:\n                if (flip === 'horizontal') {\n                    point.x = startX;\n                    point.y = startY;\n                }\n                else if (flip === 'vertical') {\n                    point.x = endX;\n                    point.y = endY;\n                }\n                else {\n                    point.x = endX;\n                    point.y = startY;\n                }\n                break;\n            case 180:\n                if (flip === 'horizontal') {\n                    point.x = startX;\n                    point.y = endY;\n                }\n                else if (flip === 'vertical') {\n                    point.x = endX;\n                    point.y = startY;\n                }\n                else {\n                    point.x = endX;\n                    point.y = endY;\n                }\n                break;\n            case 270:\n                if (flip === 'horizontal') {\n                    point.x = endX;\n                    point.y = endY;\n                }\n                else if (flip === 'vertical') {\n                    point.x = startX;\n                    point.y = startY;\n                }\n                else {\n                    point.x = startX;\n                    point.y = endY;\n                }\n                break;\n        }\n        return point;\n    };\n    Shape.prototype.setTextBoxPoints = function (actObj, degree, flip, x, y) {\n        var point = { x: x, y: y };\n        var _a = actObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        flip = flip.toLowerCase();\n        switch (degree) {\n            case 0:\n                if (actObj.flipObjColl[0] && actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                    if (flip === 'horizontal') {\n                        point.x = startX;\n                        point.y = startY;\n                    }\n                    else if (flip === 'vertical') {\n                        point.x = endX;\n                        point.y = endY;\n                    }\n                }\n                else {\n                    if (flip === 'horizontal') {\n                        point.x = endX;\n                        point.y = endY;\n                    }\n                    else if (flip === 'vertical') {\n                        point.x = endX;\n                        point.y = startY;\n                    }\n                }\n                break;\n            case 90:\n                if (actObj.flipObjColl[0] && actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                    if (flip === 'horizontal') {\n                        point.x = endX;\n                        point.y = endY;\n                    }\n                    else if (flip === 'vertical') {\n                        point.x = startX;\n                        point.y = endY;\n                    }\n                }\n                else {\n                    if (flip === 'horizontal') {\n                        point.x = startX;\n                        point.y = endY;\n                    }\n                    else if (flip === 'vertical') {\n                        point.x = startX;\n                        point.y = startY;\n                    }\n                }\n                break;\n            case 180:\n                if (actObj.flipObjColl[0] && actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                    if (flip === 'horizontal') {\n                        point.x = startX;\n                        point.y = startY;\n                    }\n                    else if (flip === 'vertical') {\n                        point.x = startX;\n                        point.y = startY;\n                    }\n                }\n                else {\n                    if (flip === 'horizontal') {\n                        point.x = startX;\n                        point.y = startY;\n                    }\n                    else if (flip === 'vertical') {\n                        point.x = startX;\n                        point.y = endY;\n                    }\n                }\n                break;\n            case 270:\n                if (actObj.flipObjColl[0] && actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                    if (flip === 'horizontal') {\n                        point.x = startX;\n                        point.y = startY;\n                    }\n                    else if (flip === 'vertical') {\n                        point.x = endX;\n                        point.y = startY;\n                    }\n                }\n                else {\n                    if (flip === 'horizontal') {\n                        point.x = endX;\n                        point.y = startY;\n                    }\n                    else if (flip === 'vertical') {\n                        point.x = endX;\n                        point.y = endY;\n                    }\n                }\n                break;\n        }\n        return point;\n    };\n    Shape.prototype.selectedText = function () {\n        var parent = this.parent;\n        var start = parent.textArea.selectionStart;\n        var finish = parent.textArea.selectionEnd;\n        return parent.textArea.value.substring(start, finish);\n    };\n    Shape.prototype.panObjColl = function (xDiff, yDiff, panRegion) {\n        var parent = this.parent;\n        if (parent.objColl.length > 0) {\n            for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                var currObj = parent.objColl[i];\n                if (panRegion === '') {\n                    currObj.activePoint.startX += xDiff;\n                    currObj.activePoint.endX += xDiff;\n                    if (currObj.rotationCirclePointColl) {\n                        currObj.rotationCirclePointColl.x += xDiff;\n                    }\n                    if (currObj.shape === 'path') {\n                        for (var l = 0, len_3 = currObj.pointColl.length; l < len_3; l++) {\n                            currObj.pointColl[l].x += xDiff;\n                        }\n                    }\n                    currObj.activePoint.startY += yDiff;\n                    currObj.activePoint.endY += yDiff;\n                    if (currObj.rotationCirclePointColl) {\n                        currObj.rotationCirclePointColl.y += yDiff;\n                    }\n                    if (currObj.shape === 'path') {\n                        for (var l = 0; l < currObj.pointColl.length; l++) {\n                            currObj.pointColl[l].y += yDiff;\n                        }\n                    }\n                }\n                currObj = this.updateWidthHeight(currObj);\n                parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint,\n                        obj: currObj } });\n                if (currObj.shape === 'line' || currObj.shape === 'arrow') {\n                    currObj.pointColl = this.getLinePoints(currObj.activePoint.startX, currObj.activePoint.startY, currObj.activePoint.endX, currObj.activePoint.endY);\n                    for (var j = 0, len_4 = currObj.pointColl.length; j < len_4; j++) {\n                        currObj.pointColl[j].ratioX =\n                            (currObj.pointColl[j].x - parent.img.destLeft) / parent.img.destWidth;\n                        currObj.pointColl[j].ratioY =\n                            (currObj.pointColl[j].y - parent.img.destTop) / parent.img.destHeight;\n                    }\n                }\n                this.refreshActiveObj();\n            }\n            var temp = this.lowerContext.filter;\n            this.lowerContext.filter = 'none';\n            this.iterateObjColl();\n            this.lowerContext.filter = temp;\n            this.refreshActiveObj();\n            parent.notify('draw', { prop: 'applyFrame', value: { ctx: this.lowerContext, frame: parent.frameObj.type, preventImg: true } });\n        }\n    };\n    Shape.prototype.updateFontStyles = function (isTextBox) {\n        var parent = this.parent;\n        this.upperContext.strokeStyle = parent.activeObj.strokeSettings.strokeColor;\n        this.upperContext.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n        var textStyle = '';\n        if (parent.activeObj.textSettings.bold) {\n            textStyle = 'bold ';\n        }\n        if (parent.activeObj.textSettings.italic) {\n            textStyle = 'italic ';\n        }\n        if (parent.activeObj.textSettings.bold && parent.activeObj.textSettings.italic) {\n            textStyle = 'italic bold ';\n        }\n        var fontSize = isTextBox ? parseFloat(parent.textArea.style.fontSize) : parent.activeObj.textSettings.fontSize;\n        var fontFamily = (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block') ?\n            parent.textArea.style.fontFamily : parent.activeObj.textSettings.fontFamily;\n        this.upperContext.font = textStyle + fontSize + 'px' + ' ' + fontFamily;\n    };\n    Shape.prototype.applyFontStyle = function (item) {\n        var parent = this.parent;\n        var obj = { shapeSettingsObj: {} };\n        parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n        var shapeSettings = obj['shapeSettingsObj'];\n        this.pushActItemIntoObj();\n        var objColl = extend([], parent.objColl, [], true);\n        parent.objColl.pop();\n        if (parent.textArea.style.display === 'none') {\n            this.updateFontRatio(parent.activeObj);\n        }\n        else {\n            this.updateFontRatio(parent.activeObj, true);\n        }\n        switch (item) {\n            case 'default':\n                this.updateFontStyle(item, objColl, 'normal', 'normal');\n                break;\n            case 'bold':\n                this.updateFontStyle(item, objColl, 'bold', 'normal');\n                break;\n            case 'italic':\n                this.updateFontStyle(item, objColl, 'normal', 'italic');\n                break;\n            case 'bolditalic':\n                this.updateFontStyle(item, objColl, 'bold', 'italic');\n                break;\n        }\n        var shapeChangedArgs = { action: 'font-style', currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        shapeChangedArgs.currentShapeSettings.fontStyle = [item];\n        parent.trigger('shapeChange', shapeChangedArgs);\n        parent.editCompleteArgs = shapeChangedArgs;\n    };\n    Shape.prototype.updateFontStyle = function (item, objColl, fontWeight, fontStyle) {\n        var parent = this.parent;\n        var style = parent.textArea.style;\n        if (style.display === 'block' || style.display === 'inline-block') {\n            if (style.fontWeight === 'normal' && fontWeight === 'bold') {\n                style.fontWeight = 'bold';\n            }\n            else if (style.fontWeight === 'bold' && fontWeight === 'bold') {\n                style.fontWeight = 'normal';\n            }\n            if (style.fontStyle === 'normal' && fontStyle === 'italic') {\n                style.fontStyle = 'italic';\n            }\n            else if (style.fontStyle === 'italic' && fontStyle === 'italic') {\n                style.fontStyle = 'normal';\n            }\n            var value = (style.fontWeight === 'normal' && style.fontStyle === 'normal' ? 'default' :\n                (style.fontWeight === 'bold' && style.fontStyle === 'normal' ? 'bold' :\n                    (style.fontWeight === 'normal' && style.fontStyle === 'italic' ? 'italic' : 'bolditalic')));\n            var width = this.getTextAreaWidth(value);\n            style.width = width + 'px';\n            this.updateObjColl(item, objColl);\n        }\n        else {\n            this.textSettings.bold = parent.activeObj.textSettings.bold = fontWeight === 'normal' ? false : true;\n            this.textSettings.italic = parent.activeObj.textSettings.italic = fontStyle === 'normal' ? false : true;\n            if (parent.activeObj.activePoint.width !== 0 || parent.activeObj.activePoint.height !== 0) {\n                this.redrawText();\n            }\n            parent.notify('undo-redo', { prop: 'updateUrObj', onPropertyChange: false, value: { objColl: objColl } });\n        }\n    };\n    Shape.prototype.updateArrowRatio = function (obj) {\n        var parent = this.parent;\n        var object = { arrowDimension: null };\n        parent.notify('draw', { prop: 'getArrowDimension', onPropertyChange: false, value: { obj: object } });\n        var length;\n        if (Math.abs(obj.activePoint.width) > Math.abs(obj.activePoint.height)) {\n            length = Math.abs(obj.activePoint.width);\n        }\n        else {\n            length = Math.abs(obj.activePoint.height);\n        }\n        var dimension;\n        var dimensions = ['bar', 'arrow', 'arrowSolid', 'circle', 'square'];\n        for (var _i = 0, dimensions_1 = dimensions; _i < dimensions_1.length; _i++) {\n            dimension = dimensions_1[_i];\n            var ratioX = length / object['arrowDimension'][dimension]['width'];\n            var ratioY = length / object['arrowDimension'][dimension]['height'];\n            object['arrowDimension'][dimension]['ratioX'] = ratioX;\n            object['arrowDimension'][dimension]['ratioY'] = ratioY;\n        }\n    };\n    Shape.prototype.updateArrowSize = function (obj) {\n        var object = { arrowDimension: null };\n        this.parent.notify('draw', { prop: 'getArrowDimension', onPropertyChange: false, value: { obj: object } });\n        var length;\n        if (Math.abs(obj.activePoint.width) > Math.abs(obj.activePoint.height)) {\n            length = Math.abs(obj.activePoint.width);\n        }\n        else {\n            length = Math.abs(obj.activePoint.height);\n        }\n        var dimension;\n        var dimensions = ['bar', 'arrow', 'arrowSolid', 'circle', 'square'];\n        for (var _i = 0, dimensions_2 = dimensions; _i < dimensions_2.length; _i++) {\n            dimension = dimensions_2[_i];\n            var ratioX = object['arrowDimension'][dimension]['ratioX'];\n            var ratioY = object['arrowDimension'][dimension]['ratioY'];\n            object['arrowDimension'][dimension]['width'] = length / ratioX;\n            object['arrowDimension'][dimension]['height'] = length / ratioY;\n        }\n    };\n    Shape.prototype.updateFontRatio = function (obj, isTextArea) {\n        var parent = this.parent;\n        var text = this.getMaxText(isTextArea);\n        var width = this.upperContext.measureText(text).width +\n            parent.activeObj.textSettings.fontSize * 0.5;\n        var height = parent.activeObj.textSettings.fontSize;\n        var degree = this.getRotDegOfShape(obj);\n        if (isNullOrUndefined(isTextArea)) {\n            if (degree === 0 || Math.abs(degree) === 180) {\n                obj.textSettings.fontRatio = width / obj.textSettings.fontSize;\n            }\n            else {\n                obj.textSettings.fontRatio = height / obj.textSettings.fontSize;\n            }\n        }\n        else if (isTextArea) {\n            obj.textSettings.fontRatio = width / parseFloat(parent.textArea.style.fontSize);\n        }\n    };\n    Shape.prototype.updateFontSize = function (obj) {\n        var degree = this.getRotDegOfShape(obj);\n        if (degree === 0 || Math.abs(degree) === 180) {\n            obj.textSettings.fontSize = (obj.activePoint.width / obj.textSettings.fontRatio);\n        }\n        else {\n            obj.textSettings.fontSize = (obj.activePoint.height / obj.textSettings.fontRatio);\n        }\n    };\n    Shape.prototype.updateObjColl = function (item, objColl) {\n        var parent = this.parent;\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = objColl;\n        prevObj.pointColl = extend([], parent.pointColl, [], true);\n        prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        var tempBold = parent.activeObj.textSettings.bold;\n        var tempItalic = parent.activeObj.textSettings.italic;\n        switch (item) {\n            case 'default':\n                parent.activeObj.textSettings.bold = false;\n                parent.activeObj.textSettings.italic = false;\n                break;\n            case 'bold':\n                parent.activeObj.textSettings.bold = true;\n                parent.activeObj.textSettings.italic = false;\n                break;\n            case 'italic':\n                parent.activeObj.textSettings.bold = false;\n                parent.activeObj.textSettings.italic = true;\n                break;\n            case 'bolditalic':\n                parent.activeObj.textSettings.bold = true;\n                parent.activeObj.textSettings.italic = true;\n                break;\n        }\n        parent.objColl.push(parent.activeObj);\n        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: 'textAreaCustomization', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                previousCropObj: prevCropObj, previousText: null,\n                currentText: null, previousFilter: null, isCircleCrop: null } });\n        parent.objColl.pop();\n        parent.activeObj.textSettings.bold = tempBold;\n        parent.activeObj.textSettings.italic = tempItalic;\n    };\n    Shape.prototype.pushActItemIntoObj = function () {\n        var parent = this.parent;\n        if (parent.textArea.style.display === 'none') {\n            if (parent.activeObj.activePoint.width !== 0 || parent.activeObj.activePoint.height !== 0) {\n                parent.objColl.push(parent.activeObj);\n            }\n        }\n        else {\n            var temp = extend({}, parent.activeObj, {}, true);\n            parent.notify('selection', { prop: 'setTextBoxStylesToActObj', onPropertyChange: false });\n            parent.objColl.push(parent.activeObj);\n            parent.activeObj = temp;\n        }\n    };\n    Shape.prototype.clearActObj = function () {\n        var parent = this.parent;\n        if (parent.textArea.style.display === 'none') {\n            this.refreshActiveObj();\n            this.applyActObj();\n            this.refreshActiveObj();\n            parent.currObjType.isCustomCrop = false;\n        }\n    };\n    Shape.prototype.refreshActiveObj = function () {\n        var parent = this.parent;\n        parent.activeObj = {};\n        parent.activeObj.activePoint = { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 };\n        parent.activeObj.triangle = [];\n        parent.activeObj.triangleRatio = [];\n        parent.activeObj.order = null;\n        parent.activeObj.flipObjColl = [];\n        parent.activeObj.strokeSettings = this.strokeSettings;\n        parent.activeObj.textSettings = this.textSettings;\n        parent.activeObj.rotatedAngle = 0;\n        parent.activeObj.opacity = 1;\n        parent.activeObj.redactType = this.redactType;\n        parent.activeObj.redactBlur = parent.tempRedactBlur;\n        parent.activeObj.redactPixelate = parent.tempRedactPixel;\n    };\n    Shape.prototype.applyActObj = function (isMouseDown) {\n        var parent = this.parent;\n        var isActObj = false;\n        if (parent.activeObj.shape !== undefined && parent.activeObj.shape === 'text' && parent.activeObj.keyHistory === '') {\n            this.refreshActiveObj();\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        }\n        else {\n            var splitWords = void 0;\n            var isCropSelection = false;\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (splitWords === undefined && parent.currObjType.isCustomCrop) {\n                isCropSelection = true;\n            }\n            else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                isCropSelection = true;\n            }\n            if (parent.activeObj.shape && !isCropSelection && parent.activeObj.shape !== 'shape') {\n                for (var i = 0; i < parent.objColl.length; i++) {\n                    if (JSON.stringify(parent.activeObj) === JSON.stringify(parent.objColl[i])) {\n                        isActObj = true;\n                        break;\n                    }\n                }\n                if (!isActObj) {\n                    if (isNullOrUndefined(parent.activeObj.currIndex)) {\n                        parent.activeObj.currIndex = this.getNewShapeId();\n                    }\n                    if (isNullOrUndefined(parent.activeObj.order)) {\n                        parent.activeObj.order = this.getNewOrder();\n                    }\n                    this.updImgRatioForActObj();\n                    var splitWords_1 = parent.activeObj.currIndex.split('_');\n                    var tempObjColl = parent.objColl.splice(0, parseInt(splitWords_1[1], 10) - 1);\n                    tempObjColl.push(extend({}, parent.activeObj, {}, true));\n                    for (var i = 0; i < parent.objColl.length; i++) {\n                        tempObjColl.push(parent.objColl[i]);\n                    }\n                    parent.objColl = tempObjColl;\n                    tempObjColl = [];\n                    this.refreshActiveObj();\n                    this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n                    parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n                    parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n                    parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n                    parent.currObjType.shape = '';\n                    this.refreshActiveObj();\n                    if (parent.isCircleCrop) {\n                        parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                            value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                    }\n                    parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                    if (isNullOrUndefined(isMouseDown)) {\n                        parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                        parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false, value: { prevActObj: null } });\n                    }\n                }\n            }\n        }\n    };\n    Shape.prototype.getNewShapeId = function () {\n        var parent = this.parent;\n        var value = parent.objColl.length + 1;\n        for (var i = 0; i < parent.objColl.length; i++) {\n            if (parent.objColl[i].currIndex === 'shape_' + value) {\n                value++;\n                i = -1;\n            }\n        }\n        return 'shape_' + value;\n    };\n    Shape.prototype.getNewOrder = function () {\n        var parent = this.parent;\n        this.updateShapeColl();\n        var value = parent.shapeColl.length + 1;\n        for (var i = 0; i < parent.shapeColl.length; i++) {\n            if (parent.shapeColl[i].order === value) {\n                value++;\n                i = -1;\n            }\n        }\n        return value;\n    };\n    Shape.prototype.getHighestOrder = function () {\n        var parent = this.parent;\n        this.updateShapeColl();\n        var value = 0;\n        for (var i = 0; i < parent.shapeColl.length; i++) {\n            if (parent.shapeColl[i].order > value) {\n                value = parent.shapeColl[i].order;\n            }\n        }\n        return value;\n    };\n    Shape.prototype.getLowestOrder = function () {\n        var parent = this.parent;\n        this.updateShapeColl();\n        var value = 1;\n        for (var i = 0; i < parent.shapeColl.length; i++) {\n            if (parent.shapeColl[i].order < value) {\n                value = parent.shapeColl[i].order;\n            }\n        }\n        return value;\n    };\n    Shape.prototype.alignTextAreaIntoCanvas = function () {\n        var parent = this.parent;\n        var letters = parent.textArea.value;\n        parent.textArea.value = '';\n        for (var i = 0, len = letters.length; i < len; i++) {\n            parent.textArea.value += letters[i];\n            parent.textArea.style.height = 'auto';\n            parent.textArea.style.height = parent.textArea.scrollHeight + 'px';\n            this.setTextBoxWidth();\n        }\n    };\n    Shape.prototype.transformTextArea = function () {\n        var parent = this.parent;\n        if (parent.activeObj.shape === 'text') {\n            parent.textArea.style.transformOrigin = '0 0';\n            var rotatedDegree = parent.activeObj.rotatedAngle * (180 / Math.PI);\n            var scale = '';\n            var degree = this.getRotDegOfShape(parent.activeObj);\n            if (parent.activeObj.flipObjColl.length > 0) {\n                for (var i = 0; i < parent.activeObj.flipObjColl.length; i++) {\n                    if (degree !== 0 && degree % 90 === 0 && degree !== 180) {\n                        scale += parent.activeObj.flipObjColl[i].toLowerCase() === 'horizontal' ? 'scale(1, -1)' :\n                            'scale(-1, 1)';\n                    }\n                    else {\n                        scale += parent.activeObj.flipObjColl[i].toLowerCase() === 'horizontal' ? 'scale(-1, 1)' :\n                            'scale(1, -1)';\n                    }\n                    degree += rotatedDegree;\n                    if (parent.activeObj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                        parent.textArea.style.transform = 'rotate(' + degree + 'deg)' + scale;\n                    }\n                    else if (parent.activeObj.flipObjColl[i].toLowerCase() === 'vertical') {\n                        parent.textArea.style.transform = 'rotate(' + degree + 'deg)' + scale;\n                    }\n                }\n            }\n            else {\n                degree += rotatedDegree;\n                parent.textArea.style.transform = 'rotate(' + degree + 'deg)';\n            }\n        }\n    };\n    Shape.prototype.getTextAreaWidth = function (item) {\n        var parent = this.parent;\n        var tempBold = parent.activeObj.textSettings.bold;\n        var tempItalic = parent.activeObj.textSettings.italic;\n        switch (item) {\n            case 'default':\n                parent.activeObj.textSettings.bold = false;\n                parent.activeObj.textSettings.italic = false;\n                break;\n            case 'bold':\n                parent.activeObj.textSettings.bold = true;\n                parent.activeObj.textSettings.italic = false;\n                break;\n            case 'italic':\n                parent.activeObj.textSettings.bold = false;\n                parent.activeObj.textSettings.italic = true;\n                break;\n            case 'bolditalic':\n                parent.activeObj.textSettings.bold = true;\n                parent.activeObj.textSettings.italic = true;\n                break;\n        }\n        var isTextArea = parent.textArea.style.display === 'none' ? false : true;\n        this.updateFontStyles(isTextArea);\n        var width;\n        if (!isTextArea) {\n            width = this.upperContext.measureText(parent.activeObj.keyHistory).width +\n                parent.activeObj.textSettings.fontSize * 0.5;\n        }\n        else {\n            width = this.upperContext.measureText(parent.textArea.value).width +\n                parent.activeObj.textSettings.fontSize * 0.5;\n        }\n        parent.activeObj.textSettings.bold = tempBold;\n        parent.activeObj.textSettings.italic = tempItalic;\n        return width;\n    };\n    Shape.prototype.getRedactObjDetails = function (obj) {\n        var parent = this.parent;\n        var redactDetails = {};\n        redactDetails.id = obj.currIndex;\n        redactDetails.type = parent.toPascalCase(obj.redactType);\n        redactDetails.startX = obj.activePoint.startX;\n        redactDetails.startY = obj.activePoint.startY;\n        redactDetails.width = obj.activePoint.width;\n        redactDetails.height = obj.activePoint.height;\n        switch (obj.redactType) {\n            case 'blur':\n                redactDetails.blurIntensity = obj.redactBlur;\n                break;\n            case 'pixelate':\n                redactDetails.pixelSize = obj.redactPixelate;\n                break;\n        }\n        return redactDetails;\n    };\n    Shape.prototype.getObjDetails = function (obj) {\n        var parent = this.parent;\n        var shapeDetails = {};\n        shapeDetails.id = obj.currIndex;\n        shapeDetails.type = parent.toPascalCase(obj.shape);\n        shapeDetails.startX = obj.activePoint.startX;\n        shapeDetails.startY = obj.activePoint.startY;\n        shapeDetails.index = obj.order;\n        switch (obj.shape) {\n            case 'rectangle':\n                shapeDetails.width = obj.activePoint.width;\n                shapeDetails.height = obj.activePoint.height;\n                shapeDetails.strokeColor = obj.strokeSettings.strokeColor;\n                shapeDetails.fillColor = obj.strokeSettings.fillColor;\n                shapeDetails.strokeWidth = obj.strokeSettings.strokeWidth;\n                shapeDetails.degree = obj.rotatedAngle * (180 / Math.PI);\n                break;\n            case 'ellipse':\n                shapeDetails.radius = obj.activePoint.width / 2;\n                shapeDetails.strokeColor = obj.strokeSettings.strokeColor;\n                shapeDetails.fillColor = obj.strokeSettings.fillColor;\n                shapeDetails.strokeWidth = obj.strokeSettings.strokeWidth;\n                shapeDetails.radiusX = obj.activePoint.width / 2;\n                shapeDetails.radiusY = obj.activePoint.height / 2;\n                shapeDetails.degree = obj.rotatedAngle * (180 / Math.PI);\n                break;\n            case 'line':\n            case 'arrow':\n                shapeDetails.length = obj.activePoint.width;\n                shapeDetails.strokeColor = obj.strokeSettings.strokeColor;\n                shapeDetails.strokeWidth = obj.strokeSettings.strokeWidth;\n                shapeDetails.endX = obj.activePoint.endX;\n                shapeDetails.endY = obj.activePoint.endY;\n                if (obj.shape === 'arrow') {\n                    var arrowObj = { type: null };\n                    parent.notify('selection', { prop: 'getArrowType', onPropertyChange: false, value: { type: obj.start, obj: arrowObj } });\n                    shapeDetails.arrowHead = arrowObj['type'];\n                    parent.notify('selection', { prop: 'getArrowType', onPropertyChange: false, value: { type: obj.end, obj: arrowObj } });\n                    shapeDetails.arrowTail = arrowObj['type'];\n                }\n                break;\n            case 'text':\n                shapeDetails.text = obj.keyHistory;\n                shapeDetails.fontSize = obj.textSettings.fontSize;\n                shapeDetails.fontFamily = obj.textSettings.fontFamily;\n                shapeDetails.color = obj.strokeSettings.strokeColor;\n                shapeDetails.fontStyle = [];\n                if (obj.textSettings.bold) {\n                    shapeDetails.fontStyle.push('bold');\n                }\n                if (obj.textSettings.italic) {\n                    shapeDetails.fontStyle.push('italic');\n                }\n                shapeDetails.degree = obj.rotatedAngle * (180 / Math.PI);\n                break;\n            case 'path':\n                shapeDetails.strokeColor = obj.strokeSettings.strokeColor;\n                shapeDetails.strokeWidth = obj.strokeSettings.strokeWidth;\n                shapeDetails.points = obj.pointColl;\n                break;\n            case 'image':\n                shapeDetails.imageData = obj.imageCanvas.toDataURL();\n                shapeDetails.degree = obj.rotatedAngle * (180 / Math.PI);\n                shapeDetails.width = obj.activePoint.width;\n                shapeDetails.height = obj.activePoint.height;\n                shapeDetails.opacity = obj.opacity;\n                break;\n        }\n        return shapeDetails;\n    };\n    Shape.prototype.getFreehandDrawDetails = function (index) {\n        var parent = this.parent;\n        var shapeDetails = {};\n        shapeDetails.id = parent.pointColl[index].id;\n        shapeDetails.type = ShapeType.FreehandDraw;\n        shapeDetails.points = extend([], parent.pointColl[index].points);\n        shapeDetails.strokeColor = parent.pointColl[index].strokeColor;\n        shapeDetails.strokeWidth = parent.pointColl[index].strokeWidth;\n        shapeDetails.index = parent.pointColl[index].order;\n        return shapeDetails;\n    };\n    Shape.prototype.getShapeSetting = function (id, obj) {\n        var parent = this.parent;\n        var shapeDetails;\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (parent.textArea.style.display !== 'none') {\n                parent.okBtn(null, true);\n            }\n            else {\n                this.applyActObj(true);\n            }\n            if (id.split('_')[0] === 'shape') {\n                var obj_4;\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    if (parent.objColl[i].currIndex === id) {\n                        obj_4 = extend({}, parent.objColl[i], {}, true);\n                        break;\n                    }\n                }\n                shapeDetails = this.getObjDetails(obj_4);\n            }\n            else if (id.split('_')[0] === 'pen') {\n                shapeDetails = this.getFreehandDrawDetails(parseInt(id.split('_')[1], 10) - 1);\n            }\n        }\n        obj['shapeDetails'] = shapeDetails;\n    };\n    Shape.prototype.getShapeSettings = function (obj) {\n        var parent = this.parent;\n        var shapeDetailsColl = [];\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (parent.textArea.style.display !== 'none') {\n                parent.okBtn(null, true);\n            }\n            else {\n                this.applyActObj(true);\n            }\n            for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                var shapeDetails = this.getObjDetails(parent.objColl[i]);\n                shapeDetailsColl.push(shapeDetails);\n            }\n            for (var i = 0; i < parent.freehandCounter; i++) {\n                var shapeDetails = this.getFreehandDrawDetails(i);\n                shapeDetailsColl.push(shapeDetails);\n            }\n        }\n        obj['shapeDetailsColl'] = shapeDetailsColl;\n    };\n    Shape.prototype.getRedactSettings = function (obj) {\n        var parent = this.parent;\n        var RedactDetailsColl = [];\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (parent.textArea.style.display !== 'none') {\n                parent.okBtn(null, true);\n            }\n            else {\n                this.applyActObj(true);\n            }\n            for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                var redactDetails = this.getRedactObjDetails(parent.objColl[i]);\n                RedactDetailsColl.push(redactDetails);\n            }\n        }\n        obj['shapeDetailsColl'] = RedactDetailsColl;\n    };\n    Shape.prototype.isPointsInRange = function (x, y, obj) {\n        var inRange = false;\n        var parent = this.parent;\n        if (!isNullOrUndefined(x) && !isNullOrUndefined(y) && x >= parent.img.destLeft && y >= parent.img.destTop &&\n            x <= parent.img.destLeft + parent.img.destWidth && y <= parent.img.destTop + parent.img.destHeight) {\n            inRange = true;\n        }\n        obj['inRange'] = inRange;\n    };\n    Shape.prototype.alignRotateFlipColl = function (collection, isRotateFlipCollection, obj) {\n        collection = this.popForDefaultTransformedState(collection);\n        collection = this.popForDefaultFlipState(collection);\n        collection = this.popForDefaultRotateState(collection);\n        if (collection.length === 0 && isRotateFlipCollection) {\n            this.parent.transform.degree = 0;\n            this.parent.transform.currFlipState = '';\n        }\n        obj['collection'] = collection;\n        return collection;\n    };\n    Shape.prototype.popForDefaultTransformedState = function (collection) {\n        var rotateRight = 0;\n        var rotateleft = 0;\n        var horizontal = 0;\n        var vertical = 0;\n        for (var i = 0; i < collection.length; i++) {\n            if (collection[i] === 90 || collection[i] === 'rotateRight') {\n                rotateRight++;\n                rotateleft = 0;\n                horizontal = 0;\n                vertical = 0;\n                if (rotateRight === 4) {\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n            else if (collection[i] === -90 || collection[i] === 'rotateLeft') {\n                rotateleft++;\n                rotateRight = 0;\n                horizontal = 0;\n                vertical = 0;\n                if (rotateleft === 4) {\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n            else if (collection[i] === 'horizontal' || collection[i] === 'Horizontal'\n                || collection[i] === 'horizontalflip') {\n                horizontal++;\n                rotateleft = 0;\n                rotateRight = 0;\n                vertical = 0;\n                if (horizontal === 2) {\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n            else if (collection[i] === 'vertical' || collection[i] === 'Vertical'\n                || collection[i] === 'verticalflip') {\n                vertical++;\n                horizontal = 0;\n                rotateleft = 0;\n                rotateRight = 0;\n                if (vertical === 2) {\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n        }\n        return collection;\n    };\n    Shape.prototype.popForDefaultFlipState = function (collection) {\n        for (var i = 0, iLen = collection.length - 3; i < iLen; i++) {\n            var isHorizontal = collection[i] === 'horizontal' || collection[i] === 'Horizontal'\n                || collection[i] === 'horizontalFlip';\n            var isVertical = collection[i] === 'vertical' || collection[i] === 'Vertical' ||\n                collection[i] === 'verticalFlip';\n            var isNextHorizontal = collection[i + 1] === 'horizontal' || collection[i + 1] === 'Horizontal' ||\n                collection[i + 1] === 'horizontalFlip';\n            var isNextVertical = collection[i + 1] === 'vertical' || collection[i + 1] === 'Vertical' ||\n                collection[i + 1] === 'verticalFlip';\n            var isNextToNextHorizontal = collection[i + 2] === 'horizontal' || collection[i + 2] === 'Horizontal' ||\n                collection[i + 2] === 'horizontalFlip';\n            var isNextToNextVertical = collection[i + 2] === 'vertical' || collection[i + 2] === 'Vertical' ||\n                collection[i + 2] === 'verticalFlip';\n            var isNextToNextToNextHorizontal = collection[i + 3] === 'horizontal' || collection[i + 3] === 'Horizontal' ||\n                collection[i + 3] === 'horizontalFlip';\n            if ((isHorizontal && isNextVertical && isNextToNextHorizontal && isNextToNextVertical) ||\n                (isVertical && isNextHorizontal && isNextToNextVertical && isNextToNextToNextHorizontal)) {\n                collection.splice(i, 4);\n                i -= 4;\n            }\n        }\n        return collection;\n    };\n    Shape.prototype.popForDefaultRotateState = function (collection) {\n        for (var i = 0; i < collection.length - 1; i++) {\n            var curr = collection[i];\n            var next = collection[i + 1];\n            if ((curr === 90 || curr === 'rotateRight') && (next === -90 || next === 'rotateLeft')) {\n                collection.splice(i, 2);\n                i -= 2;\n            }\n            else if ((curr === -90 || curr === 'rotateLeft') && (next === 90 || next === 'rotateRight')) {\n                collection.splice(i, 2);\n                i -= 2;\n            }\n        }\n        return collection;\n    };\n    Shape.prototype.selectShape = function (id, obj) {\n        var parent = this.parent;\n        var isSelected = false;\n        if (!parent.disabled && parent.isImageLoaded) {\n            this.applyActObj();\n            if (id.split('_')[0] === 'shape') {\n                var obj_5;\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    if (parent.objColl[i].currIndex === id) {\n                        obj_5 = extend({}, parent.objColl[i], {}, true);\n                        break;\n                    }\n                }\n                if (isNullOrUndefined(obj_5)) {\n                    isSelected = false;\n                }\n                else {\n                    isSelected = true;\n                    parent.activeObj = obj_5;\n                    var object = { canvasFilter: null };\n                    parent.notify('toolbar', { prop: 'getCanvasFilter', onPropertyChange: false, value: { obj: object } });\n                    this.lowerContext.filter = object['canvasFilter'];\n                    parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false,\n                        value: { obj: parent.activeObj } });\n                    if (parent.activeObj.shape === 'text') {\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'text',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    else if (parent.activeObj.shape === 'pen') {\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'pen',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    else if (parent.activeObj.shape === 'redact') {\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'redact',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    else {\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                    parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n                }\n            }\n            else if (id.split('_')[0] === 'pen') {\n                var object = { bool: false };\n                parent.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: object } });\n                if (object['bool']) {\n                    parent.okBtn(null, true);\n                }\n                var obj_6 = { isIndex: false };\n                parent.notify('freehand-draw', { prop: 'isFHDIdx', value: { index: parseInt(id.split('_')[1], 10) - 1, obj: obj_6 } });\n                if (obj_6['isIndex']) {\n                    isSelected = true;\n                    parent.notify('freehand-draw', { prop: 'selectFhd', value: { id: id } });\n                    parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: true } });\n                    parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                }\n                else {\n                    isSelected = false;\n                }\n            }\n        }\n        obj['isSelected'] = isSelected;\n    };\n    Shape.prototype.deleteShape = function (id) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (parent.activeObj.currIndex && parent.activeObj.currIndex === id) {\n                parent.notify('selection', { prop: 'deleteItem', onPropertyChange: false });\n            }\n            else {\n                this.applyActObj();\n                if (id.split('_')[0] === 'shape') {\n                    for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                        if (parent.objColl[i].currIndex === id) {\n                            parent.objColl.splice(i, 1);\n                            break;\n                        }\n                    }\n                }\n                else if (id.split('_')[0] === 'pen') {\n                    parent.notify('freehand-draw', { prop: 'handle-freehand-draw', value: { id: id } });\n                }\n            }\n            var object = { canvasFilter: null };\n            parent.notify('toolbar', { prop: 'getCanvasFilter', onPropertyChange: false, value: { obj: object } });\n            this.lowerContext.filter = object['canvasFilter'];\n            this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n            parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n        }\n    };\n    Shape.prototype.getMaxText = function (isTextBox, text, obj) {\n        if (isNullOrUndefined(text)) {\n            text = isTextBox ? this.parent.textArea.value : this.parent.activeObj.keyHistory;\n        }\n        var maxi;\n        var rows = text.split('\\n');\n        var maxStr = rows[0].length;\n        var maxText = rows[0];\n        for (var i = 1; i < rows.length; i++) {\n            maxi = rows[i].length;\n            if (maxi > maxStr) {\n                maxText = rows[i];\n                maxStr = maxi;\n            }\n        }\n        if (obj) {\n            obj['maxText'] = maxText;\n        }\n        return maxText;\n    };\n    Shape.prototype.getLinePoints = function (x1, y1, x2, y2) {\n        var points = [];\n        var i;\n        var j;\n        if (x1 === x2) {\n            if (y1 < y2) {\n                i = [x1, y1];\n                j = [x2, y2];\n            }\n            else {\n                j = [x1, y1];\n                i = [x2, y2];\n            }\n            var m = this.getSlope(i, j, true);\n            var b = this.getIntercept(i, m);\n            for (var y = i[1]; y <= j[1]; y++) {\n                var x = m * y + b;\n                points.push({ x: x, y: y });\n            }\n        }\n        else {\n            if (x1 < x2) {\n                i = [x1, y1];\n                j = [x2, y2];\n            }\n            else {\n                j = [x1, y1];\n                i = [x2, y2];\n            }\n            var m = this.getSlope(i, j, false);\n            var b = this.getIntercept(i, m);\n            for (var x = i[0]; x <= j[0]; x++) {\n                var y = m * x + b;\n                points.push({ x: x, y: y });\n            }\n        }\n        if (Math.floor(x1) === Math.floor(x2) || (points.length < 10 && (y2 - y1 > 10 || y1 - y2 > 10))) {\n            points = [];\n            var lesserY = Math.min(y1, y2);\n            for (var i_1 = 0; i_1 < Math.abs(Math.floor(y2) - Math.floor(y1)); i_1++) {\n                points.push({ x: x1, y: lesserY + i_1 });\n            }\n            if (points.length > 1) {\n                var prev = void 0;\n                if (isNullOrUndefined(points[points.length - 2])) {\n                    prev = { x: 0, y: 0 };\n                }\n                else {\n                    prev = points[points.length - 2];\n                }\n                var diffX = points[points.length - 1]['x'] - prev.x;\n                var diffY = points[points.length - 1]['y'] - prev.y;\n                points.push({ x: points[points.length - 1]['x'] + (diffX / 2), y: points[points.length - 1]['y'] + (diffY / 2) });\n            }\n        }\n        else if (Math.floor(y1) === Math.floor(y2) || (points.length < 10 && (x2 - x1 > 10 || x1 - x2 > 10))) {\n            points = [];\n            var lesserX = Math.min(x1, x2);\n            for (var i_2 = 0; i_2 < Math.abs(Math.floor(x2) - Math.floor(x1)); i_2++) {\n                points.push({ x: lesserX + i_2, y: y1 });\n            }\n            if (points.length > 1) {\n                var prev = void 0;\n                if (isNullOrUndefined(points[points.length - 2])) {\n                    prev = { x: 0, y: 0 };\n                }\n                else {\n                    prev = points[points.length - 2];\n                }\n                var diffX = points[points.length - 1]['x'] - prev.x;\n                var diffY = points[points.length - 1]['y'] - prev.y;\n                points.push({ x: points[points.length - 1]['x'] + (diffX / 2), y: points[points.length - 1]['y'] + (diffY / 2) });\n            }\n        }\n        return points;\n    };\n    Shape.prototype.getSlope = function (a, b, isSameAxis) {\n        var slope;\n        if (isSameAxis) {\n            if (a[1] === b[1]) {\n                return null;\n            }\n            slope = (b[0] - a[0]) / (b[1] - a[1]);\n        }\n        else {\n            if (a[0] === b[0]) {\n                return null;\n            }\n            slope = (b[1] - a[1]) / (b[0] - a[0]);\n        }\n        return slope;\n    };\n    Shape.prototype.getIntercept = function (point, getSlope) {\n        if (getSlope === null) {\n            return point[0];\n        }\n        return point[1] - getSlope * point[0];\n    };\n    Shape.prototype.setPointCollForShapeRotation = function (obj) {\n        var parent = this.parent;\n        var _a = obj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY, width = _a.width, height = _a.height;\n        var center = { x: startX + (width / 2), y: startY +\n                (height / 2) };\n        var cosAngle = Math.cos(obj.rotatedAngle);\n        var sinAngle = Math.sin(obj.rotatedAngle);\n        var p1 = { x: cosAngle * (startX - center.x) - sinAngle * (startY - center.y) + center.x,\n            y: sinAngle * (startX - center.x) + cosAngle * (startY - center.y) + center.y };\n        var p2 = { x: cosAngle * (endX - center.x) - sinAngle * (startY - center.y) + center.x,\n            y: sinAngle * (endX - center.x) + cosAngle * (startY - center.y) + center.y };\n        var p3 = { x: cosAngle * (startX - center.x) - sinAngle * (endY - center.y) + center.x,\n            y: sinAngle * (startX - center.x) + cosAngle * (endY - center.y) + center.y };\n        var p4 = { x: cosAngle * (endX - center.x) - sinAngle * (endY - center.y) + center.x,\n            y: sinAngle * (endX - center.x) + cosAngle * (endY - center.y) + center.y };\n        obj.horTopLinePointColl = this.getLinePoints(p1.x, p1.y, p2.x, p2.y);\n        obj.horTopLinePointColl = this.getLinePoints(p1.x, p1.y, p2.x, p2.y);\n        obj.horBottomLinePointColl = this.getLinePoints(p3.x, p3.y, p4.x, p4.y);\n        obj.verLeftLinePointColl = this.getLinePoints(p1.x, p1.y, p3.x, p3.y);\n        obj.verRightLinePointColl = this.getLinePoints(p2.x, p2.y, p4.x, p4.y);\n        obj.verLeftLinePointColl.reverse();\n        obj.verRightLinePointColl.reverse();\n        for (var i = 0; i < obj.horTopLinePointColl.length; i++) {\n            obj.horTopLinePointColl[i].ratioX = (obj.horTopLinePointColl[i].x -\n                this.parent.img.destLeft) / this.parent.img.destWidth;\n            obj.horTopLinePointColl[i].ratioY = (obj.horTopLinePointColl[i].y -\n                this.parent.img.destTop) / this.parent.img.destHeight;\n        }\n        for (var i = 0; i < obj.horBottomLinePointColl.length; i++) {\n            obj.horBottomLinePointColl[i].ratioX = (obj.horBottomLinePointColl[i].x -\n                this.parent.img.destLeft) / this.parent.img.destWidth;\n            obj.horBottomLinePointColl[i].ratioY = (obj.horBottomLinePointColl[i].y -\n                this.parent.img.destTop) / this.parent.img.destHeight;\n        }\n        for (var i = 0; i < obj.verLeftLinePointColl.length; i++) {\n            obj.verLeftLinePointColl[i].ratioX = (obj.verLeftLinePointColl[i].x -\n                this.parent.img.destLeft) / this.parent.img.destWidth;\n            obj.verLeftLinePointColl[i].ratioY = (obj.verLeftLinePointColl[i].y -\n                this.parent.img.destTop) / this.parent.img.destHeight;\n        }\n        for (var i = 0; i < obj.verRightLinePointColl.length; i++) {\n            obj.verRightLinePointColl[i].ratioX = (obj.verRightLinePointColl[i].x -\n                this.parent.img.destLeft) / this.parent.img.destWidth;\n            obj.verRightLinePointColl[i].ratioY = (obj.verRightLinePointColl[i].y -\n                this.parent.img.destTop) / this.parent.img.destHeight;\n        }\n        if (parent.upperCanvas.style.cursor !== 'move') {\n            var object = { rotationCirclePoint: null };\n            parent.notify('selection', { prop: 'getTransRotationPoint', value: { obj: obj, object: object } });\n            var rotationCirclePoint = object['rotationCirclePoint'];\n            if (rotationCirclePoint) {\n                obj.rotationCirclePointColl = { x: cosAngle * (rotationCirclePoint.x - center.x) -\n                        sinAngle * (rotationCirclePoint.y - center.y) + center.x,\n                    y: sinAngle * (rotationCirclePoint.x - center.x) + cosAngle\n                        * (rotationCirclePoint.y - center.y) + center.y };\n                obj.rotationCirclePointColl.ratioX = (obj.rotationCirclePointColl.x - parent.img.destLeft) /\n                    parent.img.destWidth;\n                obj.rotationCirclePointColl.ratioY = (obj.rotationCirclePointColl.y - parent.img.destTop) /\n                    parent.img.destHeight;\n            }\n        }\n    };\n    Shape.prototype.getSquarePointForRotatedShape = function (obj, object) {\n        var point = { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 };\n        var _a = obj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY, width = _a.width, height = _a.height;\n        var center = { x: startX + (width / 2), y: startY + (height / 2) };\n        var cosAngle = Math.cos(obj.rotatedAngle);\n        var sinAngle = Math.sin(obj.rotatedAngle);\n        var p1 = { x: cosAngle * (startX - center.x) - sinAngle * (startY - center.y) + center.x,\n            y: sinAngle * (startX - center.x) + cosAngle * (startY - center.y) + center.y };\n        var p2 = { x: cosAngle * (endX - center.x) - sinAngle * (startY - center.y) + center.x,\n            y: sinAngle * (endX - center.x) + cosAngle * (startY - center.y) + center.y };\n        var p3 = { x: cosAngle * (startX - center.x) - sinAngle * (endY - center.y) + center.x,\n            y: sinAngle * (startX - center.x) + cosAngle * (endY - center.y) + center.y };\n        var p4 = { x: cosAngle * (endX - center.x) - sinAngle * (endY - center.y) + center.x,\n            y: sinAngle * (endX - center.x) + cosAngle * (endY - center.y) + center.y };\n        point.startX = p1.x;\n        point.startY = p1.y;\n        point.endX = p1.x;\n        point.endY = p1.y;\n        if (point.startX > p2.x) {\n            point.startX = p2.x;\n        }\n        if (point.startX > p3.x) {\n            point.startX = p3.x;\n        }\n        if (point.startX > p4.x) {\n            point.startX = p4.x;\n        }\n        if (point.startY > p2.y) {\n            point.startY = p2.y;\n        }\n        if (point.startY > p3.y) {\n            point.startY = p3.y;\n        }\n        if (point.startY > p4.y) {\n            point.startY = p4.y;\n        }\n        if (point.endX < p2.x) {\n            point.endX = p2.x;\n        }\n        if (point.endX < p3.x) {\n            point.endX = p3.x;\n        }\n        if (point.endX < p4.x) {\n            point.endX = p4.x;\n        }\n        if (point.endY < p2.y) {\n            point.endY = p2.y;\n        }\n        if (point.endY < p3.y) {\n            point.endY = p3.y;\n        }\n        if (point.endY < p4.y) {\n            point.endY = p4.y;\n        }\n        point.width = point.endX - point.startX;\n        point.height = point.endY - point.startY;\n        if (object) {\n            object['activePoint'] = point;\n        }\n        return point;\n    };\n    Shape.prototype.updateZOrder = function (obj, value) {\n        var parent = this.parent;\n        value = value.toLowerCase();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var object = obj;\n        if (isNullOrUndefined(object.order)) {\n            return;\n        }\n        var index;\n        var prevIndex;\n        var highestOrder = this.getHighestOrder();\n        this.updateShapeColl();\n        if (parent.shapeColl.length === 0) {\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var coll;\n        for (var i = 0; i < parent.shapeColl.length; i++) {\n            coll = parent.shapeColl[i];\n            if (object.id && object.id.indexOf('pen') > -1) {\n                if (coll.id && coll.id === object.id) {\n                    parent.shapeColl.splice(i, 1);\n                }\n            }\n            else if (coll.shape && coll.shape.indexOf('crop-') > -1) {\n                parent.shapeColl.splice(i, 1);\n            }\n        }\n        switch (value) {\n            case 'sendtoback':\n                prevIndex = object.order;\n                index = object.order;\n                object.order = 1;\n                break;\n            case 'sendbackward':\n                object.order -= 1;\n                index = object.order;\n                break;\n            case 'bringtofront':\n                prevIndex = object.order;\n                index = highestOrder;\n                object.order = index;\n                break;\n            case 'bringforward':\n                object.order += 1;\n                index = object.order;\n                break;\n        }\n        this.reArrangeObjColl(index, value, prevIndex);\n        if (object.id && object.id.indexOf('pen') > -1) {\n            this.reUpdateShapeColl(object);\n        }\n    };\n    Shape.prototype.reArrangeObjColl = function (index, value, prevIndex) {\n        var parent = this.parent;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var obj;\n        switch (value) {\n            case 'sendtoback':\n                for (var i = 0, len = parent.shapeColl.length; i < len; i++) {\n                    obj = parent.shapeColl[i];\n                    if (obj.order < prevIndex && obj.order <= index) {\n                        obj.order += 1;\n                        this.reUpdateShapeColl(obj);\n                    }\n                }\n                break;\n            case 'sendbackward':\n                for (var i = 0, len = parent.shapeColl.length; i < len; i++) {\n                    obj = parent.shapeColl[i];\n                    if (obj.order === index) {\n                        obj.order += 1;\n                        this.reUpdateShapeColl(obj);\n                        break;\n                    }\n                }\n                break;\n            case 'bringtofront':\n                for (var i = 0, len = parent.shapeColl.length; i < len; i++) {\n                    obj = parent.shapeColl[i];\n                    if (obj.order > prevIndex && obj.order <= index) {\n                        obj.order -= 1;\n                        this.reUpdateShapeColl(obj);\n                    }\n                }\n                break;\n            case 'bringforward':\n                for (var i = 0, len = parent.shapeColl.length; i < len; i++) {\n                    obj = parent.shapeColl[i];\n                    if (obj.order === index) {\n                        obj.order -= 1;\n                        this.reUpdateShapeColl(obj);\n                        break;\n                    }\n                }\n                break;\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Shape.prototype.reorderRedact = function (tempObjColl) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var nonRedact = tempObjColl.filter(function (item) { return item.shape !== 'redact'; });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var redact = tempObjColl.filter(function (item) { return item.shape === 'redact'; });\n        return redact.concat(nonRedact);\n    };\n    Shape.prototype.updateShapeColl = function () {\n        var parent = this.parent;\n        var isOrdered = false;\n        var tempOrder = 1;\n        var tempObjColl = extend([], parent.objColl, [], true);\n        tempObjColl = this.reorderRedact(tempObjColl);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var tempPointColl = extend([], parent.pointColl, [], true);\n        if (parent.shapeColl.length > 0 &&\n            parent.shapeColl.length === parent.objColl.length + parent.pointColl.length) {\n            for (var i = 0; i < parent.shapeColl.length; i++) {\n                if (parent.shapeColl[i].order === tempOrder) {\n                    isOrdered = true;\n                    tempOrder++;\n                }\n                else {\n                    isOrdered = false;\n                    break;\n                }\n            }\n            if (isOrdered) {\n                for (var i = 0; i < parent.shapeColl.length; i++) {\n                    if (parent.shapeColl[i].currIndex &&\n                        parent.shapeColl[i].currIndex.indexOf('shape') > -1) {\n                        for (var j = 0; j < tempObjColl.length; j++) {\n                            if (parent.shapeColl[i].currIndex === tempObjColl[j].currIndex) {\n                                parent.shapeColl[i] = extend({}, tempObjColl[j], {}, true);\n                                tempObjColl.splice(j, 1);\n                                break;\n                            }\n                        }\n                    }\n                    else if (parent.shapeColl[i].id && parent.shapeColl[i].id.indexOf('pen') > -1) {\n                        for (var j = 0; j < tempPointColl.length; j++) {\n                            if (parent.shapeColl[i].id === tempPointColl[j].id) {\n                                parent.shapeColl[i] = extend([], tempPointColl[j], [], true);\n                                tempPointColl.splice(j, 1);\n                                break;\n                            }\n                        }\n                    }\n                }\n                return;\n            }\n        }\n        tempObjColl = extend([], parent.objColl, [], true);\n        tempPointColl = extend([], parent.pointColl, [], true);\n        parent.shapeColl = [];\n        var order = 1;\n        var isBreak;\n        var isCrop = false;\n        while (tempObjColl.length !== 0 || tempPointColl.length !== 0) {\n            isBreak = isCrop = false;\n            for (var i = 0; i < tempObjColl.length; i++) {\n                if (tempObjColl[i].order === order ||\n                    (!tempObjColl[i].order && tempObjColl[i].shape &&\n                        tempObjColl[i].shape.indexOf('crop-') > -1)) {\n                    parent.shapeColl.push(extend({}, tempObjColl[i], {}, true));\n                    if (tempObjColl[i].shape && tempObjColl[i].shape.indexOf('crop-') > -1) {\n                        isCrop = true;\n                    }\n                    tempObjColl.splice(i, 1);\n                    isBreak = true;\n                    break;\n                }\n            }\n            if (!isBreak) {\n                for (var i = 0; i < tempPointColl.length; i++) {\n                    if (tempPointColl[i].order === order) {\n                        parent.shapeColl.push(extend([], tempPointColl[i], [], true));\n                        tempPointColl.splice(i, 1);\n                        isBreak = true;\n                        break;\n                    }\n                }\n            }\n            if (!isCrop) {\n                order++;\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Shape.prototype.reUpdateShapeColl = function (obj) {\n        var parent = this.parent;\n        if (obj.id && obj.id.indexOf('pen') > -1) {\n            if (parent.freehandCounter > 0) {\n                for (var i = 0; i < parent.freehandCounter; i++) {\n                    if (parent.pointColl[i].id === obj.id) {\n                        parent.pointColl[i].order = obj.order;\n                    }\n                }\n            }\n        }\n        else if (obj.currIndex && obj.currIndex.indexOf('shape') > -1) {\n            for (var i = 0; i < parent.objColl.length; i++) {\n                if (parent.objColl[i].currIndex === obj.currIndex) {\n                    parent.objColl[i].order = obj.order;\n                }\n            }\n        }\n    };\n    Shape.prototype.drawAnnotations = function (ctx, shape, pen, isPreventApply, x, y, panRegion) {\n        var parent = this.parent;\n        var activeObj = extend({}, parent.activeObj, {}, true);\n        var tempObjColl = extend([], parent.objColl, [], true);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var tempPointColl = extend([], parent.pointColl, [], true);\n        var tempSelPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: tempSelPointCollObj } });\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        this.updateShapeColl();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var tempShapeColl = extend([], parent.shapeColl, [], true);\n        tempShapeColl = this.reorderRedact(tempShapeColl);\n        var isPrevented = false;\n        if (!this.preventFrameAnnotation) {\n            this.preventFrameAnnotation = isPrevented = true;\n        }\n        for (var i = 0; i < tempShapeColl.length; i++) {\n            var isPenId = tempShapeColl[i].id;\n            if ((tempShapeColl[i].order) ||\n                (!tempShapeColl[i].order && tempShapeColl[i].shape && tempShapeColl[i].shape.indexOf('crop-') > -1) ||\n                (!tempShapeColl[i].order && tempShapeColl[i].shape === 'path' && parent.drawingShape === 'path')) {\n                if (tempShapeColl[i].currIndex && tempShapeColl[i].currIndex.indexOf('shape') > -1) {\n                    parent.objColl = [];\n                    parent.objColl.push(extend({}, tempShapeColl[i], {}, true));\n                    if (shape === 'iterate') {\n                        var temp = this.lowerContext.filter;\n                        this.lowerContext.filter = 'none';\n                        this.iterateObjColl();\n                        this.lowerContext.filter = temp;\n                    }\n                    else if (shape === 'zoom' || shape === 'pan') {\n                        var tempObjCollIndex = -1;\n                        for (var i_3 = 0; i_3 < tempObjColl.length; i_3++) {\n                            if (JSON.stringify(tempObjColl[i_3]) === JSON.stringify(parent.objColl[0])) {\n                                tempObjCollIndex = i_3;\n                                break;\n                            }\n                        }\n                        if (shape === 'zoom') {\n                            this.zoomObjColl(isPreventApply);\n                        }\n                        else {\n                            this.panObjColl(x, y, panRegion);\n                        }\n                        if (tempObjCollIndex > -1) {\n                            tempObjColl[tempObjCollIndex] = extend({}, parent.objColl[0], {}, true);\n                        }\n                    }\n                }\n                else if (tempShapeColl[i].id && tempShapeColl[i].id.indexOf('pen') > -1) {\n                    parent.pointColl = [];\n                    parent.freehandCounter = 0;\n                    parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false, value: { obj: { selPointColl: [] } } });\n                    parent.pointColl.push(extend({}, tempShapeColl[i], {}, true));\n                    parent.notify('freehand-draw', { prop: 'pushSelPointColl', onPropertyChange: false,\n                        value: { obj: { selPointColl: selPointCollObj['selPointColl'][i] } } });\n                    parent.freehandCounter = parent.pointColl.length;\n                    if (pen === 'iterate') {\n                        parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                            value: { context: ctx, points: null } });\n                    }\n                    else if (pen === 'zoom' || pen === 'pan') {\n                        if (pen === 'zoom') {\n                            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false,\n                                value: { isPreventApply: isPreventApply } });\n                        }\n                        else {\n                            parent.notify('freehand-draw', { prop: 'panFHDColl', onPropertyChange: false,\n                                value: { xDiff: x, yDiff: y, panRegion: panRegion } });\n                        }\n                        for (var i_4 = 0; i_4 < tempPointColl.length; i_4++) {\n                            if (tempPointColl[i_4].id === parent.pointColl[0].id) {\n                                tempPointColl[i_4] = extend({}, parent.pointColl[0], {}, true);\n                                break;\n                            }\n                        }\n                        for (var i_5 = 0, len = tempSelPointCollObj['selPointColl'].length; i_5 < len; i_5++) {\n                            if (tempSelPointCollObj['selPointColl'][i_5].id === selPointCollObj['selPointColl'][i_5].id) {\n                                tempSelPointCollObj['selPointColl'][i_5] = extend({}, selPointCollObj['selPointColl'][i_5], {}, true);\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n            else if ((!tempShapeColl[i].shape && !isPenId) ||\n                (!tempShapeColl[i].currIndex && !isPenId)) {\n                tempShapeColl.splice(i, 1);\n            }\n        }\n        if (pen && pen === 'zoom') {\n            parent.pointColl = [];\n            parent.freehandCounter = 0;\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: isPreventApply } });\n        }\n        parent.objColl = tempObjColl;\n        parent.pointColl = tempPointColl;\n        parent.freehandCounter = parent.pointColl.length;\n        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false, value: { obj: { selPointColl: tempSelPointCollObj['selPointColl'] } } });\n        if (isPrevented && this.preventFrameAnnotation) {\n            parent.notify('draw', { prop: 'applyFrame', value: { ctx: this.lowerContext, frame: parent.frameObj.type, preventImg: true } });\n            this.preventFrameAnnotation = false;\n        }\n        parent.activeObj = activeObj;\n    };\n    return Shape;\n}());\nexport { Shape };\n","/* eslint-disable prefer-const */\nimport { Browser, extend, getComponent, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Direction } from '../index';\nimport { hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nvar Transform = /** @class */ (function () {\n    function Transform(parent) {\n        this.isReverseFlip = false; // True when rotate method is called from iteration\n        this.disablePan = false; // auto enable / disable pan while zooming\n        this.isReverseRotate = false; // True when rotate method is called from iteration\n        this.flipColl = []; // To store flip order\n        this.prevZoomValue = 1;\n        this.cropDimension = { width: 0, height: 0 };\n        this.isPreventSelect = false;\n        this.preventDownScale = false;\n        this.resizedImgAngle = null;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Transform.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Transform.prototype.addEventListener = function () {\n        this.parent.on('transform', this.transform, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Transform.prototype.removeEventListener = function () {\n        this.parent.off('transform', this.transform);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Transform.prototype.transform = function (args) {\n        this.initTransformPvtVar();\n        switch (args.prop) {\n            case 'flipImage':\n                this.flipImage(args.value['direction']);\n                break;\n            case 'setDestPointsForFlipState':\n                this.setDestPointsForFlipState();\n                break;\n            case 'zoomAction':\n                this.zoomAction(args.value['zoomFactor'], args.value['zoomPoint'], args.value['isResize']);\n                break;\n            case 'disableZoomOutBtn':\n                this.disableZoomOutBtn(args.value['isZoomOut']);\n                break;\n            case 'rotatedFlip':\n                this.rotatedFlip();\n                break;\n            case 'drawPannedImage':\n                this.drawPannedImage(args.value['xDiff'], args.value['yDiff']);\n                break;\n            case 'drawPannImage':\n                this.drawPannImage(args.value['point']);\n                break;\n            case 'performTransformation':\n                this.performTransformation(args.value['text']);\n                break;\n            case 'updateTransform':\n                this.updateTransform(args.value['text']);\n                break;\n            case 'rotatePan':\n                this.rotatePan(args.value['isCropSelection'], args.value['isDefaultZoom']);\n                break;\n            case 'resetZoom':\n                this.resetZoom();\n                break;\n            case 'pan':\n                this.pan(args.value['value'], args.value['x'], args.value['y']);\n                break;\n            case 'zoom':\n                this.zoom(args.value['zoomFactor'], args.value['zoomPoint']);\n                break;\n            case 'setCurrPanRegion':\n                this.setCurrPanRegion(args.value['region'], args.value['type'], args.value['obj']);\n                break;\n            case 'rotate':\n                this.rotate(args.value['degree'], args.value['obj']);\n                break;\n            case 'flip':\n                this.flip(args.value['direction']);\n                break;\n            case 'update':\n                this.update();\n                break;\n            case 'calcMaxDimension':\n                this.calcMaxDimension(args.value['width'], args.value['height'], args.value['obj'], args.value['isImgShape']);\n                break;\n            case 'getPanMove':\n                args.value['obj']['panMove'] = this.panMove;\n                break;\n            case 'setPanMove':\n                this.panMove = args.value['point'];\n                break;\n            case 'getTempPanMove':\n                args.value['obj']['tempPanMove'] = this.tempPanMove;\n                break;\n            case 'setTempPanMove':\n                this.tempPanMove = args.value['point'];\n                break;\n            case 'setReverseFlip':\n                this.isReverseFlip = args.value['isReverseFlip'];\n                break;\n            case 'setDisablePan':\n                this.disablePan = args.value['bool'];\n                break;\n            case 'setCurrDestinationPoint':\n                this.currDestPoint = args.value['point'];\n                this.currDestPoint.startX -= this.parent.cropObj.totalPannedPoint.x;\n                this.currDestPoint.startY -= this.parent.cropObj.totalPannedPoint.y;\n                break;\n            case 'setReverseRotate':\n                this.isReverseRotate = args.value['bool'];\n                break;\n            case 'getFlipColl':\n                args.value['obj']['flipColl'] = this.flipColl;\n                break;\n            case 'setFlipColl':\n                this.flipColl = args.value['flipColl'];\n                break;\n            case 'getPreviousZoomValue':\n                args.value['obj']['previousZoomValue'] = this.prevZoomValue;\n                break;\n            case 'setPreviousZoomValue':\n                this.prevZoomValue = args.value['previousZoomValue'];\n                break;\n            case 'getCropDimension':\n                args.value['obj']['cropDimension'] = this.cropDimension;\n                break;\n            case 'setCropDimension':\n                this.cropDimension.width = args.value['width'];\n                this.cropDimension.height = args.value['height'];\n                break;\n            case 'getPreventSelect':\n                args.value['obj']['bool'] = this.isPreventSelect;\n                break;\n            case 'setPreventSelect':\n                this.isPreventSelect = args.value['bool'];\n                break;\n            case 'resizeImage':\n                this.resizeImage(args.value['width'], args.value['height']);\n                break;\n            case 'resizeCrop':\n                this.resizeCrop(args.value['width'], args.value['height']);\n                break;\n            case 'updateResize':\n                this.updateResize();\n                break;\n            case 'resize':\n                this.resize(args.value['width'], args.value['height'], args.value['isAspectRatio']);\n                break;\n            case 'straightenImage':\n                this.straightenImage(args.value['degree']);\n                break;\n            case 'reset':\n                this.reset();\n                break;\n            case 'cropZoom':\n                args.value['obj']['maxDimension'] = this.cropZoom(args.value['value'], args.value['selectionObj']);\n                break;\n            case 'setResizedImgAngle':\n                this.resizedImgAngle = args.value['angle'];\n                break;\n        }\n    };\n    Transform.prototype.getModuleName = function () {\n        return 'transform';\n    };\n    Transform.prototype.initTransformPvtVar = function () {\n        if (this.parent.lowerCanvas) {\n            this.lowerContext = this.parent.lowerCanvas.getContext('2d');\n        }\n        if (this.parent.upperCanvas) {\n            this.upperContext = this.parent.upperCanvas.getContext('2d');\n        }\n    };\n    Transform.prototype.reset = function () {\n        this.zoomBtnHold = null;\n        this.tempPanMove = null;\n        this.panMove = null;\n        this.disablePan = false;\n        this.currDestPoint = null;\n        this.isReverseRotate = false;\n        this.flipColl = [];\n        this.resizedImgAngle = null;\n        this.transCurrObj = null;\n        this.prevZoomValue = 1;\n        this.isPreventSelect = this.preventDownScale = false;\n    };\n    Transform.prototype.rotateImage = function (degree) {\n        var parent = this.parent;\n        var transitionArgs = { cancel: false, previousDegree: parent.transform.degree,\n            currentDegree: Math.abs(parent.transform.degree + degree) === 360 ? 0 : parent.transform.degree + degree };\n        if (!this.isPreventSelect) {\n            parent.trigger('rotating', transitionArgs);\n            parent.editCompleteArgs = transitionArgs;\n        }\n        this.rotateEvent(transitionArgs, degree);\n    };\n    Transform.prototype.rotateEvent = function (transitionArgs, degree) {\n        var parent = this.parent;\n        if (!transitionArgs.cancel) {\n            var prevObj = void 0;\n            if (isNullOrUndefined(this.transCurrObj)) {\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                prevObj = object['currObj'];\n                prevObj.objColl = extend([], parent.objColl, null, true);\n                prevObj.pointColl = extend({}, parent.pointColl, null, true);\n                prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n                var selPointCollObj = { selPointColl: null };\n                parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false, value: { obj: selPointCollObj } });\n                prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            }\n            parent.afterCropActions.push(degree === 90 ? 'rotateRight' : 'rotateLeft');\n            var splitWords = [];\n            var activeObjShape = void 0;\n            if (parent.activeObj.activePoint && parent.activeObj.shape) {\n                if (parent.activeObj.shape !== undefined) {\n                    splitWords = parent.activeObj.shape.split('-');\n                }\n                if (parent.currObjType.isCustomCrop || splitWords[0] === 'crop') {\n                    activeObjShape = parent.currObjType.isCustomCrop ? 'custom' : splitWords[1];\n                    parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n                    parent.objColl.push(parent.activeObj);\n                    parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                }\n            }\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: true } });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            this.drawRotatedImage(degree);\n            parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n            parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n            parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n            if (parent.isCircleCrop) {\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            }\n            if (activeObjShape) {\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n                parent.objColl.pop();\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n            }\n            parent.isUndoRedo = false;\n            var obj = { collection: parent.rotateFlipColl };\n            parent.notify('shape', { prop: 'alignRotateFlipColl', onPropertyChange: false,\n                value: { collection: parent.rotateFlipColl, isRotateFlipCollection: true, obj: obj } });\n            parent.rotateFlipColl = obj['collection'];\n            if (parent.cropObj.activeObj.shape && !this.isPreventSelect) {\n                parent.notify('draw', { prop: 'setIsCropSelect', value: { bool: true } });\n                this.isPreventSelect = true;\n                parent.notify('draw', { prop: 'select', onPropertyChange: false,\n                    value: { type: 'custom', startX: null, startY: null, width: null, height: null } });\n                this.isPreventSelect = false;\n                parent.setProperties({ zoomSettings: { zoomFactor: 1 } }, true);\n                this.prevZoomValue = parent.zoomSettings.zoomFactor;\n            }\n        }\n        else {\n            parent.notify('draw', { prop: 'setCurrentObj', onPropertyChange: false, value: { obj: parent.prevEventObjPoint } });\n            parent.activeObj = parent.prevEventSelectionPoint;\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n        }\n    };\n    Transform.prototype.drawRotatedImage = function (degree) {\n        var parent = this.parent;\n        if (degree === 0) {\n            parent.transform.degree = 0;\n        }\n        else {\n            parent.transform.degree += degree;\n        }\n        if (Math.abs(parent.transform.degree) === 360) {\n            parent.transform.degree = 0;\n        }\n        parent.notify('draw', { prop: 'setDestPoints', onPropertyChange: false });\n        var tempObjColl = extend([], parent.objColl, [], true);\n        var tempActiveObj = extend({}, parent.activeObj, {}, true);\n        parent.objColl = [];\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        if (!this.isReverseRotate) {\n            parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n        }\n        this.rotateDegree(degree);\n        if (!this.isReverseRotate) {\n            parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                value: { type: 'reverse', isPreventDestination: null, isRotatePan: null } });\n            parent.rotateFlipColl.push(degree);\n        }\n        parent.objColl = extend([], tempObjColl, [], true);\n        parent.activeObj = extend({}, tempActiveObj, {}, true);\n        if (parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        parent.notify('shape', { prop: 'redrawObj', onPropertyChange: false, value: { degree: degree } });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        if (degree > 0) {\n            parent.notify('freehand-draw', { prop: 'rotateFhdColl', onPropertyChange: false });\n        }\n        else {\n            for (var i = 0; i < 3; i++) {\n                parent.notify('freehand-draw', { prop: 'rotateFhdColl', onPropertyChange: false });\n            }\n        }\n        parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n            value: { context: this.lowerContext, points: null } });\n        this.updateCurrSelectionPoint(degree);\n    };\n    Transform.prototype.rotateDegree = function (degree) {\n        var parent = this.parent;\n        this.lowerContext.save();\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.lowerContext.translate(parent.lowerCanvas.width / 2, parent.lowerCanvas.height / 2);\n        this.lowerContext.rotate(Math.PI / 180 * degree);\n        this.lowerContext.translate(-parent.lowerCanvas.width / 2, -parent.lowerCanvas.height / 2);\n        var temp = this.lowerContext.filter;\n        parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n        this.lowerContext.filter = temp;\n        this.lowerContext.translate(parent.lowerCanvas.width / 2, parent.lowerCanvas.height / 2);\n        this.lowerContext.rotate(Math.PI / 180 * -degree);\n        this.lowerContext.translate(-parent.lowerCanvas.width / 2, -parent.lowerCanvas.height / 2);\n        this.lowerContext.restore();\n    };\n    Transform.prototype.updateCurrSelectionPoint = function (degree) {\n        var parent = this.parent;\n        if (parent.currSelectionPoint && this.currDestPoint) {\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            var objColl = extend([], parent.objColl, [], true);\n            var srcPoints = { startX: parent.img.srcLeft, startY: parent.img.srcTop, width: parent.img.srcWidth,\n                height: parent.img.srcHeight };\n            var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                height: parent.img.destHeight };\n            parent.objColl = [];\n            parent.objColl.push(extend({}, parent.currSelectionPoint, {}, true));\n            parent.img = { srcLeft: 0, srcTop: 0, srcWidth: parent.baseImgCanvas.width, srcHeight: parent.baseImgCanvas.height,\n                destLeft: this.currDestPoint.startX, destTop: this.currDestPoint.startY, destWidth: this.currDestPoint.width,\n                destHeight: this.currDestPoint.height };\n            if (typeof (degree) === 'number') {\n                parent.notify('draw', { prop: 'setDestPoints', onPropertyChange: false });\n                parent.notify('draw', { prop: 'setClientTransDim', onPropertyChange: false,\n                    value: { isPreventDimension: null } });\n            }\n            parent.notify('shape', { prop: 'redrawObj', onPropertyChange: false, value: { degree: degree } });\n            parent.currSelectionPoint = extend({}, parent.objColl[0], {}, true);\n            this.currDestPoint = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                height: parent.img.destHeight };\n            parent.objColl = objColl;\n            parent.activeObj = activeObj;\n            parent.img = { srcLeft: srcPoints.startX, srcTop: srcPoints.startY, srcWidth: srcPoints.width, srcHeight: srcPoints.height,\n                destLeft: destPoints.startX, destTop: destPoints.startY, destWidth: destPoints.width, destHeight: destPoints.height };\n        }\n    };\n    Transform.prototype.flipImage = function (direction) {\n        var parent = this.parent;\n        var transitionArgs = { direction: direction, cancel: false,\n            previousDirection: parent.toPascalCase(parent.transform.currFlipState || direction) };\n        if (!this.isPreventSelect) {\n            parent.trigger('flipping', transitionArgs);\n            parent.editCompleteArgs = transitionArgs;\n        }\n        this.flipEvent(transitionArgs, direction);\n    };\n    Transform.prototype.flipEvent = function (transitionArgs, direction) {\n        var parent = this.parent;\n        if (transitionArgs.cancel) {\n            parent.notify('draw', { prop: 'setCurrentObj', onPropertyChange: false, value: { obj: parent.prevEventObjPoint } });\n            parent.activeObj = parent.prevEventSelectionPoint;\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n            return;\n        }\n        var prevObj;\n        if (isNullOrUndefined(this.transCurrObj)) {\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            prevObj = object['currObj'];\n            prevObj.objColl = extend([], parent.objColl, null, true);\n            prevObj.pointColl = extend({}, parent.pointColl, null, true);\n            prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        }\n        parent.afterCropActions.push(direction.toLowerCase() === 'horizontal' ? 'horizontalflip' : 'verticalflip');\n        var splitWords = [];\n        var activeObjShape;\n        if (parent.activeObj.activePoint) {\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.currObjType.isCustomCrop || splitWords[0] === 'crop') {\n                activeObjShape = parent.currObjType.isCustomCrop ? 'custom' : splitWords[1];\n                parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n                parent.objColl.push(parent.activeObj);\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            }\n        }\n        parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n            value: { x: null, y: null, isMouseDown: true } });\n        parent.clearContext(this.lowerContext);\n        parent.clearContext(this.upperContext);\n        var tempObjColl = extend([], parent.objColl, [], true);\n        var tempActiveObj = extend({}, parent.activeObj, {}, true);\n        parent.objColl = [];\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        if (!this.isReverseFlip) {\n            parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n        }\n        var lowercaseDirection = direction.toLowerCase();\n        this.updateFlipState(lowercaseDirection);\n        var flipState = parent.transform.currFlipState.toLowerCase();\n        parent.transform.currFlipState = (lowercaseDirection === 'horizontal' && flipState === 'horizontal') ||\n            (lowercaseDirection === 'vertical' && flipState === 'vertical') ? '' : lowercaseDirection;\n        var selObj = { isSelected: null };\n        parent.notify('draw', { prop: 'getRotatedFlipCropSelection', onPropertyChange: false, value: { bool: selObj } });\n        if (selObj['isSelected']) {\n            parent.img.destLeft += parent.panPoint.totalPannedInternalPoint.x;\n            parent.img.destTop += parent.panPoint.totalPannedInternalPoint.y;\n        }\n        var temp = this.lowerContext.filter;\n        parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n        this.updateFlipState(direction.toLowerCase());\n        if (!this.isReverseFlip) {\n            parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                value: { type: 'reverse', isPreventDestination: null, isRotatePan: null } });\n            this.updateFlipColl(direction.toLocaleLowerCase());\n            parent.rotateFlipColl.push(direction.toLowerCase());\n        }\n        if (parent.rotateFlipColl.length === 1) {\n            var panObj = { panRegion: '' };\n            parent.notify('crop', { prop: 'getCurrFlipState', onPropertyChange: false,\n                value: { panObj: panObj } });\n            if (panObj['panRegion'] === '') {\n                parent.notify('draw', { prop: 'setClientTransDim', onPropertyChange: false,\n                    value: { isPreventDimension: null } });\n            }\n            else {\n                this.setDestPointsForFlipState();\n            }\n        }\n        if (parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        parent.objColl = extend([], tempObjColl, [], true);\n        parent.activeObj = extend({}, tempActiveObj, {}, true);\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            var flipObjColl = parent.objColl[i].flipObjColl;\n            if (flipObjColl.length === 0) {\n                flipObjColl.push(direction);\n            }\n            else if (flipObjColl[flipObjColl.length - 1] === direction) {\n                flipObjColl.pop();\n            }\n            else {\n                flipObjColl.push(direction);\n            }\n        }\n        parent.notify('shape', { prop: 'redrawObj', onPropertyChange: false, value: { degree: direction.toLowerCase() } });\n        var tempFilter = this.lowerContext.filter;\n        this.lowerContext.filter = 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n            'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n        parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n        var dir = direction.toLowerCase();\n        if (dir === 'horizontal' || dir === 'vertical') {\n            parent.notify('freehand-draw', { prop: 'flipFHDColl', onPropertyChange: false,\n                value: { value: dir } });\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: this.lowerContext, points: null } });\n        }\n        else {\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: this.lowerContext, points: null } });\n        }\n        this.lowerContext.filter = tempFilter;\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        this.updateCurrSelectionPoint(dir);\n        parent.isUndoRedo = false;\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n        if (parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        if (activeObjShape) {\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n            parent.objColl.pop();\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n        }\n        var obj = { collection: parent.rotateFlipColl };\n        parent.notify('shape', { prop: 'alignRotateFlipColl', onPropertyChange: false,\n            value: { collection: parent.rotateFlipColl, isRotateFlipCollection: true, obj: obj } });\n        parent.rotateFlipColl = obj['collection'];\n        if (parent.cropObj.activeObj.shape && !this.isPreventSelect) {\n            parent.notify('draw', { prop: 'setIsCropSelect', value: { bool: true } });\n            this.isPreventSelect = true;\n            parent.notify('draw', { prop: 'select', onPropertyChange: false,\n                value: { type: 'custom', startX: null, startY: null, width: null, height: null } });\n            this.isPreventSelect = false;\n            parent.setProperties({ zoomSettings: { zoomFactor: 1 } }, true);\n            this.prevZoomValue = parent.zoomSettings.zoomFactor;\n        }\n    };\n    Transform.prototype.updateFlipState = function (direction) {\n        var degree = this.parent.transform.degree;\n        if (direction === 'horizontal') {\n            if (degree % 90 === 0 && degree % 180 !== 0) {\n                this.verticalFlip();\n            }\n            else {\n                this.horizontalFlip();\n            }\n        }\n        else if (direction === 'vertical') {\n            if (degree % 90 === 0 && degree % 180 !== 0) {\n                this.horizontalFlip();\n            }\n            else {\n                this.verticalFlip();\n            }\n        }\n    };\n    Transform.prototype.horizontalFlip = function () {\n        this.lowerContext.translate(this.lowerContext.canvas.width, 0);\n        this.lowerContext.scale(-1, 1);\n        this.upperContext.translate(this.upperContext.canvas.width, 0);\n        this.upperContext.scale(-1, 1);\n    };\n    Transform.prototype.verticalFlip = function () {\n        this.lowerContext.translate(0, this.lowerContext.canvas.height);\n        this.lowerContext.scale(1, -1);\n        this.upperContext.translate(0, this.upperContext.canvas.height);\n        this.upperContext.scale(1, -1);\n    };\n    Transform.prototype.updateFlipColl = function (direction) {\n        if (this.isPreventSelect) {\n            return;\n        }\n        if (this.flipColl.length === 0 || this.flipColl[this.flipColl.length - 1] !== direction) {\n            this.flipColl.push(direction);\n        }\n        else {\n            this.flipColl.pop();\n        }\n        if (this.flipColl.length >= 4) {\n            var lastFourItems = this.flipColl.slice(-4);\n            if ((lastFourItems[0] === 'horizontal' && lastFourItems[1] === 'vertical' &&\n                lastFourItems[2] === 'horizontal' && lastFourItems[3] === 'vertical') ||\n                (lastFourItems[0] === 'vertical' && lastFourItems[1] === 'horizontal' &&\n                    lastFourItems[2] === 'vertical' && lastFourItems[3] === 'horizontal')) {\n                this.flipColl.splice(-4);\n            }\n        }\n    };\n    Transform.prototype.setDestPointsForFlipState = function () {\n        var parent = this.parent;\n        var panObj = { panRegion: '' };\n        var _a = parent.img, destLeft = _a.destLeft, destTop = _a.destTop, destWidth = _a.destWidth, destHeight = _a.destHeight;\n        var _b = parent.lowerCanvas, clientWidth = _b.clientWidth, clientHeight = _b.clientHeight;\n        parent.notify('crop', { prop: 'getCurrFlipState', onPropertyChange: false,\n            value: { panObj: panObj } });\n        if (panObj['panRegion'] !== '') {\n            if (panObj['panRegion'] === 'horizontal') {\n                parent.img.destLeft = clientWidth - (destWidth + destLeft);\n            }\n            else if (panObj['panRegion'] === 'vertical') {\n                parent.img.destTop = clientHeight - (destHeight + destTop);\n            }\n            else {\n                parent.img.destLeft = clientWidth - (destWidth + destLeft);\n                parent.img.destTop = clientHeight - (destHeight + destTop);\n            }\n        }\n    };\n    Transform.prototype.zoomAction = function (zoomFactor, zoomPoint, isResize, isPreventApply) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (isNullOrUndefined(isResize) && (parent.zoomSettings.zoomFactor >= parent.zoomSettings.maxZoomFactor && zoomFactor > 0 ||\n                (parent.zoomSettings.zoomFactor > parent.zoomSettings.minZoomFactor && zoomFactor < 0 && this.disableZoomOutBtn(true)) ||\n                (parent.zoomSettings.zoomFactor <= parent.zoomSettings.minZoomFactor && zoomFactor < 0))) {\n                parent.notify('toolbar', { prop: 'zoom-up-handler', onPropertyChange: false });\n                return;\n            }\n            parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n            var tempZoomFactor = zoomFactor;\n            zoomFactor = tempZoomFactor > 0 ? 0.1 : -0.1;\n            for (var i = 0; i < Math.round(Math.abs(tempZoomFactor / 0.1)); i++) {\n                if (this.prevZoomValue === 1) {\n                    this.prevZoomValue += zoomFactor > 0 ? zoomFactor * 10 : (zoomFactor * 10) / 10;\n                }\n                else if (this.prevZoomValue > 1) {\n                    this.prevZoomValue += (zoomFactor * 10);\n                }\n                else if (this.prevZoomValue < 1) {\n                    this.prevZoomValue += (zoomFactor * 10) / 10;\n                    var powerOften = Math.pow(10, 1);\n                    this.prevZoomValue = (Math.round(this.prevZoomValue * powerOften) / powerOften);\n                }\n            }\n            zoomFactor = tempZoomFactor;\n            parent.setProperties({ zoomSettings: { zoomFactor: this.prevZoomValue } }, true);\n            var splitWords = void 0;\n            this.tempActiveObj = null;\n            this.isShape = false;\n            if (parent.activeObj.shape !== undefined) {\n                if (parent.activeObj.shape === 'shape') {\n                    parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                }\n                else {\n                    splitWords = parent.activeObj.shape.split('-');\n                }\n            }\n            if (splitWords !== undefined && splitWords[0] === 'crop') {\n                this.tempActiveObj = extend({}, parent.activeObj, {}, true);\n                parent.isCropTab = true;\n            }\n            else if (parent.activeObj.shape && splitWords[0] !== 'crop' &&\n                (parent.activeObj.activePoint.width !== 0 || parent.activeObj.activePoint.height !== 0) ||\n                (parent.activeObj.shape === 'path' && parent.activeObj.pointColl.length > 0)) {\n                this.isShape = true;\n            }\n            var obj = { zoomType: null };\n            parent.notify('selection', { prop: 'getZoomType', onPropertyChange: false, value: { obj: obj } });\n            if (isNullOrUndefined(zoomPoint)) {\n                if (parent.isCropTab && this.tempActiveObj) {\n                    zoomPoint = { x: parent.activeObj.activePoint.startX + (parent.activeObj.activePoint.width / 2),\n                        y: parent.activeObj.activePoint.startY + (parent.activeObj.activePoint.height / 2) };\n                }\n                else {\n                    zoomPoint = { x: parent.lowerCanvas.clientWidth / 2, y: parent.lowerCanvas.clientHeight / 2 };\n                }\n                if (obj['zoomType'] === 'MouseWheel' || obj['zoomType'] === 'Pinch') {\n                    zoomPoint = { x: parent.zoomSettings.zoomPoint.x, y: parent.zoomSettings.zoomPoint.y };\n                }\n            }\n            var previousZoomFactor = parent.zoomSettings.zoomFactor - (zoomFactor * 10);\n            var zoomEventArgs = { zoomPoint: zoomPoint, cancel: false, previousZoomFactor: previousZoomFactor,\n                currentZoomFactor: parent.zoomSettings.zoomFactor, zoomTrigger: obj['zoomType'] };\n            if (!parent.isCropToolbar && parent.isZoomBtnClick) {\n                parent.trigger('zooming', zoomEventArgs);\n                parent.editCompleteArgs = zoomEventArgs;\n            }\n            this.zoomEvent(zoomEventArgs, zoomFactor, isPreventApply);\n        }\n    };\n    Transform.prototype.zoomEvent = function (zoomEventArgs, zoomFact, isPreventApply) {\n        var parent = this.parent;\n        var shapeId;\n        var _a = parent.zoomSettings, zoomFactor = _a.zoomFactor, minZoomFactor = _a.minZoomFactor;\n        if (zoomEventArgs.cancel) {\n            parent.isZoomBtnClick = false;\n            return;\n        }\n        if (this.parent.activeObj.redactType !== 'blur' && this.parent.activeObj.redactType !== 'pixelate') {\n            parent.notify('toolbar', { prop: 'close-contextual-toolbar', onPropertyChange: false });\n        }\n        if (!parent.isCropTab && parent.activeObj.shape) {\n            shapeId = parent.activeObj.currIndex;\n        }\n        parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n            value: { x: null, y: null, isMouseDown: true } });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        this.upperContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        var object = { canvasFilter: parent.canvasFilter };\n        this.lowerContext.filter = object['canvasFilter'];\n        parent.upperCanvas.style.cursor = parent.cursor = 'default';\n        var objColl = extend([], parent.objColl, [], true);\n        if (!parent.isCropTab) {\n            if (parent.transform.degree !== 0) {\n                parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false, value: { x: null, y: null, isMouseDown: null } });\n                parent.panPoint.currentPannedPoint = { x: 0, y: 0 };\n                var temp = parent.allowDownScale;\n                parent.allowDownScale = false;\n                this.rotatePan(true, true);\n                parent.allowDownScale = temp;\n            }\n            else if (parent.transform.currFlipState !== '') {\n                parent.panPoint.totalPannedPoint = { x: 0, y: 0 };\n            }\n            if (parent.transform.straighten === 0 && !this.isPreventSelect) {\n                parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false, value: { isPreventApply: isPreventApply } });\n            }\n        }\n        if (parent.transform.degree === 0) {\n            this.drawZoomImgToCanvas(zoomFact, this.tempActiveObj);\n            var panObj_1 = { panRegion: '' };\n            parent.notify('crop', { prop: 'getCurrFlipState', onPropertyChange: false, value: { panObj: panObj_1 } });\n            if (panObj_1['panRegion'] !== '') {\n                parent.notify('crop', { prop: 'setTempFlipPanPoint', onPropertyChange: false, value: { point: parent.panPoint.totalPannedPoint, isAdd: true } });\n                objColl = extend([], parent.objColl, [], true);\n                parent.objColl = [];\n                var destLeft = parent.img.destLeft;\n                var destTop = parent.img.destTop;\n                this.setDestPointsForFlipState();\n                this.rotatedFlip();\n                parent.img.destLeft = destLeft;\n                parent.img.destTop = destTop;\n                parent.objColl = objColl;\n                parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                    value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: isPreventApply } });\n                if (parent.transform.straighten === 0 && !this.isPreventSelect) {\n                    parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false, value: { isPreventApply: isPreventApply } });\n                }\n            }\n            if (zoomFactor <= minZoomFactor && !parent.isCropTab) {\n                parent.panPoint.totalPannedPoint = { x: 0, y: 0 };\n            }\n        }\n        else {\n            if (parent.transform.straighten === 0 && !this.isPreventSelect) {\n                parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false, value: { isPreventApply: isPreventApply } });\n            }\n            parent.panPoint.totalPannedClientPoint = { x: 0, y: 0 };\n            parent.panPoint.totalPannedInternalPoint = { x: 0, y: 0 };\n            this.rotateZoom(zoomFact);\n            var panObj_2 = { panRegion: '' };\n            parent.notify('crop', { prop: 'getCurrFlipState', onPropertyChange: false, value: { panObj: panObj_2 } });\n            if (panObj_2['panRegion'] !== '') {\n                var temp = this.lowerContext.filter;\n                this.lowerContext.filter = 'none';\n                parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                    value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: isPreventApply } });\n                this.lowerContext.filter = temp;\n            }\n        }\n        var powerOften = Math.pow(10, 1);\n        if (zoomFactor <= minZoomFactor ||\n            (Math.round(parent.transform.zoomFactor * powerOften) / powerOften) === 2) {\n            clearInterval(this.zoomBtnHold);\n            this.zoomBtnHold = 0;\n        }\n        var panObj = { panRegion: '' };\n        parent.notify('crop', { prop: 'getCurrFlipState', onPropertyChange: false, value: { panObj: panObj } });\n        if (panObj['panRegion'] === '') {\n            var temp = this.lowerContext.filter;\n            this.lowerContext.filter = 'none';\n            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: isPreventApply } });\n            this.lowerContext.filter = temp;\n        }\n        if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        if (this.tempActiveObj) {\n            parent.activeObj = extend({}, this.tempActiveObj, {}, true);\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n            if (zoomFactor <= minZoomFactor) {\n                parent.currSelectionPoint = null;\n            }\n        }\n        parent.isUndoRedo = false;\n        var zoomOut;\n        zoomOut = document.querySelector('#' + parent.element.id + '_zoomOut');\n        if (zoomOut && zoomFactor <= minZoomFactor) {\n            zoomOut.classList.add('e-disabled');\n            zoomOut.parentElement.classList.add('e-overlay');\n        }\n        else if (zoomOut) {\n            zoomOut.classList.remove('e-disabled');\n            zoomOut.parentElement.classList.remove('e-overlay');\n        }\n        var drawingShape = parent.drawingShape;\n        this.autoEnablePan();\n        parent.drawingShape = drawingShape;\n        if (this.tempActiveObj) {\n            parent.activeObj = extend({}, this.tempActiveObj, {}, true);\n        }\n        if (parent.activeObj.shape === 'crop-custom') {\n            parent.currObjType.isCustomCrop = true;\n        }\n        if (this.isShape) {\n            if (shapeId) {\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    if (parent.objColl[i].currIndex === shapeId) {\n                        parent.activeObj = extend({}, parent.objColl[i], {}, true);\n                        parent.objColl.splice(i, 1);\n                        break;\n                    }\n                }\n            }\n            else {\n                parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n                parent.objColl.pop();\n            }\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj, isCropRatio: null,\n                    points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n            parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n            parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n        }\n        parent.notify('toolbar', { prop: 'enable-disable-btns', onPropertyChange: false });\n        parent.notify('selection', { prop: 'setZoomType', onPropertyChange: false, value: { zoomType: 'Toolbar' } });\n        // eslint-disable-next-line max-len\n        zoomEventArgs = { zoomPoint: zoomEventArgs.zoomPoint, previousZoomFactor: zoomEventArgs.previousZoomFactor, currentZoomFactor: zoomEventArgs.currentZoomFactor, zoomTrigger: zoomEventArgs.zoomTrigger };\n        if (!parent.isCropToolbar && parent.isZoomBtnClick) {\n            parent.isZoomBtnClick = false;\n        }\n        if (parent.drawingShape) {\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            parent.enableShapeDrawing(parent.toPascalCase(parent.drawingShape), true);\n            parent.activeObj = activeObj;\n            if (activeObj.activePoint.width > 0 || activeObj.activePoint.height > 0 ||\n                (activeObj.pointColl && activeObj.pointColl.length > 0)) {\n                if (activeObj.shape === 'redact') {\n                    parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n                }\n                var zOrderElem = parent.element.querySelector('#' + parent.element.id + '_zOrderBtn');\n                var dupElem = parent.element.querySelector('#' + parent.element.id + '_duplicate');\n                var removeElem = parent.element.querySelector('#' + parent.element.id + '_remove');\n                var editTextElem = parent.element.querySelector('#' + parent.element.id + '_editText');\n                if (zOrderElem) {\n                    zOrderElem.classList.remove('e-overlay');\n                }\n                if (dupElem) {\n                    dupElem.classList.remove('e-overlay');\n                }\n                if (removeElem) {\n                    removeElem.classList.remove('e-overlay');\n                }\n                if (editTextElem) {\n                    editTextElem.classList.remove('e-overlay');\n                }\n            }\n        }\n        else if (parent.activeObj.shape && parent.activeObj.shape === 'redact') {\n            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'redact',\n                    isApplyBtn: false, isCropping: false } });\n            parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n        }\n    };\n    Transform.prototype.disableZoomOutBtn = function (isZoomOut) {\n        var parent = this.parent;\n        var _a = parent.zoomSettings, zoomFactor = _a.zoomFactor, minZoomFactor = _a.minZoomFactor;\n        var isDisabled = false;\n        var zoomOut;\n        if (!isNullOrUndefined(isZoomOut)) {\n            parent.transform.zoomFactor -= 0.1;\n        }\n        zoomOut = parent.element.querySelector('#' + parent.element.id + '_zoomOut');\n        var destPoints = { destLeft: parent.img.destLeft, destTop: parent.img.destTop,\n            destWidth: parent.img.destWidth, destHeight: parent.img.destHeight };\n        if (parent.activeObj.shape) {\n            var maxDimension = this.setZoomDimension(-0.1, parent.activeObj);\n            if (!isNullOrUndefined(zoomOut)) {\n                var actPoint = parent.activeObj.activePoint;\n                if (parent.transform.straighten === 0) {\n                    if (parent.img.destLeft > actPoint.startX || parent.img.destTop >\n                        actPoint.startY || parent.img.destLeft + parent.img.destWidth <\n                        actPoint.endX || parent.img.destTop + parent.img.destHeight < actPoint.endY\n                        || zoomFactor === minZoomFactor) {\n                        zoomOut.classList.add('e-disabled');\n                        zoomOut.parentElement.classList.add('e-overlay');\n                        isDisabled = true;\n                    }\n                    else {\n                        zoomOut.classList.remove('e-disabled');\n                        zoomOut.parentElement.classList.remove('e-overlay');\n                        isDisabled = false;\n                    }\n                }\n                else {\n                    parent.img.destWidth = maxDimension.width;\n                    parent.img.destHeight = maxDimension.height;\n                    var obj = { isIntersect: null };\n                    parent.notify('draw', { prop: 'updateImgCanvasPoints', onPropertyChange: false });\n                    parent.notify('draw', { prop: 'isLinesIntersect', onPropertyChange: false, value: { obj: obj } });\n                    if (obj['isIntersect'] ||\n                        zoomFactor === minZoomFactor) {\n                        zoomOut.classList.add('e-disabled');\n                        zoomOut.parentElement.classList.add('e-overlay');\n                        isDisabled = true;\n                    }\n                    else {\n                        zoomOut.classList.remove('e-disabled');\n                        zoomOut.parentElement.classList.remove('e-overlay');\n                        isDisabled = false;\n                    }\n                }\n            }\n        }\n        else {\n            this.setZoomDimension(-0.1, null);\n        }\n        if (!isNullOrUndefined(isZoomOut)) {\n            parent.transform.zoomFactor += 0.1;\n        }\n        parent.img.destLeft = destPoints['destLeft'];\n        parent.img.destTop = destPoints['destTop'];\n        parent.img.destWidth = destPoints['destWidth'];\n        parent.img.destHeight = destPoints['destHeight'];\n        return isDisabled;\n    };\n    Transform.prototype.drawZoomImgToCanvas = function (value, selectionObj) {\n        var parent = this.parent;\n        var powerOften = Math.pow(10, 1);\n        var zmFactor = Math.round(parent.transform.zoomFactor * powerOften) / powerOften;\n        if ((zmFactor === 0.1 && value === -0.1) || zmFactor === 0 && value === -0.025) {\n            parent.transform.zoomFactor = 0;\n        }\n        else {\n            parent.transform.zoomFactor += value;\n        }\n        parent.transform[parent.isCropTab ? 'cropZoomFactor' : 'defaultZoomFactor'] = parent.transform.zoomFactor;\n        var maxDimension = { width: 0, height: 0 };\n        if (parent.isCropTab) {\n            maxDimension = this.cropZoom(value, selectionObj);\n        }\n        else {\n            maxDimension = this.calcMaxDimension(parent.img.srcWidth, parent.img.srcHeight);\n            maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n            maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n            parent.img.destLeft = (parent.lowerCanvas.clientWidth - maxDimension.width) / 2;\n            parent.img.destTop = (parent.lowerCanvas.clientHeight - maxDimension.height + 1) / 2;\n        }\n        parent.notify('draw', { prop: 'draw-image-to-canvas', value: { dimension: maxDimension } });\n        maxDimension.width = this.cropDimension.width;\n        maxDimension.height = this.cropDimension.height;\n        maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n        maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n        parent.notify('draw', { prop: 'setZoomCropWidth', value: { width: maxDimension.width, height: maxDimension.height } });\n    };\n    Transform.prototype.rotatedFlip = function () {\n        var parent = this.parent;\n        this.isReverseFlip = true;\n        var tempCurrFlipState = parent.transform.currFlipState;\n        var tempFlipColl = this.flipColl;\n        var tempObjColl = extend([], parent.objColl, [], true);\n        var tempActiveObj = extend({}, parent.activeObj, {}, true);\n        this.flipColl = [];\n        parent.objColl = [];\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, context: null, isPreventCircleCrop: null } });\n        var temp = this.lowerContext.filter;\n        parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: true, context: null, isPreventCircleCrop: null } });\n        if (tempCurrFlipState === '' && parent.transform.currFlipState !== '') {\n            tempCurrFlipState = parent.transform.currFlipState;\n        }\n        parent.transform.currFlipState = tempCurrFlipState;\n        this.flipColl = tempFlipColl;\n        parent.objColl = extend([], tempObjColl, [], true);\n        this.lowerContext.filter = 'none';\n        parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n        this.lowerContext.filter = temp;\n        if (tempActiveObj.activePoint.width !== 0) {\n            parent.activeObj = extend({}, tempActiveObj, {}, true);\n        }\n        this.isReverseFlip = false;\n    };\n    Transform.prototype.rotateZoom = function (value) {\n        var parent = this.parent;\n        var powerOften = Math.pow(10, 1);\n        var zmFactor = Math.round(parent.transform.zoomFactor * powerOften) / powerOften;\n        if ((zmFactor === 0.1 && value === -0.1) || zmFactor === 0 && value === -0.025) {\n            parent.transform.zoomFactor = 0;\n        }\n        else {\n            parent.transform.zoomFactor += value;\n        }\n        if (parent.isCropTab) {\n            parent.transform.cropZoomFactor = parent.transform.zoomFactor;\n        }\n        else {\n            parent.transform.defaultZoomFactor = parent.transform.zoomFactor;\n        }\n        var tempObjColl = extend([], parent.objColl, [], true);\n        var tempActiveObj = extend({}, parent.activeObj, {}, true);\n        parent.objColl = [];\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n        parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: true } });\n        parent.notify('draw', { prop: 'setDestPoints', onPropertyChange: false });\n        var temp = this.lowerContext.filter;\n        parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: false } });\n        parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: null, isRotatePan: null } });\n        parent.objColl = tempObjColl;\n        parent.activeObj = tempActiveObj;\n        var maxDimension = { width: this.cropDimension.width, height: this.cropDimension.height };\n        maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n        maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n        parent.notify('draw', { prop: 'setZoomCropWidth', value: { width: maxDimension.width, height: maxDimension.height } });\n    };\n    Transform.prototype.autoEnablePan = function () {\n        var parent = this.parent;\n        if (parent.transform.zoomFactor <= 0) {\n            parent.togglePan = false;\n            parent.notify('selection', { prop: 'setDragCanvas', value: { bool: false } });\n            parent.pan(false);\n            this.disablePan = false;\n        }\n        else {\n            parent.pan(!this.disablePan);\n        }\n    };\n    Transform.prototype.cropZoom = function (value, selectionObj) {\n        var parent = this.parent;\n        var destLeft = parent.img.destLeft;\n        var destTop = parent.img.destTop;\n        var maxDimension = { width: 0, height: 0 };\n        if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            maxDimension = this.calcMaxDimension(parent.img.srcHeight, parent.img.srcWidth);\n        }\n        else {\n            maxDimension = this.calcMaxDimension(parent.img.srcWidth, parent.img.srcHeight);\n        }\n        maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n        maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n        parent.img.destLeft = destLeft - ((maxDimension.width - parent.img.destWidth) / 2);\n        parent.img.destTop = destTop - ((maxDimension.height - parent.img.destHeight) / 2);\n        destLeft = parent.img.destLeft;\n        destTop = parent.img.destTop;\n        if (selectionObj && parent.transform.straighten === 0) {\n            if (parent.img.destLeft > selectionObj.activePoint.startX) {\n                parent.img.destLeft = selectionObj.activePoint.startX;\n                if (parent.transform.degree === 0) {\n                    parent.panPoint.totalPannedPoint.x -= (destLeft - parent.img.destLeft);\n                }\n            }\n            if (parent.img.destTop > selectionObj.activePoint.startY) {\n                parent.img.destTop = selectionObj.activePoint.startY;\n                if (parent.transform.degree === 0) {\n                    parent.panPoint.totalPannedPoint.y -= (destTop - parent.img.destTop);\n                }\n            }\n            if (parent.img.destLeft + maxDimension.width < selectionObj.activePoint.endX) {\n                parent.img.destLeft = selectionObj.activePoint.endX - maxDimension.width;\n                if (parent.transform.degree === 0) {\n                    parent.panPoint.totalPannedPoint.x -= (destLeft - parent.img.destLeft);\n                }\n            }\n            if (parent.img.destTop + maxDimension.height < selectionObj.activePoint.endY) {\n                parent.img.destTop = selectionObj.activePoint.endY - maxDimension.height;\n                if (parent.transform.degree === 0) {\n                    parent.panPoint.totalPannedPoint.y -= (destTop - parent.img.destTop);\n                }\n            }\n        }\n        return maxDimension;\n    };\n    Transform.prototype.setZoomDimension = function (value, selectionObj) {\n        var parent = this.parent;\n        var degree = parent.transform.degree;\n        var maxDimension = { width: 0, height: 0 };\n        if (degree % 90 === 0 && degree % 180 !== 0) {\n            maxDimension = this.calcMaxDimension(parent.img.srcHeight, parent.img.srcWidth);\n        }\n        else {\n            maxDimension = this.calcMaxDimension(parent.img.srcWidth, parent.img.srcHeight);\n        }\n        maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n        maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n        parent.img.destLeft += ((parent.img.destWidth - maxDimension.width) / 2);\n        parent.img.destTop += ((parent.img.destHeight - maxDimension.height) / 2);\n        // While zoom out limit image to draw inside the selection range\n        if (value < 0 && selectionObj) {\n            var startX = selectionObj.activePoint.startX;\n            var startY = selectionObj.activePoint.startY;\n            var width = selectionObj.activePoint.width;\n            var height = selectionObj.activePoint.height;\n            var maxDestLeft = parent.img.destLeft + maxDimension.width;\n            var maxDestTop = parent.img.destTop + maxDimension.height;\n            if (parent.img.destLeft > startX) {\n                parent.img.destLeft = startX;\n            }\n            if (parent.img.destTop > startY) {\n                parent.img.destTop = startY;\n            }\n            if (maxDestLeft < startX + width) {\n                parent.img.destLeft = startX + width - maxDimension.width;\n            }\n            if (maxDestTop < startY + height) {\n                parent.img.destTop = startY + height - maxDimension.height;\n            }\n        }\n        else if (value < 0 && isNullOrUndefined(selectionObj)) {\n            if (parent.img.destLeft > 0) {\n                parent.img.destLeft = 0;\n            }\n            if (parent.img.destTop > 0) {\n                parent.img.destTop = 0;\n            }\n            if (parent.img.destLeft + maxDimension.width < parent.lowerCanvas.clientWidth) {\n                parent.img.destLeft = parent.lowerCanvas.clientWidth - parent.img.destWidth;\n            }\n            if (parent.img.destTop + maxDimension.height < parent.lowerCanvas.clientHeight) {\n                parent.img.destTop = parent.lowerCanvas.clientHeight - parent.img.destHeight;\n            }\n        }\n        return maxDimension;\n    };\n    Transform.prototype.drawPannedImage = function (xDiff, yDiff) {\n        var parent = this.parent;\n        var obj = { panDown: null };\n        parent.notify('selection', { prop: 'getPanDown', onPropertyChange: false, value: { obj: obj } });\n        var panEventArgs = { startPoint: obj['panDown'], endPoint: this.panMove, cancel: false };\n        parent.trigger('panning', panEventArgs);\n        if (panEventArgs.cancel) {\n            return;\n        }\n        this.panEvent(xDiff, yDiff);\n    };\n    Transform.prototype.panEvent = function (xDiff, yDiff, isPanMethod) {\n        var parent = this.parent;\n        var isObjCreated = false;\n        if (parent.activeObj.shape && parent.activeObj.shape === 'shape') {\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        }\n        if (isNullOrUndefined(parent.activeObj.shape)) {\n            isObjCreated = true;\n            var actPoint = parent.activeObj.activePoint = { startX: parent.img.destLeft, startY: parent.img.destTop,\n                endX: parent.img.destLeft + parent.img.destWidth, endY: parent.img.destTop + parent.img.destHeight };\n            var startX = actPoint.startX;\n            var startY = actPoint.startY;\n            var endX = actPoint.endX;\n            var endY = actPoint.endY;\n            if (startX < 0) {\n                actPoint.startX = 0;\n            }\n            if (startY < 0) {\n                actPoint.startY = 0;\n            }\n            if (endX > parent.lowerCanvas.width) {\n                actPoint.endX = parent.lowerCanvas.width;\n            }\n            if (endY > parent.lowerCanvas.height) {\n                actPoint.endY = parent.lowerCanvas.height;\n            }\n            actPoint.width = actPoint.endX - actPoint.startX;\n            actPoint.height = actPoint.endY - actPoint.startY;\n            parent.activeObj.shape = 'crop-custom';\n            var obj = { strokeSettings: {} };\n            parent.notify('shape', { prop: 'getStrokeSettings', onPropertyChange: false, value: { obj: obj } });\n            parent.activeObj.strokeSettings = obj['strokeSettings'];\n            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: actPoint, obj: parent.activeObj,\n                    isMouseMove: null, x: null, y: null } });\n            parent.isCropTab = true;\n        }\n        if (parent.transform.degree === 0) {\n            var point = void 0;\n            if ((isNullOrUndefined(xDiff) && isNullOrUndefined(yDiff)) || isPanMethod) {\n                if (isPanMethod) {\n                    point = this.updatePanPoints(xDiff, yDiff);\n                }\n                else {\n                    point = this.updatePanPoints();\n                }\n            }\n            else {\n                point = { x: xDiff, y: yDiff };\n            }\n            parent.panPoint.totalPannedPoint.x += point.x;\n            parent.panPoint.totalPannedPoint.y += point.y;\n            var tempSelectionObj = extend({}, parent.activeObj, {}, true);\n            var temp = this.lowerContext.filter;\n            this.drawPannImage(point, isObjCreated);\n            this.lowerContext.filter = temp;\n            this.tempPanMove = extend({}, this.panMove, {}, true);\n            parent.activeObj = extend({}, tempSelectionObj, {}, true);\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            if (parent.activeObj.shape) {\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n            }\n        }\n        else {\n            var tempFlipState = parent.transform.currFlipState;\n            parent.isCropTab = true;\n            if ((isNullOrUndefined(xDiff) && isNullOrUndefined(yDiff)) || isPanMethod) {\n                if (isPanMethod) {\n                    parent.panPoint.currentPannedPoint = this.updatePanPoints(xDiff, yDiff);\n                }\n                else {\n                    parent.panPoint.currentPannedPoint = this.updatePanPoints();\n                }\n            }\n            else {\n                parent.panPoint.currentPannedPoint = { x: xDiff, y: yDiff };\n            }\n            parent.transform.currFlipState = tempFlipState;\n            this.rotatePan(null, null, isObjCreated);\n            parent.isCropTab = false;\n            this.tempPanMove = extend({}, this.panMove, {}, true);\n        }\n        if (isObjCreated) {\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.isCropTab = false;\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        }\n    };\n    Transform.prototype.drawPannImage = function (point, isObjCreated) {\n        var parent = this.parent;\n        var filter = this.lowerContext.filter;\n        var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n            height: parent.img.destHeight };\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n        parent.img.destLeft = destPoints.startX;\n        parent.img.destTop = destPoints.startY;\n        parent.img.destWidth = destPoints.width;\n        parent.img.destHeight = destPoints.height;\n        this.setDestPointsForFlipState();\n        if (isObjCreated) {\n            parent.isCropTab = false;\n        }\n        parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n        if (isObjCreated) {\n            parent.isCropTab = true;\n        }\n        if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: true } });\n        }\n        this.lowerContext.filter = filter;\n        parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: null, isRotatePan: null } });\n        parent.img.destLeft = destPoints.startX;\n        parent.img.destTop = destPoints.startY;\n        parent.img.destWidth = destPoints.width;\n        parent.img.destHeight = destPoints.height;\n        var temp = this.lowerContext.filter;\n        this.lowerContext.filter = 'none';\n        if (isObjCreated) {\n            parent.isCropTab = false;\n        }\n        parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n            value: { ctx: this.lowerContext, shape: 'pan', pen: 'pan', x: point.x,\n                y: point.y, panRegion: '' } });\n        if (isObjCreated) {\n            parent.isCropTab = true;\n        }\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        if (parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: true } });\n        }\n    };\n    Transform.prototype.resetZoom = function () {\n        var parent = this.parent;\n        if (parent.transform.defaultZoomFactor !== 0) {\n            var isUndoRedo = parent.isUndoRedo;\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            this.transCurrObj = object['currObj'];\n            this.transCurrObj.objColl = extend([], parent.objColl, null, true);\n            this.transCurrObj.pointColl = extend({}, parent.pointColl, null, true);\n            this.transCurrObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            this.transCurrObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            parent.isUndoRedo = parent.isCropToolbar = true;\n            var zmFactor = parent.transform.defaultZoomFactor;\n            if (zmFactor > 0) {\n                this.zoomAction(-zmFactor);\n            }\n            else {\n                this.zoomAction(Math.abs(zmFactor));\n            }\n            parent.isCropToolbar = false;\n            parent.isUndoRedo = isUndoRedo;\n        }\n    };\n    Transform.prototype.performTransformation = function (text) {\n        var parent = this.parent;\n        this.resetZoom();\n        this.updateTransform(text);\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            if (parent.objColl[i].flipObjColl.length > 0) {\n                var flipObjColl = { collection: parent.objColl[i].flipObjColl };\n                parent.notify('shape', { prop: 'alignRotateFlipColl', onPropertyChange: false,\n                    value: { collection: flipObjColl['collection'], isRotateFlipCollection: null, obj: flipObjColl } });\n                parent.objColl[i].flipObjColl = flipObjColl['collection'];\n                if (parent.objColl[i].flipObjColl.length === 0) {\n                    parent.objColl[i].shapeFlip = '';\n                }\n            }\n        }\n    };\n    Transform.prototype.updateTransform = function (text) {\n        switch (text.toLowerCase()) {\n            case 'rotateleft':\n                this.rotateImage(-90);\n                break;\n            case 'rotateright':\n                this.rotateImage(90);\n                break;\n            case 'horizontalflip':\n                this.flipImage(Direction.Horizontal);\n                break;\n            case 'verticalflip':\n                this.flipImage(Direction.Vertical);\n                break;\n        }\n    };\n    Transform.prototype.rotatePan = function (isCropSelection, isDefaultZoom, isObjCreated) {\n        var parent = this.parent;\n        this.isReverseRotate = true;\n        var tempDegree = parent.transform.degree;\n        var rotatePanActiveObj;\n        var object = { selPointColl: null };\n        if (parent.activeObj.activePoint && parent.activeObj.shape) {\n            rotatePanActiveObj = extend({}, parent.activeObj, {}, true);\n        }\n        var tempObjColl = extend([], parent.objColl, [], true);\n        var tempPointColl = extend([], parent.pointColl, [], true);\n        parent.objColl = [];\n        parent.pointColl = [];\n        parent.freehandCounter = 0;\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false, value: { obj: object } });\n        var cropSelPointColl = object['selPointColl'];\n        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false, value: { obj: { selPointColl: [] } } });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: true } });\n        parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n        var initialDestLeft = parent.img.destLeft;\n        var initialDestTop = parent.img.destTop;\n        var intPan = parent.panPoint.totalPannedInternalPoint;\n        if (parent.isCropTab) {\n            parent.img.destLeft += intPan.x;\n            parent.img.destTop += intPan.y;\n        }\n        parent.notify('crop', { prop: 'updateRotatePan', onPropertyChange: false });\n        if (parent.isCropTab) {\n            parent.panPoint.totalPannedInternalPoint.x = parent.img.destLeft - initialDestLeft;\n            parent.panPoint.totalPannedInternalPoint.y = parent.img.destTop - initialDestTop;\n        }\n        var temp = this.lowerContext.filter;\n        if (isObjCreated) {\n            parent.isCropTab = false;\n        }\n        parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n        if (isObjCreated) {\n            parent.isCropTab = true;\n        }\n        parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: false } });\n        parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: true, isRotatePan: true } });\n        var destLeft = parent.img.destLeft;\n        var destTop = parent.img.destTop;\n        parent.img.destLeft += parent.panPoint.totalPannedClientPoint.x;\n        parent.img.destTop += parent.panPoint.totalPannedClientPoint.y;\n        parent.img.destLeft += parent.panPoint.currentPannedPoint.x;\n        parent.img.destTop += parent.panPoint.currentPannedPoint.y;\n        parent.panPoint.totalPannedClientPoint.x = parent.img.destLeft - destLeft;\n        parent.panPoint.totalPannedClientPoint.y = parent.img.destTop - destTop;\n        parent.objColl = tempObjColl;\n        parent.pointColl = tempPointColl;\n        parent.freehandCounter = parent.pointColl.length;\n        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n            value: { obj: { selPointColl: cropSelPointColl } } });\n        parent.transform.degree = tempDegree;\n        this.lowerContext.filter = 'none';\n        if (isCropSelection) {\n            if (isDefaultZoom) {\n                parent.panPoint.totalPannedClientPoint.x = -parent.panPoint.totalPannedClientPoint.x;\n                parent.panPoint.totalPannedClientPoint.y = -parent.panPoint.totalPannedClientPoint.y;\n                parent.panPoint.currentPannedPoint = extend({}, parent.panPoint.totalPannedClientPoint, {}, true);\n                parent.panPoint.totalPannedClientPoint = { x: 0, y: 0 };\n                parent.img.destLeft += parent.panPoint.currentPannedPoint.x;\n                parent.img.destTop += parent.panPoint.currentPannedPoint.y;\n            }\n            else {\n                parent.panPoint.currentPannedPoint = extend({}, parent.panPoint.totalPannedClientPoint, {}, true);\n            }\n        }\n        if (isObjCreated) {\n            parent.isCropTab = false;\n        }\n        parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n            value: { ctx: this.lowerContext, shape: 'pan', pen: 'pan', x: parent.panPoint.currentPannedPoint.x,\n                y: parent.panPoint.currentPannedPoint.y, panRegion: '' } });\n        if (isObjCreated) {\n            parent.isCropTab = true;\n        }\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.activeObj = extend({}, rotatePanActiveObj, {}, true);\n        if (parent.activeObj.activePoint) {\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj, isCropRatio: null,\n                    points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n        }\n        this.isReverseRotate = false;\n    };\n    Transform.prototype.limitPan = function () {\n        var parent = this.parent;\n        var _a = parent.activeObj.activePoint, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        var img = parent.img;\n        if (parent.activeObj.activePoint) {\n            if (img.destLeft > startX) {\n                parent.img.destLeft = startX;\n            }\n            if (img.destTop > startY) {\n                parent.img.destTop = startY;\n            }\n            if (img.destLeft + img.destWidth < endX) {\n                parent.img.destLeft = endX - img.destWidth;\n            }\n            if (img.destTop + img.destHeight < endY) {\n                parent.img.destTop = endY - img.destHeight;\n            }\n        }\n    };\n    Transform.prototype.pan = function (value, x, y) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (value) {\n                parent.togglePan = true;\n                parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                    value: { x: null, y: null, isMouseDown: null } });\n                parent.notify('selection', { prop: 'setDragCanvas', value: { bool: true } });\n                parent.lowerCanvas.style.cursor = parent.upperCanvas.style.cursor = parent.cursor = 'grab';\n                parent.notify('selection', { prop: 'setPanDown', onPropertyChange: false, value: { panDown: null } });\n                if (x || y) {\n                    x = x ? x : 0;\n                    y = y ? y : 0;\n                    if (isNullOrUndefined(this.panMove)) {\n                        this.panMove = { x: x, y: y };\n                    }\n                    if (isNullOrUndefined(this.tempPanMove)) {\n                        this.tempPanMove = { x: this.panMove.x, y: this.panMove.y };\n                    }\n                    this.panEvent(x, y, true);\n                    this.tempPanMove = null;\n                }\n            }\n            else {\n                parent.togglePan = parent.currObjType.isCustomCrop = false;\n                parent.notify('selection', { prop: 'setDragCanvas', value: { bool: false } });\n                parent.lowerCanvas.style.cursor = parent.upperCanvas.style.cursor = parent.cursor = 'default';\n            }\n        }\n    };\n    Transform.prototype.zoom = function (zoomFactor, zoomPoint) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            var value = this.getCurrentZoomFactor(zoomFactor);\n            if (isNullOrUndefined(zoomPoint)) {\n                this.zoomAction(value, zoomPoint);\n            }\n            else {\n                var type = value > 0 ? 'zoomIn' : 'zoomOut';\n                var absValue = Math.abs(value) * 10;\n                for (var i = 0; i < absValue; i++) {\n                    parent.notify('draw', { prop: 'performPointZoom', onPropertyChange: false,\n                        value: { x: zoomPoint.x, y: zoomPoint.y, type: type, isResize: null } });\n                }\n            }\n            var actionArgs = { action: value > 0 ? 'zoom-in' : 'zoom-out',\n                actionEventArgs: parent.editCompleteArgs };\n            parent.triggerEditCompleteEvent(actionArgs);\n        }\n    };\n    Transform.prototype.getCurrentZoomFactor = function (zoomFactor) {\n        return zoomFactor >= 1 ? (this.prevZoomValue < 1 ? (zoomFactor - this.prevZoomValue) : (zoomFactor - this.prevZoomValue) * 0.1) :\n            (zoomFactor - this.prevZoomValue);\n    };\n    Transform.prototype.setCurrPanRegion = function (region, type, obj) {\n        var panRegion = region;\n        if (region === '') {\n            panRegion = type === 'horizontal' ? 'horizontal' : type === 'vertical' ? 'vertical' : region;\n        }\n        else if (region === 'horizontal') {\n            panRegion = type === 'horizontal' ? 'horizontalVertical' : type === 'vertical' ? 'verticalHorizontal' : type === 90 ?\n                'vertical' : type === -90 ? 'horizontal' : region;\n        }\n        else if (region === 'vertical') {\n            panRegion = type === 'horizontal' ? 'horizontalVertical' : type === 'vertical' ? 'verticalHorizontal' : type === 90 ?\n                'horizontal' : type === -90 ? 'vertical' : region;\n        }\n        else {\n            panRegion = type === 'horizontal' ? 'vertical' : type === 'vertical' ? 'horizontal' : region;\n        }\n        obj['panRegion'] = panRegion;\n    };\n    Transform.prototype.rotate = function (degree, obj) {\n        var parent = this.parent;\n        var isRotate = false;\n        if (!parent.disabled && parent.isImageLoaded && (degree % 90 === 0)) {\n            this.rotateImage(degree);\n        }\n        obj['isRotate'] = isRotate;\n    };\n    Transform.prototype.flip = function (direction) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            this.flipImage(direction);\n        }\n    };\n    Transform.prototype.update = function () {\n        var parent = this.parent;\n        var toolbarHeight = 0;\n        var isActiveObj = false;\n        var freehandObj = { bool: false };\n        var straightenObj = { bool: parent.isStraightening };\n        var cxtTbarHeight = 0;\n        var ctToolbar = parent.element.querySelector('#' + parent.element.id + '_contextualToolbar');\n        var ctWrapper = parent.element.querySelector('.e-contextual-toolbar-wrapper');\n        var hdWrapper = parent.element.querySelector('#' + parent.element.id + '_headWrapper');\n        if (parent.isImageLoaded) {\n            var isCropSelection = false;\n            var splitWords = void 0;\n            if (Browser.isDevice) {\n                if (parent.activeObj.shape) {\n                    splitWords = parent.activeObj.shape.split('-');\n                }\n                if (parent.currObjType.isCustomCrop) {\n                    isCropSelection = true;\n                }\n                else if (splitWords && splitWords[0] === 'crop') {\n                    isCropSelection = true;\n                }\n            }\n            var frameObj = { bool: null };\n            parent.notify('toolbar', { prop: 'getFrameToolbar', onPropertyChange: false, value: { obj: frameObj } });\n            if (!straightenObj['bool'] && ((ctToolbar && !ctToolbar.parentElement.classList.contains('e-hide')) ||\n                (hdWrapper && !hdWrapper.parentElement.classList.contains('e-hide')))) {\n                ctWrapper.classList.add('e-hide');\n                if (!isCropSelection) {\n                    parent.okBtn(null, true);\n                }\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n                parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n            }\n            parent.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: freehandObj } });\n            if (freehandObj['bool']) {\n                parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n            }\n            var actPoint = extend({}, parent.activeObj.activePoint, {}, true);\n            if (parent.activeObj.shape && (actPoint.width !== 0 || actPoint.height !== 0)) {\n                isActiveObj = true;\n                if (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block') {\n                    parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                        value: { x: null, y: null, isMouseDown: null } });\n                    parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                }\n                else {\n                    parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n                    parent.objColl.push(parent.activeObj);\n                }\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            }\n        }\n        var tempFilter = this.lowerContext.filter;\n        var canvasWrapper = parent.element.querySelector('#' + parent.element.id + '_canvasWrapper');\n        if (canvasWrapper) {\n            canvasWrapper.style.width = parent.element.offsetWidth - 2 + 'px';\n        }\n        parent.lowerCanvas.width = parent.upperCanvas.width = parent.maskCanvas.width = parent.element.offsetWidth - 2;\n        if (parent.toolbarTemplate) {\n            toolbarHeight = parent.element.querySelector('#' + parent.element.id + '_toolbarArea').clientHeight;\n        }\n        else if (parent.element.querySelector('#' + parent.element.id + '_toolbar')) {\n            toolbarHeight = parent.element.querySelector('#' + parent.element.id + '_toolbar').clientHeight;\n            if (toolbarHeight === 0 && parent.toolbar && parent.toolbar.length > 0 && parent.toolbar.indexOf('Open') === -1) {\n                var obj = { toolbarHeight: 0 };\n                parent.notify('toolbar', { prop: 'getToolbarHeight', value: { obj: obj } });\n                toolbarHeight = obj['toolbarHeight'];\n            }\n        }\n        var ctxTbarArea = parent.element.querySelector('#' + parent.element.id + '_contextualToolbarArea');\n        if (Browser.isDevice && straightenObj['bool'] && ctxTbarArea) {\n            cxtTbarHeight = ctxTbarArea.clientHeight;\n        }\n        parent.notify('toolbar', { prop: 'setToolbarHeight', value: { height: toolbarHeight } });\n        if (Browser.isDevice) {\n            if (canvasWrapper) {\n                canvasWrapper.style.height = parent.element.offsetHeight - ((2 * toolbarHeight) + cxtTbarHeight) - 4 + 'px';\n            }\n        }\n        else {\n            if (canvasWrapper) {\n                canvasWrapper.style.height = parent.element.offsetHeight - toolbarHeight - 2 + 'px';\n            }\n        }\n        parent.lowerCanvas.height = parent.upperCanvas.height = parseFloat(canvasWrapper.style.height);\n        this.lowerContext.filter =\n            'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n                'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n        parent.notify('filter', { prop: 'setAdjustmentValue', onPropertyChange: false, value: { adjustmentValue: this.lowerContext.filter } });\n        parent.canvasFilter = this.lowerContext.filter;\n        parent.initialAdjustmentValue = this.lowerContext.filter;\n        parent.clearContext(this.lowerContext);\n        parent.clearContext(this.upperContext);\n        if (parent.isImageLoaded) {\n            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: null } });\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.lowerContext.filter = tempFilter;\n            parent.initialAdjustmentValue = tempFilter;\n            parent.canvasFilter = this.lowerContext.filter;\n            if (parent.isImageLoaded) {\n                showSpinner(parent.element);\n                parent.element.style.opacity = '0.5';\n            }\n            this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            if (canvasWrapper) {\n                canvasWrapper.style.width = parent.element.offsetWidth - 2 + 'px';\n                canvasWrapper.style.height = parent.element.offsetHeight + 'px';\n                var obj_1 = { toolbarHeight: 0 };\n                parent.notify('toolbar', { prop: 'getToolbarHeight', value: { obj: obj_1 } });\n                if (Browser.isDevice) {\n                    canvasWrapper.style.height = (parseFloat(canvasWrapper.style.height) - (2 * obj_1['toolbarHeight']) - cxtTbarHeight) - 4 + 'px';\n                }\n                else {\n                    canvasWrapper.style.height = (parseFloat(canvasWrapper.style.height) - obj_1['toolbarHeight']) - 2 + 'px';\n                }\n            }\n            parent.lowerCanvas.width = parent.upperCanvas.width = parent.maskCanvas.width =\n                parseFloat(canvasWrapper.style.width);\n            parent.lowerCanvas.height = parent.upperCanvas.height = parent.maskCanvas.height =\n                parseFloat(canvasWrapper.style.height);\n            this.lowerContext.filter = tempFilter;\n            var obj = { width: 0, height: 0 };\n            this.calcMaxDimension(parent.img.srcWidth, parent.img.srcHeight, obj);\n            var maxDimension = obj;\n            if (straightenObj['bool'] && parent.transform.cropZoomFactor !== 0) {\n                maxDimension.width += (maxDimension.width * parent.transform.cropZoomFactor);\n                maxDimension.height += (maxDimension.height * parent.transform.cropZoomFactor);\n            }\n            else if (parent.transform.defaultZoomFactor > 0) {\n                maxDimension.width += (maxDimension.width * parent.transform.defaultZoomFactor);\n                maxDimension.height += (maxDimension.height * parent.transform.defaultZoomFactor);\n            }\n            parent.img.destLeft = (parent.lowerCanvas.clientWidth - maxDimension.width) / 2;\n            parent.img.destTop = (parent.lowerCanvas.clientHeight - maxDimension.height + 1) / 2;\n            if (parent.transform.degree === 0 && parent.transform.currFlipState === '') {\n                if (parent.transform.defaultZoomFactor > 0) {\n                    parent.img.destLeft += parent.panPoint.totalPannedPoint.x;\n                    parent.img.destTop += parent.panPoint.totalPannedPoint.y;\n                }\n                parent.notify('draw', { prop: 'draw-image-to-canvas', value: { dimension: maxDimension } });\n            }\n            else {\n                parent.notify('draw', { prop: 'draw-image-to-canvas', value: { dimension: maxDimension } });\n                parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                    value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n                var temp = this.lowerContext.filter;\n                parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n                this.lowerContext.filter = temp;\n                parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                    value: { type: 'reverse', isPreventDestination: null, isRotatePan: null } });\n            }\n            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n            parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n            parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n            if (parent.isCircleCrop) {\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            }\n            hideSpinner(parent.element);\n            parent.element.style.opacity = '1';\n            var obj1 = { defToolbarItems: null };\n            parent.notify('toolbar', { prop: 'getDefToolbarItems', value: { obj: obj1 } });\n            if (obj1['defToolbarItems'] && obj1['defToolbarItems'].length > 0 && document.getElementById(parent.element.id + '_toolbar')) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                var toolbar_1 = getComponent(parent.element.id + '_toolbar', 'toolbar');\n                if (toolbar_1) {\n                    toolbar_1.refreshOverflow();\n                }\n                if (ctWrapper && !straightenObj['bool']) {\n                    ctWrapper.classList.add('e-hide');\n                }\n            }\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            if (isActiveObj) {\n                var activeObj = extend({}, parent.objColl[parent.objColl.length - 1], null, true);\n                parent.objColl.pop();\n                if (activeObj.activePoint.width !== 0 && activeObj.activePoint.height !== 0) {\n                    this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n                    parent.objColl.push(activeObj);\n                    parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                        value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n                    activeObj = extend({}, parent.objColl[parent.objColl.length - 1], null, true);\n                    parent.objColl.pop();\n                    this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n                    parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: activeObj } });\n                    if (straightenObj['bool']) {\n                        parent.notify('draw', { prop: 'setStraightenActObj', value: { activeObj: activeObj } });\n                    }\n                    if (parent.activeObj.shape === 'rectangle' || parent.activeObj.shape === 'ellipse' || parent.activeObj.shape === 'text' ||\n                        parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'path' ||\n                        parent.activeObj.shape === 'image') {\n                        parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n                    }\n                }\n            }\n            if (freehandObj['bool']) {\n                parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: true } });\n            }\n            if (parent.isResize) {\n                parent.aspectWidth = Math.ceil(parent.img.destWidth);\n                parent.aspectHeight = Math.ceil(parent.img.destHeight);\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'resize',\n                        isApplyBtn: false, isCropping: false } });\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'resize',\n                        isApplyBtn: false, isCropping: false } });\n            }\n            if ((parent.transform.degree !== 0 || parent.transform.currFlipState !== '') && parent.transform.defaultZoomFactor > 0) {\n                var totalPannedPoint = extend({}, parent.panPoint.totalPannedPoint, null, true);\n                var totalPannedInternalPoint = extend({}, parent.panPoint.totalPannedInternalPoint, null, true);\n                var totalPannedClientPoint = extend({}, parent.panPoint.totalPannedClientPoint, null, true);\n                this.zoomAction(.1);\n                this.zoomAction(-.1);\n                if (parent.transform.degree === 0) {\n                    parent.img.destLeft += totalPannedPoint.x;\n                    parent.img.destTop += totalPannedPoint.y;\n                    parent.panPoint.totalPannedPoint = totalPannedPoint;\n                    parent.notify('draw', { prop: 'updateFlipPan', value: { tempSelectionObj: null } });\n                }\n                else {\n                    parent.panPoint.totalPannedInternalPoint = totalPannedInternalPoint;\n                    parent.panPoint.totalPannedClientPoint = totalPannedClientPoint;\n                    parent.panPoint.currentPannedPoint = { x: 0, y: 0 };\n                    parent.isCropTab = true;\n                    this.rotatePan();\n                    parent.isCropTab = false;\n                }\n            }\n            else if (parent.transform.degree !== 0 && parent.transform.cropZoomFactor > 0) {\n                parent.transform.zoomFactor = 0;\n                parent.transform.cropZoomFactor = null;\n                parent.notify('toolbar', { prop: 'enable-disable-btns', onPropertyChange: false });\n            }\n        }\n    };\n    Transform.prototype.calcMaxDimension = function (width, height, obj, isImgShape) {\n        var object = { toolbarHeight: 0 };\n        var parent = this.parent;\n        parent.notify('toolbar', { prop: 'getToolbarHeight', value: { obj: object } });\n        var canvasMaxWidth = isImgShape ? parent.element.clientWidth / 3 :\n            parent.element.clientWidth;\n        var canvasMaxHeight = isImgShape ? (parent.element.clientHeight - object['toolbarHeight']) / 3 :\n            parent.element.clientHeight - (object['toolbarHeight']); // 1px border\n        canvasMaxHeight = Browser.isDevice ? canvasMaxHeight - (object['toolbarHeight']) : canvasMaxHeight; // 1px border\n        if (Browser.isDevice && parent.isStraightening) {\n            var cxtTbar = parent.element.querySelector('#' + parent.element.id + '_contextualToolbarArea');\n            canvasMaxHeight -= cxtTbar ? cxtTbar.clientHeight : 0;\n        }\n        if (!isImgShape && parent.element.clientHeight === 0) {\n            canvasMaxHeight = 0;\n        }\n        if (isNullOrUndefined(isImgShape)) {\n            if (canvasMaxWidth > 30) {\n                canvasMaxWidth -= 30;\n            }\n            if (canvasMaxHeight > 30) {\n                canvasMaxHeight -= 30;\n            }\n        }\n        var widthScale = canvasMaxWidth / width;\n        var heightScale = canvasMaxHeight / height;\n        var cssMaxWidth = Math.min(width, canvasMaxWidth);\n        var cssMaxHeight = Math.min(height, canvasMaxHeight);\n        if (widthScale < 1 && widthScale < heightScale) {\n            cssMaxWidth = width * widthScale;\n            cssMaxHeight = height * widthScale;\n        }\n        else if (heightScale < 1 && heightScale < widthScale) {\n            cssMaxWidth = width * heightScale;\n            cssMaxHeight = height * heightScale;\n        }\n        if (isNullOrUndefined(isImgShape)) {\n            var cropObj = { bool: null };\n            parent.notify('crop', { prop: 'getPreventScaling', onPropertyChange: false,\n                value: { obj: cropObj } });\n            if (cropObj['bool'] && parent.cropObj.activeObj.activePoint &&\n                parent.cropObj.activeObj.activePoint.width !== 0 && parent.cropObj.activeObj.activePoint.height !== 0) {\n                cssMaxWidth = parent.cropObj.activeObj.activePoint.width;\n                cssMaxHeight = parent.cropObj.activeObj.activePoint.height;\n            }\n        }\n        if (obj) {\n            obj['width'] = cssMaxWidth;\n            obj['height'] = cssMaxHeight;\n        }\n        return { width: cssMaxWidth, height: cssMaxHeight };\n    };\n    Transform.prototype.updatePanPoints = function (x, y) {\n        var parent = this.parent;\n        var tempActObj = extend({}, parent.activeObj, {}, true);\n        var tempDestLeft = parent.img.destLeft;\n        var tempDestTop = parent.img.destTop;\n        if (isNullOrUndefined(this.tempPanMove)) {\n            this.tempPanMove = { x: this.panMove.x, y: this.panMove.y };\n        }\n        var xDiff = this.panMove.x - this.tempPanMove.x;\n        var yDiff = this.panMove.y - this.tempPanMove.y;\n        if (x || y) {\n            xDiff = x;\n            yDiff = y;\n        }\n        parent.img.destLeft += xDiff;\n        parent.img.destTop += yDiff;\n        this.limitPan();\n        var obj = { bool: null };\n        var object = { isIntersect: null };\n        parent.notify('draw', { prop: 'updateImgCanvasPoints', onPropertyChange: false });\n        parent.notify('draw', { prop: 'isLinesIntersect', onPropertyChange: false, value: { obj: object } });\n        parent.notify('draw', { prop: 'isSelOutsideImg', onPropertyChange: false, value: { obj: obj } });\n        var count = 0;\n        while (parent.transform.straighten !== 0 && (object['isIntersect'] || obj['bool'])) {\n            count++;\n            parent.img.destLeft = tempDestLeft;\n            parent.img.destTop = tempDestTop;\n            if (xDiff !== 0 && xDiff > 0) {\n                xDiff -= 1;\n            }\n            else if (xDiff !== 0 && xDiff < 0) {\n                xDiff += 1;\n            }\n            if (yDiff !== 0 && yDiff > 0) {\n                yDiff -= 1;\n            }\n            else if (yDiff !== 0 && yDiff < 0) {\n                yDiff += 1;\n            }\n            if ((xDiff === 0 && yDiff === 0) || count === 200) {\n                break;\n            }\n            parent.img.destLeft += xDiff;\n            parent.img.destTop += yDiff;\n            this.limitPan();\n            parent.notify('draw', { prop: 'updateImgCanvasPoints', onPropertyChange: false });\n            parent.notify('draw', { prop: 'isLinesIntersect', onPropertyChange: false, value: { obj: object } });\n            parent.notify('draw', { prop: 'isSelOutsideImg', onPropertyChange: false, value: { obj: obj } });\n        }\n        parent.activeObj = tempActObj;\n        return { x: parent.img.destLeft - tempDestLeft, y: parent.img.destTop - tempDestTop };\n    };\n    Transform.prototype.resizeImage = function (width, height) {\n        var parent = this.parent;\n        var temp = true;\n        var temp1 = true;\n        parent.allowDownScale = false;\n        parent.img.srcLeft = 0;\n        parent.img.srcTop = 0;\n        parent.isAspectRatio = true;\n        var minimum = [];\n        parent.img.srcWidth = parent.baseImgCanvas.width;\n        parent.img.srcHeight = parent.baseImgCanvas.height;\n        if (parent.resizeSrc && parent.resizeSrc.width !== 0 && parent.resizeSrc.height !== 0) {\n            parent.img.srcLeft = parent.resizeSrc.startX;\n            parent.img.srcTop = parent.resizeSrc.startY;\n            parent.img.srcWidth = parent.resizeSrc.width;\n            parent.img.srcHeight = parent.resizeSrc.height;\n        }\n        while ((width < parent.img.destWidth || height < parent.img.destHeight) && temp1) {\n            this.zoomAction(-.1, null, true, true);\n            if (width > parent.img.destWidth || height > parent.img.destHeight) {\n                while (width > parent.img.destWidth || height > parent.img.destHeight) {\n                    this.zoomAction(0.0125, null, true, true);\n                    temp1 = false;\n                    minimum.push(parent.img.destWidth);\n                }\n            }\n        }\n        while ((width > parent.img.destWidth || height > parent.img.destHeight) && temp1 && temp) {\n            this.zoomAction(.1, null, true, true);\n            if (width < parent.img.destWidth || height < parent.img.destHeight) {\n                while (width < parent.img.destWidth) {\n                    this.zoomAction(-.0125, null, true, true);\n                    temp = false;\n                    minimum.push(parent.img.destWidth);\n                }\n            }\n        }\n        var nearestNumber = minimum[0];\n        var smallestDifference = Math.abs(parent.img.destWidth - nearestNumber);\n        for (var _i = 0, minimum_1 = minimum; _i < minimum_1.length; _i++) {\n            var num = minimum_1[_i];\n            var difference = Math.abs(width - num);\n            if (difference < smallestDifference) {\n                nearestNumber = num;\n                smallestDifference = difference;\n            }\n        }\n        if (nearestNumber < width && temp) {\n            this.zoomAction(-.0125, null, true, true);\n            temp = false;\n        }\n        if (nearestNumber > width && !temp) {\n            this.zoomAction(.0125, null, true, true);\n            temp = false;\n        }\n        this.zoomAction(.0125, null, true);\n        parent.allowDownScale = true;\n        this.zoomAction(-.0125, null, true);\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var prevObj = extend({}, this.prevResizeCurrObj, {}, true);\n        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: { operation: 'resize',\n                previousObj: prevObj, previousObjColl: prevObj.objColl, previousPointColl: prevObj.pointColl,\n                previousSelPointColl: prevObj.selPointColl, previousCropObj: prevCropObj, previousText: null, currentText: null,\n                previousFilter: null, isCircleCrop: parent.isCircleCrop } });\n        parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n    };\n    Transform.prototype.resizeCrop = function (width, height) {\n        var parent = this.parent;\n        var temp = true;\n        var obj1 = { prevObj: parent.prevObj };\n        parent.cropObj = extend({}, parent.prevCropObj, {}, true);\n        parent.allowDownScale = false;\n        parent.notify('toolbar', { prop: 'getPrevObj', onPropertyChange: false, value: { obj: obj1 } });\n        var activeObj = extend({}, obj1['prevObj']['activeObj'], {}, true);\n        obj1['prevObj']['activeObj'] = extend({}, parent.activeObj, {}, true);\n        parent.notify('draw', { prop: 'setCurrentObj', onPropertyChange: false, value: { obj: obj1['prevObj'] } });\n        parent.objColl = extend([], obj1['prevObj']['objColl'], [], true);\n        parent.pointColl = extend([], obj1['prevObj']['pointColl'], [], true);\n        parent.transform.straighten = 0;\n        parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n            value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n        if (parent.transform.straighten === 0 && !this.isPreventSelect) {\n            parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n        }\n        var tempwidth = width;\n        var tempheight = height;\n        var tempZoom = false;\n        if (height >= width && height <= Math.ceil(parent.img.destHeight)) {\n            while ((height <= Math.ceil(parent.img.destHeight)) && temp) {\n                this.zoomAction(-.1, null, true, true);\n                if (width > parent.img.destWidth || height > parent.img.destHeight) {\n                    while (width > parent.img.destWidth || height > parent.img.destHeight) {\n                        this.zoomAction(.0125, null, true, true);\n                        temp = false;\n                    }\n                }\n            }\n        }\n        else if (height <= width && width < parent.img.destWidth) {\n            while ((width < parent.img.destWidth) && temp) {\n                this.zoomAction(-.1, null, true, true);\n                if (width > parent.img.destWidth || height > parent.img.destHeight) {\n                    while (width > parent.img.destWidth || height > parent.img.destHeight) {\n                        this.zoomAction(.0125, null, true, true);\n                        temp = false;\n                    }\n                }\n            }\n        }\n        else if (height >= width && height >= parent.img.destHeight) {\n            while ((height >= parent.img.destHeight) && temp) {\n                this.zoomAction(.1, null, true, true);\n            }\n        }\n        else if (width >= height && width >= parent.img.destWidth) {\n            while ((width >= parent.img.destWidth) && temp) {\n                this.zoomAction(.1, null, true, true);\n            }\n            if (width < parent.img.destWidth && height < parent.img.destHeight) {\n                while (width < parent.img.destWidth && height < parent.img.destHeight) {\n                    this.zoomAction(-.0125, null, true, true);\n                    temp = false;\n                }\n                this.zoomAction(.0125, null, true, true);\n            }\n        }\n        else if (height > parent.img.destHeight && width > parent.img.destWidth) {\n            while ((height > parent.img.destHeight) && (width > parent.img.destWidth) && temp) {\n                this.zoomAction(.1, null, true, true);\n            }\n            if (width < parent.img.destWidth && height < parent.img.destHeight) {\n                while (width < parent.img.destWidth && height < parent.img.destHeight) {\n                    this.zoomAction(-.0125, null, true, true);\n                    temp = false;\n                }\n                this.zoomAction(.0125, null, true, true);\n            }\n        }\n        this.resizeImg(activeObj, width, height);\n        width = tempwidth;\n        height = tempheight;\n        if ((height !== parent.img.destHeight || width !== parent.img.destWidth)) {\n            while ((height > parent.img.destHeight || width > parent.img.destWidth)) {\n                this.zoomAction(.0125, null, true, true);\n                tempZoom = true;\n            }\n            if (tempZoom) {\n                this.zoomAction(-.0125, null, true, true);\n                tempZoom = false;\n            }\n        }\n        if ((height !== parent.img.destHeight || width !== parent.img.destWidth)) {\n            while ((height < parent.img.destHeight || width < parent.img.destWidth)) {\n                this.zoomAction(-.0125, null, true, true);\n                tempZoom = true;\n            }\n            if (tempZoom) {\n                this.zoomAction(-.0125, null, true, true);\n                tempZoom = false;\n            }\n        }\n        obj1['prevObj']['activeObj'] = extend({}, activeObj, {}, true);\n        this.zoomAction(.0125, null, true);\n        parent.allowDownScale = this.preventDownScale ? false : true;\n        parent.isCropTab = false;\n        this.zoomAction(-.0125, null, true);\n        parent.aspectWidth = width;\n        parent.aspectHeight = height;\n    };\n    Transform.prototype.resizeImg = function (activeObj, width, height) {\n        var parent = this.parent;\n        var widthRatio = width / parent.img.destWidth;\n        var heightRatio = height / parent.img.destHeight;\n        if (activeObj.shape) {\n            parent.currSelectionPoint = activeObj;\n            parent.notify('crop', { prop: 'setInitCrop', onPropertyChange: false, value: { bool: true } });\n        }\n        else if (parent.img.srcWidth === parent.baseImgCanvas.width && parent.img.srcHeight === parent.baseImgCanvas.height) {\n            parent.currSelectionPoint = null;\n            parent.notify('draw', { prop: 'select', onPropertyChange: false,\n                value: { type: 'custom', startX: null, startY: null, width: null, height: null } });\n        }\n        if (isNullOrUndefined(parent.currSelectionPoint)) {\n            parent.notify('draw', { prop: 'select', onPropertyChange: false,\n                value: { type: 'custom', startX: parent.img.destLeft, startY: parent.img.destTop,\n                    width: parent.img.destWidth, height: parent.img.destHeight } });\n        }\n        else {\n            parent.notify('draw', { prop: 'select', onPropertyChange: false,\n                value: { type: 'custom', startX: null, startY: null, width: null, height: null } });\n        }\n        width = parent.activeObj.activePoint.width * widthRatio;\n        height = parent.activeObj.activePoint.height * heightRatio;\n        var sx = (parent.activeObj.activePoint.startX + (parent.activeObj.activePoint.width / 2)) - (width / 2);\n        var sy = (parent.activeObj.activePoint.startY + (parent.activeObj.activePoint.height / 2)) - (height / 2);\n        var count = 0;\n        while (Browser.isDevice && count < 500 && (sx < 0 || sy < 0 || (sx + width) > parent.img.destWidth\n            || (sy + height) > parent.img.destHeight)) {\n            count++;\n            width -= 1;\n            height -= 1;\n            sx = (parent.activeObj.activePoint.startX + (parent.activeObj.activePoint.width / 2)) - (width / 2);\n            sy = (parent.activeObj.activePoint.startY + (parent.activeObj.activePoint.height / 2)) - (height / 2);\n        }\n        parent.transform.defaultZoomFactor = 0;\n        parent.notify('draw', { prop: 'setResizeSelect', value: { bool: true } });\n        parent.notify('draw', { prop: 'setIsCropSelect', value: { bool: true } });\n        parent.notify('draw', { prop: 'select', onPropertyChange: false,\n            value: { type: 'custom', startX: sx, startY: sy, width: width, height: height } });\n        parent.notify('draw', { prop: 'setResizeSelect', value: { bool: false } });\n        if (parent.transform.straighten !== 0) {\n            var obj = { isIntersect: null, arr: null };\n            parent.notify('draw', { prop: 'updateImgCanvasPoints', onPropertyChange: false });\n            parent.notify('draw', { prop: 'isLinesIntersect', onPropertyChange: false, value: { obj: obj } });\n            while (obj['arr'][0] || obj['arr'][1] || obj['arr'][2] || obj['arr'][3]) {\n                this.zoomAction(.0125, null, true);\n                parent.notify('draw', { prop: 'updateImgCanvasPoints', onPropertyChange: false });\n                parent.notify('draw', { prop: 'isLinesIntersect', onPropertyChange: false, value: { obj: obj } });\n            }\n        }\n        parent.isCropToolbar = true;\n        parent.crop();\n        parent.isCropToolbar = false;\n    };\n    Transform.prototype.updateResize = function () {\n        var parent = this.parent;\n        parent.prevCropObj = extend({}, parent.cropObj, {}, true);\n        var currObject = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: currObject } });\n        parent.prevObj = currObject['currObj'];\n        if (parent.currSelectionPoint && parent.prevCropObj.activeObj.shape) {\n            parent.prevObj.activeObj = extend({}, parent.prevCropObj.activeObj, {}, true);\n        }\n        parent.prevObj.objColl = extend([], parent.objColl, [], true);\n        parent.prevObj.pointColl = extend([], parent.pointColl, [], true);\n        parent.prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        parent.prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        parent.resizeSrc = { startX: parent.img.srcLeft, startY: parent.img.srcTop, width: parent.img.srcWidth,\n            height: parent.img.srcHeight };\n    };\n    Transform.prototype.resize = function (width, height, isAspectRatio) {\n        var parent = this.parent;\n        var aspectHeight;\n        parent.isResize = true;\n        if (isNullOrUndefined(parent.prevCropObj) && isNullOrUndefined(parent.prevObj)) {\n            parent.notify('transform', { prop: 'updateResize', value: { bool: false } });\n        }\n        var aspectIcon = parent.element.querySelector('#' + parent.element.id + '_aspectratio');\n        var nonAspectIcon = parent.element.querySelector('#' + parent.element.id + '_nonaspectratio');\n        if (aspectIcon && nonAspectIcon) {\n            parent.notify('toolbar', { prop: 'initResizeToolbar' });\n            if (Browser.isDevice) {\n                parent.notify('toolbar', { prop: 'init-main-toolbar', value: { isApplyBtn: false, isDevice: true, isOkBtn: true, isResize: true } });\n            }\n        }\n        var aspectRatioHeight = parent.element.querySelector('#' + parent.element.id + '_resizeHeight');\n        if (aspectRatioHeight) {\n            aspectHeight = aspectRatioHeight.value === '' ? aspectRatioHeight.placeholder : aspectRatioHeight.value;\n        }\n        else {\n            aspectHeight = height + 'px';\n        }\n        var resizeEventArgs = { cancel: false, previousWidth: Math.ceil(parent.img.destWidth),\n            previousHeight: Math.ceil(parent.img.destHeight), width: Math.ceil(width), height: height && height !== 0 ? Math.ceil(height) :\n                (isAspectRatio ? Math.ceil(parseFloat(aspectHeight)) : Math.ceil(parent.img.destHeight)),\n            isAspectRatio: isAspectRatio ? isAspectRatio : false };\n        parent.trigger('resizing', resizeEventArgs);\n        parent.editCompleteArgs = resizeEventArgs;\n        if (!resizeEventArgs.cancel) {\n            this.resizeEventHandler(resizeEventArgs);\n        }\n        else if (parent.aspectHeight && parent.aspectWidth) {\n            parent.aspectHeight = resizeEventArgs.previousHeight;\n            parent.aspectWidth = resizeEventArgs.previousWidth;\n        }\n    };\n    Transform.prototype.resizeEventHandler = function (args) {\n        var parent = this.parent;\n        var isRotate;\n        var aspectRatioWidth = parent.element.querySelector('#' + parent.element.id + '_resizeWidth');\n        var aspectRatioHeight = parent.element.querySelector('#' + parent.element.id + '_resizeHeight');\n        if (args.isAspectRatio) {\n            if (this.resizedImgAngle == null || this.resizedImgAngle !== parent.transform.degree) {\n                this.resizedImgAngle = parent.transform.degree;\n                isRotate = true;\n            }\n            if (isRotate) {\n                parent.notify('transform', { prop: 'resizeImage', value: { width: args.width, height: 0 } });\n                var originalWidth = parent.img.destWidth;\n                var originalHeight = parent.img.destHeight;\n                var aspectRatioWidthValue = void 0;\n                if (aspectRatioHeight) {\n                    aspectRatioWidthValue = parseFloat(aspectRatioWidth.value === '' ? aspectRatioWidth.placeholder : aspectRatioWidth.value);\n                    var value = aspectRatioWidthValue / (originalWidth / originalHeight);\n                    // eslint-disable-next-line max-len\n                    var height = value % 1 >= 0.5 || value % 1 <= -0.5 ? Math.round(value) : (value < 0) ? Math.ceil(value) : Math.floor(value);\n                    getComponent(aspectRatioHeight, 'numerictextbox').value = height;\n                    aspectRatioHeight.value = height.toString() + ' px';\n                    parent.aspectHeight = height;\n                    if (aspectRatioWidth && aspectRatioWidth.value === '') {\n                        var aspectRatioHeightValue = parseFloat(aspectRatioHeight.value === '' ? aspectRatioHeight.placeholder :\n                            aspectRatioHeight.value);\n                        value = aspectRatioHeightValue / (originalHeight / originalWidth);\n                        // eslint-disable-next-line max-len\n                        var width = value % 1 >= 0.5 || value % 1 <= -0.5 ? Math.round(value) : (value < 0) ? Math.ceil(value) : Math.floor(value);\n                        getComponent(aspectRatioWidth, 'numerictextbox').value = width;\n                        aspectRatioWidth.value = width.toString() + ' px';\n                        parent.aspectWidth = width;\n                    }\n                }\n            }\n            else {\n                parent.notify('transform', { prop: 'resizeImage', value: { width: args.width, height: null } });\n            }\n        }\n        else {\n            if (this.resizedImgAngle !== null && this.resizedImgAngle !== parent.transform.degree) {\n                this.resizedImgAngle = parent.transform.degree;\n                isRotate = true;\n            }\n            if (isRotate) {\n                parent.notify('transform', { prop: 'setPreventDownScale', value: { bool: true } });\n                parent.notify('transform', { prop: 'resizeCrop', value: { width: args.width, height: args.height } });\n                parent.notify('undo-redo', { prop: 'setPreventUR', value: { bool: true } });\n                parent.okBtn(null, true);\n                parent.notify('undo-redo', { prop: 'setPreventUR', value: { bool: false } });\n                parent.resizeSrc = { startX: parent.img.srcLeft, startY: parent.img.srcTop, width: parent.img.srcWidth,\n                    height: parent.img.srcHeight };\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'resize',\n                        isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                parent.notify('transform', { prop: 'setPreventDownScale', value: { bool: false } });\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'resize',\n                        isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n            }\n            else {\n                parent.notify('transform', { prop: 'resizeCrop', value: { width: args.width, height: args.height } });\n            }\n        }\n        this.resizedImgAngle = parent.transform.degree;\n    };\n    Transform.prototype.straightenImage = function (degree) {\n        var parent = this.parent;\n        if (parent.toolbar && parent.toolbar.length === 0) {\n            parent.notify('draw', { prop: 'select', onPropertyChange: false,\n                value: { type: 'custom', startX: null, startY: null, width: null, height: null } });\n        }\n        parent.notify('toolbar', { prop: 'performCropTransformClick', value: { shape: null } });\n        parent.setStraighten(degree);\n        parent.okBtn();\n    };\n    return Transform;\n}());\nexport { Transform };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nvar UndoRedo = /** @class */ (function () {\n    function UndoRedo(parent) {\n        this.undoRedoStep = 0;\n        this.undoRedoColl = [];\n        this.appliedUndoRedoColl = [];\n        this.tempUndoRedoColl = [];\n        this.tempUndoRedoStep = 0;\n        this.isPreventing = false;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    UndoRedo.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    UndoRedo.prototype.addEventListener = function () {\n        this.parent.on('undo-redo', this.undoRedo, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    UndoRedo.prototype.removeEventListener = function () {\n        this.parent.off('undo-redo', this.undoRedo);\n        this.parent.off('destroyed', this.destroy);\n    };\n    UndoRedo.prototype.initializeUrPvtProp = function () {\n        if (this.parent.lowerCanvas) {\n            this.lowerContext = this.parent.lowerCanvas.getContext('2d');\n        }\n        if (this.parent.upperCanvas) {\n            this.upperContext = this.parent.upperCanvas.getContext('2d');\n        }\n    };\n    UndoRedo.prototype.undoRedo = function (args) {\n        this.initializeUrPvtProp();\n        switch (args.prop) {\n            case 'updateUndoRedoColl':\n                this.updateUrc(args.value['operation'], args.value['previousObj'], args.value['previousObjColl'], args.value['previousPointColl'], args.value['previousSelPointColl'], args.value['previousCropObj'], args.value['previousText'], args.value['currentText'], args.value['previousFilter'], args.value['isCircleCrop']);\n                break;\n            case 'refreshUrc':\n                this.refreshUrc(args.value['bool']);\n                break;\n            case 'updateCurrUrc':\n                this.updateCurrUrc(args.value['type'], args.value['isCancel']);\n                break;\n            case 'call-undo':\n                this.callUndo();\n                break;\n            case 'call-redo':\n                this.callRedo();\n                break;\n            case 'undo':\n                this.undo();\n                break;\n            case 'redo':\n                this.redo();\n                break;\n            case 'updateUrObj':\n                this.updateUrObj(args.value['objColl'], args.value['operation']);\n                break;\n            case 'updateUndoRedo':\n                this.updateUndoRedo(args.value ? args.value['operation'] : null);\n                break;\n            case 'getAppliedUndoRedoColl':\n                args.value['obj']['appliedUndoRedoColl'] = this.appliedUndoRedoColl;\n                break;\n            case 'getUndoRedoStep':\n                args.value['obj']['undoRedoStep'] = this.undoRedoStep;\n                break;\n            case 'setUndoRedoStep':\n                this.undoRedoStep = args.value['step'];\n                break;\n            case 'undoDefault':\n                this.undoDefault(args.value['obj']);\n                break;\n            case 'setPreventUR':\n                this.isPreventing = args.value['bool'];\n                break;\n            case 'updateUndoRedoStack':\n                if (args.value && args.value['isPenDraw']) {\n                    this.updateUndoRedoStack(args.value['isPenDraw']);\n                }\n                else {\n                    this.updateUndoRedoStack();\n                }\n                break;\n            case 'reset':\n                this.reset();\n                break;\n        }\n    };\n    UndoRedo.prototype.getModuleName = function () {\n        return 'undo-redo';\n    };\n    UndoRedo.prototype.reset = function () {\n        this.tempCurrSelPoint = null;\n        this.undoRedoStep = 0;\n        this.undoRedoColl = [];\n        this.appliedUndoRedoColl = [];\n        this.tempActObj = null;\n        this.tempUndoRedoColl = [];\n        this.tempUndoRedoStep = 0;\n        this.isPreventing = false;\n    };\n    UndoRedo.prototype.refreshUrc = function (refreshToolbar) {\n        var parent = this.parent;\n        if (parent.isImageUpdated) {\n            return;\n        }\n        refreshToolbar = refreshToolbar ? refreshToolbar : false;\n        if (refreshToolbar) {\n            parent.notify('toolbar', { prop: 'setEnableDisableUndoRedo', value: { isPrevent: true } });\n            this.tempUndoRedoColl = extend([], this.appliedUndoRedoColl, [], true);\n            this.tempUndoRedoStep = this.undoRedoStep;\n        }\n        parent.notify('toolbar', { prop: 'setEnableDisableUndoRedo', value: { isPrevent: false } });\n        this.undoRedoColl = this.undoRedoColl.slice(0, this.undoRedoStep);\n        this.appliedUndoRedoColl = this.appliedUndoRedoColl.slice(0, this.undoRedoStep);\n        parent.isUndoRedo = parent.currObjType.isUndoAction = false;\n        parent.notify('toolbar', { prop: 'enable-disable-btns' });\n    };\n    UndoRedo.prototype.updateCurrUrc = function (type, isCancel) {\n        var parent = this.parent;\n        if (parent.isResize || this.isPreventing || parent.noPushUndo) {\n            return;\n        }\n        parent.notify('toolbar', { prop: 'setEnableDisableUndoRedo', value: { isPrevent: false } });\n        if (type === 'ok') {\n            parent.notify('draw', { prop: 'setShapeTextInsert', onPropertyChange: false, value: { bool: false } });\n            var collection = this.tempUndoRedoColl.length > 0 ?\n                extend([], this.tempUndoRedoColl, [], true) :\n                extend([], this.undoRedoColl, [], true);\n            var prevObj = this.undoRedoColl[this.undoRedoColl.length - 1];\n            var appliedURColl = this.appliedUndoRedoColl[this.appliedUndoRedoColl.length - 1];\n            var prevTransform = prevObj ? extend({}, prevObj.previousObj, {}, true)\n                : null;\n            if (isNullOrUndefined(appliedURColl)) {\n                if (this.undoRedoColl[0]) {\n                    prevObj.previousCropObj = collection[0].previousCropObj;\n                    prevObj.previousObj = collection[0].previousObj;\n                    prevObj.previousObjColl = collection[0].previousObjColl;\n                    prevObj.previousPointColl = collection[0].previousPointColl;\n                    prevObj.previousText = collection[0].previousText;\n                }\n            }\n            else if (prevObj.operation !== 'imageHFlip' && prevObj.operation !== 'imageVFlip') {\n                prevObj.previousCropObj = appliedURColl.currentCropObj;\n                prevObj.previousObj = appliedURColl.currentObj;\n                prevObj.previousObjColl = appliedURColl.currentObjColl;\n                prevObj.previousPointColl = appliedURColl.currentPointColl;\n                prevObj.previousText = appliedURColl.currentText;\n                if (prevObj.operation === 'frame' && prevObj.previousObj && prevTransform) {\n                    prevObj.previousObj.defaultZoom = prevTransform.defaultZoom;\n                    prevObj.previousObj.zoomFactor = prevTransform.zoomFactor;\n                    prevObj.previousObj.cropZoom = prevTransform.cropZoom;\n                }\n            }\n            if (prevObj) {\n                if (prevObj.operation !== 'imageHFlip' && prevObj.operation !== 'imageVFlip') {\n                    var obj = this.getZeroZoomObjPointValue(prevObj.currentObjColl, prevObj.currentPointColl);\n                    prevObj.currentObjColl = obj['obj'];\n                    prevObj.currentPointColl = obj['point'];\n                    var adjObj = { adjustmentLevel: null };\n                    parent.notify('filter', { prop: 'getAdjustmentLevel', onPropertyChange: false, value: { obj: adjObj } });\n                    prevObj.currentObj.adjustmentLevel = extend({}, adjObj['adjustmentLevel'], {}, true);\n                    parent.notify('filter', { prop: 'setTempAdjVal' });\n                    prevObj.currentObj.currentFilter = parent.currentFilter;\n                }\n                this.appliedUndoRedoColl.push(prevObj);\n                if (!isCancel) {\n                    this.triggerActionCompletedEvent(prevObj.operation);\n                }\n            }\n            this.tempUndoRedoColl = [];\n            this.tempUndoRedoStep = 0;\n        }\n        else if (this.tempUndoRedoColl.length > 0) {\n            this.appliedUndoRedoColl = extend([], this.tempUndoRedoColl, [], true);\n            this.undoRedoStep = this.tempUndoRedoStep;\n            this.tempUndoRedoColl = [];\n            this.tempUndoRedoStep = 0;\n        }\n        var lastObj = this.appliedUndoRedoColl[this.appliedUndoRedoColl.length - 1];\n        var lastPrevObj = this.appliedUndoRedoColl[this.appliedUndoRedoColl.length - 2];\n        if (this.appliedUndoRedoColl.length > 16) {\n            this.appliedUndoRedoColl.splice(0, 1);\n        }\n        else if (!isCancel && lastObj && lastPrevObj) {\n            if ((((lastObj.operation === 'shapeTransform' && lastPrevObj.operation === 'shapeTransform') ||\n                (lastObj.operation === 'shapeInsert' && lastPrevObj.operation === 'shapeInsert')) &&\n                JSON.stringify(lastObj.currentObjColl) === JSON.stringify(lastPrevObj.currentObjColl)) ||\n                (lastObj.operation === 'freehand-draw' && lastPrevObj.operation === 'freehand-draw' &&\n                    JSON.stringify(lastObj.currentPointColl) === JSON.stringify(lastPrevObj.currentPointColl)) ||\n                (lastObj.operation === 'freehanddrawCustomized' && lastPrevObj.operation === 'freehanddrawCustomized' &&\n                    JSON.stringify(lastObj.currentPointColl) === JSON.stringify(lastPrevObj.currentPointColl))) {\n                this.appliedUndoRedoColl.splice(this.appliedUndoRedoColl.length - 1, 1);\n            }\n            else if (this.undoRedoStep !== this.appliedUndoRedoColl.length - 1) {\n                lastObj = this.appliedUndoRedoColl[this.appliedUndoRedoColl.length - 1];\n                lastPrevObj = this.appliedUndoRedoColl[this.undoRedoStep];\n                if (lastObj && lastPrevObj && lastObj.operation === 'shapeTransform' &&\n                    lastPrevObj.operation === 'shapeTransform' &&\n                    JSON.stringify(lastObj.currentObjColl) === JSON.stringify(lastPrevObj.previousObjColl)) {\n                    this.appliedUndoRedoColl.splice(this.appliedUndoRedoColl.length - 1, 1);\n                    this.undoRedoColl = [];\n                    this.undoRedoColl = extend([], this.appliedUndoRedoColl, [], true);\n                    return;\n                }\n            }\n        }\n        this.undoRedoColl = [];\n        this.undoRedoColl = extend([], this.appliedUndoRedoColl, [], true);\n        if (type === 'ok') {\n            this.undoRedoStep = this.undoRedoColl.length;\n            parent.notify('toolbar', { prop: 'enable-disable-btns' });\n        }\n        if (parent.transform.zoomFactor > 0) {\n            parent.togglePan = true;\n            parent.notify('selection', { prop: 'setDragCanvas', value: { bool: true } });\n        }\n    };\n    UndoRedo.prototype.triggerActionCompletedEvent = function (action) {\n        var parent = this.parent;\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var actionMap = { 'brightness': 'fine-tune', 'contrast': 'fine-tune', 'hue': 'fine-tune',\n            'saturation': 'fine-tune', 'opacity': 'fine-tune', 'blur': 'fine-tune', 'exposure': 'fine-tune',\n            'default': 'filter', 'chrome': 'filter', 'cold': 'filter', 'warm': 'filter',\n            'grayscale': 'filter', 'sepia': 'filter', 'invert': 'filter',\n            'deleteObj': 'shape-delete', 'deleteFreehandDrawing': 'freehand-draw-delete',\n            'shapeInsert': 'shape-insert', 'shapeTransform': 'shape-customize',\n            'freehanddrawCustomized': 'freehand-draw-customize'\n        };\n        var actionResult = actionMap[action] || action;\n        var actionArgs = { action: actionResult, actionEventArgs: parent.editCompleteArgs };\n        parent.triggerEditCompleteEvent(actionArgs);\n    };\n    UndoRedo.prototype.getUndoRedoAction = function (action) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var actionMap = { 'brightness': 'fine-tune', 'contrast': 'fine-tune', 'hue': 'fine-tune',\n            'saturation': 'fine-tune', 'opacity': 'fine-tune', 'blur': 'fine-tune', 'exposure': 'fine-tune',\n            'default': 'filter', 'chrome': 'filter', 'cold': 'filter', 'warm': 'filter',\n            'grayscale': 'filter', 'sepia': 'filter', 'invert': 'filter',\n            'deleteObj': 'shape-delete', 'deleteFreehandDrawing': 'freehand-drawing-delete',\n            'shapeInsert': 'shape-insert', 'shapeTransform': 'shape-customize', 'imageRotate': 'shape-customize',\n            'freehanddraw': 'freehand-draw', 'freehanddrawCustomized': 'freehand-draw-customize',\n            'textAreaCustomization': 'text-area-customization', 'imageHFlip': 'shape-customize',\n            'imageVFlip': 'shape-customize', 'bgColor': 'background-color', 'updateImage': 'image-update'\n        };\n        return actionMap[action] || action;\n    };\n    UndoRedo.prototype.cancelCropSelection = function () {\n        var parent = this.parent;\n        var isCropSelection = false;\n        var splitWords;\n        if (parent.activeObj.shape) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (parent.currObjType.isCustomCrop || (splitWords && splitWords[0] === 'crop')) {\n            isCropSelection = true;\n        }\n        if (isCropSelection) {\n            parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n        }\n        if (this.tempUndoRedoColl.length !== 0 || this.tempUndoRedoStep !== 0) {\n            this.appliedUndoRedoColl = extend([], this.tempUndoRedoColl, [], true);\n            this.undoRedoColl = extend([], this.tempUndoRedoColl, [], true);\n            this.undoRedoStep = this.tempUndoRedoStep;\n            this.tempUndoRedoColl = [];\n            this.tempUndoRedoStep = 0;\n            parent.notify('toolbar', { prop: 'setEnableDisableUndoRedo', value: { isPrevent: false } });\n        }\n    };\n    UndoRedo.prototype.refreshToolbarActions = function () {\n        var parent = this.parent;\n        if (parent.activeObj.shape) {\n            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n            parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n        }\n        else {\n            parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n        }\n    };\n    UndoRedo.prototype.applyCurrentChanges = function () {\n        var parent = this.parent;\n        parent.currObjType.isFiltered = false;\n        if (parent.transform.zoomFactor === 0) {\n            parent.togglePan = false;\n            parent.notify('selection', { prop: 'setDragCanvas', value: { bool: false } });\n        }\n        if (parent.element.querySelector('.e-contextual-toolbar-wrapper')) {\n            parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n        }\n        if (parent.togglePen) {\n            parent.togglePen = false;\n            parent.upperCanvas.style.cursor = parent.cursor = 'default';\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        }\n        if (this.appliedUndoRedoColl.length > 0) {\n            this.undoRedoColl = extend([], this.appliedUndoRedoColl, [], true);\n        }\n    };\n    UndoRedo.prototype.callUndo = function () {\n        this.applyCurrentChanges();\n        this.undo();\n    };\n    UndoRedo.prototype.callRedo = function () {\n        this.applyCurrentChanges();\n        this.redo();\n    };\n    UndoRedo.prototype.undo = function () {\n        var parent = this.parent;\n        this.cancelCropSelection();\n        parent.notify('draw', { prop: 'resetFrameZoom', onPropertyChange: false, value: { isOk: false } });\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (this.undoRedoStep > 0) {\n                this.refreshToolbarActions();\n                if (parent.activeObj.activePoint && parent.activeObj.activePoint.width !== 0) {\n                    this.tempActObj = parent.activeObj;\n                }\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                this.undoRedoStep--;\n                parent.notify('toolbar', { prop: 'enable-disable-btns' });\n                if (parent.element.querySelector('.e-contextual-toolbar-wrapper')) {\n                    parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                }\n                parent.isUndoRedo = true;\n                var obj = this.undoRedoColl[this.undoRedoStep];\n                if (this.undoRedoColl.length === this.undoRedoStep) {\n                    parent.currObjType.isUndoAction = false;\n                }\n                else {\n                    parent.currObjType.isUndoAction = true;\n                }\n                if (obj.operation !== 'textAreaCustomization' &&\n                    (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block')) {\n                    parent.textArea.style.display = 'none';\n                }\n                parent.notify('draw', { prop: 'setCancelAction', onPropertyChange: false, value: { bool: true } });\n                var activeObj = void 0;\n                parent.cropObj = extend({}, obj.previousCropObj, {}, true);\n                parent.afterCropActions = obj.previousObj.afterCropActions;\n                this.lowerContext.filter = obj.previousObj.filter;\n                parent.notify('filter', { prop: 'setAdjustmentLevel', onPropertyChange: false, value: { adjustmentLevel: obj.previousObj.adjustmentLevel } });\n                parent.notify('filter', { prop: 'setTempAdjVal' });\n                parent.currentFilter = obj.previousObj.currentFilter;\n                parent.notify('filter', { prop: 'setTempFilVal' });\n                parent.canvasFilter = this.lowerContext.filter;\n                parent.initialAdjustmentValue = this.lowerContext.filter;\n                parent.notify('filter', { prop: 'setBevelFilter', onPropertyChange: false, value: { bevelFilter: this.lowerContext.filter } });\n                var editCompleteArgs = { action: this.getUndoRedoAction(obj.operation) };\n                switch (obj.operation) {\n                    case 'shapeTransform':\n                    case 'brightness':\n                    case 'contrast':\n                    case 'hue':\n                    case 'saturation':\n                    case 'opacity':\n                    case 'blur':\n                    case 'exposure':\n                    case 'default':\n                    case 'chrome':\n                    case 'cold':\n                    case 'warm':\n                    case 'grayscale':\n                    case 'blackandwhite':\n                    case 'sepia':\n                    case 'invert':\n                    case 'sharpen':\n                    case 'imageRotate':\n                    case 'shapeInsert':\n                        this.shapeTransform(obj.previousObjColl, obj.previousPointColl);\n                        break;\n                    case 'freehanddraw':\n                    case 'freehand-draw':\n                        this.updateFreehandDraw(obj.previousPointColl, obj.previousSelPointColl);\n                        parent.notify('freehand-draw', { prop: 'setCurrentFreehandDrawIndex',\n                            value: { value: parent.pointColl.length } });\n                        break;\n                    case 'freehanddrawCustomized':\n                        this.updateFreehandDrawCustomized(obj.previousObjColl, obj.previousPointColl);\n                        break;\n                    case 'deleteFreehandDrawing':\n                    case 'deleteObj':\n                        this.updateDelete(obj.operation, obj.previousObjColl, obj.previousPointColl, obj.previousSelPointColl);\n                        break;\n                    case 'textAreaCustomization':\n                        this.shapeTransform(obj.previousObjColl, obj.previousPointColl);\n                        this.updateTextAreaCustomization(activeObj, obj.previousObjColl);\n                        break;\n                    case 'text':\n                        this.updateText(obj.previousObjColl, true);\n                        break;\n                    case 'frame':\n                        parent.transform.zoomFactor = parent.transform.defaultZoomFactor = obj.previousObj.defaultZoom;\n                        parent.setProperties({ zoomSettings: { zoomFactor: obj.previousObj.zoomFactor } }, true);\n                        parent.notify('transform', { prop: 'setPreviousZoomValue', onPropertyChange: false,\n                            value: { previousZoomValue: parent.zoomSettings.zoomFactor } });\n                        extend(parent.frameObj, obj.previousObj.frameObj);\n                        parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: true, isPreventClearRect: null, isFrame: true } });\n                        break;\n                    case 'imageHFlip':\n                        this.imageFlip('horizontal', obj.previousObjColl);\n                        break;\n                    case 'imageVFlip':\n                        this.imageFlip('vertical', obj.previousObjColl);\n                        break;\n                    case 'bgColor':\n                        parent.notify('draw', { prop: 'imageBackgroundColor', onPropertyChange: false, value: { color: obj.previousObj.bgColor } });\n                        parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n                        break;\n                    case 'updateImage':\n                        parent.isImageUpdated = true;\n                        parent.baseImg.src = obj.previousObj.imageSource;\n                        setTimeout(function () {\n                            if (parent.cropObj.straighten !== 0) {\n                                parent.notify('toolbar', { prop: 'performCropTransformClick', value: { shape: 'crop-' + 'custom' } });\n                                parent.noPushUndo = true;\n                                parent.crop();\n                                parent.noPushUndo = false;\n                            }\n                            else {\n                                parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n                            }\n                            parent.isImageUpdated = false;\n                        });\n                        break;\n                    default:\n                        this.undoDefault(obj, true);\n                        parent.notify('filter', { prop: 'set-adjustment', value: { operation: obj.operation } });\n                        parent.notify('filter', { prop: 'update-filter', value: { operation: obj.operation, filter: obj.filter } });\n                        break;\n                }\n                if (obj.operation === 'crop') {\n                    if (obj.previousObj.currSelectionPoint) {\n                        parent.currSelectionPoint = extend({}, obj.previousObj.currSelectionPoint, {}, true);\n                        if (parent.currSelectionPoint && isNullOrUndefined(parent.currSelectionPoint.shape)) {\n                            parent.currSelectionPoint = null;\n                        }\n                    }\n                    parent.updateCropTransformItems();\n                    parent.notify('draw', { prop: 'select', onPropertyChange: false,\n                        value: { type: 'custom', startX: null, startY: null, width: null, height: null } });\n                    if (parent.isCircleCrop) {\n                        parent.isCircleCrop = false;\n                        this.tempCurrSelPoint = extend({}, parent.currSelectionPoint, {}, true);\n                        parent.currSelectionPoint = null;\n                    }\n                    var tempCircleCrop = parent.cancelCropSelection.isCircleCrop;\n                    parent.cancelCropSelection.isCircleCrop = false;\n                    parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null, isUndoRedo: true } });\n                    parent.cancelCropSelection.isCircleCrop = tempCircleCrop;\n                    parent.currObjType.isActiveObj = false;\n                    if (parent.transform.straighten !== 0) {\n                        parent.notify('draw', { prop: 'setStraightenActObj', value: { activeObj: null } });\n                    }\n                }\n                else if (obj.operation === 'resize' && parent.cropObj && parent.cropObj.activeObj) {\n                    parent.currSelectionPoint = extend({}, parent.cropObj.activeObj, {}, true);\n                }\n                if ((this.undoRedoColl[this.undoRedoStep - 1]\n                    && this.undoRedoColl[this.undoRedoStep - 1].isCircleCrop)) {\n                    parent.isCircleCrop = true;\n                    parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                        value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                }\n                this.endUndoRedo(obj.operation, true);\n                var action = { action: 'undo', actionEventArgs: editCompleteArgs };\n                parent.triggerEditCompleteEvent(action);\n            }\n        }\n    };\n    UndoRedo.prototype.redo = function () {\n        var parent = this.parent;\n        this.cancelCropSelection();\n        parent.notify('draw', { prop: 'resetFrameZoom', onPropertyChange: false, value: { isOk: false } });\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (this.undoRedoStep < this.appliedUndoRedoColl.length) {\n                this.refreshToolbarActions();\n                this.undoRedoStep++;\n                parent.notify('toolbar', { prop: 'enable-disable-btns' });\n                parent.isUndoRedo = true;\n                var obj = this.undoRedoColl[this.undoRedoStep - 1];\n                if (this.undoRedoColl.length === this.undoRedoStep) {\n                    parent.currObjType.isUndoAction = false;\n                }\n                else {\n                    parent.currObjType.isUndoAction = true;\n                }\n                if (obj.operation !== 'textAreaCustomization' &&\n                    (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block')) {\n                    parent.textArea.style.display = 'none';\n                }\n                parent.notify('draw', { prop: 'setCancelAction', onPropertyChange: false, value: { bool: true } });\n                parent.cropObj = extend({}, obj.currentCropObj, {}, true);\n                parent.afterCropActions = obj.currentObj.afterCropActions;\n                this.lowerContext.filter = obj.currentObj.filter;\n                if (parent.element.querySelector('.e-contextual-toolbar-wrapper')) {\n                    parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                }\n                parent.notify('filter', { prop: 'setAdjustmentLevel', onPropertyChange: false, value: { adjustmentLevel: obj.currentObj.adjustmentLevel } });\n                parent.notify('filter', { prop: 'setTempAdjVal' });\n                parent.currentFilter = obj.currentObj.currentFilter;\n                parent.notify('filter', { prop: 'setTempFilVal' });\n                parent.canvasFilter = this.lowerContext.filter;\n                parent.initialAdjustmentValue = this.lowerContext.filter;\n                parent.notify('filter', { prop: 'setBevelFilter', onPropertyChange: false, value: { bevelFilter: this.lowerContext.filter } });\n                var activeObj = void 0;\n                var editCompleteArgs = { action: this.getUndoRedoAction(obj.operation) };\n                switch (obj.operation) {\n                    case 'shapeTransform':\n                    case 'brightness':\n                    case 'contrast':\n                    case 'hue':\n                    case 'saturation':\n                    case 'opacity':\n                    case 'blur':\n                    case 'exposure':\n                    case 'default':\n                    case 'chrome':\n                    case 'cold':\n                    case 'warm':\n                    case 'grayscale':\n                    case 'blackandwhite':\n                    case 'sepia':\n                    case 'invert':\n                    case 'sharpen':\n                    case 'imageRotate':\n                    case 'shapeInsert':\n                        this.shapeTransform(obj.currentObjColl, obj.currentPointColl);\n                        break;\n                    case 'freehanddraw':\n                    case 'freehand-draw':\n                        this.updateFreehandDraw(obj.currentPointColl, obj.currentSelPointColl);\n                        parent.notify('freehand-draw', { prop: 'setCurrentFreehandDrawIndex',\n                            value: { value: parent.pointColl.length } });\n                        break;\n                    case 'freehanddrawCustomized':\n                        this.updateFreehandDrawCustomized(obj.currentObjColl, obj.currentPointColl);\n                        break;\n                    case 'deleteFreehandDrawing':\n                    case 'deleteObj':\n                        this.updateDelete(obj.operation, obj.currentObjColl, obj.currentPointColl, obj.currentSelPointColl);\n                        break;\n                    case 'textAreaCustomization':\n                        this.shapeTransform(obj.currentObjColl, obj.currentPointColl);\n                        this.updateTextAreaCustomization(activeObj, obj.currentObjColl);\n                        break;\n                    case 'text':\n                        this.updateText(obj.currentObjColl, false);\n                        break;\n                    case 'frame':\n                        extend(parent.frameObj, obj.currentObj.frameObj);\n                        parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: true, isPreventClearRect: null, isFrame: true } });\n                        break;\n                    case 'imageHFlip':\n                        this.imageFlip('horizontal', obj.currentObjColl);\n                        break;\n                    case 'imageVFlip':\n                        this.imageFlip('vertical', obj.currentObjColl);\n                        break;\n                    case 'bgColor':\n                        parent.notify('draw', { prop: 'imageBackgroundColor', onPropertyChange: false, value: { color: obj.currentObj.bgColor } });\n                        parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n                        break;\n                    case 'updateImage':\n                        parent.isImageUpdated = true;\n                        parent.baseImg.src = obj.currentObj.imageSource;\n                        setTimeout(function () {\n                            if (parent.cropObj.straighten !== 0) {\n                                parent.notify('toolbar', { prop: 'performCropTransformClick', value: { shape: 'crop-' + 'custom' } });\n                                parent.noPushUndo = true;\n                                parent.crop();\n                                parent.noPushUndo = false;\n                            }\n                            else {\n                                parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n                            }\n                            parent.isImageUpdated = false;\n                        });\n                        break;\n                    default:\n                        parent.objColl = [];\n                        parent.pointColl = [];\n                        parent.freehandCounter = 0;\n                        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                            value: { obj: { selPointColl: [] } } });\n                        parent.notify('draw', { prop: 'setCurrentObj', onPropertyChange: false, value: { obj: obj.currentObj, isUndoRedo: true } });\n                        parent.img.destLeft = obj.currentObj.destPoints.startX;\n                        parent.img.destTop = obj.currentObj.destPoints.startY;\n                        activeObj = extend({}, parent.activeObj, {}, true);\n                        parent.objColl = extend([], obj.currentObjColl, [], true);\n                        parent.pointColl = extend([], obj.currentPointColl, [], true);\n                        parent.freehandCounter = parent.pointColl.length;\n                        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                            value: { obj: { selPointColl: extend([], obj.currentSelPointColl, [], true) } } });\n                        parent.transform.straighten = 0;\n                        this.lowerContext.filter = 'none';\n                        parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                            value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n                        this.lowerContext.filter = obj.currentObj.filter;\n                        parent.prevStraightenedDegree = parent.transform.straighten;\n                        parent.activeObj = activeObj;\n                        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                        if (parent.activeObj.activePoint.width !== 0 && parent.activeObj.activePoint.height !== 0) {\n                            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n                        }\n                        parent.notify('filter', { prop: 'set-adjustment', value: { operation: obj.operation } });\n                        parent.notify('filter', { prop: 'update-filter', value: { operation: obj.operation } });\n                        break;\n                }\n                if (obj.operation === 'crop' && obj.isCircleCrop) {\n                    parent.isCircleCrop = true;\n                    parent.currSelectionPoint = extend({}, this.tempCurrSelPoint, {}, true);\n                    this.tempCurrSelPoint = null;\n                }\n                if (obj.operation === 'crop' && !obj.isCircleCrop) {\n                    parent.isCircleCrop = false;\n                }\n                if (obj.operation === 'crop' && obj.currentObj.currSelectionPoint) {\n                    parent.currSelectionPoint = extend({}, obj.currentObj.currSelectionPoint, {}, true);\n                    parent.notify('draw', { prop: 'setStraightenActObj', value: { activeObj: parent.currSelectionPoint } });\n                }\n                if (parent.currSelectionPoint && isNullOrUndefined(parent.currSelectionPoint.shape)) {\n                    parent.currSelectionPoint = null;\n                }\n                if (obj.operation === 'resize' && parent.cropObj && parent.cropObj.activeObj) {\n                    parent.currSelectionPoint = extend({}, parent.cropObj.activeObj, {}, true);\n                }\n                this.endUndoRedo(obj.operation, false);\n                var action = { action: 'redo', actionEventArgs: editCompleteArgs };\n                parent.triggerEditCompleteEvent(action);\n            }\n        }\n    };\n    UndoRedo.prototype.imageFlip = function (type, objColl) {\n        var parent = this.parent;\n        this.shapeTransform(objColl, null);\n        parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n        var _a = parent.activeObj, shape = _a.shape, isHorImageFlip = _a.isHorImageFlip, isVerImageFlip = _a.isVerImageFlip;\n        parent.objColl.pop();\n        if (shape && shape === 'image') {\n            if (type === 'horizontal') {\n                if (isNullOrUndefined(isHorImageFlip) && isVerImageFlip) {\n                    parent.activeObj.isHorImageFlip = true;\n                    parent.activeObj.isVerImageFlip = null;\n                    parent.horizontalFlip(this.upperContext, true);\n                }\n                else {\n                    if (isNullOrUndefined(isHorImageFlip) || !isHorImageFlip) {\n                        parent.activeObj.isHorImageFlip = true;\n                    }\n                    else {\n                        parent.activeObj.isHorImageFlip = null;\n                    }\n                    parent.horizontalFlip(this.upperContext, true);\n                }\n            }\n            else if (type === 'vertical') {\n                if (isNullOrUndefined(isVerImageFlip) && isHorImageFlip) {\n                    parent.activeObj.isVerImageFlip = true;\n                    parent.activeObj.isHorImageFlip = null;\n                    parent.verticalFlip(this.upperContext, true);\n                }\n                else {\n                    if (isNullOrUndefined(isVerImageFlip) || !isVerImageFlip) {\n                        parent.activeObj.isVerImageFlip = true;\n                    }\n                    else {\n                        parent.activeObj.isVerImageFlip = null;\n                    }\n                    parent.verticalFlip(this.upperContext, true);\n                }\n            }\n            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n        }\n        else {\n            parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: true } });\n        }\n    };\n    UndoRedo.prototype.shapeTransform = function (objColl, pointColl) {\n        var parent = this.parent;\n        parent.objColl = extend([], objColl, [], true);\n        if (pointColl) {\n            parent.pointColl = extend([], pointColl, [], true);\n            parent.freehandCounter = parent.pointColl.length;\n        }\n        parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n            value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.isUndoRedo = true;\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n    };\n    UndoRedo.prototype.updateFreehandDraw = function (pointColl, selPointColl) {\n        var parent = this.parent;\n        parent.pointColl = pointColl;\n        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n            value: { obj: { selPointColl: selPointColl } } });\n        parent.freehandCounter = parent.pointColl.length;\n        parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n            value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.isUndoRedo = true;\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n    };\n    UndoRedo.prototype.updateFreehandDrawCustomized = function (objColl, pointColl) {\n        var parent = this.parent;\n        parent.objColl = extend([], objColl, [], true);\n        parent.pointColl = pointColl;\n        parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n            value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.isUndoRedo = true;\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n    };\n    UndoRedo.prototype.updateDelete = function (operation, objColl, pointColl, selPointColl) {\n        var parent = this.parent;\n        if (operation === 'deleteFreehandDrawing') {\n            parent.pointColl = pointColl;\n            parent.freehandCounter = parent.pointColl.length;\n            parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                value: { obj: { selPointColl: selPointColl } } });\n            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n        }\n        else if (operation === 'deleteObj') {\n            parent.objColl = objColl;\n            parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n        }\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.isUndoRedo = true;\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n    };\n    UndoRedo.prototype.updateTextAreaCustomization = function (activeObj, objColl) {\n        var parent = this.parent;\n        parent.objColl = extend([], objColl, [], true);\n        parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n            value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.isUndoRedo = true;\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n        for (var i = 0, len = objColl.length; i < len; i++) {\n            if (this.tempActObj) {\n                if (this.tempActObj.currIndex === objColl[i].currIndex) {\n                    activeObj = extend({}, objColl[i], {}, true);\n                    parent.objColl.splice(i, 1);\n                    break;\n                }\n            }\n            else {\n                activeObj = extend({}, objColl[objColl.length - 1], {}, true);\n                parent.objColl.splice(i, 1);\n                break;\n            }\n        }\n        if (activeObj) {\n            this.updateTextBox(activeObj);\n        }\n        if (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block') {\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: null } });\n        }\n    };\n    UndoRedo.prototype.updateText = function (objColl, allowActiveObj) {\n        var parent = this.parent;\n        if (this.tempActObj) {\n            parent.activeObj = extend({}, this.tempActObj, {}, true);\n        }\n        if (objColl.length === 0 && parent.objColl.length === 1) {\n            this.tempActObj = extend({}, parent.objColl[0], {}, true);\n        }\n        else {\n            for (var i = 0, iLen = parent.objColl.length; i < iLen; i++) {\n                if (parent.objColl[i] && isNullOrUndefined(objColl[i])) {\n                    this.tempActObj = extend({}, parent.objColl[i], {}, true);\n                    break;\n                }\n                if (objColl[i].currIndex !== parent.objColl[i].currIndex) {\n                    this.tempActObj = extend({}, parent.objColl[i], {}, true);\n                    break;\n                }\n            }\n        }\n        if (allowActiveObj) {\n            parent.activeObj = extend({}, this.tempActObj, {}, true);\n        }\n        parent.objColl = extend([], objColl, [], true);\n        parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n            value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: true } });\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.isUndoRedo = true;\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n    };\n    UndoRedo.prototype.updateTextBox = function (obj) {\n        var parent = this.parent;\n        this.upperContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n        parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n        var textArea = parent.textArea;\n        textArea.style.display = 'block';\n        textArea.style.fontFamily = obj.textSettings.fontFamily;\n        textArea.style.fontSize = obj.textSettings.fontSize + 'px';\n        textArea.style.color = obj.strokeSettings.strokeColor;\n        textArea.style.fontWeight = obj.textSettings.bold ? 'bold' : 'normal';\n        textArea.style.fontStyle = obj.textSettings.italic ? 'italic' : 'normal';\n        textArea.style.border = '2px solid ' + parent.themeColl[parent.theme]['primaryColor'];\n        textArea.value = obj.keyHistory;\n        parent.activeObj = extend({}, obj, {}, true);\n        parent.notify('shape', { prop: 'updateFontStyles', onPropertyChange: false,\n            value: { isTextBox: null } });\n        parent.textArea.style.width = parent.activeObj.activePoint.width + 'px';\n    };\n    UndoRedo.prototype.undoDefault = function (obj, isUndoRedo) {\n        this.lowerContext.filter = obj.previousObj.filter;\n        var parent = this.parent;\n        parent.objColl = [];\n        parent.pointColl = [];\n        parent.freehandCounter = 0;\n        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n            value: { obj: { selPointColl: [] } } });\n        var isCircleCrop = !isUndoRedo ? obj.isCircleCrop : false;\n        parent.notify('draw', { prop: 'setCurrentObj', onPropertyChange: false, value: { obj: obj.previousObj, isUndoRedo: isUndoRedo, isCircleCrop: isCircleCrop } });\n        parent.prevStraightenedDegree = parent.transform.straighten;\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.img.destLeft = obj.previousObj.destPoints.startX;\n        parent.img.destTop = obj.previousObj.destPoints.startY;\n        var activeObj = extend({}, parent.activeObj, {}, true);\n        parent.objColl = extend([], obj.previousObjColl, [], true);\n        parent.pointColl = extend([], obj.previousPointColl, [], true);\n        parent.freehandCounter = parent.pointColl.length;\n        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n            value: { obj: { selPointColl: extend([], obj.previousSelPointColl, [], true) } } });\n        parent.transform.straighten = 0;\n        this.lowerContext.filter = 'none';\n        parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n            value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n        this.lowerContext.filter = obj.previousObj.filter;\n        parent.activeObj = activeObj;\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        if (parent.activeObj.activePoint.width !== 0 && parent.activeObj.activePoint.height !== 0) {\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        }\n    };\n    UndoRedo.prototype.endUndoRedo = function (operation, isUndo) {\n        var parent = this.parent;\n        var frameObj = { type: 'none', color: '#fff', size: 20, inset: 20, offset: 20, radius: 0, amount: 1, border: 'solid', gradientColor: '' };\n        if (((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) &&\n            JSON.stringify(parent.frameObj) !== JSON.stringify(frameObj)) {\n            parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: true } });\n        }\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        if (parent.isCircleCrop && ((isUndo && operation !== 'crop') || !isUndo)) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        if (parent.transform.zoomFactor > 0) {\n            parent.notify('selection', { prop: 'setDragCanvas', value: { bool: true } });\n        }\n        parent.notify('draw', { prop: 'setCancelAction', onPropertyChange: false, value: { bool: false } });\n        if (parent.activeObj.shape && parent.activeObj.shape.split('-')[0] === 'crop') {\n            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                    isApplyBtn: true, isCropping: true, isZooming: null, cType: null } });\n        }\n        else {\n            parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n        }\n        parent.notify('toolbar', { prop: 'enable-disable-btns' });\n        if (document.getElementById(parent.element.id + '_quickAccessToolbarArea')) {\n            document.getElementById(parent.element.id + '_quickAccessToolbarArea').style.display = 'none';\n        }\n        parent.notify('toolbar', { prop: 'enable-disable-btns' });\n        if (parent.transform.degree !== 0) {\n            parent.notify('transform', { prop: 'drawPannedImage', onPropertyChange: false,\n                value: { xDiff: 0, yDiff: 0 } });\n        }\n        parent.notify('filter', { prop: 'setAdjustmentValue', onPropertyChange: false, value: { adjustmentValue: this.lowerContext.filter } });\n        parent.currObjType.isCustomCrop = false;\n    };\n    UndoRedo.prototype.updateUrc = function (operation, previousObj, previousObjColl, previousPointColl, previousSelPointColl, previousCropObj, previousText, currentText, previousFilter, isCircleCrop) {\n        var parent = this.parent;\n        if (parent.isResize || this.isPreventing) {\n            return;\n        }\n        var obj = { isInitialLoaded: false };\n        if (parent.currObjType.isUndoAction) {\n            this.refreshUrc(true);\n        }\n        parent.notify('draw', { prop: 'isInitialLoaded', onPropertyChange: false, value: { object: obj } });\n        if (!obj['isInitialLoaded'] && parent.allowUndoRedo) {\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var currentObj = object['currObj'];\n            currentObj.objColl = extend([], parent.objColl, [], true);\n            currentObj.pointColl = extend([], parent.pointColl, [], true);\n            currentObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            currentObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            if (operation === 'crop') {\n                currentObj.currSelectionPoint = extend({}, parent.currSelectionPoint, {}, true);\n            }\n            else if (operation === 'frame') {\n                previousObj.destPoints = { startX: parent.frameDestPoints.destLeft, startY: parent.frameDestPoints.destTop,\n                    width: parent.frameDestPoints.destWidth, height: parent.frameDestPoints.destHeight };\n                currentObj.destPoints = { startX: parent.frameDestPoints.destLeft, startY: parent.frameDestPoints.destTop,\n                    width: parent.frameDestPoints.destWidth, height: parent.frameDestPoints.destHeight };\n                if (!isNullOrUndefined(parent.tempFrameZoomLevel)) {\n                    previousObj.defaultZoom = currentObj.defaultZoom = parent.tempFrameZoomLevel;\n                }\n            }\n            else if ((operation === 'imageHFlip' || operation === 'imageVFlip') && this.appliedUndoRedoColl.length > 0) {\n                var index = previousObjColl[previousObjColl.length - 1].currIndex;\n                previousObjColl = this.appliedUndoRedoColl[this.appliedUndoRedoColl.length - 1].currentObjColl;\n                if (index) {\n                    for (var i = 0, len = previousObjColl.length; i < len; i++) {\n                        if (previousObjColl[i].currIndex === index) {\n                            var actObj = extend({}, previousObjColl[i], {}, true);\n                            previousObjColl.splice(i, 1);\n                            previousObjColl.push(actObj);\n                            break;\n                        }\n                    }\n                }\n            }\n            this.undoRedoColl.push({ operation: operation, previousObj: previousObj, currentObj: currentObj,\n                previousObjColl: previousObjColl, currentObjColl: currentObj.objColl,\n                previousPointColl: previousPointColl, currentPointColl: currentObj.pointColl,\n                previousSelPointColl: previousSelPointColl, currentSelPointColl: currentObj.selPointColl,\n                previousCropObj: previousCropObj, currentCropObj: extend({}, parent.cropObj, {}, true),\n                previousText: previousText, currentText: currentText, filter: previousFilter, isCircleCrop: isCircleCrop });\n            parent.notify('toolbar', { prop: 'enable-disable-btns', onPropertyChange: false });\n        }\n    };\n    UndoRedo.prototype.updateUrObj = function (objColl, operation) {\n        var parent = this.parent;\n        if (parent.allowUndoRedo) {\n            if (parent.currObjType.isUndoAction && !parent.isShapeDrawing) {\n                this.refreshUrc(true);\n            }\n            if (isNullOrUndefined(parent.activeObj.imageRatio)) {\n                parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n            }\n            parent.objColl.push(parent.activeObj);\n            var cropObj = extend({}, parent.cropObj, {}, true);\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var obj = object['currObj'];\n            obj.objColl = extend([], parent.objColl, [], true);\n            obj.pointColl = extend([], parent.pointColl, [], true);\n            obj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            obj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            var oper = operation ? operation : 'shapeTransform';\n            this.undoRedoColl.push({ operation: oper, previousObj: obj, currentObj: obj,\n                previousObjColl: objColl, currentObjColl: obj.objColl,\n                previousPointColl: obj.pointColl, currentPointColl: obj.pointColl,\n                previousSelPointColl: obj.selPointColl, currentSelPointColl: obj.selPointColl,\n                previousCropObj: cropObj, currentCropObj: cropObj });\n            parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false,\n                value: { obj: parent.objColl[parent.objColl.length - 1] } });\n        }\n    };\n    UndoRedo.prototype.updateUndoRedo = function (operation) {\n        var parent = this.parent;\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], parent.objColl, [], true);\n        prevObj.pointColl = extend([], parent.pointColl, [], true);\n        prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        if (isNullOrUndefined(parent.activeObj.imageRatio)) {\n            parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n        }\n        parent.objColl.push(parent.activeObj);\n        var oper = operation ? operation : 'shapeTransform';\n        this.updateUrc(oper, prevObj, prevObj.objColl, prevObj.pointColl, prevObj.selPointColl, prevCropObj);\n        parent.objColl.pop();\n        parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: null } });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n    };\n    UndoRedo.prototype.getZeroZoomObjPointValue = function (obj, point) {\n        var parent = this.parent;\n        this.updateObjColl();\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var currentObj = object['currObj'];\n        currentObj.objColl = extend([], parent.objColl, [], true);\n        currentObj.pointColl = extend([], parent.pointColl, [], true);\n        currentObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        currentObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        var cropDimensionObj = { cropDimension: null };\n        parent.notify('transform', { prop: 'getCropDimension', onPropertyChange: false, value: { obj: cropDimensionObj } });\n        var getZeroZoomObjColl = extend([], parent.objColl, [], true);\n        var getZeroZoomPointColl = extend([], parent.pointColl, [], true);\n        var arrowObj = { arrowDimension: null };\n        this.parent.notify('draw', { prop: 'getArrowDimension', onPropertyChange: false, value: { obj: arrowObj } });\n        var tempArrowObj = extend({}, arrowObj['arrowDimension'], {}, true);\n        if (parent.transform.zoomFactor > 0 && (obj.length > 0 || point.length > 0)) {\n            if (obj.length > 0) {\n                for (var i = 0; i < obj.length; i++) {\n                    if (obj[i].currIndex) {\n                        continue;\n                    }\n                    else {\n                        obj[i].currIndex = 'shape_' + (i + 1);\n                    }\n                }\n            }\n            parent.objColl = obj;\n            parent.pointColl = point;\n            var isUndoRedo = parent.isUndoRedo;\n            var isCropTab = parent.isCropTab;\n            if (parent.transform.zoomFactor !== 0) {\n                parent.isUndoRedo = true;\n                parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                    value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: true } });\n                parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n                parent.isCropTab = true;\n                var zoomSettings = extend({}, parent.zoomSettings, null, true);\n                if (parent.transform.zoomFactor > 0) {\n                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                        value: { zoomFactor: -parent.transform.zoomFactor, zoomPoint: null, isResize: null } });\n                }\n                else {\n                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                        value: { zoomFactor: Math.abs(parent.transform.zoomFactor), zoomPoint: null, isResize: null } });\n                }\n                parent.zoomSettings = zoomSettings;\n                parent.isCropTab = isCropTab;\n                parent.isUndoRedo = isUndoRedo;\n                getZeroZoomObjColl = extend([], parent.objColl, [], true);\n                getZeroZoomPointColl = extend([], parent.pointColl, [], true);\n                parent.objColl = [];\n                parent.pointColl = [];\n                parent.freehandCounter = 0;\n                parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                    value: { obj: { selPointColl: [] } } });\n                parent.notify('transform', { prop: 'setCropDimension', onPropertyChange: false,\n                    value: { width: cropDimensionObj['cropDimension']['width'], height: cropDimensionObj['cropDimension']['height'] } });\n                var maxDimension = { width: cropDimensionObj['cropDimension']['width'], height: cropDimensionObj['cropDimension']['height'] };\n                maxDimension.width += (maxDimension.width * currentObj.defaultZoom);\n                maxDimension.height += (maxDimension.height * currentObj.defaultZoom);\n                parent.notify('draw', { prop: 'setZoomCropWidth', value: { width: maxDimension.width, height: maxDimension.height } });\n                parent.notify('draw', { prop: 'setCurrentObj', onPropertyChange: false, value: { obj: currentObj } });\n                parent.img.destLeft = currentObj.destPoints.startX;\n                parent.img.destTop = currentObj.destPoints.startY;\n                parent.panPoint.totalPannedPoint = currentObj.totalPannedPoint;\n                parent.panPoint.totalPannedClientPoint = currentObj.totalPannedClientPoint;\n                parent.panPoint.totalPannedInternalPoint = currentObj.totalPannedInternalPoint;\n                parent.objColl = extend([], currentObj.objColl, [], true);\n                parent.pointColl = extend([], currentObj.pointColl, [], true);\n                parent.freehandCounter = parent.pointColl.length;\n                parent.notify('draw', { prop: 'setArrowDimension', onPropertyChange: false, value: { arrowDimension: tempArrowObj } });\n                parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                    value: { obj: { selPointColl: extend([], currentObj.selPointColl, [], true) } } });\n                this.lowerContext.filter = 'none';\n                parent.transform.straighten = 0;\n                this.applyImgTranform();\n                parent.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                    value: { ctx: this.lowerContext, shape: 'iterate', pen: 'iterate', isPreventApply: null } });\n                parent.notify('freehand-draw', { prop: 'updateFHDCurPts', onPropertyChange: false });\n                this.lowerContext.filter = currentObj.filter;\n                if (parent.transform.degree !== 0) {\n                    parent.notify('transform', { prop: 'drawPannedImage', onPropertyChange: false,\n                        value: { xDiff: 0, yDiff: 0 } });\n                }\n                parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n                if (parent.isCircleCrop || (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle')) {\n                    parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                        value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                }\n            }\n        }\n        return { obj: getZeroZoomObjColl, point: getZeroZoomPointColl };\n    };\n    UndoRedo.prototype.updateObjColl = function () {\n        var parent = this.parent;\n        for (var i = 0; i < parent.objColl.length; i++) {\n            var obj = parent.objColl[i];\n            var isUpdated = false;\n            if (obj.shape === 'line' || obj.shape === 'arrow') {\n                if (obj.activePoint.width < 0) {\n                    obj.activePoint.width = Math.abs(obj.activePoint.width);\n                    isUpdated = true;\n                }\n                if (obj.activePoint.height < 0) {\n                    obj.activePoint.height = Math.abs(obj.activePoint.height);\n                    isUpdated = true;\n                }\n                if (isUpdated) {\n                    var activeObj = extend({}, parent.activeObj, {}, true);\n                    parent.activeObj = obj;\n                    parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n                    obj = parent.activeObj;\n                    parent.activeObj = activeObj;\n                }\n            }\n        }\n    };\n    UndoRedo.prototype.applyImgTranform = function () {\n        var parent = this.parent;\n        var obj = extend({}, parent.activeObj, {}, true);\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            if (parent.objColl[i].shape === 'image') {\n                parent.activeObj = extend({}, parent.objColl[i], {}, true);\n                var ctx = parent.objColl[i].imageCanvas.getContext('2d');\n                parent.notify('selection', { prop: 'applyTransformToImg', onPropertyChange: false, value: { ctx: ctx } });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                parent.notify('selection', { prop: 'setImageClarity', onPropertyChange: false, value: { bool: true } });\n            }\n        }\n        parent.activeObj = obj;\n    };\n    UndoRedo.prototype.updateUndoRedoStack = function (isPenDraw) {\n        var parent = this.parent;\n        if ((parent.activeObj.currIndex && parent.activeObj.activePoint.width !== 0 ||\n            parent.activeObj.activePoint.height !== 0 || (parent.activeObj.pointColl &&\n            parent.activeObj.pointColl.length > 0)) || isPenDraw) {\n            var isTextArea = parent.textArea.style.display === 'none' ? false : true;\n            var temp = parent.noPushUndo;\n            parent.noPushUndo = false;\n            parent.isUndoRedoStack = true;\n            if (isPenDraw) {\n                var tempTogglePen = parent.togglePen;\n                var obj = { freehandDrawSelectedId: null };\n                parent.notify('freehand-draw', { prop: 'getFreehandDrawSelectedId', onPropertyChange: false, value: { obj: obj } });\n                parent.okBtn();\n                parent.noPushUndo = temp;\n                if (obj['freehandDrawSelectedId']) {\n                    parent.noRedact = true;\n                    parent.selectShape(obj['freehandDrawSelectedId']);\n                }\n                else {\n                    parent.freeHandDraw(true);\n                }\n                parent.togglePen = tempTogglePen;\n            }\n            else if (parent.activeObj.currIndex) {\n                var shapeId = parent.activeObj.currIndex;\n                parent.okBtn();\n                parent.noPushUndo = temp;\n                parent.noRedact = true;\n                parent.selectShape(shapeId);\n                if (parent.drawingShape) {\n                    parent.notify('selection', { prop: 'setCurrentDrawingShape', onPropertyChange: false, value: { value: parent.drawingShape.toLowerCase() } });\n                }\n                if (isTextArea) {\n                    parent.enableTextEditing();\n                }\n            }\n            parent.isUndoRedoStack = false;\n        }\n    };\n    return UndoRedo;\n}());\nexport { UndoRedo };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable max-len */\nimport { Component, NotifyPropertyChanges, Property, addClass, removeClass, extend } from '@syncfusion/ej2-base';\nimport { Event, EventHandler, getComponent, isNullOrUndefined, getUniqueID, setValue } from '@syncfusion/ej2-base';\nimport { Dialog, createSpinner } from '@syncfusion/ej2-popups';\nimport { Complex, Browser, ChildProperty, compile as templateCompiler, compile } from '@syncfusion/ej2-base';\nimport { ToolbarModule, Crop, Draw, Filter, FreehandDrawing, Selection, Shape, Transform, UndoRedo, Export, FrameLineStyle, ShapeType } from './../index';\nimport { ZoomTrigger, ImageFinetuneOption } from './../index';\nimport { Uploader } from '@syncfusion/ej2-inputs';\n/**\n * This interface is used to specify settings for finetuning operations on images, including brightness, contrast, hue, saturation, exposure, opacity, and blur. It includes properties for setting minimum and maximum values for each of these options, as well as a default value.\n */\nvar FinetuneSettings = /** @class */ (function (_super) {\n    __extends(FinetuneSettings, _super);\n    function FinetuneSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"brightness\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"contrast\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"hue\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"saturation\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"exposure\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"blur\", void 0);\n    return FinetuneSettings;\n}(ChildProperty));\nexport { FinetuneSettings };\n/**\n * An interface used to define the settings such as minimum, maximum, and default zoom factors, and the type of zooming which are available in the image editor control.\n */\nvar ZoomSettings = /** @class */ (function (_super) {\n    __extends(ZoomSettings, _super);\n    function ZoomSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], ZoomSettings.prototype, \"zoomTrigger\", void 0);\n    __decorate([\n        Property(1)\n    ], ZoomSettings.prototype, \"minZoomFactor\", void 0);\n    __decorate([\n        Property(10)\n    ], ZoomSettings.prototype, \"maxZoomFactor\", void 0);\n    __decorate([\n        Property(1)\n    ], ZoomSettings.prototype, \"zoomFactor\", void 0);\n    __decorate([\n        Property(null)\n    ], ZoomSettings.prototype, \"zoomPoint\", void 0);\n    return ZoomSettings;\n}(ChildProperty));\nexport { ZoomSettings };\n/**\n * This interface is used to specify settings for selection operations on images, including visibility, stroke color and fill color.\n */\nvar SelectionSettings = /** @class */ (function (_super) {\n    __extends(SelectionSettings, _super);\n    function SelectionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], SelectionSettings.prototype, \"showCircle\", void 0);\n    __decorate([\n        Property(null)\n    ], SelectionSettings.prototype, \"strokeColor\", void 0);\n    __decorate([\n        Property(null)\n    ], SelectionSettings.prototype, \"fillColor\", void 0);\n    return SelectionSettings;\n}(ChildProperty));\nexport { SelectionSettings };\n/**\n * Predefine the font families that populate in font family dropdown list from the toolbar.\n */\nvar FontFamily = /** @class */ (function (_super) {\n    __extends(FontFamily, _super);\n    function FontFamily() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Arial')\n    ], FontFamily.prototype, \"default\", void 0);\n    __decorate([\n        Property(null)\n    ], FontFamily.prototype, \"items\", void 0);\n    return FontFamily;\n}(ChildProperty));\nexport { FontFamily };\n/**\n * The Image Editor is a graphical user interface for editing images.\n *\n * {% codeBlock src='image-editor/default/index.md' %}{% endcodeBlock %}\n *\n * @remarks\n * The Image Editor component provides various image editing features such as zooming, cropping, rotating, inserting text and shapes (rectangles, ellipses, and lines), drawing freehand on top of an image, undo/redo, and more.\n *\n */\nvar ImageEditor = /** @class */ (function (_super) {\n    __extends(ImageEditor, _super);\n    /**\n     *\n     * Constructor for creating the widget\n     *\n     * @param  {ImageEditorModel} options - Specifies the image editor model\n     * @param  {string|HTMLDivElement} element - Specifies the target element\n     */\n    function ImageEditor(options, element) {\n        var _this = _super.call(this, options) || this;\n        /**\n         *\n         * Image Editor Private Properties\n         */\n        /** @hidden */\n        _this.isImageLoaded = false;\n        /** @hidden */\n        _this.activeObj = { activePoint: { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 },\n            flipObjColl: [], triangle: [], triangleRatio: [], rotatedAngle: 0, opacity: 1, order: null };\n        // current object's ui interaction properties\n        /** @hidden */\n        _this.currObjType = { shape: '', isDragging: false, isActiveObj: false, isText: false, isInitialText: false, isLine: false, isInitialLine: false,\n            isCustomCrop: false, isZoomed: false, isUndoZoom: false, isUndoAction: false, isFiltered: false, isSave: false, isResize: false, isRedact: false };\n        /** @hidden */\n        _this.objColl = [];\n        /** @hidden */\n        // eslint-disable-next-line\n        _this.pointColl = {};\n        /** @hidden */\n        _this.freehandCounter = 0;\n        /** @hidden */\n        _this.points = [];\n        /** @hidden */\n        _this.togglePen = false;\n        /** @hidden */\n        _this.togglePan = false;\n        /** @hidden */\n        _this.img = { destLeft: 0, destTop: 0, destWidth: 0, destHeight: 0, srcLeft: 0, srcTop: 0, srcWidth: 0, srcHeight: 0 };\n        /** @hidden */\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        _this.rotateFlipColl = [];\n        // All prop values saved while cropping (to restore the image to its original state)\n        /** @hidden */\n        _this.cropObj = { cropZoom: 0, defaultZoom: 0, totalPannedPoint: { x: 0, y: 0 }, totalPannedClientPoint: { x: 0, y: 0 },\n            totalPannedInternalPoint: { x: 0, y: 0 }, tempFlipPanPoint: { x: 0, y: 0 }, activeObj: {}, rotateFlipColl: [],\n            degree: 0, currFlipState: '', straighten: 0, destPoints: { startX: 0, startY: 0, width: 0, height: 0 },\n            srcPoints: { startX: 0, startY: 0, width: 0, height: 0 }, filter: '', isBrightAdjust: false,\n            zoomFactor: 0, previousZoomValue: 0, aspectWidth: null, aspectHeight: null, frame: 'none', straightenZoom: 0,\n            adjustmentLevel: { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0, blur: 0,\n                exposure: 0, transparency: 100, sharpen: false, bw: false }, currentFilter: '' };\n        // Stored transformations performed after cropping\n        /** @hidden */\n        _this.afterCropActions = [];\n        /** @hidden */\n        _this.transform = { degree: 0, currFlipState: '', zoomFactor: 0, cropZoomFactor: null, defaultZoomFactor: 0, straighten: 0 };\n        /** @hidden */\n        _this.panPoint = { currentPannedPoint: { x: 0, y: 0 }, totalPannedPoint: { x: 0, y: 0 }, totalPannedInternalPoint: { x: 0, y: 0 },\n            totalPannedClientPoint: { x: 0, y: 0 } };\n        /** @hidden */\n        _this.isUndoRedo = false;\n        /** @hidden */\n        _this.isCropTab = false;\n        /** @hidden */\n        _this.isCircleCrop = false;\n        /** @hidden */\n        _this.fontSizeColl = [];\n        /** @hidden */\n        _this.initialAdjustmentValue = '';\n        /** @hidden */\n        _this.currentFilter = '';\n        /** @hidden */\n        _this.canvasFilter = 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n            'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n        /** @hidden */\n        _this.toolbarHeight = 0;\n        /** @hidden */\n        _this.isPublicMethod = false;\n        /** @hidden */\n        _this.isCropToolbar = false;\n        /** @hidden */\n        _this.cursor = 'default';\n        /** @hidden */\n        _this.resizeSrc = { startX: _this.img.srcLeft, startY: _this.img.srcTop, width: _this.img.srcWidth, height: _this.img.srcHeight };\n        /** @hidden */\n        _this.isResize = false;\n        /** @hidden */\n        _this.isAspectRatio = false;\n        /** @hidden */\n        _this.frameObj = { type: 'none', color: '#fff', size: 20, inset: 20, offset: 20, radius: 0, amount: 1, border: 'solid', gradientColor: '' };\n        /** @hidden */\n        _this.tempFrameObj = { type: 'none', color: '#fff', size: 20, inset: 20, offset: 20, radius: 0, amount: 1, border: 'solid', gradientColor: '' };\n        /** @hidden */\n        _this.allowDownScale = true;\n        /** @hidden */\n        _this.gradientColor = '';\n        /** @hidden */\n        _this.size = 20;\n        /** @hidden */\n        _this.inset = 0;\n        /** @hidden */\n        _this.offset = 0;\n        /** @hidden */\n        _this.borderRadius = 0;\n        /** @hidden */\n        _this.lineCount = 0;\n        /** @hidden */\n        _this.prevStraightenedDegree = 0;\n        /** @hidden */\n        _this.tempStraighten = 0;\n        /** @hidden */\n        _this.isStraightening = false;\n        /** @hidden */\n        _this.isFinetuning = false;\n        /** @hidden */\n        _this.isZoomBtnClick = false;\n        /** @hidden */\n        _this.isFinetuneBtnClick = false;\n        /** @hidden */\n        _this.isFilterCanvasClick = false;\n        /** @hidden */\n        _this.isFrameBtnClick = false;\n        /** @hidden */\n        _this.isChangesSaved = false;\n        /** @hidden */\n        _this.isShapeDrawing = false;\n        /** @hidden */\n        _this.noPushUndo = false;\n        /** @hidden */\n        _this.isUndoRedoStack = false;\n        /** @hidden */\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        _this.shapeColl = [];\n        /** @hidden */\n        _this.isKBDNavigation = false;\n        /** @hidden */\n        _this.isMaskImage = false;\n        /** @hidden */\n        _this.tempObjColl = [];\n        /** @hidden */\n        _this.tempPointColl = [];\n        /** @hidden */\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        _this.tempShapeColl = [];\n        /** @hidden */\n        _this.isImageUpdated = false;\n        /** @hidden */\n        _this.noRedact = false;\n        /** @hidden */\n        _this.tempRedactBlur = 50;\n        /** @hidden */\n        _this.tempRedactPixel = 40;\n        _this.tempToolbarHeight = 0;\n        _this.tempToolbar = [];\n        ImageEditor_1.Inject(Crop, Draw, Selection, Transform, Export, ToolbarModule);\n        ImageEditor_1.Inject(UndoRedo);\n        ImageEditor_1.Inject(Filter);\n        ImageEditor_1.Inject(Shape);\n        ImageEditor_1.Inject(FreehandDrawing);\n        if (element) {\n            _this.appendTo(element);\n        }\n        return _this;\n    }\n    ImageEditor_1 = ImageEditor;\n    /**\n     * To provide the array of modules needed for component rendering.\n     *\n     * @returns {ModuleDeclaration[]} - To provide the array of modules needed for component rendering.\n     * @hidden\n     */\n    ImageEditor.prototype.requiredModules = function () {\n        var modules = [];\n        modules.push({ member: 'crop', args: [this] });\n        modules.push({ member: 'draw', args: [this] });\n        modules.push({ member: 'selection', args: [this] });\n        modules.push({ member: 'transform', args: [this] });\n        modules.push({ member: 'export', args: [this] });\n        modules.push({ member: 'toolbar-module', args: [this] });\n        modules.push({ member: 'undo-redo', args: [this] });\n        modules.push({ member: 'filter', args: [this] });\n        modules.push({ member: 'shape', args: [this] });\n        modules.push({ member: 'freehand-draw', args: [this] });\n        return modules;\n    };\n    ImageEditor.prototype.preRender = function () {\n        // pre render code snippets\n        this.element.id = this.element.id || getUniqueID('ej2-image-editor');\n        this.isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n        if (Browser.isDevice) {\n            this.element.classList.add('e-device');\n        }\n        this.initializeThemeColl();\n    };\n    /**\n     *\n     * To Initialize the component rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    ImageEditor.prototype.render = function () {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isAngular) {\n            var originalElement = this.element;\n            var clonedElement = originalElement.cloneNode(true);\n            originalElement.parentNode.replaceChild(clonedElement, originalElement);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.element = clonedElement;\n            setValue('ej2_instances', [this], this.element);\n        }\n        this.initialize();\n    };\n    /**\n     * To get component name.\n     *\n     * @returns {string} - Module Name\n     * @private\n     */\n    ImageEditor.prototype.getModuleName = function () {\n        return 'image-editor';\n    };\n    /**\n     *\n     * To get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - Persist data\n     * @private\n     */\n    ImageEditor.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     *\n     * Called internally if any of the property value changed.\n     *\n     * @param {ImageEditorModel} newProperties - Specifies new properties\n     * @param {ImageEditorModel} oldProperties - Specifies old properties\n     * @returns {void}\n     * @private\n     */\n    ImageEditor.prototype.onPropertyChanged = function (newProperties, oldProperties) {\n        var indexObj;\n        for (var _i = 0, _a = Object.keys(newProperties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'cssClass':\n                    if (oldProperties.cssClass) {\n                        removeClass([this.element], oldProperties.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n                    }\n                    if (newProperties.cssClass) {\n                        addClass([this.element], newProperties.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n                    }\n                    break;\n                case 'disabled':\n                    if (newProperties.disabled) {\n                        this.element.classList.add('e-disabled');\n                        this.unwireEvent();\n                    }\n                    else {\n                        this.element.classList.remove('e-disabled');\n                        this.wireEvent();\n                    }\n                    break;\n                case 'height':\n                    this.element.style.height = newProperties.height;\n                    this.update();\n                    break;\n                case 'width':\n                    this.element.style.width = newProperties.width;\n                    this.update();\n                    break;\n                case 'theme':\n                    if (newProperties.theme) {\n                        if (this.theme && this.theme !== '') {\n                            this.theme = this.toPascalCase(this.theme);\n                        }\n                        else {\n                            this.theme = 'Bootstrap5';\n                        }\n                        this.upperContext.strokeStyle = this.themeColl[this.theme]['primaryColor'];\n                        this.upperContext.fillStyle = this.themeColl[this.theme]['secondaryColor'];\n                        this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    break;\n                case 'finetuneSettings':\n                    if (newProperties.finetuneSettings) {\n                        this.finetuneSettings = newProperties.finetuneSettings;\n                        this.notify('filter', { prop: 'update-finetunes' });\n                    }\n                    break;\n                case 'locale':\n                    if (newProperties.locale) {\n                        this.notify('toolbar', { prop: 'setLocale', onPropertyChange: false, value: { locale: newProperties.locale } });\n                        this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    break;\n                case 'allowUndoRedo':\n                    if (newProperties.allowUndoRedo) {\n                        this.allowUndoRedo = true;\n                    }\n                    else {\n                        this.allowUndoRedo = false;\n                    }\n                    this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                            isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    break;\n                case 'showQuickAccessToolbar':\n                    if (newProperties.showQuickAccessToolbar) {\n                        this.showQuickAccessToolbar = true;\n                        this.notify('toolbar', { prop: 'create-qa-toolbar', onPropertyChange: false });\n                        indexObj = { freehandSelectedIndex: null };\n                        this.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n                        if (this.activeObj.shape) {\n                            this.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n                        }\n                        else if (indexObj['freehandSelectedIndex']) {\n                            this.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: true } });\n                        }\n                    }\n                    else {\n                        this.showQuickAccessToolbar = false;\n                        this.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                    }\n                    break;\n                case 'zoomSettings':\n                    if (newProperties.zoomSettings) {\n                        this.zoomSettings.zoomTrigger = newProperties.zoomSettings.zoomTrigger;\n                    }\n                    if (isNullOrUndefined(this.zoomSettings.zoomTrigger)) {\n                        this.zoomSettings.zoomTrigger = (ZoomTrigger.MouseWheel | ZoomTrigger.Pinch | ZoomTrigger.Toolbar |\n                            ZoomTrigger.Commands);\n                        this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    else if ((newProperties.zoomSettings.zoomTrigger & ZoomTrigger.Toolbar) === ZoomTrigger.Toolbar) {\n                        this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    break;\n                case 'selectionSettings':\n                    if (newProperties.selectionSettings) {\n                        this.selectionSettings = newProperties.selectionSettings;\n                        if (this.activeObj.shape) {\n                            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                            this.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: this.activeObj } });\n                        }\n                    }\n                    break;\n                case 'toolbar':\n                    if (newProperties.toolbar) {\n                        this.toolbar = newProperties.toolbar;\n                        this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    break;\n                case 'toolbarTemplate':\n                    if (newProperties.toolbarTemplate) {\n                        this.notify('toolbar', { prop: 'destroy-bottom-toolbar', onPropertyChange: false });\n                        this.notify('toolbar', { prop: 'destroy-top-toolbar', onPropertyChange: false });\n                        this.element.appendChild(this.createElement('div', {\n                            id: this.element.id + '_toolbarArea', className: 'e-toolbar-area'\n                        }));\n                        this.toolbarTemplateFn();\n                    }\n                    break;\n                case 'quickAccessToolbarTemplate':\n                    if (newProperties.quickAccessToolbarTemplate) {\n                        this.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                        this.quickAccessToolbarTemplateFn();\n                    }\n                    break;\n            }\n        }\n    };\n    ImageEditor.prototype.destroy = function () {\n        var classList = [];\n        this.element.removeAttribute('tabindex');\n        var saveDialog = this.element.querySelector('#' + this.element.id + '_saveDialog');\n        if (saveDialog && saveDialog.style.display === 'block') {\n            getComponent(document.getElementById(this.element.id + '_saveDialog'), 'dialog').destroy();\n        }\n        if (this.cssClass) {\n            classList = classList.concat(this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n        removeClass([this.element], classList);\n        if (!this.element.getAttribute('class')) {\n            this.element.removeAttribute('class');\n        }\n        this.unwireEvent();\n        this.notify('toolbar', { prop: 'destroySubComponents', onPropertyChange: false });\n        this.notify('destroyed', null);\n        _super.prototype.destroy.call(this);\n        this.element.innerHTML = '';\n    };\n    ImageEditor.prototype.initialize = function () {\n        if (this.toolbarTemplate) {\n            this.element.appendChild(this.createElement('div', {\n                id: this.element.id + '_toolbarArea', className: 'e-toolbar-area'\n            }));\n            this.toolbarTemplateFn();\n        }\n        else {\n            this.notify('toolbar', { prop: 'create-toolbar', onPropertyChange: false });\n            this.notify('toolbar', { prop: 'create-contextual-toolbar', onPropertyChange: false });\n        }\n        this.createCanvas();\n        if (this.element.offsetWidth > 359 && this.element.querySelector('.e-ie-min-drop-content') && this.element.querySelector('.e-ie-drop-content')) {\n            this.element.querySelector('.e-ie-min-drop-content').style.display = 'none';\n            this.element.querySelector('.e-ie-drop-content').style.display = 'block';\n        }\n        this.createDropUploader();\n        if (this.showQuickAccessToolbar) {\n            var canvasWrapper = document.querySelector('#' + this.element.id + '_canvasWrapper');\n            canvasWrapper.appendChild(this.createElement('div', {\n                id: this.element.id + '_quickAccessToolbarArea', className: 'e-quick-access-toolbar-area'\n            }));\n            var quickAccessToolbar = document.getElementById(this.element.id + '_quickAccessToolbarArea');\n            quickAccessToolbar.style.position = 'absolute';\n            quickAccessToolbar.style.display = 'none';\n            if (this.activeObj) {\n                quickAccessToolbar.style.left = this.activeObj.activePoint.startX + 'px';\n                quickAccessToolbar.style.top = this.activeObj.activePoint.startY + 'px';\n            }\n            quickAccessToolbar.style.width = '100%';\n        }\n        if (this.quickAccessToolbarTemplate) {\n            this.quickAccessToolbarTemplateFn();\n        }\n        else {\n            this.notify('toolbar', { prop: 'create-qa-toolbar', onPropertyChange: false });\n        }\n        this.wireEvent();\n        this.lowerContext = this.lowerCanvas.getContext('2d');\n        this.upperContext = this.upperCanvas.getContext('2d');\n        this.inMemoryContext = this.inMemoryCanvas.getContext('2d');\n        this.lowerContext.filter = this.getDefaultFilter();\n        this.notify('filter', { prop: 'setAdjustmentValue', onPropertyChange: false, value: { adjustmentValue: this.lowerContext.filter } });\n        this.canvasFilter = this.lowerContext.filter;\n        this.notify('toolbar', { prop: 'setInitialAdjustmentValue', onPropertyChange: false, value: { value: this.lowerContext.filter } });\n        if (this.cssClass) {\n            addClass([this.element], this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n        if (this.element) {\n            createSpinner({\n                target: this.element\n            });\n        }\n        this.initializeZoomSettings();\n        if (this.imgSrc) {\n            this.open(this.imgSrc);\n        }\n    };\n    ImageEditor.prototype.createDropUploader = function () {\n        var _this = this;\n        var uploadObj = new Uploader({\n            dropArea: this.element.getElementsByClassName('e-canvas-wrapper')[0],\n            allowedExtensions: '.jpg, .jpeg, .png,.svg',\n            multiple: false,\n            selected: function (args) {\n                if (args.event.type === 'change' || args.event.type === 'drop') {\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    var type = args.filesData[0].type;\n                    var errType = 'unsupported';\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    if ((args.event.type === 'change' || (args.event.type === 'drop' && args.event.dataTransfer.files.length === 1)) && (type === 'png' || type === 'jpg' || type === 'jpeg' || type === 'svg')) {\n                        _this.notify('draw', { prop: 'fileSelect', value: { inputElement: _this.element.querySelector('#' + _this.element.id + '_dropfileUpload'), args: args } });\n                    }\n                    else {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        if (args.event.type === 'drop' && args.event.dataTransfer.files.length > 1) {\n                            errType = 'multi-select-image';\n                        }\n                        _this.showDialogPopup(errType);\n                    }\n                }\n            }\n        });\n        uploadObj.appendTo('#' + this.element.id + '_dropfileUpload');\n    };\n    ImageEditor.prototype.dlgCloseBtnClick = function () {\n        getComponent(document.getElementById(this.element.id + '_dialog'), 'dialog').destroy();\n    };\n    /**\n     * Show dialog popup for unsupported files.\n     *\n     * @param { string } type - Specifies the type of error.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.showDialogPopup = function (type) {\n        var content = '';\n        this.element.querySelector('#' + this.element.id + '_dialog').style.display = 'block';\n        var headerObj;\n        var okObj = { key: 'DlgOK' };\n        this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: okObj } });\n        if (type === 'multi-select-image') {\n            headerObj = { key: 'ImageErrorDialogHeader' };\n            this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: headerObj } });\n            var contentObj = { key: 'ImageErrorDialogContent' };\n            this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: contentObj } });\n            content = '<span>' + contentObj['value'] + '</span>';\n        }\n        else {\n            headerObj = { key: 'AlertDialogHeader' };\n            this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: headerObj } });\n            var contentObj = { key: 'AlertDialogContent' };\n            this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: contentObj } });\n            var supportObj = { key: 'SupportText' };\n            this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: supportObj } });\n            var andObj = { key: 'And' };\n            this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: andObj } });\n            content = '<span>' + contentObj['value'] + ' ' + supportObj['value'] + '<b> JPG, PNG, ' + andObj['value'] + ' SVG</b></span>';\n        }\n        var dialog = new Dialog({\n            header: headerObj['value'],\n            closeOnEscape: true,\n            content: content,\n            target: document.getElementById('target'),\n            width: '285px',\n            isModal: true,\n            animationSettings: { effect: 'Zoom' },\n            close: this.dlgCloseBtnClick.bind(this),\n            buttons: [\n                { click: this.dlgCloseBtnClick.bind(this),\n                    buttonModel: { content: okObj['value'] }\n                }\n            ]\n        });\n        dialog.appendTo('#' + this.element.id + '_dialog');\n    };\n    /**\n     *\n     * This Method will add events to component (element, event, method, current reference)\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.wireEvent = function () {\n        EventHandler.add(document, 'keydown', this.keyDownEventHandler, this);\n        EventHandler.add(document, 'keypress', this.keyUpEventHandler, this);\n        EventHandler.add(this.upperCanvas, 'mousedown', this.mouseDownEventHandler, this);\n        EventHandler.add(this.upperCanvas, 'mousemove', this.mouseMoveEventHandler, this);\n        EventHandler.add(this.upperCanvas, 'mouseup', this.mouseUpEventHandler, this);\n        EventHandler.add(document, 'mouseup', this.mouseUpEventHandler, this);\n        EventHandler.add(this.lowerCanvas, 'mousedown', this.canvasMouseDownHandler, this);\n        EventHandler.add(this.lowerCanvas, 'mousemove', this.canvasMouseMoveHandler, this);\n        EventHandler.add(this.lowerCanvas, 'mouseup', this.canvasMouseUpHandler, this);\n        EventHandler.add(this.upperCanvas, 'touchstart', this.touchStartHandler, this);\n        EventHandler.add(this.lowerCanvas, 'touchstart', this.touchStartHandler, this);\n        EventHandler.add(this.lowerCanvas, 'mousewheel DOMMouseScroll', this.handleScroll, this);\n        EventHandler.add(this.upperCanvas, 'mousewheel DOMMouseScroll', this.handleScroll, this);\n        window.addEventListener('resize', this.windowResizeHandler.bind(this));\n        if ((!Browser.isIos && Browser.info.name !== 'safari')) {\n            screen.orientation.addEventListener('change', this.screenOrientation.bind(this));\n        }\n        this.notify('shape', { prop: 'wireEvent', onPropertyChange: false });\n    };\n    /**\n     *\n     * This Method will remove events from component\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.unwireEvent = function () {\n        EventHandler.remove(document, 'keydown', this.keyDownEventHandler);\n        EventHandler.remove(document, 'keypress', this.keyUpEventHandler);\n        EventHandler.remove(this.upperCanvas, 'mousedown', this.mouseDownEventHandler);\n        EventHandler.remove(this.upperCanvas, 'mousemove', this.mouseMoveEventHandler);\n        EventHandler.remove(this.upperCanvas, 'mouseup', this.mouseUpEventHandler);\n        EventHandler.remove(document, 'mouseup', this.mouseUpEventHandler);\n        EventHandler.remove(this.lowerCanvas, 'mousedown', this.canvasMouseDownHandler);\n        EventHandler.remove(this.lowerCanvas, 'mousemove', this.canvasMouseMoveHandler);\n        EventHandler.remove(this.lowerCanvas, 'mouseup', this.canvasMouseUpHandler);\n        EventHandler.remove(this.upperCanvas, 'touchstart', this.touchStartHandler);\n        EventHandler.remove(this.lowerCanvas, 'touchstart', this.touchStartHandler);\n        EventHandler.remove(this.lowerCanvas, 'mousewheel DOMMouseScroll', this.handleScroll);\n        EventHandler.remove(this.upperCanvas, 'mousewheel DOMMouseScroll', this.handleScroll);\n        window.removeEventListener('resize', this.windowResizeHandler.bind(this));\n        if ((!Browser.isIos && Browser.info.name !== 'safari')) {\n            screen.orientation.removeEventListener('change', this.screenOrientation.bind(this));\n        }\n        this.notify('shape', { prop: 'unWireEvent', onPropertyChange: false });\n        this.notify('selection', { prop: 'unWireEvent', onPropertyChange: false });\n    };\n    ImageEditor.prototype.createCanvas = function () {\n        this.element.style.boxSizing = 'border-box';\n        var obj = { toolbarHeight: 0 };\n        this.notify('toolbar', { prop: 'getToolbarHeight', value: { obj: obj } });\n        var height = obj['toolbarHeight'];\n        if (this.toolbar && this.toolbar.length > 0 && this.toolbar.indexOf('Open') === -1) {\n            height = 0;\n        }\n        this.element.style.width = this.width;\n        this.element.style.height = this.height;\n        var canvasWrapper = this.element.appendChild(this.createElement('div', { id: this.element.id + '_canvasWrapper',\n            className: 'e-canvas-wrapper', attrs: { style: 'height:' + (this.element.offsetHeight - height - 2) + 'px; width:' +\n                    (this.element.offsetWidth - 2)\n                    + 'px; position: relative; overflow: hidden; margin: 0 auto;' }\n        }));\n        var dragObj = { key: 'DragText' };\n        this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: dragObj } });\n        var dropObj = { key: 'DropText' };\n        this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: dropObj } });\n        var browseObj = { key: 'BrowseText' };\n        this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: browseObj } });\n        var supportObj = { key: 'SupportText' };\n        this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: supportObj } });\n        var andObj = { key: 'And' };\n        this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: andObj } });\n        var dropAreaElement = this.createElement('div', { id: this.element.id + '_dropArea', className: 'e-ie-drop-area', attrs: { style: 'position: relative;' } });\n        var dropIconElement = this.createElement('span', { className: 'e-ie-drop-icon e-icons e-image', attrs: { style: 'position: absolute;' } });\n        var dropContentElement = this.createElement('span', { className: 'e-ie-drop-content', attrs: { style: 'position: absolute; display: none;' } });\n        dropContentElement.textContent = dragObj['value'] + ' ';\n        var minDropContentElem = this.createElement('span', { className: 'e-ie-min-drop-content', attrs: { style: 'position: absolute;' } });\n        minDropContentElem.textContent = dropObj['value'] + ' ';\n        var dropAnchorElement = this.createElement('a', { id: this.element.id + '_dropBrowse', className: 'e-ie-drop-browse' });\n        dropAnchorElement.textContent = browseObj['value'];\n        var minDropAnchorElem = this.createElement('a', { id: this.element.id + '_dropBrowse', className: 'e-ie-drop-browse' });\n        minDropAnchorElem.textContent = browseObj['value'];\n        dropContentElement.appendChild(dropAnchorElement);\n        minDropContentElem.appendChild(minDropAnchorElem);\n        dropAnchorElement.href = '';\n        minDropAnchorElem.href = '';\n        var dropInfoElement = this.createElement('span', { className: 'e-ie-drop-info', attrs: { position: 'absolute' } });\n        dropInfoElement.textContent = supportObj['value'] + ' SVG, PNG, ' + andObj['value'] + ' JPG';\n        var dropUploader = dropAreaElement.appendChild(this.createElement('input', {\n            id: this.element.id + '_dropfileUpload', className: 'e-fileUpload e-image-upload'\n        }));\n        dropUploader.setAttribute('type', 'file');\n        dropUploader.setAttribute('accept', 'image/*');\n        dropAreaElement.appendChild(dropIconElement);\n        dropAreaElement.appendChild(dropContentElement);\n        dropAreaElement.appendChild(minDropContentElem);\n        dropAreaElement.appendChild(dropInfoElement);\n        canvasWrapper.appendChild(dropAreaElement);\n        this.lowerCanvas = canvasWrapper.appendChild(this.createElement('canvas', {\n            id: this.element.id + '_lowerCanvas', attrs: { name: 'canvasImage' }\n        }));\n        this.maskCanvas = canvasWrapper.appendChild(this.createElement('canvas', {\n            id: this.element.id + '_maskCanvas', attrs: { name: 'canvasImage' }\n        }));\n        this.upperCanvas = canvasWrapper.appendChild(this.createElement('canvas', {\n            id: this.element.id + '_upperCanvas', attrs: { name: 'canvasImage' }\n        }));\n        this.inMemoryCanvas = this.createElement('canvas', {\n            id: this.element.id + '_inMemoryCanvas', attrs: { name: 'canvasImage' }\n        });\n        this.baseImgCanvas = this.createElement('canvas', {\n            id: this.element.id + '_baseImgCanvas', attrs: { name: 'canvasImage' }\n        });\n        this.textArea = canvasWrapper.appendChild(this.createElement('textarea', {\n            id: this.element.id + '_textArea', className: 'e-textarea', attrs: { name: 'textArea' }\n        }));\n        var dialog = this.element.appendChild(this.createElement('div', {\n            id: this.element.id + '_dialog', className: 'e-dialog'\n        }));\n        dialog.style.display = 'none';\n        var uploader = this.element.appendChild(this.createElement('input', {\n            id: this.element.id + '_fileUpload', className: 'e-fileUpload'\n        }));\n        uploader.setAttribute('type', 'file');\n        uploader.setAttribute('accept', 'image/*');\n        uploader.style.display = 'none';\n        this.textArea.setAttribute('spellcheck', 'false');\n        this.textArea.style.lineHeight = 'normal';\n        this.lowerCanvas.style.width = this.upperCanvas.style.width = this.maskCanvas.style.width =\n            this.inMemoryCanvas.style.width = '100%';\n        this.lowerCanvas.style.height = this.upperCanvas.style.height = this.maskCanvas.style.height =\n            this.inMemoryCanvas.style.height = '100%';\n        this.upperCanvas.style.position = this.lowerCanvas.style.position = this.maskCanvas.style.position =\n            this.textArea.style.position = 'absolute';\n        this.textArea.style.backgroundColor = 'transparent';\n        this.textArea.style.display = 'none';\n        this.maskCanvas.style.display = this.textArea.style.resize = 'none';\n        this.lowerContext = this.lowerCanvas.getContext('2d');\n        this.baseImg = this.createElement('img', {\n            id: this.element.id + '_orgImg', attrs: { name: 'Image', crossorigin: 'anonymous' }\n        });\n        this.upperCanvas.style.cursor = this.cursor = 'default';\n        this.upperCanvas.style.display = 'block';\n        this.upperContext = this.upperCanvas.getContext('2d');\n        dropAnchorElement.addEventListener('click', function (e) {\n            e.preventDefault();\n            dropUploader.click();\n            return false;\n        });\n        minDropAnchorElem.addEventListener('click', function (e) {\n            e.preventDefault();\n            dropUploader.click();\n            return false;\n        });\n    };\n    ImageEditor.prototype.touchStartHandler = function (e) {\n        this.notify('selection', { prop: 'touchStartHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.mouseDownEventHandler = function (e) {\n        if (e.target.className === 'e-ie-drop-browse') {\n            return;\n        }\n        this.notify('selection', { prop: 'mouseDownEventHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.mouseMoveEventHandler = function (e) {\n        this.notify('selection', { prop: 'mouseMoveEventHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.mouseUpEventHandler = function (e) {\n        if (e.target.className === 'e-ie-drop-browse') {\n            return;\n        }\n        this.notify('selection', { prop: 'mouseUpEventHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.keyDownEventHandler = function (e) {\n        this.notify('selection', { prop: 'keyDownEventHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.keyUpEventHandler = function (e) {\n        if ((this.textArea.style.display === 'block' || this.textArea.style.display === 'inline-block')\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            && e.target.id === this.element.id + '_textArea') {\n            this.notify('selection', { prop: 'textKeyDown', value: { e: e } });\n        }\n    };\n    ImageEditor.prototype.canvasMouseDownHandler = function (e) {\n        if (e.target.className === 'e-ie-drop-browse') {\n            return;\n        }\n        this.notify('selection', { prop: 'canvasMouseDownHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.canvasMouseMoveHandler = function (e) {\n        this.notify('selection', { prop: 'canvasMouseMoveHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.canvasMouseUpHandler = function (e) {\n        if (e.target.className === 'e-ie-drop-browse') {\n            return;\n        }\n        this.notify('selection', { prop: 'canvasMouseUpHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.handleScroll = function (e) {\n        this.notify('selection', { prop: 'handleScroll', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.adjustToScreen = function () {\n        this.update();\n    };\n    ImageEditor.prototype.screenOrientation = function () {\n        if (Browser.isDevice) {\n            setTimeout(this.adjustToScreen.bind(this), 100);\n        }\n    };\n    ImageEditor.prototype.windowResizeHandler = function () {\n        if (!Browser.isDevice && this.element.classList.contains('e-image-editor')) {\n            this.adjustToScreen();\n        }\n    };\n    ImageEditor.prototype.notifyResetForAllModules = function () {\n        var modules = this.requiredModules();\n        for (var i = 0; i < modules.length; i++) {\n            var module = modules[i].member;\n            this.notify(module === 'toolbar-module' ? 'toolbar' : module, { prop: 'reset', onPropertyChange: false });\n        }\n    };\n    ImageEditor.prototype.allowShape = function (x, y) {\n        this.isPublicMethod = true;\n        this.applyShapes();\n        var obj = { inRange: false };\n        this.notify('shape', { prop: 'isPointsInRange', onPropertyChange: false,\n            value: { x: x, y: y, obj: obj } });\n        return obj['inRange'];\n    };\n    /**\n     * Clears the current selection performed in the image editor.\n     *\n     * @param { boolean } resetCrop - Specifies to reset last cropped image.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.clearSelection = function (resetCrop) {\n        this.notify('selection', { prop: 'clearSelection', onPropertyChange: false, value: { resetCrop: resetCrop } });\n    };\n    /**\n     * Crops an image based on the selection done in the image editor.\n     *\n     * {% codeBlock src='image-editor/crop/index.md' %}{% endcodeBlock %}\n     *\n     * @remarks\n     * The selection can be done through programmatically using the 'select' method or through UI interactions.\n     *\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.crop = function () {\n        var obj = { isCrop: false };\n        this.notify('crop', { prop: 'crop', onPropertyChange: false, value: { obj: obj } });\n        return obj['isCrop'];\n    };\n    /**\n     * Flips an image by horizontally or vertically in the image editor.\n     *\n     * {% codeBlock src='image-editor/zoom/index.md' %}{% endcodeBlock %}\n     *\n     * @param { Direction } direction - Specifies the direction to flip the image.\n     * A horizontal direction for horizontal flipping and vertical direction for vertical flipping.\n     *\n     * @remarks\n     * It flips the shapes including rectangle, circle, line, text, image, and freehand drawings.\n     *\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.flip = function (direction) {\n        this.notify('transform', { prop: 'flip', value: { direction: direction } });\n        this.notify('draw', { prop: 'redrawDownScale' });\n        this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n        var actionArgs = { action: 'flip', actionEventArgs: this.editCompleteArgs };\n        this.triggerEditCompleteEvent(actionArgs);\n    };\n    /**\n     * Returns an image as ImageData to load it in to a canvas.\n     *\n     * @param {boolean} [includeAnnotations=true] - Optional. Specifies whether the returned image data should include annotations. The default value is true, meaning annotations are included.\n     *\n     * @remarks\n     * The data returned from this method is directly drawn in a canvas using 'putImageData' method.\n     * And then the user can get the base64 string from the canvas using toDataURL method.\n     *\n     * @returns {ImageData}.\n     */\n    ImageEditor.prototype.getImageData = function (includeAnnotations) {\n        includeAnnotations = isNullOrUndefined(includeAnnotations) ? true : includeAnnotations;\n        var imageData;\n        if (includeAnnotations) {\n            var obj = { canvas: null };\n            this.applyShapes();\n            this.notify('export', { prop: 'exportToCanvas', value: { object: obj } });\n            imageData = obj['canvas'].getContext('2d').getImageData(0, 0, obj['canvas'].width, obj['canvas'].height);\n        }\n        else if (this.isMaskImage && this.element.getAttribute('data-value') === 'mask-drawing') {\n            imageData = this.getData(true);\n            this.updateColl('reset');\n        }\n        else {\n            imageData = this.getData();\n            this.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n        }\n        return imageData;\n    };\n    /**\n     *  Opens an image as URL or ImageData for editing in an image editor.\n     *\n     * @param {string | ImageData } data - Specifies url of the image or image data.\n     * @param {boolean} [resetChanges=true] - Optional. Determines whether to reset existing changes when opening the image. The default value is true, which resets all existing changes.\n     * @param {ImageSettings} imageSettings - Optional. Specifies the image setting that contains background color to apply when opening a transparent image. The default value of background color is an empty string (''), meaning no background color is applied by default when a transparent image is opened.\n     *\n     * @remarks\n     * The supported file types are JPG, JPEG, PNG, and SVG.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.open = function (data, resetChanges, imageSettings) {\n        resetChanges = isNullOrUndefined(resetChanges) ? true : resetChanges;\n        if (resetChanges) {\n            if (isNullOrUndefined(data)) {\n                return;\n            }\n            var dropArea = document.getElementById(this.element.id + '_dropArea');\n            if (dropArea) {\n                dropArea.style.display = 'none';\n            }\n            this.notify('draw', { prop: 'open', value: { data: data } });\n        }\n        else {\n            this.updateImage(data, imageSettings ? imageSettings.backgroundColor : null);\n        }\n    };\n    /**\n     * Reset all the changesdone in an image editor and revert to original image.\n     *\n     * @remarks\n     * The undo redo collection also cleared while resetting the image editor.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.reset = function () {\n        this.updateColl('reset');\n        var obj = { isErrorImage: false };\n        this.notify('draw', { prop: 'getErrorImage', value: { obj: obj } });\n        if (!this.disabled && !obj['isErrorImage']) {\n            this.clearContext(this.inMemoryContext);\n            this.clearContext(this.lowerContext);\n            this.clearContext(this.upperContext);\n            this.notify('shape', { prop: 'setRedactType', onPropertyChange: false, value: { redactType: 'blur' } });\n            this.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                    isApplyBtn: false, isCropping: false, isZooming: null, cType: null } });\n            if (Browser.isDevice && document.getElementById(this.element.id + '_bottomToolbar')) {\n                getComponent(document.getElementById(this.element.id + '_bottomToolbar'), 'toolbar').destroy();\n                this.notify('toolbar', { prop: 'create-bottom-toolbar', onPropertyChange: false });\n            }\n            var isImageLoaded = this.isImageLoaded;\n            this.currObjType.isUndoAction = this.isUndoRedo = this.togglePan = this.togglePen = this.isImageLoaded = this.isFinetuning = false;\n            this.isCircleCrop = this.isCropTab = false;\n            this.objColl = [];\n            this.transform.degree = 0;\n            this.upperCanvas.style.display = 'block';\n            this.transform.currFlipState = '';\n            this.allowDownScale = true;\n            this.upperCanvas.style.cursor = this.cursor = this.lowerCanvas.style.cursor = 'default';\n            this.lowerContext.lineWidth = this.upperContext.lineWidth = undefined;\n            this.frameDestPoints = null;\n            this.textArea.value = this.textArea.textContent = '';\n            this.textArea.style.display = 'none';\n            this.lowerContext.filter = this.canvasFilter = this.getDefaultFilter();\n            this.img.destLeft = this.img.destTop = this.img.srcLeft = this.img.srcTop = 0;\n            this.img.destWidth = this.img.destHeight = this.img.srcWidth = this.img.srcHeight = null;\n            this.currSelectionPoint = null;\n            this.panPoint.currentPannedPoint = { x: 0, y: 0 };\n            this.rotateFlipColl = [];\n            this.points = [];\n            this.pointColl = {};\n            this.freehandCounter = 0;\n            this.notify('draw', { prop: 'resetPanPoints' });\n            this.lowerCanvas.style.left = this.upperCanvas.style.left = '';\n            this.fontSizeColl = [];\n            this.lowerCanvas.style.top = this.upperCanvas.style.top = '';\n            this.lowerCanvas.style.maxWidth = this.upperCanvas.style.maxWidth = '';\n            this.lowerCanvas.style.maxHeight = this.upperCanvas.style.maxHeight = '';\n            this.transform.defaultZoomFactor = this.transform.zoomFactor = 0;\n            this.transform.cropZoomFactor = null;\n            this.frameObj = { type: 'none', color: '#fff', size: 20, inset: 20, offset: 20, radius: 0, amount: 1, border: 'solid', gradientColor: '' };\n            this.tempFrameObj = { type: 'none', color: '#fff', size: 20, inset: 20, offset: 20, radius: 0, amount: 1, border: 'solid', gradientColor: '' };\n            this.currObjType = { shape: '', isDragging: false, isActiveObj: false, isText: false, isInitialText: false, isLine: false,\n                isInitialLine: false, isCustomCrop: false, isZoomed: false, isUndoZoom: false,\n                isUndoAction: false, isFiltered: false, isSave: false, isResize: false, isRedact: false };\n            this.cropObj = { cropZoom: 0, defaultZoom: 0, totalPannedPoint: { x: 0, y: 0 }, totalPannedClientPoint: { x: 0, y: 0 },\n                totalPannedInternalPoint: { x: 0, y: 0 }, tempFlipPanPoint: { x: 0, y: 0 }, activeObj: {},\n                rotateFlipColl: [], degree: 0, currFlipState: '', straighten: 0, zoomFactor: 0, previousZoomValue: 0,\n                destPoints: { startX: 0, startY: 0, width: 0, height: 0 }, frame: 'none',\n                srcPoints: { startX: 0, startY: 0, width: 0, height: 0 }, filter: '', isBrightAdjust: false,\n                aspectWidth: null, aspectHeight: null, straightenZoom: 0,\n                adjustmentLevel: { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0, blur: 0,\n                    exposure: 0, transparency: 100, sharpen: false, bw: false }, currentFilter: '' };\n            this.afterCropActions = [];\n            this.currentFilter = '';\n            this.tempFrameZoomLevel = null;\n            this.cxtTbarHeight = null;\n            this.straightenPoint = null;\n            this.transform.straighten = 0;\n            this.cancelCropSelection = null;\n            this.aspectWidth = this.aspectHeight = null;\n            this.isResize = this.isMaskImage = false;\n            this.drawingShape = null;\n            this.isShapeDrawing = this.noPushUndo = this.isUndoRedoStack = this.isKBDNavigation = false;\n            this.shapeColl = [];\n            this.tempObjColl = [];\n            this.tempPointColl = [];\n            this.tempShapeColl = [];\n            this.isImageUpdated = false;\n            this.tempToolbarHeight = 0;\n            this.tempToolbar = [];\n            this.tempRedactBlur = 50;\n            this.tempRedactPixel = 40;\n            var obj_1 = { initialZoomValue: false };\n            this.editCompleteArgs = null;\n            this.isFinetuneBtnClick = false;\n            this.notify('draw', { prop: 'getInitialZoomValue', onPropertyChange: false, value: { obj: obj_1 } });\n            if (obj_1['initialZoomValue']) {\n                this.setProperties({ zoomSettings: { zoomFactor: obj_1['initialZoomValue'] } }, true);\n            }\n            var qtArea = document.getElementById(this.element.id + '_quickAccessToolbarArea');\n            if (qtArea) {\n                qtArea.style.display = 'none';\n            }\n            this.notifyResetForAllModules();\n            this.notify('filter', { prop: 'update-finetunes' });\n            if (this.toolbarTemplate) {\n                this.toolbarHeight = this.element.querySelector('#' + this.element.id + '_toolbarArea').clientHeight;\n            }\n            else if (this.element.querySelector('#' + this.element.id + '_toolbar')) {\n                this.toolbarHeight = this.element.querySelector('#' + this.element.id + '_toolbar').clientHeight;\n            }\n            this.notify('toolbar', { prop: 'setToolbarHeight', value: { height: this.toolbarHeight } });\n            this.isImageLoaded = isImageLoaded;\n            this.straightenBaseImageCanvas();\n            this.isImageLoaded = false;\n            this.notify('draw', { prop: 'update-canvas', onPropertyChange: false });\n            this.isImageLoaded = isImageLoaded;\n            this.prevStraightenedDegree = 0;\n            var ctWrapper = this.element.querySelector('.e-contextual-toolbar-wrapper');\n            if (ctWrapper) {\n                ctWrapper.classList.add('e-hide');\n            }\n            this.notify('toolbar', { prop: 'refresh-dropdown-btn', value: { isDisabled: false } });\n            this.notify('toolbar', { prop: 'enable-disable-btns' });\n            var straightenObj = { bool: this.isStraightening };\n            if (Browser.isDevice && straightenObj['bool']) {\n                this.notify('crop', { prop: 'resizeWrapper' });\n            }\n            var actionArgs = { action: 'reset', actionEventArgs: null };\n            this.triggerEditCompleteEvent(actionArgs);\n        }\n    };\n    /**\n     * Rotate an image to clockwise and anti-clockwise.\n     *\n     * {% codeBlock src='image-editor/rotate/index.md' %}{% endcodeBlock %}\n     *\n     * @param {number} degree - Specifies a degree to rotate an image.\n     * A positive integer value for clockwise and negative integer value for anti-clockwise rotation.\n     *\n     * @remarks\n     * It rotated the shapes including rectangle, circle, line, text, image, and freehand drawings.\n     *\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.rotate = function (degree) {\n        var obj = { isRotate: false };\n        if (degree === 90 || degree === -90) {\n            this.updateImageTransformColl(degree === 90 ? 'rotateright' : 'rotateleft');\n        }\n        this.notify('transform', { prop: 'rotate', value: { degree: degree, obj: obj } });\n        this.notify('draw', { prop: 'redrawDownScale' });\n        var actionArgs = { action: 'rotate', actionEventArgs: this.editCompleteArgs };\n        this.triggerEditCompleteEvent(actionArgs);\n        return obj['isRotate'];\n    };\n    /**\n     * Export an image using the specified file name and the extension.\n     *\n     * @param {string} type - Specifies a format of image to be saved.\n     * @param {string} fileName  Specifies a file name to be saved\n     * @param {number} imageQuality  Specifies the quality of an image to be saved. The default value is 1 which represents the original size of the image if not specified.\n     *\n     * @remarks\n     * The supported file types are JPG, JPEG, PNG, and SVG.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.export = function (type, fileName, imageQuality) {\n        this.applyShapes();\n        this.notify('export', { prop: 'export', onPropertyChange: false, value: { type: type, fileName: fileName, imgQuality: imageQuality } });\n    };\n    /**\n     * Perform selection in an image editor. The selection helps to crop an image.\n     *\n     * {% codeBlock src='image-editor/select/index.md' %}{% endcodeBlock %}\n     *\n     * @param {string} type - Specifies the shape - circle / square / custom selection / pre-defined ratios.\n     * @param {number} startX  Specifies the start x-coordinate point of the selection.\n     * @param {number} startY  Specifies the start y-coordinate point of the selection.\n     * @param {number} width - Specifies the width of the selection area.\n     * @param {number} height - Specifies the height of the selection area.\n     *\n     * @remarks\n     * The selection UI is based on the 'theme' property.\n     *\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.select = function (type, startX, startY, width, height) {\n        this.applyShapes();\n        this.notify('toolbar', { prop: 'performCropTransformClick', value: { shape: 'crop-' + type } });\n        this.notify('draw', { prop: 'select', onPropertyChange: false,\n            value: { type: type, startX: startX, startY: startY, width: width, height: height } });\n        if ((startX && startY) || (width && height)) {\n            this.notify('draw', { prop: 'select', onPropertyChange: false,\n                value: { type: type, startX: startX, startY: startY, width: width, height: height } });\n        }\n        else {\n            this.cropObj = { cropZoom: 0, defaultZoom: 0, totalPannedPoint: { x: 0, y: 0 }, totalPannedClientPoint: { x: 0, y: 0 },\n                totalPannedInternalPoint: { x: 0, y: 0 }, tempFlipPanPoint: { x: 0, y: 0 }, activeObj: {},\n                rotateFlipColl: [], degree: 0, currFlipState: '', straighten: 0, zoomFactor: 0, previousZoomValue: 0,\n                destPoints: { startX: 0, startY: 0, width: 0, height: 0 }, frame: 'none',\n                srcPoints: { startX: 0, startY: 0, width: 0, height: 0 }, filter: '', isBrightAdjust: false,\n                aspectWidth: null, aspectHeight: null, straightenZoom: 0,\n                adjustmentLevel: { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0, blur: 0,\n                    exposure: 0, transparency: 100, sharpen: false, bw: false }, currentFilter: '' };\n        }\n    };\n    /**\n     * Enable or disable a freehand drawing option in an Image Editor.\n     *\n     * @param {boolean} value - Specifies a value whether to enable or disable freehand drawing.\n     *\n     * @returns {void}.\n     * @private\n     */\n    ImageEditor.prototype.freeHandDraw = function (value) {\n        this.notify('freehand-draw', { prop: 'freeHandDraw', onPropertyChange: false, value: { value: value } });\n    };\n    /**\n     * Enable or disable a freehand drawing in an Image Editor.\n     *\n     * @param {boolean} value - Specifies a value whether to enable or disable freehand drawing.\n     *\n     * @remarks\n     * User can directly drawing on a canvas after enabling this option.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.freehandDraw = function (value) {\n        if (!this.disabled && this.isImageLoaded) {\n            if (!value && this.isMaskImage) {\n                this.discard();\n                return;\n            }\n            this.applyShapes();\n            this.freeHandDraw(value);\n            var prevObj = { shapeSettingsObj: {} };\n            this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: prevObj } });\n            var shapeSettings = prevObj['shapeSettingsObj'];\n            shapeSettings.type = ShapeType.FreehandDraw;\n            var shapeChangingArgs = { cancel: false, action: 'insert', previousShapeSettings: shapeSettings,\n                currentShapeSettings: shapeSettings };\n            this.notify('freehand-draw', { prop: 'triggerShapeChanging', value: { shapeChangingArgs: shapeChangingArgs } });\n        }\n    };\n    /**\n     * Enable or disable a panning on the Image Editor.\n     *\n     * @param {boolean} value - Specifies a value whether enable or disable panning.\n     * @param {number} x - Optional, Specifies a value to pan the image horizontally.\n     * @param {number} y - Optional, Specifies a value to pan the image vertically.\n     *\n     * @remarks\n     * This option will take into effect once the image's visibility is hidden when zooming an image or selection has been performed.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.pan = function (value, x, y) {\n        this.applyShapes();\n        this.notify('transform', { prop: 'pan', onPropertyChange: false, value: { value: value, x: x, y: y } });\n    };\n    /**\n     * Zoom in or out on a point in the image editor.\n     *\n     * @param {number} zoomFactor - The percentage-based zoom factor to use (e.g. 20 for 2x zoom).\n     * @param {Point} zoomPoint - The point in the image editor to zoom in/out on.\n     *\n     * @remarks\n     * Zooming directly enables the panning option when the image's visibility is hidden.\n     * User can disable it by using 'Pan' method.\n     * @returns {void}\n     *\n     */\n    ImageEditor.prototype.zoom = function (zoomFactor, zoomPoint) {\n        this.isZoomBtnClick = true;\n        this.notify('transform', { prop: 'zoom', onPropertyChange: false,\n            value: { zoomFactor: zoomFactor, zoomPoint: zoomPoint } });\n        this.notify('draw', { prop: 'redrawDownScale' });\n    };\n    /**\n     * Draw ellipse on an image.\n     *\n     * {% codeBlock src='image-editor/ellipse/index.md' %}{% endcodeBlock %}\n     *\n     * @param {number} x - Specifies x-coordinate of ellipse.\n     * @param {number} y - Specifies y-coordinate of ellipse.\n     * @param {number} radiusX - Specifies the radius x point for the ellipse.\n     * @param {number} radiusY - Specifies the radius y point for the ellipse.\n     * @param {number} strokeWidth - Specifies the stroke width of ellipse.\n     * @param {string} strokeColor - Specifies the stroke color of ellipse.\n     * @param {string} fillColor - Specifies the fill color of the ellipse.\n     * @param {number} degree - Specifies the degree to rotate the ellipse.\n     * @param {boolean} isSelected - Specifies to show the ellipse in the selected state.\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.drawEllipse = function (x, y, radiusX, radiusY, strokeWidth, strokeColor, fillColor, degree, isSelected) {\n        var isEllipse = false;\n        var isPointsInRange = this.allowShape(x, y);\n        if (!this.disabled && this.isImageLoaded && (isPointsInRange || (isNullOrUndefined(x) && isNullOrUndefined(y)))) {\n            isEllipse = true;\n            this.notify('shape', { prop: 'drawEllipse', onPropertyChange: false, value: { x: x, y: y, radiusX: radiusX, radiusY: radiusY,\n                    strokeWidth: strokeWidth, strokeColor: strokeColor, fillColor: fillColor, degree: degree, isSelected: isSelected } });\n            this.editCompleted();\n        }\n        return isEllipse;\n    };\n    /**\n     * Draw line on an image.\n     *\n     * @param {number} startX  Specifies start point x-coordinate of line.\n     * @param {number} startY  Specifies start point y-coordinate of line.\n     * @param {number} endX - Specifies end point x-coordinates of line.\n     * @param {number} endY - Specifies end point y-coordinates of the line.\n     * @param {number} strokeWidth - Specifies the stroke width of line.\n     * @param {string} strokeColor - Specifies the stroke color of line.\n     * @param {boolean} isSelected - Specifies to show the line in the selected state.\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.drawLine = function (startX, startY, endX, endY, strokeWidth, strokeColor, isSelected) {\n        var isLine = false;\n        var isPointsInRange = this.allowShape(startX, startY);\n        if (!this.disabled && this.isImageLoaded && (isPointsInRange || (isNullOrUndefined(startX) && isNullOrUndefined(startY)))) {\n            isLine = true;\n            this.notify('shape', { prop: 'drawLine', onPropertyChange: false, value: { startX: startX, startY: startY, endX: endX,\n                    endY: endY, strokeWidth: strokeWidth, strokeColor: strokeColor, isSelected: isSelected } });\n            this.editCompleted();\n        }\n        return isLine;\n    };\n    /**\n     * Draw arrow on an image.\n     *\n     * @param {number} startX  Specifies start point x-coordinate of arrow.\n     * @param {number} startY  Specifies start point y-coordinate of arrow.\n     * @param {number} endX - Specifies end point x-coordinates of arrow.\n     * @param {number} endY - Specifies end point y-coordinates of the arrow.\n     * @param {number} strokeWidth - Specifies the stroke width of arrow.\n     * @param {string} strokeColor - Specifies the stroke color of arrow.\n     * @param {ArrowheadType} arrowStart  Specifies the type of arrowhead for start position. The default value is None.\n     * @param {ArrowheadType} arrowEnd  Specifies the type of arrowhead for end position. The default value is SolidArrow.\n     * @param {boolean} isSelected - Specifies to show the arrow in the selected state.\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.drawArrow = function (startX, startY, endX, endY, strokeWidth, strokeColor, arrowStart, arrowEnd, isSelected) {\n        var isArrow = false;\n        var isPointsInRange = this.allowShape(startX, startY);\n        if (!this.disabled && this.isImageLoaded && (isPointsInRange || (isNullOrUndefined(startX) && isNullOrUndefined(startY)))) {\n            isArrow = true;\n            this.notify('shape', { prop: 'drawArrow', onPropertyChange: false, value: { startX: startX, startY: startY, endX: endX,\n                    endY: endY, strokeWidth: strokeWidth, strokeColor: strokeColor, arrowStart: arrowStart, arrowEnd: arrowEnd,\n                    isSelected: isSelected } });\n            this.editCompleted();\n        }\n        return isArrow;\n    };\n    /**\n     * Draw path on an image.\n     *\n     * @param {Point[]} pointColl  Specifies collection of start and end x, y-coordinates of path.\n     * @param {number} strokeWidth - Specifies the stroke width of path.\n     * @param {string} strokeColor - Specifies the stroke color of path.\n     * @param {boolean} isSelected - Specifies to show the path in the selected state.\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.drawPath = function (pointColl, strokeWidth, strokeColor, isSelected) {\n        this.isPublicMethod = true;\n        var obj = { inRange: false };\n        var isPath = false;\n        if (pointColl && pointColl.length > 0) {\n            for (var i = 0; i < pointColl.length; i++) {\n                if (obj['inRange']) {\n                    break;\n                }\n                this.notify('shape', { prop: 'isPointsInRange', onPropertyChange: false,\n                    value: { x: pointColl[i].x, y: pointColl[i].y, obj: obj } });\n            }\n        }\n        if (!this.disabled && this.isImageLoaded && (obj['inRange'] || isNullOrUndefined(pointColl))) {\n            isPath = true;\n            this.applyShapes();\n            this.notify('shape', { prop: 'drawPath', onPropertyChange: false, value: { pointColl: pointColl,\n                    strokeWidth: strokeWidth, strokeColor: strokeColor, isSelected: isSelected } });\n            this.editCompleted();\n        }\n        return isPath;\n    };\n    /**\n     * Draw a rectangle on an image.\n     *\n     * @param {number} x - Specifies x-coordinate of rectangle.\n     * @param {number} y - Specifies y-coordinate of rectangle.\n     * @param {number} width - Specifies the width of the rectangle.\n     * @param {number} height - Specifies the height of the rectangle.\n     * @param {number} strokeWidth - Specifies the stroke width of rectangle.\n     * @param {string} strokeColor - Specifies the stroke color of rectangle.\n     * @param {string} fillColor - Specifies the fill color of the rectangle.\n     * @param {number} degree - Specifies the degree to rotate the rectangle.\n     * @param {boolean} isSelected - Specifies to show the rectangle in the selected state.\n     * @param {number} borderRadius - Specifies the radius to apply border radius to rectangle.\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.drawRectangle = function (x, y, width, height, strokeWidth, strokeColor, fillColor, degree, isSelected, borderRadius) {\n        var isRectangle = false;\n        var isPointsInRange = this.allowShape(x, y);\n        if (!this.disabled && this.isImageLoaded && (isPointsInRange || (isNullOrUndefined(x) && isNullOrUndefined(y)))) {\n            isRectangle = true;\n            this.notify('shape', { prop: 'drawRectangle', onPropertyChange: false, value: { x: x, y: y, width: width, height: height,\n                    strokeWidth: strokeWidth, strokeColor: strokeColor, fillColor: fillColor, degree: degree, isSelected: isSelected,\n                    radius: borderRadius } });\n            this.editCompleted();\n        }\n        return isRectangle;\n    };\n    /**\n     * Draw a text on an image.\n     *\n     * {% codeBlock src='image-editor/text/index.md' %}{% endcodeBlock %}\n     *\n     * @param {number} x - Specifies x-coordinate of text.\n     * @param {number} y - Specifies y-coordinate of text.\n     * @param {string} text - Specifies the text to add on an image.\n     * @param {string} fontFamily - Specifies the font family of the text.\n     * @param {number} fontSize - Specifies the font size of the text.\n     * @param {boolean} bold - Specifies whether the text is bold or not.\n     * @param {boolean} italic - Specifies whether the text is italic or not.\n     * @param {string} color - Specifies font color of the text.\n     * @param {boolean} isSelected - Specifies to show the text in the selected state.\n     * @param {number} degree - Specifies the degree to rotate the text.\n     * @param {fillColor} fillColor - Specifies the background Color of the text.\n     * @param {string} strokeColor - Specifies the outline color of the text annotation.\n     * @param {number} strokeWidth - Specifies the outline stroke width of the text annotation.\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.drawText = function (x, y, text, fontFamily, fontSize, bold, italic, color, isSelected, degree, fillColor, strokeColor, strokeWidth) {\n        var isText = false;\n        var isPointsInRange = this.allowShape(x, y);\n        if (!this.disabled && this.isImageLoaded && (isPointsInRange || (isNullOrUndefined(x) && isNullOrUndefined(y)))) {\n            isText = true;\n            this.notify('shape', { prop: 'drawText', onPropertyChange: false, value: { x: x, y: y, text: text, fontFamily: fontFamily,\n                    fontSize: fontSize, bold: bold, italic: italic, color: color, isSelected: isSelected, degree: degree, fillColor: fillColor,\n                    outlineColor: strokeColor, outlineWidth: strokeWidth } });\n            this.editCompleted();\n        }\n        return isText;\n    };\n    /**\n     * Draw an image as annotation on an image.\n     *\n     *\n     * @param {string | ImageData} data - Specifies url of the image or image data.\n     * @param {number} x - Specifies x-coordinate of a starting point for an image.\n     * @param {number} y - Specifies y-coordinate of a starting point for an image.\n     * @param {number} width - Specifies the width of the image.\n     * @param {number} height - Specifies the height of the image.\n     * @param {boolean} isAspectRatio - Specifies whether to maintain aspect ratio or not.\n     * @param {number} degree - Specifies the degree to rotate the image.\n     * @param {number} opacity - Specifies the value for the image.\n     * @param {boolean} isSelected - Specifies to show the image in the selected state.\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.drawImage = function (data, x, y, width, height, isAspectRatio, degree, opacity, isSelected) {\n        var isImage = false;\n        var isPointsInRange = this.allowShape(x, y);\n        if (!this.disabled && this.isImageLoaded && (isPointsInRange || (isNullOrUndefined(x) && isNullOrUndefined(y)))) {\n            var length_1 = this.objColl.length;\n            this.notify('shape', { prop: 'drawImage', onPropertyChange: false, value: { x: x, y: y, width: width, height: height,\n                    src: data, degree: degree, isAspectRatio: isAspectRatio, opacity: opacity, isSelected: isSelected } });\n            this.editCompleted();\n            if (this.objColl.length > length_1) {\n                isImage = true;\n            }\n        }\n        return isImage;\n    };\n    /**\n     * This method is used to update the existing shapes by changing its height, width, color, and font styles in the component.\n     * Use 'getShapeSettings' method to get the shape which is then passed to change the options of a shape.\n     * {% codeBlock src='image-editor/updateShape/index.md' %}{% endcodeBlock %}\n     *\n     * @param {ShapeSettings} setting - Specifies the shape settings to be updated for the shape on an image.\n     * @param {boolean} isSelected - Specifies to show the shape in the selected state.\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.updateShape = function (setting, isSelected) {\n        var obj = { isSelected: false };\n        var isTextArea = false;\n        var freehandObj = { bool: false };\n        if (isNullOrUndefined(setting.id)) {\n            if (setting.strokeColor) {\n                this.activeObj.strokeSettings.strokeColor = setting.strokeColor;\n            }\n            if (setting.fillColor) {\n                this.activeObj.strokeSettings.fillColor = setting.fillColor;\n            }\n            if (setting.strokeWidth) {\n                this.activeObj.strokeSettings.strokeWidth = setting.strokeWidth;\n            }\n            if (setting.index) {\n                this.activeObj.order = setting.index;\n            }\n            if (setting.type === 'FreehandDraw' && setting.strokeWidth) {\n                this.notify('freehand-draw', { prop: 'setPenStrokeWidth', onPropertyChange: false, value: { value: setting.strokeWidth } });\n            }\n        }\n        else {\n            if (setting.type.toLowerCase() === 'text' && (this.textArea.style.display === 'block' ||\n                this.textArea.style.display === 'inline-block')) {\n                this.okBtn(null, true);\n                isTextArea = true;\n            }\n            this.notify('shape', { prop: 'selectShape', onPropertyChange: false, value: { id: setting.id, obj: obj } });\n            this.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: freehandObj } });\n            if (obj['isSelected']) {\n                var tempFontSize = this.activeObj.textSettings.fontSize;\n                this.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n                    value: { shapeSettings: setting } });\n                if (this.activeObj.shape === 'text' && tempFontSize) {\n                    var diff = this.activeObj.textSettings.fontSize - tempFontSize;\n                    if (diff !== 0) {\n                        this.activeObj.activePoint.height += diff;\n                        this.activeObj.activePoint.startY -= (diff / 2);\n                        this.activeObj.activePoint.endY += (diff / 2);\n                        this.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: this.activeObj.activePoint, obj: this.activeObj,\n                                isMouseMove: null, x: null, y: null } });\n                    }\n                }\n                var activeObj = extend({}, this.activeObj, {}, true);\n                this.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                this.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: null } });\n                this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                if (activeObj.shape) {\n                    this.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: activeObj } });\n                }\n                if (this.activeObj.shape === 'text') {\n                    this.notify('toolbar', { prop: 'editText', onPropertyChange: false });\n                }\n                if (freehandObj['bool']) {\n                    this.notify('undo-redo', { prop: 'setPreventUR', value: { bool: true } });\n                }\n                this.okBtn(isSelected, true);\n                if (freehandObj['bool']) {\n                    this.notify('undo-redo', { prop: 'setPreventUR', value: { bool: false } });\n                }\n                this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                this.editCompleteArgs = { action: 'shape-update', currentShapeSettings: setting };\n                this.editCompleted('shape-customize');\n                if (isTextArea) {\n                    this.enableTextEditing();\n                }\n                if (isSelected) {\n                    this.noRedact = true;\n                    this.selectShape(setting.id);\n                }\n            }\n        }\n        return obj['isSelected'];\n    };\n    /**\n     * Select a shape based on the given shape id.\n     * Use 'getShapeSettings' method to get the shape id which is then passed to perform selection.\n     *\n     * {% codeBlock src='image-editor/selectShape/index.md' %}{% endcodeBlock %}\n     *\n     * @param {string} id - Specifies the shape id to select a shape on an image.\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.selectShape = function (id) {\n        this.applyShapes();\n        var obj = { isSelected: false };\n        this.notify('shape', { prop: 'selectShape', onPropertyChange: false, value: { id: id, obj: obj } });\n        this.editCompleted('shape-select');\n        this.noRedact = false;\n        return obj['isSelected'];\n    };\n    /**\n     * Deletes a shape based on the given shape id.\n     * Use 'getShapeSettings' method to get the shape id which is then passed to perform selection.\n     *\n     * {% codeBlock src='image-editor/deleteShape/index.md' %}{% endcodeBlock %}\n     *\n     * @param {string} id - Specifies the shape id to delete the shape on an image.\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.deleteShape = function (id) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var shape = this.getShapeSetting(id);\n        if (shape.type === 'Redact') {\n            return;\n        }\n        this.applyShapes();\n        this.notify('shape', { prop: 'deleteShape', onPropertyChange: false, value: { id: id } });\n        this.editCompleted('shape-delete');\n    };\n    /**\n     * Get particular shapes details based on id of the shape which is drawn on an image editor.\n     *\n     * {% codeBlock src='image-editor/getShapeSetting/index.md' %}{% endcodeBlock %}\n     *\n     * @param {string} id - Specifies the shape id on an image.\n     * @returns {ShapeSettings}.\n     *\n     */\n    ImageEditor.prototype.getShapeSetting = function (id) {\n        this.applyShapes();\n        var obj = { shapeDetails: null };\n        this.notify('shape', { prop: 'getShapeSetting', onPropertyChange: false,\n            value: { id: id, obj: obj } });\n        this.notify('draw', { prop: 'redrawDownScale' });\n        var shapeDetails = obj['shapeDetails'] ? obj['shapeDetails'] : {};\n        return shapeDetails;\n    };\n    /**\n     * Get all the shapes details which is drawn on an image editor.\n     *\n     * @returns {ShapeSettings[]}.\n     */\n    ImageEditor.prototype.getShapeSettings = function () {\n        this.applyShapes();\n        var obj = { shapeDetailsColl: [] };\n        this.notify('shape', { prop: 'getShapeSettings', onPropertyChange: false, value: { obj: obj } });\n        this.notify('draw', { prop: 'redrawDownScale' });\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        return obj.shapeDetailsColl.filter(function (item) { return item.type !== 'redact'; });\n    };\n    /**\n     * Get all the shapes details which is drawn on an image editor.\n     *\n     * @returns {RedactSettings[]}.\n     */\n    ImageEditor.prototype.getRedacts = function () {\n        this.applyShapes();\n        var obj = { shapeDetailsColl: [] };\n        this.notify('shape', { prop: 'getRedactSettings', onPropertyChange: false, value: { obj: obj } });\n        this.notify('draw', { prop: 'redrawDownScale' });\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        return obj.shapeDetailsColl.filter(function (item) { return item.type !== 'redact'; });\n    };\n    /**\n     * Select a redaction based on the given redaction id.\n     * Use 'getRedacts' method to get the shape id which is then passed to perform selection.\n     *\n     *\n     * @param {string} id - Specifies the shape id to select a redact on an image.\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.selectRedact = function (id) {\n        this.applyShapes();\n        var obj = { isSelected: false };\n        this.notify('shape', { prop: 'selectShape', onPropertyChange: false, value: { id: id, obj: obj } });\n        this.editCompleted('redact-select');\n        this.noRedact = false;\n        return obj['isSelected'];\n    };\n    /**\n     * Deletes a redaction based on the given shape id.\n     * Use 'getRedacts' method to get the redaaction id which is then passed to perform deletion.\n     *\n     *\n     * @param {string} id - Specifies the redaction id to delete the redaction on an image.\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.deleteRedact = function (id) {\n        this.applyShapes();\n        this.notify('shape', { prop: 'deleteShape', onPropertyChange: false, value: { id: id } });\n        this.editCompleted('redact-delete');\n    };\n    /**\n     * This method is used to update the existing redacts by changing its height, width, blur, and pixel size in the component.\n     * Use 'getRedacts' method to get the redacts which is then passed to change the options of a redacts.\n     *\n     * @param {RedactSettings} setting - Specifies the redact settings to be updated for the shape on an image.\n     * @param {boolean} isSelected - Specifies to show the redacts in the selected state.\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.updateRedact = function (setting, isSelected) {\n        this.applyShapes();\n        var obj = { isSelected: false };\n        this.notify('shape', { prop: 'selectShape', onPropertyChange: false, value: { id: setting.id, obj: obj } });\n        if (obj['isSelected']) {\n            this.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n                value: { shapeSettings: setting } });\n            if (setting.blurIntensity) {\n                this.activeObj.redactBlur = setting.blurIntensity;\n            }\n            if (setting.pixelSize) {\n                this.activeObj.redactPixelate = setting.pixelSize;\n            }\n            this.activeObj.redactType = setting.type.toLowerCase() === 'blur' ? 'blur' : 'pixelate';\n            var activeObj = extend({}, this.activeObj, {}, true);\n            this.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: null } });\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            if (activeObj.shape) {\n                this.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: activeObj } });\n            }\n            this.okBtn(isSelected, true);\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.editCompleteArgs = { action: 'redact-update', currentShapeSettings: setting };\n            this.editCompleted('redact-customize');\n            if (isSelected) {\n                this.selectRedact(setting.id);\n            }\n        }\n        return obj['isSelected'];\n    };\n    /**\n     * To refresh the Canvas Wrapper.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.update = function () {\n        this.notify('transform', { prop: 'update' });\n    };\n    /**\n     * Finetuning an image with the given type of finetune and its value in the image editor.\n     *\n     * @param {ImageFinetuneOption } finetuneOption - Specifies the finetune options to be performed in the image.\n     * @param {number } value - Specifies the value for finetuning the image.\n     *\n     * @remarks\n     * The finetuning will not affect the shapes background and border color.\n     *\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.finetuneImage = function (finetuneOption, value) {\n        if (!this.disabled && this.isImageLoaded) {\n            this.applyShapes();\n            this.notify('filter', { prop: 'finetuneImage', value: { value: value, option: finetuneOption } });\n            this.editCompleteArgs = { finetune: finetuneOption, value: value };\n            this.editCompleted('fine-tune');\n        }\n    };\n    /**\n     * Filtering an image with the given type of filters.\n     *\n     * @param {ImageFilterOption } filterOption - Specifies the filter options to the image.\n     *\n     * @remarks\n     * The filtering will not affect the shape's background and border color.\n     * @returns {void}.\n     */\n    ImageEditor.prototype.applyImageFilter = function (filterOption) {\n        if (!this.disabled && this.isImageLoaded) {\n            this.applyShapes();\n            this.notify('filter', { prop: 'applyImageFilter', value: { option: filterOption.toString() } });\n            this.editCompleteArgs = { filter: filterOption };\n            this.editCompleted('filter');\n            this.canvasFilter = this.lowerContext.filter;\n            this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n        }\n    };\n    /**\n     * Reverse the last action which performed by the user in the Image Editor.\n     *\n     * @remarks\n     * This method will take into effect once the 'allowUndoRedo' property is enabled.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.undo = function () {\n        this.applyShapes();\n        this.notify('undo-redo', { prop: 'undo', onPropertyChange: false });\n        this.notify('draw', { prop: 'redrawDownScale' });\n    };\n    /**\n     * Redo the last user action that was undone by the user or `undo` method.\n     *\n     * @remarks\n     * This method will take into effect once the 'allowUndoRedo' property is enabled.\n     * @returns {void}.\n     */\n    ImageEditor.prototype.redo = function () {\n        this.applyShapes();\n        this.notify('undo-redo', { prop: 'redo', onPropertyChange: false });\n        this.notify('draw', { prop: 'redrawDownScale' });\n    };\n    /**\n     * Get the dimension of an image in the image editor such as x, y, width, and height.\n     * The method helps to get dimension after cropped an image.\n     *\n     * @returns {Dimension}.\n     * A Dimension object containing the x, y, width, and height of an image.\n     */\n    ImageEditor.prototype.getImageDimension = function () {\n        return { x: this.img.destLeft, y: this.img.destTop, width: this.img.destWidth, height: this.img.destHeight };\n    };\n    /**\n     * Resize an image by changing its width and height.\n     *\n     * @param {number} width - Specifies the width of an image.\n     * @param {number} height - Specifies the height of an image.\n     * @param {boolean} isAspectRatio - Specifies whether the scaling option is enabled or not.\n     *\n     * @returns {boolean} - A boolean value indicating the success of the resizing operation.\n     */\n    ImageEditor.prototype.resize = function (width, height, isAspectRatio) {\n        var isResized = false;\n        if ((width.toString()).length <= 4 && (height.toString()).length <= 4) {\n            this.applyShapes();\n            var destPoints = { startX: this.img.destLeft, startY: this.img.destTop, width: this.img.destWidth,\n                height: this.img.destHeight };\n            if (isAspectRatio) {\n                this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'resize',\n                        isApplyBtn: false, isCropping: false } });\n                this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'resize',\n                        isApplyBtn: false, isCropping: false } });\n            }\n            else {\n                this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'resize',\n                        isApplyBtn: false, isCropping: false } });\n            }\n            var aspectRatioWidth = this.element.querySelector('#' + this.element.id + '_resizeWidth');\n            var aspectRatioHeight = this.element.querySelector('#' + this.element.id + '_resizeHeight');\n            if (aspectRatioWidth && aspectRatioHeight) {\n                getComponent(aspectRatioWidth, 'numerictextbox').value = Math.floor(width);\n                aspectRatioWidth.value = Math.floor(width).toString() + ' px';\n                getComponent(aspectRatioHeight, 'numerictextbox').value = Math.floor(height);\n                aspectRatioHeight.value = Math.floor(height).toString() + ' px';\n            }\n            this.notify('transform', { prop: 'resize', value: { width: width, height: height, isAspectRatio: isAspectRatio } });\n            if (destPoints.startX !== this.img.destLeft || destPoints.startY !== this.img.destTop ||\n                destPoints.width !== this.img.destWidth || destPoints.height !== this.img.destHeight) {\n                isResized = true;\n                this.okBtn();\n            }\n            else {\n                this.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n            }\n            this.notify('draw', { prop: 'redrawDownScale' });\n        }\n        return isResized;\n    };\n    /**\n     * Draw a frame on an image.\n     *\n     * @param { FrameType} frameType - Specifies the frame option to be drawn on an image.\n     * @param {string} color - Specifies the color of a frame on an image. The default value is #fff.\n     * @param {string} gradientColor - Specifies the gradient color of a frame on an image. The default value is .\n     * @param {number} size - Specifies the size of the frame as a percentage. It can be provided as an integer percentage (e.g., 10). Defaults to 20 if not specified.\n     * @param {number} inset - Specifies the inset value for line, hook, and inset type frames, as a percentage. It can be provided as an integer percentage (e.g., 10). Defaults to 0 if not specified.\n     * @param {number} offset - Specifies the offset value for line and inset type frames, as a percentage. It can be provided as an integer percentage (e.g., 10). Defaults to 0 if not specified.\n     * @param {number} borderRadius - Specifies the border radius for line-type frames, as a percentage. It can be provided as an integer percentage (e.g., 10). Defaults to 0 if not specified.\n     * @param {FrameLineStyle} frameLineStyle - Specifies the type of line to be drawn for line-type frames. Default to Solid if not specified.\n     * @param {number} lineCount - Specifies the number of lines for line-type frames. Defaults to 0 if not specified.\n     *\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.drawFrame = function (frameType, color, gradientColor, size, inset, offset, borderRadius, frameLineStyle, lineCount) {\n        this.applyShapes();\n        var isFrame = false;\n        var obj = { frameChangeEventArgs: null };\n        color = color ? color : '#fff';\n        gradientColor = gradientColor ? gradientColor : '';\n        size = size ? size : 20;\n        inset = inset ? inset : 0;\n        offset = offset ? offset : 0;\n        borderRadius = borderRadius ? borderRadius : 0;\n        frameLineStyle = frameLineStyle ? frameLineStyle : FrameLineStyle.Solid;\n        lineCount = lineCount ? lineCount : 0;\n        var prevFrameSettings = { type: this.toPascalCase(this.frameObj.type), color: this.frameObj.color,\n            gradientColor: this.frameObj.gradientColor, size: this.frameObj.size, inset: this.frameObj.inset,\n            offset: this.frameObj.offset, borderRadius: this.frameObj.radius,\n            frameLineStyle: this.toPascalCase(this.frameObj.border), lineCount: this.frameObj.amount };\n        extend(this.tempFrameObj, this.frameObj);\n        this.tempFrameZoomLevel = this.transform.zoomFactor;\n        this.frameDestPoints = extend({}, this.img, {}, true);\n        this.notify('toolbar', { prop: 'frameToolbarClick' });\n        this.frameObj.type = frameType.toLowerCase();\n        this.frameObj.color = color;\n        this.frameObj.gradientColor = gradientColor;\n        this.frameObj.size = size;\n        this.frameObj.inset = inset;\n        this.frameObj.offset = offset;\n        this.frameObj.radius = borderRadius;\n        this.frameObj.border = frameLineStyle.toLowerCase();\n        this.frameObj.amount = lineCount;\n        this.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: prevFrameSettings, obj: obj } });\n        if (obj['frameChangeEventArgs'] && !obj['frameChangeEventArgs'].cancel) {\n            this.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n            if (JSON.stringify(this.frameObj) !== JSON.stringify(this.tempFrameObj)) {\n                isFrame = true;\n                this.okBtn();\n            }\n            else {\n                this.tempFrameZoomLevel = null;\n            }\n        }\n        else {\n            this.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n            extend(this.frameObj, this.tempFrameObj);\n            this.tempFrameZoomLevel = null;\n        }\n        this.notify('draw', { prop: 'redrawDownScale' });\n        return isFrame;\n    };\n    /**\n     * Straightens an image by rotating it clockwise or counterclockwise.\n     *\n     * @param {number} degree - The degree value specifying the amount of rotation for straightening the image.\n     * Positive values indicate clockwise rotation, while negative values indicate counterclockwise rotation.\n     *\n     * @remarks\n     * The degree value should be within the range of -45 to +45 degrees for accurate straightening.\n     *\n     * @returns {boolean} - A boolean value indicating the success of the straightening operation.\n     */\n    ImageEditor.prototype.straightenImage = function (degree) {\n        var isStraightened = false;\n        if (degree >= -45 && degree <= 45) {\n            this.applyShapes();\n            isStraightened = true;\n            this.notify('transform', { prop: 'straightenImage', value: { degree: degree } });\n            this.notify('draw', { prop: 'redrawDownScale' });\n        }\n        return isStraightened;\n    };\n    /**\n     * Duplicates a shape based on the given shape ID in the ImageEditor.\n     * Use 'getShapeSettings' method to get the shape and then pass a shapeId from the returned shape to clone a shape.\n     *\n     * @param {string} shapeId - Specifies the shape id to clone a shape on an image.\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.cloneShape = function (shapeId) {\n        var obj = { isSelected: false };\n        if (shapeId.split('_')[0] === 'shape') {\n            this.notify('shape', { prop: 'selectShape', onPropertyChange: false, value: { id: shapeId, obj: obj } });\n            if (obj['isSelected']) {\n                this.notify('toolbar', { prop: 'duplicateShape', onPropertyChange: false, value: { isPreventUndoRedo: false } });\n                this.okBtn(null, true);\n                this.notify('draw', { prop: 'redrawDownScale' });\n            }\n        }\n        return obj['isSelected'];\n    };\n    /**\n     * Update filter to the canvas in the ImageEditor.\n     *\n     * @param {ImageFilterOption } filterOption - Specifies the filter options to the image.\n     *\n     * @returns {string}.\n     *\n     */\n    ImageEditor.prototype.getImageFilter = function (filterOption) {\n        var canvas = this.createElement('canvas');\n        var ctx = canvas.getContext('2d');\n        this.notify('filter', { prop: 'updateAdj', value: { type: filterOption.toLowerCase(), value: null, isPreview: true, ctx: ctx } });\n        return ctx.filter;\n    };\n    /**\n     * Enable text area editing in the ImageEditor.\n     *\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.enableTextEditing = function () {\n        var activeObj = extend({}, this.activeObj, {}, true);\n        if (!activeObj.order) {\n            this.noPushUndo = true;\n            this.okBtn();\n            this.noPushUndo = false;\n            this.noRedact = true;\n            this.selectShape(activeObj.currIndex);\n            activeObj.order = this.activeObj.order;\n        }\n        this.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        this.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: false } });\n        this.activeObj = activeObj;\n        this.notify('toolbar', { prop: 'editText', onPropertyChange: false });\n    };\n    /**\n     * Specifies if it's possible to undo the last recent action made in an Image Editor.\n     *\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.canUndo = function () {\n        var canUndo = false;\n        var object = this.getUndoRedoColl();\n        var undoRedoIndex = object['index'];\n        if (undoRedoIndex > 0) {\n            canUndo = true;\n        }\n        return canUndo;\n    };\n    /**\n     * Specifies if it's possible to redo the last recent action made in an Image Editor.\n     *\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.canRedo = function () {\n        var canRedo = false;\n        var object = this.getUndoRedoColl();\n        var undoRedoColl = object['undoRedoColl'];\n        var undoRedoIndex = object['index'];\n        if (undoRedoColl && undoRedoColl.length > 0 && undoRedoIndex < undoRedoColl.length - 1) {\n            canRedo = true;\n        }\n        if (undoRedoIndex === undoRedoColl.length) {\n            canRedo = false;\n        }\n        else if (undoRedoIndex === 0 && undoRedoColl.length > 0) {\n            canRedo = true;\n        }\n        else if (undoRedoIndex > 0) {\n            canRedo = true;\n        }\n        return canRedo;\n    };\n    /**\n     * Applies the operations performed in the Image Editor, such as annotation drawings.\n     *\n     * @returns{void}\n     * @remarks\n     * This method applies the actions performed after enabling annotation drawings, ensuring that the drawn annotations are applied to the image.\n     */\n    ImageEditor.prototype.apply = function () {\n        if (this.isMaskImage) {\n            this.discard();\n        }\n        else {\n            this.updateColl('reset');\n            this.closeOverlayTbar();\n            this.okBtn(null, true);\n        }\n    };\n    /**\n     * Discards the operations performed in the Image Editor, such as annotation drawings.\n     *\n     * @returns{void}\n     * @remarks\n     * This method discards the actions performed after enabling annotation drawings, ensuring that the drawn annotations are not applied to the image.\n     */\n    ImageEditor.prototype.discard = function () {\n        this.updateColl('reset');\n        this.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: this.closeOverlayTbar(), isFinalCancel: true } });\n    };\n    /**\n     * Enable or disable a shape drawing option in an Image Editor.\n     *\n     * @param {ShapeType} shapeType - Specifies the type of shape to be enabled or disabled for drawing.\n     * @param {boolean} isEnabled - Optional. Specifies a value to indicate whether to enable or disable shape drawing. The default value is true.\n     *\n     * @remarks This function allows the user to toggle the shape drawing feature in the Image Editor. When enabled, users can draw shapes on the image. When disabled, the shape drawing functionality is not available.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.enableShapeDrawing = function (shapeType, isEnabled) {\n        if (isEnabled) {\n            this.drawingShape = shapeType.toLowerCase();\n            this.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        }\n        if (shapeType && isEnabled) {\n            this.currObjType.shape = shapeType.toLowerCase();\n            this.activeObj.shape = this.currObjType.shape;\n            this.currObjType.isDragging = this.currObjType.isCustomCrop = false;\n            this.activeObj.shapeDegree = this.transform.degree;\n            this.activeObj.shapeFlip = this.transform.currFlipState;\n            this.activeObj.textFlip = this.transform.currFlipState;\n            this.activeObj.flipObjColl = [];\n            var orderObj = { order: null };\n            this.notify('shape', { prop: 'getNewOrder', onPropertyChange: false, value: { obj: orderObj } });\n            this.activeObj.order = orderObj['order'];\n            this.notify('selection', { prop: 'annotate', value: { shape: this.currObjType.shape } });\n            if (this.currObjType.shape === 'text') {\n                this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'text',\n                        isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n            }\n            else if (this.currObjType.shape === 'redact') {\n                this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'redact',\n                        isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n            }\n            else {\n                this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                        isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n            }\n            this.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n        }\n        else if (!isEnabled) {\n            this.okBtn(null, true);\n        }\n    };\n    /**\n     * Moves a shape to the front of all other shapes based on the given shape id.\n     * Use 'getShapeSettings' method to get the shape id which is then passed to perform moving.\n     *\n     * @param {string} shapeId - Specifies the shape id to move the shape on an image.\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.bringToFront = function (shapeId) {\n        this.noRedact = true;\n        if (this.selectShape(shapeId)) {\n            this.updateShapeOrder(shapeId, 'bringToFront');\n            this.apply();\n        }\n    };\n    /**\n     * Moves a shape to ahead of one shape based on the given shape id.\n     * Use 'getShapeSettings' method to get the shape id which is then passed to perform moving.\n     *\n     * @param {string} shapeId - Specifies the shape id to move the shape on an image.\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.bringForward = function (shapeId) {\n        this.noRedact = true;\n        if (this.selectShape(shapeId)) {\n            this.updateShapeOrder(shapeId, 'bringForward');\n            this.apply();\n        }\n    };\n    /**\n     * Moves a shape to behind all other shapes based on the given shape id.\n     * Use 'getShapeSettings' method to get the shape id which is then passed to perform moving.\n     *\n     * @param {string} shapeId - Specifies the shape id to move the shape on an image.\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.sendToBack = function (shapeId) {\n        this.noRedact = true;\n        if (this.selectShape(shapeId)) {\n            this.updateShapeOrder(shapeId, 'sendToBack');\n            this.apply();\n        }\n    };\n    /**\n     * Moves a shape to behind one shape based on the given shape id.\n     * Use 'getShapeSettings' method to get the shape id which is then passed to perform moving.\n     *\n     * @param {string} shapeId - Specifies the shape id to move the shape on an image.\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.sendBackward = function (shapeId) {\n        this.noRedact = true;\n        if (this.selectShape(shapeId)) {\n            this.updateShapeOrder(shapeId, 'sendBackward');\n            this.apply();\n        }\n    };\n    /**\n     * Clears the loaded image in the Image Editor.\n     *\n     * @returns{void}\n     * @remarks\n     * This method clears the loaded image and updates the component's user interface to its initial state (the initial user interface without a loaded image).\n     */\n    ImageEditor.prototype.clearImage = function () {\n        this.reset();\n        this.isImageLoaded = false;\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        var btoolbar = document.getElementById(this.element.id + '_bottomToolbar');\n        if (Browser.isDevice && btoolbar) {\n            document.getElementById(this.element.id + '_bottomToolbar').style.display = 'none';\n        }\n        this.notify('toolbar', { prop: 'destroy-top-toolbar', onPropertyChange: false });\n        this.notify('toolbar', { prop: 'create-toolbar', onPropertyChange: false });\n        this.notify('toolbar', { prop: 'create-contextual-toolbar', onPropertyChange: false });\n        var dropArea = document.getElementById(this.element.id + '_dropArea');\n        if (dropArea) {\n            dropArea.style.display = 'block';\n        }\n    };\n    // AI related codes\n    /**\n     * Enables overlay drawing to erase objects in an image editor. The eraser tool assists in selecting the mask image.\n     *\n     * @remarks\n     * The selection UI is based on the 'theme' property.\n     *\n     * @param {number} strokeWidth - Specifies the stroke width of the drawing.\n     * @param {string} color - Specifies the color of the drawing.\n     * @hidden\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.selectMaskImage = function (strokeWidth, color) {\n        strokeWidth = strokeWidth ? strokeWidth : 10;\n        color = color ? color : '#512da880';\n        this.applyShapes();\n        this.isMaskImage = true;\n        this.updateColl('empty');\n        this.enableDisableToolbar(true);\n        this.update();\n        this.activeObj.strokeSettings.strokeWidth = strokeWidth;\n        this.notify('freehand-draw', { prop: 'setPenStrokeWidth', onPropertyChange: false, value: { value: strokeWidth } });\n        this.activeObj.strokeSettings.strokeColor = color;\n        this.notify('freehand-draw', { prop: 'freeHandDraw', onPropertyChange: false, value: { value: true } });\n        this.maskCanvas.style.display = 'block';\n    };\n    ImageEditor.prototype.enableDisableToolbar = function (value) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var toolbar;\n        var elem = document.getElementById(this.element.id + '_toolbar');\n        if (elem) {\n            toolbar = getComponent(elem, 'toolbar');\n            if (toolbar) {\n                toolbar.disable(value);\n            }\n        }\n        elem = document.getElementById(this.element.id + '_bottomToolbar');\n        if (elem) {\n            toolbar = getComponent(elem, 'toolbar');\n            if (toolbar) {\n                toolbar.disable(value);\n            }\n        }\n    };\n    ImageEditor.prototype.updateImage = function (data, imageBackgroundColor) {\n        var _this = this;\n        if (data || imageBackgroundColor || imageBackgroundColor === '') {\n            var prevCropObj_1 = extend({}, this.cropObj, {}, true);\n            var object = { currObj: {} };\n            this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var prevObj_1 = object['currObj'];\n            prevObj_1.objColl = extend([], this.objColl, [], true);\n            prevObj_1.pointColl = extend([], this.pointColl, [], true);\n            prevObj_1.afterCropActions = extend([], this.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false, value: { obj: selPointCollObj } });\n            prevObj_1.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            if (data) {\n                this.isImageUpdated = true;\n                if (typeof (data) !== 'string') {\n                    var canvas = this.createElement('canvas');\n                    canvas.width = data.width;\n                    canvas.height = data.height;\n                    canvas.getContext('2d').putImageData(data, 0, 0);\n                    data = canvas.toDataURL();\n                }\n                this.baseImg.src = data;\n                setTimeout(function () {\n                    if (_this.cropObj.straighten !== 0) {\n                        _this.notify('toolbar', { prop: 'performCropTransformClick', value: { shape: 'crop-' + 'custom' } });\n                        _this.noPushUndo = true;\n                        _this.crop();\n                        _this.noPushUndo = false;\n                    }\n                    else {\n                        _this.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n                    }\n                    _this.isImageUpdated = false;\n                    if (!imageBackgroundColor) {\n                        _this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: { operation: 'updateImage', previousObj: prevObj_1,\n                                previousObjColl: prevObj_1.objColl, previousPointColl: prevObj_1.pointColl,\n                                previousSelPointColl: prevObj_1.selPointColl, previousCropObj: prevCropObj_1,\n                                previousText: null, currentText: null, previousFilter: null, isCircleCrop: null\n                            } });\n                        _this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                    }\n                }, 100);\n            }\n            if (imageBackgroundColor || imageBackgroundColor === '') {\n                this.notify('draw', { prop: 'imageBackgroundColor', onPropertyChange: false, value: { color: imageBackgroundColor } });\n                this.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n                if (!data) {\n                    this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: { operation: 'bgColor', previousObj: prevObj_1,\n                            previousObjColl: prevObj_1.objColl, previousPointColl: prevObj_1.pointColl, previousSelPointColl: prevObj_1.selPointColl,\n                            previousCropObj: prevCropObj_1, previousText: null, currentText: null, previousFilter: null, isCircleCrop: null\n                        } });\n                    this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                }\n            }\n            if (data && imageBackgroundColor) {\n                this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: { operation: 'updateImage', previousObj: prevObj_1,\n                        previousObjColl: prevObj_1.objColl, previousPointColl: prevObj_1.pointColl, previousSelPointColl: prevObj_1.selPointColl,\n                        previousCropObj: prevCropObj_1, previousText: null, currentText: null, previousFilter: null, isCircleCrop: null\n                    } });\n                this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            }\n        }\n    };\n    ImageEditor.prototype.editCompleted = function (type) {\n        this.notify('draw', { prop: 'redrawDownScale' });\n        var actionArgs = { action: type ? type : 'shape-insert',\n            actionEventArgs: this.editCompleteArgs };\n        this.triggerEditCompleteEvent(actionArgs);\n    };\n    ImageEditor.prototype.updateColl = function (type) {\n        if (!this.isMaskImage) {\n            return;\n        }\n        if (type === 'empty') {\n            this.tempToolbarHeight = this.toolbarHeight;\n            this.tempToolbar = this.toolbar ? extend([], this.toolbar, [], true) : null;\n            this.tempObjColl = extend([], this.objColl, [], true);\n            this.tempPointColl = extend([], this.pointColl, [], true);\n            this.tempShapeColl = extend([], this.shapeColl, [], true);\n            this.objColl = [];\n            this.pointColl = [];\n            this.shapeColl = [];\n            this.freehandCounter = 0;\n            this.notify('freehand-draw', { prop: 'setCurrentFreehandDrawIndex',\n                value: { value: 0 } });\n            this.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n        }\n        else if (type === 'reset') {\n            this.objColl = this.tempObjColl;\n            this.pointColl = this.tempPointColl;\n            this.shapeColl = this.tempShapeColl;\n            this.freehandCounter = this.pointColl.length;\n            this.notify('freehand-draw', { prop: 'setCurrentFreehandDrawIndex',\n                value: { value: this.freehandCounter } });\n            this.enableDisableToolbar(false);\n            if (this.cropObj.straighten !== 0) {\n                this.notify('toolbar', { prop: 'performCropTransformClick', value: { shape: 'crop-' + 'custom' } });\n                this.noPushUndo = true;\n                this.crop();\n                this.noPushUndo = false;\n            }\n            this.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n            this.isMaskImage = false;\n            this.upperContext.globalCompositeOperation = 'source-over';\n            this.maskCanvas.style.display = 'none';\n            this.activeObj.strokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null,\n                radius: null, outlineColor: '', outlineWidth: null };\n            this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: this.activeObj.strokeSettings,\n                    strokeColor: '#fff', fillColor: '', strokeWidth: null, outlineWidth: null } });\n            this.notify('freehand-draw', { prop: 'setPenStrokeWidth', onPropertyChange: false, value: { value: 2 } });\n            this.notify('freehand-draw', { prop: 'setMasking', onPropertyChange: false, value: { value: false } });\n        }\n    };\n    // Toolbar related codes\n    ImageEditor.prototype.resetToolbar = function () {\n        if (this.toolbarHeight !== this.tempToolbarHeight && !((isNullOrUndefined(this.toolbar) ||\n            (this.toolbar && this.toolbar.length > 0)\n            || !isNullOrUndefined(this.toolbarTemplate)))) {\n            this.toolbarHeight = this.tempToolbarHeight;\n            this.notify('toolbar', { prop: 'setToolbarHeight', value: { height: this.toolbarHeight } });\n            this.toolbar = this.tempToolbar;\n            if (!this.toolbarTemplate) {\n                this.notify('toolbar', { prop: 'create-toolbar', onPropertyChange: false });\n                this.notify('toolbar', { prop: 'create-contextual-toolbar', onPropertyChange: false });\n            }\n            this.update();\n        }\n    };\n    ImageEditor.prototype.getData = function (isMaskImage) {\n        if (isMaskImage) {\n            this.resetToolbar();\n        }\n        var objColl = extend([], this.objColl, null, true);\n        var pointColl = extend([], this.pointColl, null, true);\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var shapeColl = extend([], this.shapeColl, null, true);\n        if (isMaskImage) {\n            this.notify('shape', { prop: 'updateShapeColl', onPropertyChange: false });\n            for (var i = 0; i < this.freehandCounter; i++) {\n                this.pointColl[i].strokeColor = '#fff';\n            }\n        }\n        else {\n            this.objColl = [];\n            this.pointColl = [];\n            this.shapeColl = [];\n            this.freehandCounter = 0;\n        }\n        var frameType = this.frameObj.type;\n        this.frameObj.type = 'none';\n        var aspectWidth = this.aspectWidth;\n        var aspectHeight = this.aspectHeight;\n        this.aspectWidth = this.aspectHeight = null;\n        var straighten = this.cropObj.straighten;\n        this.togglePen = false;\n        this.notify('toolbar', { prop: 'performCropTransformClick', value: { shape: 'crop-' + 'custom' } });\n        var tempDestPoints = extend({}, this.img, {}, true);\n        var tempCropObj = extend({}, this.cropObj, {}, true);\n        var tempSel = extend({}, this.activeObj, {}, true);\n        var tempTransform = extend({}, this.transform, {}, true);\n        var panPoint = extend({}, this.panPoint, {}, true);\n        if (straighten !== 0) {\n            this.setStraighten(0);\n        }\n        var point = this.activeObj.activePoint;\n        point.startX = this.img.destLeft;\n        point.startY = this.img.destTop;\n        point.width = this.img.destWidth;\n        point.height = this.img.destHeight;\n        point.endX = point.startX + point.width;\n        point.endY = point.startY + point.height;\n        this.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: point, obj: this.activeObj,\n                isMouseMove: null, x: null, y: null } });\n        this.noPushUndo = true;\n        this.crop();\n        this.noPushUndo = false;\n        this.isCropTab = false;\n        this.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        this.notify('crop', { prop: 'resetZoom', onPropertyChange: false });\n        this.isCropTab = true;\n        var afterCropActions = extend([], this.afterCropActions, [], true);\n        var coll = extend([], this.rotateFlipColl, [], true);\n        this.notify('crop', { prop: 'revertTransform', value: { type: 'initial', coll: coll } });\n        var imageData = this.getImageData();\n        if (isMaskImage) {\n            var canvas = this.createElement('canvas');\n            var ctx = canvas.getContext('2d');\n            canvas.width = imageData.width;\n            canvas.height = imageData.height;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n            if (this.pointColl.length > 0) {\n                var obj = { width: 0, height: 0 };\n                this.notify('crop', { prop: 'calcRatio', onPropertyChange: false,\n                    value: { obj: obj, dimension: { width: canvas.width, height: canvas.height } } });\n                var ratio = obj;\n                this.notify('export', { prop: 'drawAnnotation', value: { context: ctx, ratio: ratio } });\n            }\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n        }\n        this.notify('crop', { prop: 'revertTransform', value: { type: 'reverse', coll: coll } });\n        this.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        this.afterCropActions = afterCropActions;\n        if (!isMaskImage) {\n            this.objColl = objColl;\n            this.pointColl = pointColl;\n            this.shapeColl = shapeColl;\n            this.freehandCounter = this.pointColl.length;\n        }\n        this.frameObj.type = frameType;\n        this.aspectWidth = aspectWidth;\n        this.aspectHeight = aspectHeight;\n        this.notify('toolbar', { prop: 'performCropTransformClick', value: { shape: 'crop-' + 'custom' } });\n        if (straighten !== 0) {\n            this.setStraighten(straighten);\n        }\n        this.img = tempDestPoints;\n        this.cropObj = tempCropObj;\n        this.activeObj = tempSel;\n        this.transform = tempTransform;\n        this.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n            value: { zoomFactor: 0.1, zoomPoint: null, isResize: null } });\n        this.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n            value: { zoomFactor: -0.1, zoomPoint: null, isResize: null } });\n        if (this.transform.degree !== 0) {\n            this.panPoint.currentPannedPoint = { x: panPoint.totalPannedClientPoint.x,\n                y: panPoint.totalPannedClientPoint.y };\n            this.notify('transform', { prop: 'drawPannedImage', value: { xDiff: panPoint.totalPannedClientPoint.x,\n                    yDiff: panPoint.totalPannedClientPoint.y } });\n            this.panPoint.currentPannedPoint = { x: 0, y: 0 };\n            this.notify('transform', { prop: 'setTempPanMove', value: { point: null } });\n        }\n        this.noPushUndo = true;\n        this.crop();\n        this.noPushUndo = false;\n        this.transform.straighten = 0;\n        this.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n        return imageData;\n    };\n    ImageEditor.prototype.applyShapes = function () {\n        if (this.isUndoRedoStack) {\n            return;\n        }\n        var shapes = ['rectangle', 'ellipse', 'line', 'arrow', 'path', 'text', 'image'];\n        var dummyObj = { bool: false };\n        this.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: dummyObj } });\n        if (dummyObj['bool'] || this.togglePen || (this.activeObj.shape && shapes.indexOf(this.activeObj.shape) !== -1) ||\n            this.drawingShape) {\n            this.okBtn(null, true);\n        }\n    };\n    ImageEditor.prototype.closeOverlayTbar = function () {\n        var isContextualToolbar = false;\n        var frameObject = { bool: null };\n        this.notify('toolbar', { prop: 'getFrameToolbar', onPropertyChange: false, value: { obj: frameObject } });\n        if (!frameObject['bool'] && this.element.querySelector('.e-contextual-toolbar-wrapper')) {\n            if (!this.element.querySelector('.e-contextual-toolbar-wrapper').classList.contains('e-hide')) {\n                isContextualToolbar = true;\n            }\n            var straightenObj = { bool: this.isStraightening };\n            if (!Browser.isDevice || (Browser.isDevice && !straightenObj['bool'])) {\n                this.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n            }\n        }\n        return isContextualToolbar;\n    };\n    ImageEditor.prototype.toolbarTemplateFn = function () {\n        var template;\n        var templateID = this.element.id + '_toolbar';\n        var toolbarArea = this.element.querySelector('#' + this.element.id + '_toolbarArea');\n        if (this.toolbarTemplate) {\n            this.toolbarFn = this.templateParser(this.toolbarTemplate);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (this.isReact) {\n                template = this.toolbarFn({ type: 'toolbar' }, this, 'Template', templateID)[0];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            }\n            else if (this.isAngular) {\n                var templateColl = this.toolbarFn({ type: 'toolbar' }, this, 'Template', templateID);\n                template = (templateColl[0].nodeType === 3) ? templateColl[1] : templateColl[0];\n            }\n            else {\n                template = this.toolbarFn({ type: 'toolbar' }, this, 'Template', templateID)[0];\n            }\n            toolbarArea.appendChild(template);\n            this.toolbarHeight = toolbarArea.clientHeight;\n            this.notify('toolbar', { prop: 'setToolbarHeight', value: { height: this.toolbarHeight } });\n            this['renderReactTemplates']();\n        }\n    };\n    ImageEditor.prototype.quickAccessToolbarTemplateFn = function () {\n        var template;\n        var templateID = this.element.id + '_quickAccessToolbar';\n        var toolbarArea = this.element.querySelector('#' + this.element.id + '_quickAccessToolbarArea');\n        if (this.quickAccessToolbarTemplate) {\n            this.qatFn = this.templateParser(this.quickAccessToolbarTemplate);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (this.isReact) {\n                template = this.qatFn({ type: 'toolbar' }, this, 'Template', templateID)[0];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            }\n            else if (this.isAngular) {\n                var templateColl = this.qatFn({ type: 'toolbar' }, this, 'Template', templateID);\n                template = (templateColl[0].nodeType === 3) ? templateColl[1] : templateColl[0];\n            }\n            else {\n                template = this.qatFn({ type: 'toolbar' }, this, 'Template', templateID)[0];\n            }\n            toolbarArea.appendChild(template);\n            this['renderReactTemplates']();\n        }\n    };\n    ImageEditor.prototype.templateParser = function (template) {\n        if (template) {\n            try {\n                if (typeof template !== 'function' && document.querySelectorAll(template).length) {\n                    return templateCompiler(document.querySelector(template).innerHTML.trim());\n                }\n                else {\n                    return compile(template);\n                }\n            }\n            catch (error) {\n                return templateCompiler(template);\n            }\n        }\n        return undefined;\n    };\n    // Common codes for EJ2 and Blazor\n    ImageEditor.prototype.getTextFromId = function (id) {\n        var idToValue = { '1': 'none', '2': 'bar', '3': 'arrow', '4': 'arrowSolid',\n            '5': 'circle', '6': 'circleSolid', '7': 'square', '8': 'squareSolid' };\n        return idToValue[\"\" + id];\n    };\n    ImageEditor.prototype.getFinetuneOption = function (type) {\n        var typeToOption = { 'brightness': ImageFinetuneOption.Brightness, 'contrast': ImageFinetuneOption.Contrast,\n            'hue': ImageFinetuneOption.Hue, 'saturation': ImageFinetuneOption.Saturation, 'opacity': ImageFinetuneOption.Opacity,\n            'blur': ImageFinetuneOption.Blur, 'exposure': ImageFinetuneOption.Exposure };\n        return typeToOption[\"\" + type];\n    };\n    ImageEditor.prototype.setPenStroke = function (args) {\n        this.notify('freehand-draw', { prop: 'setPenStrokeWidth', onPropertyChange: false, value: { value: parseInt(args, 10) } });\n    };\n    ImageEditor.prototype.updateFreehandDrawColorChange = function () {\n        var obj = { tempFreeHandDrawEditingStyles: null };\n        this.notify('freehand-draw', { prop: 'getTempFreeHandDrawEditingStyles', value: { obj: obj } });\n        this.notify('freehand-draw', { prop: 'color-change', value: { color: obj['tempFreeHandDrawEditingStyles'].strokeColor } });\n    };\n    ImageEditor.prototype.getUndoRedoColl = function () {\n        var obj = { undoRedoColl: null, index: null };\n        var undoRedoObj = { undoRedoStep: null };\n        var object = { appliedUndoRedoColl: [] };\n        this.notify('undo-redo', { prop: 'getAppliedUndoRedoColl', value: { obj: object } });\n        this.notify('undo-redo', { prop: 'getUndoRedoStep', value: { obj: undoRedoObj } });\n        obj['undoRedoColl'] = object['appliedUndoRedoColl'];\n        obj['index'] = undoRedoObj['undoRedoStep'];\n        return obj;\n    };\n    ImageEditor.prototype.updateImageTransformColl = function (type) {\n        var value;\n        if (type === 'rotateleft') {\n            value = -90;\n        }\n        else if (type === 'rotateright') {\n            value = 90;\n        }\n        else if (type === 'horizontalflip') {\n            value = 'horizontal';\n        }\n        else if (type === 'verticalflip') {\n            value = 'vertical';\n        }\n        for (var i = 0; i < this.objColl.length; i++) {\n            var shape = this.objColl[i].shape;\n            if (shape === 'image' || shape === 'text') {\n                if (isNullOrUndefined(this.objColl[i].rotateFlipColl)) {\n                    this.objColl[i].rotateFlipColl = [];\n                }\n                this.objColl[i].rotateFlipColl.push(value);\n                var obj = { collection: this.objColl[i].rotateFlipColl };\n                this.notify('shape', { prop: 'alignRotateFlipColl', onPropertyChange: false,\n                    value: { collection: this.objColl[i].rotateFlipColl, isRotateFlipCollection: false, obj: obj } });\n                this.objColl[i].rotateFlipColl = obj['collection'];\n            }\n        }\n    };\n    ImageEditor.prototype.setInitialZoomState = function () {\n        this.objColl.push(this.activeObj);\n        this.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        var isUndoRedo = this.isUndoRedo;\n        this.isCropTab = false;\n        this.isUndoRedo = true;\n        if (this.transform.cropZoomFactor && this.transform.cropZoomFactor > 0) {\n            this.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: -this.transform.cropZoomFactor, zoomPoint: null, isResize: true } });\n        }\n        else {\n            this.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: Math.abs(this.transform.cropZoomFactor), zoomPoint: null, isResize: true } });\n        }\n        this.isUndoRedo = isUndoRedo;\n        this.panPoint.totalPannedPoint = { x: 0, y: 0 };\n        this.transform.cropZoomFactor = 0;\n        this.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n        this.activeObj = extend({}, this.objColl[this.objColl.length - 1], {}, true);\n        this.objColl.pop();\n        this.isCropTab = true;\n        this.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: this.activeObj } });\n    };\n    /**\n     * Set the old item Transform item state.\n     *\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateCropTransformItems = function () {\n        this.prevCurrSelectionPoint = extend({}, this.currSelectionPoint, {}, true);\n        this.notify('draw', { prop: 'updateCropSelection', onPropertyChange: false });\n    };\n    /**\n     * Get the pascal case.\n     *\n     * @param { string } str - Specifies the string to convert to pascal case.\n     * @param { Object } obj - Specifies the string to convert to pascal case.\n     * @hidden\n     * @returns {string}.\n     * A pascal case string.\n     */\n    ImageEditor.prototype.toPascalCase = function (str, obj) {\n        var strArr = [];\n        if (!isNullOrUndefined(str)) {\n            strArr = str.toLowerCase().split('-');\n        }\n        for (var i = 0; i < strArr.length; i++) {\n            strArr[i] = strArr[i].charAt(0).toUpperCase() + strArr[i].slice(1);\n        }\n        if (obj) {\n            obj['maxText'] = strArr.join('');\n        }\n        return strArr.join('');\n    };\n    /**\n     * Get the font sizes.\n     *\n     * @hidden\n     * @returns {DropDownButtonItemModel[]}.\n     * A font size collections.\n     */\n    ImageEditor.prototype.getFontSizes = function () {\n        var items = [];\n        this.fontSizeColl = [];\n        var fontSize;\n        if (this.transform.degree === 0 || this.transform.degree % 180 === 0) {\n            fontSize = this.img.destWidth / 25;\n        }\n        else {\n            fontSize = this.img.destHeight / 25;\n        }\n        for (var i = 1; i <= 10; i++) {\n            this.fontSizeColl.push({ text: (i * (Math.round(fontSize / 2))).toString() });\n            items.push({ text: (i.toString()) });\n        }\n        return items;\n    };\n    /**\n     * Handles the OK button operation\n     *\n     * @param { boolean } isMouseDown - Specifies whether it is a mouse down.\n     * @param { boolean } isFinalApply - Specifies whether it is a final apply.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.okBtn = function (isMouseDown, isFinalApply) {\n        if (isFinalApply) {\n            this.noPushUndo = false;\n            var tempActiveObj = { activePoint: { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 },\n                flipObjColl: [], triangle: [], triangleRatio: [], order: null };\n            this.notify('selection', { prop: 'setTempActObj', onPropertyChange: false, value: { obj: tempActiveObj } });\n        }\n        var ctWrapper = this.element.querySelector('.e-contextual-toolbar-wrapper');\n        if (ctWrapper) {\n            ctWrapper.classList.remove('e-frame-wrapper');\n        }\n        var isCropSelection = false;\n        var splitWords;\n        this.isResizeOkBtn = true;\n        var aspectIcon = this.element.querySelector('#' + this.element.id + '_aspectratio');\n        var nonAspectIcon = this.element.querySelector('#' + this.element.id + '_nonaspectratio');\n        var blrAspRatElem = this.element.querySelector('.e-ie-toolbar-aspect-ratio-btn');\n        var blrNAspRatElem = this.element.querySelector('.e-ie-toolbar-nonaspect-ratio-btn');\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (splitWords === undefined && this.currObjType.isCustomCrop) {\n            isCropSelection = true;\n        }\n        else if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        this.allowDownScale = true;\n        if ((this.activeObj.shape && this.activeObj.shape !== 'image' || this.togglePen) && !isCropSelection) {\n            var objt = { shapeSettingsObj: {} };\n            this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: objt } });\n            var shapeSettings = objt['shapeSettingsObj'];\n            if (this.togglePen) {\n                shapeSettings.type = ShapeType.FreehandDraw;\n            }\n            var shapeChangedArgs = { action: 'apply', currentShapeSettings: extend({}, shapeSettings, {}, true) };\n            if (!this.currObjType.isRedact && (isFinalApply || this.isShapeDrawing)) {\n                if (this.isShapeDrawing) {\n                    shapeChangedArgs.action = 'draw-end';\n                }\n                this.trigger('shapeChange', shapeChangedArgs);\n            }\n            this.editCompleteArgs = shapeChangedArgs;\n            if (this.currObjType.isRedact) {\n                this.currObjType.isRedact = false;\n            }\n        }\n        if (aspectIcon || nonAspectIcon) {\n            var obj_2 = { width: null, height: null };\n            this.notify('selection', { prop: 'getNumTextValue', onPropertyChange: false, value: { obj: obj_2 } });\n            var point = { x: obj_2['width'], y: obj_2['height'] };\n            var obj1 = { prevCropObj: this.prevCropObj };\n            var obj2 = { prevObj: this.prevObj };\n            if (point && point.x && point.y && obj1['prevCropObj'] && obj2['prevObj']) {\n                if (nonAspectIcon || (blrNAspRatElem && !blrNAspRatElem.classList.contains('e-hidden'))) {\n                    this.notify('transform', { prop: 'resize', value: { width: point.x, height: point.y, isAspectRatio: false } });\n                }\n                else if (aspectIcon || (blrAspRatElem && !blrAspRatElem.classList.contains('e-hidden'))) {\n                    this.notify('transform', { prop: 'resize', value: { width: point.x, height: null, isAspectRatio: true } });\n                }\n                this.isResize = false;\n                this.aspectWidth = point.x;\n                this.aspectHeight = point.y;\n                this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                        isApplyBtn: false, isCropping: false, isZooming: null, cType: null } });\n                this.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                    value: { zoomFactor: -this.transform.zoomFactor, zoomPoint: null, isResize: true } });\n                this.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                    value: { zoomFactor: obj2['prevObj']['defaultZoom'], zoomPoint: null, isResize: true } });\n                if (obj2['prevObj'].zoomFactor) {\n                    this.setProperties({ zoomSettings: { zoomFactor: obj2['prevObj'].zoomFactor } }, true);\n                }\n                this.notify('transform', { prop: 'setPreviousZoomValue', onPropertyChange: false,\n                    value: { previousZoomValue: this.zoomSettings.zoomFactor } });\n                this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: { operation: 'resize',\n                        previousObj: obj2['prevObj'], previousObjColl: obj2['prevObj']['objColl'],\n                        previousPointColl: obj2['prevObj']['pointColl'], previousSelPointColl: obj2['prevObj']['selPointColl'],\n                        previousCropObj: obj1['prevCropObj'], previousText: null, currentText: null, previousFilter: null,\n                        isCircleCrop: null } });\n                this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                var obj_3 = this.cancelCropSelection;\n                if ((obj_3 && (isNullOrUndefined(nonAspectIcon) || !nonAspectIcon))) {\n                    obj_3.previousObj.aspectWidth = obj_3.currentObj.aspectWidth = this.aspectWidth;\n                    obj_3.previousObj.aspectHeight = obj_3.currentObj.aspectHeight = this.aspectHeight;\n                    obj_3.previousCropObj = extend({}, this.cropObj, {}, true);\n                    obj_3.currentCropObj = extend({}, this.cropObj, {}, true);\n                    this.notify('draw', { prop: 'updateCropSelObj' });\n                }\n                this.cancelCropSelection = null;\n            }\n            else if (point && (point.x === 0 || point.y === 0)) {\n                this.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n            }\n            else {\n                this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                        isApplyBtn: false, isCropping: false, isZooming: null, cType: null } });\n            }\n            this.isAspectRatio = false;\n        }\n        var selElem = this.element.querySelector('.e-contextual-toolbar-wrapper .e-toolbar-item.e-selected');\n        var obj = { bool: false };\n        this.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n        var frameObject = { bool: null };\n        this.notify('toolbar', { prop: 'getFrameToolbar', onPropertyChange: false, value: { obj: frameObject } });\n        var sliderWrap = document.querySelector('#' + this.element.id + '_sliderWrapper');\n        if (selElem) {\n            this.currentFilter = selElem.children[0].children[0].id.replace('Canvas', '');\n        }\n        if (isCropSelection) {\n            if (this.transform.straighten !== 0 && (this.panPoint.totalPannedPoint.x !== 0 || this.panPoint.totalPannedPoint.y !== 0 ||\n                this.panPoint.totalPannedClientPoint.x !== 0 || this.panPoint.totalPannedClientPoint.y !== 0)) {\n                var temp = this.prevStraightenedDegree;\n                this.prevStraightenedDegree = this.transform.straighten;\n                this.setStraighten(this.transform.straighten - 3);\n                this.setStraighten(this.transform.straighten + 3);\n                this.prevStraightenedDegree = temp;\n            }\n            this.isCroppedEvent = this.crop();\n        }\n        else if (this.togglePen) {\n            this.freeHandDraw(false);\n            if (!this.isMaskImage) {\n                var widthObj = { penStrokeWidth: null };\n                this.notify('freehand-draw', { prop: 'getPenStrokeWidth', onPropertyChange: false, value: { obj: widthObj } });\n                this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                this.notify('freehand-draw', { prop: 'setPenStrokeWidth', onPropertyChange: false, value: { value: widthObj['penStrokeWidth'] } });\n            }\n            this.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n            this.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n        }\n        else if (this.textArea.style.display === 'block' || this.textArea.style.display === 'inline-block') {\n            this.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: null } });\n            this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n            if (isNullOrUndefined(isMouseDown)) {\n                this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            }\n            this.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n            this.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n        }\n        else if ((sliderWrap || this.currObjType.isFiltered) && !this.drawingShape && this.activeObj.shape !== 'redact') {\n            this.initialAdjustmentValue = this.canvasFilter = this.lowerContext.filter;\n            this.currObjType.isFiltered = false;\n            var obj_4 = { value: null };\n            this.notify('draw', { prop: 'getTempAdjustmentValue', value: { obj: obj_4 } });\n            if (!sliderWrap || sliderWrap.parentElement.previousElementSibling.textContent !== 'Opacity') {\n                this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            }\n            if ((this.activeObj.activePoint.width !== 0 && this.activeObj.activePoint.height !== 0) ||\n                (this.activeObj.shape === 'path' && this.activeObj.pointColl.length > 0)) {\n                this.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: null } });\n            }\n        }\n        else if (obj['bool']) {\n            this.notify('freehand-draw', { prop: 'applyFhd', onPropertyChange: false });\n            this.notify('selection', { prop: 'setFreehandDrawCustomized', value: { isFreehandDrawCustomized: false } });\n            this.notify('toolbar', { prop: 'destroy-qa-toolbar' });\n            this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            this.notify('freehand-draw', { prop: 'resetFreehandDrawSelectedId', onPropertyChange: false });\n        }\n        else if ((this.activeObj.activePoint.width !== 0 || this.activeObj.activePoint.height !== 0) ||\n            (this.activeObj.shape === 'path' && this.activeObj.pointColl.length > 0)) {\n            if (this.activeObj.shape === 'image') {\n                this.notify('draw', { prop: 'setImageApply', onPropertyChange: false, value: { bool: true } });\n            }\n            this.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: null } });\n        }\n        else {\n            if (JSON.stringify(this.frameObj) !== JSON.stringify(this.tempFrameObj)) {\n                var object = { currObj: {} };\n                this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                        operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                        previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                        previousCropObj: extend({}, this.cropObj, {}, true), previousText: null, currentText: null,\n                        previousFilter: null, isCircleCrop: null\n                    } });\n                this.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                var currFrameSettings = { type: this.toPascalCase(this.frameObj.type),\n                    color: this.frameObj.color, gradientColor: this.frameObj.gradientColor, size: this.frameObj.size,\n                    inset: this.frameObj.inset, offset: this.frameObj.offset, borderRadius: this.frameObj.radius,\n                    frameLineStyle: this.toPascalCase(this.frameObj.border), lineCount: this.frameObj.amount };\n                var prevFrameSettings = { type: this.toPascalCase(this.tempFrameObj.type),\n                    color: this.tempFrameObj.color, gradientColor: this.tempFrameObj.gradientColor, size: this.tempFrameObj.size,\n                    inset: this.tempFrameObj.inset, offset: this.tempFrameObj.offset, borderRadius: this.tempFrameObj.radius,\n                    frameLineStyle: this.toPascalCase(this.tempFrameObj.border), lineCount: this.tempFrameObj.amount };\n                var frameChange = { cancel: false, previousFrameSetting: prevFrameSettings,\n                    currentFrameSetting: currFrameSettings };\n                this.editCompleteArgs = frameChange;\n                this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                this.tempFrameObj = extend({}, this.frameObj, {}, true);\n            }\n            this.notify('draw', { prop: 'resetFrameZoom', onPropertyChange: false, value: { isOk: true } });\n        }\n        if (!obj['isCropToolbar']) {\n            this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                    isApplyBtn: false, isCropping: null, isZooming: null, cType: null } });\n            this.currObjType.isRedact = false;\n        }\n        this.notify('draw', { prop: 'setNewPath', value: { bool: false } });\n        this.transform.zoomFactor = this.transform.defaultZoomFactor;\n        this.notify('selection', { prop: 'setCurrentDrawingShape', onPropertyChange: false, value: { value: '' } });\n        this.isResizeOkBtn = false;\n        this.notify('draw', { prop: 'redrawDownScale' });\n        this.isChangesSaved = this.isFinetuneBtnClick = false;\n        if (isFinalApply) {\n            this.drawingShape = null;\n            this.notify('draw', { prop: 'resetTempObjColl' });\n            this.notify('draw', { prop: 'resetTempPointColl' });\n        }\n    };\n    ImageEditor.prototype.triggerEditCompleteEvent = function (args) {\n        if (args.action === 'shape-insert' && args.actionEventArgs &&\n            args.actionEventArgs.currentShapeSettings &&\n            args.actionEventArgs.currentShapeSettings.type.toString() === 'Redact') {\n            args.action = 'redact';\n        }\n        this.trigger('editComplete', args);\n        this.editCompleteArgs = null;\n    };\n    /**\n     * Handles the OK button operation\n     *\n     * @param { string } id - Specifies shape id to return.\n     * @hidden\n     * @returns {SelectionPoint | Object}.\n     */\n    ImageEditor.prototype.getObjFromId = function (id) {\n        var obj;\n        if (this.activeObj.currIndex && this.activeObj.currIndex === id) {\n            obj = extend({}, this.activeObj, {}, true);\n        }\n        else {\n            for (var i = 0; i < this.shapeColl.length; i++) {\n                var shapeId = this.shapeColl[i].id ? this.shapeColl[i].id :\n                    this.shapeColl[i].currIndex;\n                if (shapeId === id) {\n                    obj = extend({}, this.shapeColl[i], {}, true);\n                    break;\n                }\n            }\n        }\n        return obj;\n    };\n    /**\n     * Set the temporary filter properties.\n     *\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.setTempFilterProperties = function () {\n        this.upperCanvas.style.display = 'block';\n        this.cropSelectedState();\n        var obj = { adjustmentLevel: null };\n        this.notify('filter', { prop: 'getAdjustmentLevel', onPropertyChange: false,\n            value: { obj: obj } });\n        this.lowerContext.filter = this.initialAdjustmentValue;\n        this.notify('draw', { prop: 'setTempAdjustmentValue', value: { tempAdjustmentValue: this.lowerContext.filter } });\n        this.notify('filter', { prop: 'setTempAdjustmentLevel', onPropertyChange: false,\n            value: { tempAdjustmentLevel: extend({}, obj['adjustmentLevel'], {}, true) } });\n        this.notify('draw', { prop: 'setTempFilter', value: { tempFilter: this.currentFilter } });\n        var undoRedoObj = { undoRedoStep: null };\n        this.notify('undo-redo', { prop: 'getUndoRedoStep', value: { obj: undoRedoObj } });\n        this.notify('draw', { prop: 'setTempUndoRedoStep', value: { tempUndoRedoStep: undoRedoObj['undoRedoStep'] } });\n    };\n    /**\n     * To crop the selection.\n     *\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.cropSelectedState = function () {\n        if (this.activeObj.shape && this.activeObj.shape.split('-')[0] === 'crop') {\n            this.okBtn();\n        }\n    };\n    /**\n     * Get the current canvas data.\n     *\n     * @hidden\n     * @returns {ImageData}.\n     * An ImageData returns the current canvas image data object.\n     */\n    ImageEditor.prototype.getCurrentCanvasData = function () {\n        var tempFrame = extend({}, this.frameObj, {}, true);\n        this.frameObj = { type: 'none', color: '#fff', size: 20, inset: 20, offset: 20, radius: 0, amount: 1, border: 'solid', gradientColor: '' };\n        var tempFilter = this.lowerContext.filter;\n        this.lowerContext.filter = this.canvasFilter = 'none';\n        var objColl = extend([], this.objColl, null, true);\n        var pointColl = extend([], this.pointColl, null, true);\n        this.objColl = [];\n        this.pointColl = [];\n        this.freehandCounter = 0;\n        this.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n        var ctWrapper = this.element.querySelector('.e-contextual-toolbar-wrapper');\n        if (ctWrapper) {\n            ctWrapper.classList.add('e-hide');\n        }\n        var data = this.getImageData();\n        if (ctWrapper) {\n            ctWrapper.classList.remove('e-hide');\n        }\n        if (!Browser.isDevice) {\n            this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                    isApplyBtn: true, isCropping: false } });\n        }\n        this.element.querySelector('#' + this.element.id + '_contextualToolbarArea').classList.remove('e-hide');\n        this.objColl = objColl;\n        this.pointColl = pointColl;\n        this.freehandCounter = pointColl.length;\n        this.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n            value: { ctx: this.lowerContext, shape: 'iterate', pen: 'iterate', isPreventApply: null } });\n        this.lowerContext.filter = this.canvasFilter = tempFilter;\n        this.frameObj = tempFrame;\n        return data;\n    };\n    /**\n     * To set current adjustment value\n     *\n     * @param { string } type - Specifies the type of adjustment.\n     * @param { number } value - Specifies the value to adjust.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.setCurrAdjustmentValue = function (type, value) {\n        var finetuneValueChanging = { finetune: this.getFinetuneOption(type), value: value, cancel: false };\n        this.trigger('finetuneValueChanging', finetuneValueChanging);\n        this.editCompleteArgs = finetuneValueChanging;\n        if (finetuneValueChanging.cancel) {\n            return;\n        }\n        this.notify('filter', { prop: 'setCurrAdjValue', value: { type: type.toLowerCase(), value: value } });\n    };\n    /**\n     * Get the square point for path.\n     *\n     * @param { SelectionPoint } obj - Specifies the points of path.\n     * @hidden\n     * @returns {ActivePoint}.\n     * An ActivePoint object which returns the square point.\n     */\n    ImageEditor.prototype.getSquarePointForPath = function (obj) {\n        var point = { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 };\n        if (obj.pointColl.length > 0) {\n            point = { startX: obj.pointColl[0].x, startY: obj.pointColl[0].y, endX: obj.pointColl[0].x, endY: obj.pointColl[0].y };\n            for (var i = 1; i < obj.pointColl.length; i++) {\n                if (obj.pointColl[i].x < point.startX) {\n                    point.startX = obj.pointColl[i].x;\n                }\n                if (obj.pointColl[i].y < point.startY) {\n                    point.startY = obj.pointColl[i].y;\n                }\n                if (obj.pointColl[i].x > point.endX) {\n                    point.endX = obj.pointColl[i].x;\n                }\n                if (obj.pointColl[i].y > point.endY) {\n                    point.endY = obj.pointColl[i].y;\n                }\n            }\n            point.width = point.endX - point.startX;\n            point.height = point.endY - point.startY;\n        }\n        return point;\n    };\n    /**\n     * Get the SelectionType.\n     *\n     * @param { string } type - Specifies the SelectionType.\n     * @hidden\n     * @returns {string}.\n     * An string which returns the SelectionType.\n     */\n    ImageEditor.prototype.getSelectionType = function (type) {\n        type = type === 'crop-custom' ? 'CropCustom' : type;\n        var typeToSelectionType = { 'CropCustom': 'Custom', 'CropSquare': 'Square', 'CropCircle': 'Circle',\n            'Crop3:2': '3:2', 'Crop4:3': '4:3', 'Crop5:4': '5:4', 'Crop7:5': '7:5', 'Crop16:9': '16:9',\n            'Crop2:3': '2:3', 'Crop3:4': '3:4', 'Crop4:5': '4:5', 'Crop5:7': '5:7', 'Crop9:16': '9:16' };\n        return typeToSelectionType[\"\" + type] ? typeToSelectionType[\"\" + type] : type.split('Crop')[1];\n    };\n    /** Clears the context.\n     *\n     * @param { CanvasRenderingContext2D } ctx - Specifies the canvas context.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.clearContext = function (ctx) {\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        ctx.clearRect(0, 0, ctx.canvas.height, ctx.canvas.width);\n    };\n    /**\n     * Apply Arrow for start and end.\n     *\n     * @param { string } type - Specifies the start arrow or end arrow.\n     * @param { string } id - Specifies the start arrow or end arrow item id.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateArrow = function (type, id) {\n        var isObjPushed = false;\n        var collLength = this.objColl.length;\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        if (collLength !== this.objColl.length) {\n            isObjPushed = true;\n        }\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var object = { currObj: {} };\n        var objt = { shapeSettingsObj: {} };\n        this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: objt } });\n        var shapeSettings = objt['shapeSettingsObj'];\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        if (isObjPushed) {\n            this.objColl.pop();\n        }\n        if (type === 'startArrow') {\n            this.activeObj.start = this.getTextFromId(id);\n        }\n        else if (type === 'endArrow') {\n            this.activeObj.end = this.getTextFromId(id);\n        }\n        this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: null, fillColor: null,\n                strokeWidth: this.activeObj.strokeSettings.strokeWidth } });\n        this.objColl.push(this.activeObj);\n        if (this.activeObj.activePoint.width !== 0 || this.activeObj.activePoint.height !== 0) {\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n        }\n        this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        if (Browser.isDevice) {\n            if (document.getElementById(this.element.id + '_bottomToolbar')) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                var toolbar_1 = getComponent(this.element.id + '_bottomToolbar', 'toolbar');\n                toolbar_1.refreshOverflow();\n            }\n        }\n        else {\n            if (document.getElementById(this.element.id + '_toolbar')) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                var toolbar_2 = getComponent(this.element.id + '_toolbar', 'toolbar');\n                toolbar_2.refreshOverflow();\n            }\n        }\n        var shapeChangedArgs = { action: type, currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        this.trigger('shapeChange', shapeChangedArgs);\n        this.editCompleteArgs = shapeChangedArgs;\n    };\n    /**\n     * Apply Font style for text.\n     *\n     * @param { string } id - Specifies the selected item id.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateFontFamily = function (id) {\n        this.notify('selection', { prop: 'setInitialTextEdit', value: { bool: false } });\n        var isObjPushed = false;\n        var collLength = this.objColl.length;\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        if (collLength !== this.objColl.length) {\n            isObjPushed = true;\n        }\n        var objColl = extend([], this.objColl, [], true);\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var objt = { shapeSettingsObj: {} };\n        this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: objt } });\n        var shapeSettings = objt['shapeSettingsObj'];\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        if (isObjPushed) {\n            this.objColl.pop();\n        }\n        if (this.textArea.style.display === 'block' || this.textArea.style.display === 'inline-block') {\n            this.notify('shape', { prop: 'updateFontRatio', onPropertyChange: false,\n                value: { obj: this.activeObj, isTextArea: true } });\n            var temp = this.activeObj.textSettings.fontFamily;\n            this.activeObj.textSettings.fontFamily = this.toPascalCase(id);\n            if (this.activeObj.activePoint.width !== 0 || this.activeObj.activePoint.height !== 0) {\n                this.notify('shape', { prop: 'redraw-text' });\n            }\n            this.objColl.push(this.activeObj);\n            if (this.activeObj.activePoint.width !== 0 || this.activeObj.activePoint.height !== 0) {\n                this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                    value: { operation: 'textAreaCustomization', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                        previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                        previousCropObj: prevCropObj, previousText: null,\n                        currentText: null, previousFilter: null, isCircleCrop: null } });\n            }\n            this.objColl.pop();\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            var width = this.activeObj.activePoint.width +\n                this.activeObj.textSettings.fontSize * 0.25;\n            this.textArea.style.width = width + 'px';\n            this.textArea.style.fontFamily = this.toPascalCase(id);\n            this.activeObj.textSettings.fontFamily = temp;\n            this.notify('shape', { prop: 'updateFontStyles', onPropertyChange: false,\n                value: { isTextBox: null } });\n        }\n        else {\n            this.notify('shape', { prop: 'updateFontRatio', onPropertyChange: false,\n                value: { obj: this.activeObj, isTextArea: null } });\n            var fontFamily = this.activeObj.textSettings.fontFamily = this.toPascalCase(id);\n            this.notify('shape', { prop: 'setTextSettings', onPropertyChange: false,\n                value: { textSettings: null, fontFamily: fontFamily, fontSize: null } });\n            if (this.activeObj.activePoint.width !== 0 || this.activeObj.activePoint.height !== 0) {\n                this.notify('shape', { prop: 'redraw-text' });\n            }\n            this.objColl.push(this.activeObj);\n            if (this.activeObj.activePoint.width !== 0 || this.activeObj.activePoint.height !== 0) {\n                this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                    value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: objColl,\n                        previousPointColl: extend([], this.pointColl, [], true),\n                        previousSelPointColl: prevObj.selPointColl, previousCropObj: prevCropObj, previousText: null,\n                        currentText: null, previousFilter: null, isCircleCrop: null } });\n            }\n            this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        }\n        var shapeChangedArgs = { action: 'font-family', currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        shapeChangedArgs.currentShapeSettings.fontFamily = this.textArea.style.fontFamily;\n        this.trigger('shapeChange', shapeChangedArgs);\n        this.editCompleteArgs = shapeChangedArgs;\n    };\n    /**\n     * Apply Font size for text.\n     *\n     * @param { string } text - Specifies the selected item text.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateFontSize = function (text) {\n        var itemText = text;\n        this.notify('selection', { prop: 'setInitialTextEdit', value: { bool: false } });\n        var isObjPushed = false;\n        var collLength = this.objColl.length;\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        if (collLength !== this.objColl.length) {\n            isObjPushed = true;\n        }\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var objt = { shapeSettingsObj: {} };\n        this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: objt } });\n        var shapeSettings = objt['shapeSettingsObj'];\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        if (isObjPushed) {\n            this.objColl.pop();\n        }\n        if (this.textArea.style.display === 'block' || this.textArea.style.display === 'inline-block') {\n            this.notify('shape', { prop: 'updateFontRatio', onPropertyChange: false,\n                value: { obj: this.activeObj, isTextArea: true } });\n            var temp = this.activeObj.textSettings.fontSize;\n            this.activeObj.textSettings.fontSize = parseInt(this.fontSizeColl[(parseInt(itemText, 10) - 1)].text, 10);\n            this.objColl.push(this.activeObj);\n            if (this.activeObj.activePoint.width !== 0 || this.activeObj.activePoint.height !== 0) {\n                this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                    value: { operation: 'textAreaCustomization', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                        previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                        previousCropObj: prevCropObj, previousText: null,\n                        currentText: null, previousFilter: null, isCircleCrop: null } });\n            }\n            this.objColl.pop();\n            var textStyle = '';\n            if (this.textArea.style.fontWeight === 'bold') {\n                textStyle = 'bold ';\n            }\n            if (this.textArea.style.fontStyle === 'italic') {\n                textStyle = 'italic ';\n            }\n            if (this.textArea.style.fontWeight === 'bold' && this.textArea.style.fontStyle === 'italic') {\n                textStyle = 'italic bold ';\n            }\n            this.upperContext.font = textStyle + this.activeObj.textSettings.fontSize + 'px' + ' ' + this.textArea.style.fontFamily;\n            var rows = this.textArea.value.split('\\n');\n            var obj = { maxText: '' };\n            this.notify('shape', { prop: 'getMaxText', onPropertyChange: false,\n                value: { isTextBox: true, text: null, obj: obj } });\n            var text_1 = obj['maxText'];\n            var width = this.upperContext.measureText(text_1).width +\n                this.activeObj.textSettings.fontSize * 0.5;\n            this.textArea.style.width = width + 'px';\n            this.textArea.style.height = rows.length * (this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.25) + 'px';\n            this.activeObj.textSettings.fontSize = temp;\n            this.upperContext.font = this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n            this.textArea.style.fontSize = parseInt(this.fontSizeColl[(parseInt(itemText, 10) - 1)].text, 10) + 'px';\n            if (this.textArea.style.fontFamily === 'georgia') {\n                this.textArea.style.width = parseFloat(this.textArea.style.width) + parseFloat(this.textArea.style.fontSize) + 'px';\n            }\n        }\n        else {\n            this.notify('shape', { prop: 'updateFontRatio', onPropertyChange: false,\n                value: { obj: this.activeObj, isTextArea: null } });\n            var fontSize = this.activeObj.textSettings.fontSize = parseInt(this.fontSizeColl[(parseInt(itemText, 10) - 1)].text, 10);\n            this.notify('shape', { prop: 'setTextSettings', onPropertyChange: false,\n                value: { textSettings: null, fontFamily: null, fontSize: fontSize } });\n            this.upperContext.font = this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n            var rows = this.activeObj.keyHistory.split('\\n');\n            var obj = { maxText: '' };\n            this.notify('shape', { prop: 'getMaxText', onPropertyChange: false,\n                value: { isTextBox: null, text: null, obj: obj } });\n            var text_2 = obj['maxText'];\n            var width = this.upperContext.measureText(text_2).width +\n                this.activeObj.textSettings.fontSize * 0.5;\n            var height = rows.length * (this.activeObj.textSettings.fontSize +\n                this.activeObj.textSettings.fontSize * 0.25);\n            if (this.activeObj.activePoint.width !== 0 || this.activeObj.activePoint.height !== 0) {\n                this.notify('selection', { prop: 'setTextSelection', onPropertyChange: false,\n                    value: { width: width, height: height } });\n                this.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: this.activeObj.activePoint, obj: this.activeObj,\n                        isMouseMove: null, x: null, y: null } });\n                this.notify('shape', { prop: 'redraw-text' });\n            }\n            this.objColl.push(this.activeObj);\n            if (this.activeObj.activePoint.width !== 0 || this.activeObj.activePoint.height !== 0) {\n                this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                    value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                        previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                        previousCropObj: prevCropObj, previousText: null,\n                        currentText: null, previousFilter: null, isCircleCrop: null } });\n            }\n            this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        }\n        var shapeChangedArgs = { action: 'font-size', currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        shapeChangedArgs.currentShapeSettings.fontSize = this.activeObj.textSettings.fontSize;\n        this.trigger('shapeChange', shapeChangedArgs);\n        this.editCompleteArgs = shapeChangedArgs;\n    };\n    /**\n     * Apply Font color for text.\n     *\n     * @param { string } value - Specifies the selected color item value.\n     * @param { string } color - Specifies the selected color type value.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateFontColor = function (value, color) {\n        this.notify('selection', { prop: 'setInitialTextEdit', value: { bool: false } });\n        var isObjPushed = false;\n        var collLength = this.objColl.length;\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        if (collLength !== this.objColl.length) {\n            isObjPushed = true;\n        }\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var objt = { shapeSettingsObj: {} };\n        this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: objt } });\n        var shapeSettings = objt['shapeSettingsObj'];\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        if (isObjPushed) {\n            this.objColl.pop();\n        }\n        if (this.textArea.style.display === 'none') {\n            if (color === 'Text') {\n                this.activeObj.strokeSettings.strokeColor = value;\n                this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null,\n                        strokeColor: this.activeObj.strokeSettings.strokeColor, fillColor: null, strokeWidth: null } });\n            }\n            else {\n                this.activeObj.strokeSettings.fillColor = value;\n                this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null,\n                        strokeColor: null, fillColor: this.activeObj.strokeSettings.fillColor, strokeWidth: null } });\n            }\n            if (!this.togglePen) {\n                if (this.activeObj.activePoint.width !== 0 || this.activeObj.activePoint.height !== 0) {\n                    this.objColl.push(this.activeObj);\n                    this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                        value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                            previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                            previousCropObj: prevCropObj, previousText: null,\n                            currentText: null, previousFilter: null, isCircleCrop: null } });\n                    this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n                }\n            }\n        }\n        else if (this.textArea.style.display === 'block' || this.textArea.style.display === 'inline-block') {\n            this.textArea.style[color === 'Text' ? 'color' : 'backgroundColor'] = value;\n            var temp = color === 'Text' ? this.activeObj.strokeSettings.strokeColor : this.activeObj.strokeSettings.fillColor;\n            this.activeObj.strokeSettings[color === 'Text' ? 'strokeColor' : 'fillColor'] = value;\n            if (this.activeObj.activePoint.width !== 0 || this.activeObj.activePoint.height !== 0) {\n                this.objColl.push(this.activeObj);\n                this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                    value: { operation: 'textAreaCustomization', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                        previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                        previousCropObj: prevCropObj, previousText: null,\n                        currentText: null, previousFilter: null, isCircleCrop: null } });\n                this.objColl.pop();\n            }\n            this.activeObj.strokeSettings[color === 'Text' ? 'strokeColor' : 'fillColor'] = temp;\n        }\n        else if (!this.togglePen) {\n            if (this.activeObj.activePoint.width !== 0 || this.activeObj.activePoint.height !== 0) {\n                this.objColl.push(this.activeObj);\n                this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                    value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                        previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                        previousCropObj: prevCropObj, previousText: null,\n                        currentText: null, previousFilter: null, isCircleCrop: null } });\n                this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n            }\n        }\n        var shapeChangedArgs = { action: 'font-color', currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        shapeChangedArgs.currentShapeSettings.fillColor = value;\n        this.trigger('shapeChange', shapeChangedArgs);\n        this.editCompleteArgs = shapeChangedArgs;\n    };\n    /**\n     * Apply Font color for text.\n     *\n     * @param { string } value - Specifies the selected color item value.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateStrokeTextColor = function (value) {\n        this.notify('selection', { prop: 'setInitialTextEdit', value: { bool: false } });\n        var isObjPushed = false;\n        var collLength = this.objColl.length;\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        if (collLength !== this.objColl.length) {\n            isObjPushed = true;\n        }\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var objt = { shapeSettingsObj: {} };\n        this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: objt } });\n        var shapeSettings = objt['shapeSettingsObj'];\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        if (isObjPushed) {\n            this.objColl.pop();\n        }\n        if (this.textArea.style.display === 'none') {\n            this.activeObj.strokeSettings.outlineColor = value;\n            this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null,\n                    strokeColor: null, fillColor: null, strokeWidth: null, outlineColor: this.activeObj.strokeSettings.outlineColor } });\n            if (!this.togglePen) {\n                if (this.activeObj.activePoint.width !== 0 || this.activeObj.activePoint.height !== 0) {\n                    this.objColl.push(this.activeObj);\n                    this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                        value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                            previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                            previousCropObj: prevCropObj, previousText: null,\n                            currentText: null, previousFilter: null, isCircleCrop: null } });\n                    this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n                }\n            }\n        }\n        else if (this.textArea.style.display === 'block' || this.textArea.style.display === 'inline-block') {\n            this.textArea.style.textShadow = \"-1px -1px 0 \" + value + \", 1px -1px 0 \" + value + \", -1px 1px 0 \" + value + \", 1px 1px 0 \" + value;\n            var temp = this.activeObj.strokeSettings.outlineColor;\n            this.activeObj.strokeSettings.outlineColor = value;\n            if (this.activeObj.activePoint.width !== 0 || this.activeObj.activePoint.height !== 0) {\n                this.objColl.push(this.activeObj);\n                this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                    value: { operation: 'textAreaCustomization', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                        previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                        previousCropObj: prevCropObj, previousText: null,\n                        currentText: null, previousFilter: null, isCircleCrop: null } });\n                this.objColl.pop();\n            }\n            this.activeObj.strokeSettings.outlineColor = temp;\n        }\n        else if (!this.togglePen) {\n            if (this.activeObj.activePoint.width !== 0 || this.activeObj.activePoint.height !== 0) {\n                this.objColl.push(this.activeObj);\n                this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                    value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                        previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                        previousCropObj: prevCropObj, previousText: null,\n                        currentText: null, previousFilter: null, isCircleCrop: null } });\n                this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n            }\n        }\n        var shapeChangedArgs = { action: 'font-color', currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        shapeChangedArgs.currentShapeSettings.fillColor = value;\n        this.trigger('shapeChange', shapeChangedArgs);\n        this.editCompleteArgs = shapeChangedArgs;\n    };\n    /**\n     * Apply Pen stroke width.\n     *\n     * @param { string } id - Specifies the selected item id.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updatePenStrokeWidth = function (id) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var temp = extend([], this.pointColl, [], true);\n        this.updateFreehandDrawColorChange();\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var objt = { shapeSettingsObj: {} };\n        this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: objt } });\n        var shapeSettings = objt['shapeSettingsObj'];\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.pointColl = temp;\n        this.notify('selection', { prop: 'setFreehandDrawCustomized', value: { isFreehandDrawCustomized: true } });\n        this.setPenStroke(id);\n        var obj = { bool: false };\n        this.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n        if (obj['bool']) {\n            var obj_5 = { penStrokeWidth: null };\n            this.notify('freehand-draw', { prop: 'getPenStrokeWidth', onPropertyChange: false, value: { obj: obj_5 } });\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                value: { strokeColor: null, strokeWidth: obj_5['penStrokeWidth'] } });\n            var indexObj = { freehandSelectedIndex: null };\n            this.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n            this.pointColl[indexObj['freehandSelectedIndex']].strokeWidth = obj_5['penStrokeWidth'];\n            this.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n            this.notify('draw', { prop: 'redrawDownScale' });\n            this.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                value: { strokeColor: null, strokeWidth: obj_5['penStrokeWidth'] } });\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'freehanddrawCustomized', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n        }\n        shapeSettings.type = ShapeType.FreehandDraw;\n        var shapeChangedArgs = { action: 'stroke-width', currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        shapeChangedArgs.currentShapeSettings.strokeWidth = this.activeObj.strokeSettings.strokeWidth;\n        this.trigger('shapeChange', shapeChangedArgs);\n        this.editCompleteArgs = shapeChangedArgs;\n    };\n    /**\n     * Apply Pen stroke color.\n     *\n     * @param { string } value - Specifies the selected color item value.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updatePenStrokeColor = function (value) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var temp = extend([], this.pointColl, [], true);\n        this.updateFreehandDrawColorChange();\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var objt = { shapeSettingsObj: {} };\n        this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: objt } });\n        var shapeSettings = objt['shapeSettingsObj'];\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.pointColl = temp;\n        this.notify('selection', { prop: 'setFreehandDrawCustomized', value: { isFreehandDrawCustomized: true } });\n        this.activeObj.strokeSettings.strokeColor = value;\n        var indexObj = { freehandSelectedIndex: null };\n        this.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n        if (indexObj['freehandSelectedIndex'] !== null && indexObj['freehandSelectedIndex'] !== undefined) {\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n            this.notify('draw', { prop: 'redrawDownScale' });\n            this.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                value: { strokeColor: null, strokeWidth: null } });\n        }\n        var obj = { bool: false };\n        this.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n        if (obj['bool']) {\n            var indexObj_1 = { freehandSelectedIndex: null };\n            this.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj_1 } });\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.pointColl[indexObj_1['freehandSelectedIndex']].strokeColor = value;\n            this.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                value: { strokeColor: value } });\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'freehanddrawCustomized', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n        }\n        else if (!this.togglePen) {\n            this.notify('selection', { prop: 'redrawShape', value: { obj: this.activeObj } });\n        }\n        shapeSettings.type = ShapeType.FreehandDraw;\n        var shapeChangedArgs = { action: 'stroke-color', currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        shapeChangedArgs.currentShapeSettings.strokeColor = value;\n        this.trigger('shapeChange', shapeChangedArgs);\n        this.editCompleteArgs = shapeChangedArgs;\n    };\n    /**\n     * Apply Shape stroke width.\n     *\n     * @param { string } id - Specifies the selected item id.\n     * @param { string } type - Specifies the type of selected item.\n     * @param { string } shapeType - Specifies the shape type of selected item.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateStrokeWidth = function (id, type, shapeType) {\n        if (this.activeObj.shape && (this.activeObj.shape !== 'path' || (this.activeObj.shape === 'path' &&\n            this.activeObj.pointColl.length > 0))) {\n            var obj = { shapeSettingsObj: {} };\n            this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n            var shapeSettings = obj['shapeSettingsObj'];\n            var isObjPushed = false;\n            var collLength = this.objColl.length;\n            this.notify('shape', { prop: 'pushActItemIntoObj' });\n            if (collLength !== this.objColl.length) {\n                isObjPushed = true;\n            }\n            var prevCropObj = extend({}, this.cropObj, {}, true);\n            var object = { currObj: {} };\n            this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var prevObj = object['currObj'];\n            prevObj.objColl = extend([], this.objColl, [], true);\n            prevObj.pointColl = extend([], this.pointColl, [], true);\n            prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            if (isObjPushed) {\n                this.objColl.pop();\n            }\n            this.activeObj.strokeSettings[type === 'width' ? (shapeType === 'text' ? 'outlineWidth' : 'strokeWidth') : 'radius'] = parseInt(id, 10);\n            if (this.activeObj.shape === 'rectangle' || this.activeObj.shape === 'ellipse') {\n                this.activeObj.strokeSettings[type === 'width' ? (shapeType === 'text' ? 'outlineWidth' : 'strokeWidth') : 'radius'] = parseInt(id, 10) - 1;\n            }\n            this.activeObj.strokeSettings[type === 'width' ? (shapeType === 'text' ? 'outlineWidth' : 'strokeWidth') : 'radius'] *= 2;\n            if (type === 'width') {\n                if (shapeType === 'text') {\n                    this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: null, fillColor: null,\n                            strokeWidth: null, radius: null, outlineWidth: this.activeObj.strokeSettings.outlineWidth } });\n                }\n                else {\n                    this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: null, fillColor: null,\n                            strokeWidth: this.activeObj.strokeSettings.strokeWidth, radius: null, outlineWidth: null } });\n                }\n            }\n            else {\n                this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: null, fillColor: null,\n                        strokeWidth: null, radius: this.activeObj.strokeSettings.radius } });\n            }\n            this.objColl.push(this.activeObj);\n            if (this.activeObj.activePoint.width !== 0 || this.activeObj.activePoint.height !== 0) {\n                this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                    value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                        previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                        previousCropObj: prevCropObj, previousText: null,\n                        currentText: null, previousFilter: null, isCircleCrop: null } });\n            }\n            this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n            var shapeChangedArgs = { action: 'stroke-width', currentShapeSettings: extend({}, shapeSettings, {}, true) };\n            shapeChangedArgs.currentShapeSettings[type === 'width' ? (shapeType === 'text' ? 'outlineWidth' : 'strokeWidth') : 'radius'] = this.activeObj.strokeSettings[type === 'width' ? (shapeType === 'text' ? 'outlineWidth' : 'strokeWidth') : 'radius'];\n            this.trigger('shapeChange', shapeChangedArgs);\n            this.editCompleteArgs = shapeChangedArgs;\n        }\n        else if (this.activeObj.shape && (this.activeObj.shape === 'path' &&\n            this.activeObj.pointColl.length === 0)) {\n            this.activeObj.strokeSettings.strokeWidth = parseInt(id, 10);\n            this.activeObj.strokeSettings.strokeWidth *= 2;\n            if (type === 'width') {\n                if (shapeType === 'text') {\n                    this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: null, fillColor: null,\n                            strokeWidth: null, radius: null, outlineWidth: this.activeObj.strokeSettings.outlineWidth } });\n                }\n                else {\n                    this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: null, fillColor: null,\n                            strokeWidth: this.activeObj.strokeSettings.strokeWidth, radius: null, outlineWidth: null } });\n                }\n            }\n            else {\n                this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: null, fillColor: null,\n                        strokeWidth: null, radius: this.activeObj.strokeSettings.radius } });\n            }\n        }\n    };\n    /**\n     * Apply Shape stroke color.\n     *\n     * @param { string } value - Specifies the selected color item value.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateStrokeColor = function (value) {\n        var objt = { shapeSettingsObj: {} };\n        this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: objt } });\n        var shapeSettings = objt['shapeSettingsObj'];\n        if (this.activeObj.shape && (this.activeObj.shape !== 'path' || (this.activeObj.shape === 'path' &&\n            this.activeObj.pointColl.length > 0))) {\n            var isObjPushed = false;\n            var collLength = this.objColl.length;\n            this.notify('shape', { prop: 'pushActItemIntoObj' });\n            if (collLength !== this.objColl.length) {\n                isObjPushed = true;\n            }\n            var prevCropObj = extend({}, this.cropObj, {}, true);\n            var object = { currObj: {} };\n            this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var prevObj = object['currObj'];\n            prevObj.objColl = extend([], this.objColl, [], true);\n            prevObj.pointColl = extend([], this.pointColl, [], true);\n            prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            if (isObjPushed) {\n                this.objColl.pop();\n            }\n            this.activeObj.strokeSettings.strokeColor = value;\n            this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: this.activeObj.strokeSettings.strokeColor, fillColor: null, strokeWidth: null } });\n            if (!this.togglePen) {\n                this.objColl.push(this.activeObj);\n                if (this.activeObj.activePoint.width !== 0 || this.activeObj.activePoint.height !== 0) {\n                    this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                        value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                            previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                            previousCropObj: prevCropObj, previousText: null,\n                            currentText: null, previousFilter: null, isCircleCrop: null } });\n                }\n                this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n            }\n        }\n        else if (this.activeObj.shape && (this.activeObj.shape === 'path' &&\n            this.activeObj.pointColl.length === 0)) {\n            this.activeObj.strokeSettings.strokeColor = value;\n            this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: this.activeObj.strokeSettings.strokeColor, fillColor: null, strokeWidth: null } });\n        }\n        var shapeChangedArgs = { action: 'stroke-color', currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        shapeChangedArgs.currentShapeSettings.strokeColor = value;\n        this.trigger('shapeChange', shapeChangedArgs);\n        this.editCompleteArgs = shapeChangedArgs;\n    };\n    /**\n     * Apply Shape fill color.\n     *\n     * @param { string } value - Specifies the selected color item value.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateFillColor = function (value) {\n        var obj = { shapeSettingsObj: {} };\n        this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n        var shapeSettings = obj['shapeSettingsObj'];\n        var isObjPushed = false;\n        var collLength = this.objColl.length;\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        if (collLength !== this.objColl.length) {\n            isObjPushed = true;\n        }\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        if (isObjPushed) {\n            this.objColl.pop();\n        }\n        this.activeObj.strokeSettings.fillColor = value;\n        this.notify('shape', { prop: 'setStrokeSettings',\n            value: { strokeSettings: null, strokeColor: null, fillColor: this.activeObj.strokeSettings.fillColor,\n                strokeWidth: null } });\n        this.objColl.push(this.activeObj);\n        if (this.activeObj.activePoint.width !== 0 || this.activeObj.activePoint.height !== 0) {\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n        }\n        this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        var shapeChangedArgs = { action: 'fill-color', currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        this.trigger('shapeChange', shapeChangedArgs);\n        this.editCompleteArgs = shapeChangedArgs;\n    };\n    /**\n     * Apply horizontal flip.\n     *\n     * @param { CanvasRenderingContext2D } ctx - Specifies the canvas context 2D.\n     * @param { boolean } isPreventURC - Specifies to update undo redo collection.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.horizontalFlip = function (ctx, isPreventURC) {\n        var prevCropObj;\n        var prevObj;\n        if (isNullOrUndefined(isPreventURC)) {\n            if (isNullOrUndefined(this.activeObj.imageRatio)) {\n                this.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n            }\n            this.notify('shape', { prop: 'pushActItemIntoObj' });\n            prevCropObj = extend({}, this.cropObj, {}, true);\n            var object = { currObj: {} };\n            this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            prevObj = object['currObj'];\n            prevObj.objColl = extend([], this.objColl, [], true);\n            prevObj.pointColl = extend([], this.pointColl, [], true);\n            prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            this.objColl.pop();\n        }\n        this.notify('toolbar', { prop: 'refreshSlider' });\n        ctx.clearRect(0, 0, this.activeObj.imageCanvas.width, this.activeObj.imageCanvas.height);\n        var activePoint = this.duplicateImage();\n        this.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n            value: { ctx: this.activeObj.imageCanvas.getContext('2d'), isImgAnnotation: true, isHFlip: true, isVFlip: null } });\n        this.activeObj.activePoint = activePoint;\n        this.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        if (isNullOrUndefined(isPreventURC)) {\n            this.objColl.push(this.activeObj);\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'imageHFlip', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        }\n    };\n    /**\n     * Apply vertical flip.\n     *\n     * @param { CanvasRenderingContext2D } ctx - Specifies the canvas context 2D.\n     * @param { boolean } isPreventURC - Specifies to update undo redo collection.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.verticalFlip = function (ctx, isPreventURC) {\n        var prevCropObj;\n        var prevObj;\n        if (isNullOrUndefined(isPreventURC)) {\n            if (isNullOrUndefined(this.activeObj.imageRatio)) {\n                this.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n            }\n            this.notify('shape', { prop: 'pushActItemIntoObj' });\n            prevCropObj = extend({}, this.cropObj, {}, true);\n            var object = { currObj: {} };\n            this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            prevObj = object['currObj'];\n            prevObj.objColl = extend([], this.objColl, [], true);\n            prevObj.pointColl = extend([], this.pointColl, [], true);\n            prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            this.objColl.pop();\n        }\n        this.notify('toolbar', { prop: 'refreshSlider' });\n        ctx.clearRect(0, 0, this.activeObj.imageCanvas.width, this.activeObj.imageCanvas.height);\n        var activePoint = this.duplicateImage();\n        this.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n            value: { ctx: this.activeObj.imageCanvas.getContext('2d'), isImgAnnotation: true, isHFlip: null, isVFlip: true } });\n        this.activeObj.activePoint = activePoint;\n        this.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        if (isNullOrUndefined(isPreventURC)) {\n            this.objColl.push(this.activeObj);\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'imageVFlip', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        }\n    };\n    /**\n     * Apply rotate image.\n     *\n     * @param { string } rotate - Specifies the direction of rotation.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.rotateImage = function (rotate) {\n        var prevCropObj;\n        var prevObj;\n        if (isNullOrUndefined(this.activeObj.imageRatio)) {\n            this.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n        }\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        // eslint-disable-next-line prefer-const\n        prevCropObj = extend({}, this.cropObj, {}, true);\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        // eslint-disable-next-line prefer-const\n        prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.objColl.pop();\n        this.notify('toolbar', { prop: 'refreshSlider' });\n        if (rotate === 'rotleft') {\n            this.activeObj.rotatedAngle -= (90 * (Math.PI / 180));\n        }\n        else {\n            this.activeObj.rotatedAngle += (90 * (Math.PI / 180));\n        }\n        this.notify('selection', { prop: 'updPtCollForShpRot', onPropertyChange: false, value: { obj: this.activeObj } });\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        this.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        this.objColl.push(this.activeObj);\n        this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: 'imageRotate', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                previousCropObj: prevCropObj, previousText: null,\n                currentText: null, previousFilter: null, isCircleCrop: null } });\n        this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        this.notify('toolbar', { prop: 'destroy-qa-toolbar' });\n        this.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n    };\n    /**\n     * Get pascalToSplitWords from string.\n     *\n     * @param { string } str - Specifies the word.\n     * @hidden\n     * @returns {string}.\n     */\n    ImageEditor.prototype.pascalToSplitWords = function (str) {\n        str = str.charAt(0).toUpperCase() + str.slice(1);\n        var splitStr = str.match(/[A-Z][a-z]+/g);\n        if (isNullOrUndefined(splitStr)) {\n            return str;\n        }\n        else {\n            return splitStr.map(function (word) { return word.charAt(0).toUpperCase() + word.slice(1); }).join(' ');\n        }\n    };\n    /**\n     * Get Slider Value.\n     *\n     * @param { string } type - Finetune type.\n     * @hidden\n     * @returns {number}.\n     */\n    ImageEditor.prototype.getCurrAdjustmentValue = function (type) {\n        var value = 100;\n        var indexObj = { freehandSelectedIndex: null };\n        this.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n        if (type === 'transparency' && this.togglePen) {\n            var obj = { penOpacity: 1 };\n            this.notify('freehand-draw', { prop: 'getPenOpacity', onPropertyChange: false, value: { obj: obj } });\n            value = obj['penOpacity'] * 100;\n        }\n        else if (type === 'transparency' && indexObj['freehandSelectedIndex'] !== null && indexObj['freehandSelectedIndex'] !== undefined) {\n            value = this.pointColl[indexObj['freehandSelectedIndex']].opacity * 100;\n        }\n        else {\n            var obj = { adjustmentLevel: null };\n            this.notify('filter', { prop: 'getAdjustmentLevel', onPropertyChange: false,\n                value: { obj: obj } });\n            var typeToAdjustmentLevel = { 'brightness': obj['adjustmentLevel'].brightness,\n                'contrast': obj['adjustmentLevel'].contrast, 'hue': obj['adjustmentLevel'].hue,\n                'saturation': obj['adjustmentLevel'].saturation, 'opacity': obj['adjustmentLevel'].opacity,\n                'blur': obj['adjustmentLevel'].blur, 'exposure': obj['adjustmentLevel'].exposure,\n                'transparency': obj['adjustmentLevel'].transparency, 'straighten': this.transform.straighten };\n            value = typeToAdjustmentLevel[\"\" + type];\n        }\n        return value;\n    };\n    /**\n     * Apply transformSelect.\n     *\n     * @param { string } type - Specifies the selected item text.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.transformSelect = function (type) {\n        if (this.transform.straighten === 0 && (type === 'rotateleft' || type === 'rotateright') &&\n            this.activeObj.shape && (['crop-2:3', 'crop-3:2', 'crop-3:4', 'crop-4:3', 'crop-4:5', 'crop-5:4', 'crop-5:7', 'crop-7:5',\n            'crop-9:16', 'crop-16:9'].indexOf(this.activeObj.shape) !== -1 || (this.activeObj.shape.indexOf('crop-') !== -1 &&\n            this.activeObj.shape !== 'crop-custom' && this.activeObj.shape !== 'crop-square' && this.activeObj.shape !== 'crop-circle'))) {\n            this.activeObj.shape = 'crop-' + this.activeObj.shape.split('-')[1].split(':')[1] + ':' + this.activeObj.shape.split('-')[1].split(':')[0];\n            this.notify('toolbar', { prop: 'performCropTransformClick', value: { shape: this.activeObj.shape, isTransform: true } });\n        }\n        this.isCropToolbar = true;\n        this.allowDownScale = false;\n        var straighten = this.transform.straighten;\n        var straightenObj = extend({}, this.activeObj, {}, true);\n        var zoomFactor = this.transform.zoomFactor;\n        this.prevEventSelectionPoint = extend({}, this.activeObj, {}, true);\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        this.prevEventObjPoint = object['currObj'];\n        this.prevEventObjPoint.objColl = extend([], this.objColl, [], true);\n        this.prevEventObjPoint.pointColl = extend([], this.pointColl, [], true);\n        this.prevEventObjPoint.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        this.prevEventObjPoint.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        if (this.transform.straighten !== 0) {\n            this.transform.straighten = 0;\n            this.straightenBaseImageCanvas();\n            for (var i = 0, len = this.objColl.length; i < len; i++) {\n                var shape = this.objColl[i].shape;\n                if (shape !== 'line' && shape !== 'arrow' && shape !== 'path') {\n                    this.objColl[i].rotatedAngle -= (straighten * (Math.PI / 180));\n                    this.notify('selection', { prop: 'updPtCollForShpRot', onPropertyChange: false, value: { obj: this.objColl[i] } });\n                }\n            }\n            this.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n            this.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n        }\n        this.setInitialZoomState();\n        var activeObj = extend({}, this.activeObj, {}, true);\n        this.notify('crop', { prop: 'setTransformCrop', onPropertyChange: false, value: { bool: true } });\n        this.cropSelectedState();\n        this.notify('crop', { prop: 'setTransformCrop', onPropertyChange: false, value: { bool: false } });\n        this.notify('draw', { prop: 'resetCurrentSelectionPoint' });\n        this.updateImageTransformColl(type);\n        this.notify('transform', { prop: 'performTransformation', value: { text: type } });\n        this.isCropTab = true;\n        this.notify('draw', { prop: 'moveToSelectionRange', value: { type: type, activeObj: activeObj } });\n        if (this.isStraightening && (type === 'horizontalflip' || type === 'verticalflip')) {\n            this.notify('draw', { prop: 'resetStraightenDestPoints' });\n            this.notify('draw', { prop: 'setDestForStraighten' });\n        }\n        if (straighten !== 0) {\n            this.transform.straighten = straighten;\n            this.straightenBaseImageCanvas();\n            for (var i = 0, len = this.objColl.length; i < len; i++) {\n                var shape = this.objColl[i].shape;\n                if (shape !== 'line' && shape !== 'arrow' && shape !== 'path') {\n                    this.objColl[i].rotatedAngle += (straighten * (Math.PI / 180));\n                    this.notify('selection', { prop: 'updPtCollForShpRot', onPropertyChange: false, value: { obj: this.objColl[i] } });\n                }\n            }\n            this.notify('shape', { prop: 'drawAnnotations', onPropertyChange: false,\n                value: { ctx: this.lowerContext, shape: 'zoom', pen: 'zoom', isPreventApply: null } });\n            this.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n            this.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: straightenObj } });\n            this.notify('draw', { prop: 'setStraightenActObj', value: { activeObj: null } });\n            this.notify('draw', { prop: 'setStraightenInitZoom', value: { zoomFactor: zoomFactor } });\n            if ((this.isStraightening && (type === 'horizontalflip' || type === 'verticalflip')) &&\n                isNullOrUndefined(this.transform.zoomFactor) || this.transform.zoomFactor === 0) {\n                if (this.transform.degree === 0) {\n                    this.transform.zoomFactor += 0.025;\n                }\n                else if (this.transform.zoomFactor === 0) {\n                    this.transform.zoomFactor = null;\n                }\n            }\n            this.notify('draw', { prop: 'zoomToSel', value: { activeObj: straightenObj, isToolbar: false } });\n        }\n        this.isCropToolbar = false;\n        var stValPan = this.element.querySelector('.e-ie-straighten-value-span');\n        if (stValPan) {\n            stValPan.innerHTML = this.transform.straighten.toString() + '&#176';\n        }\n    };\n    /**\n     * Returns default filter.\n     *\n     * @hidden\n     * @returns {string}.\n     */\n    ImageEditor.prototype.getDefaultFilter = function () {\n        return 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n            'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' +\n            'grayscale(0%) ' + 'invert(0%)';\n    };\n    /**\n     * Performs Straightening action.\n     *\n     * @param { number } value - Specifies the degree of straightening.\n     * @hidden\n     * @returns {void} .\n     */\n    ImageEditor.prototype.setStraighten = function (value) {\n        var straightenEventArgs = { cancel: false, previousDegree: this.transform.straighten, currentDegree: value };\n        this.trigger('rotating', straightenEventArgs);\n        this.editCompleteArgs = straightenEventArgs;\n        if (!straightenEventArgs.cancel) {\n            this.performStraighten(straightenEventArgs);\n            var actionArgs = { action: 'straighten', actionEventArgs: this.editCompleteArgs };\n            this.triggerEditCompleteEvent(actionArgs);\n        }\n    };\n    ImageEditor.prototype.duplicateImage = function () {\n        var activePoint = extend({}, this.activeObj.activePoint, {}, true);\n        var dimObj = { width: 0, height: 0 };\n        this.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: this.activeObj.imageElement.width, height: this.activeObj.imageElement.height, obj: dimObj, isImgShape: null } });\n        this.activeObj.activePoint.width = dimObj['width'];\n        this.activeObj.activePoint.height = dimObj['height'];\n        return activePoint;\n    };\n    ImageEditor.prototype.performStraighten = function (straightenEventArgs) {\n        var value = straightenEventArgs.currentDegree;\n        var stValPan = this.element.querySelector('.e-ie-straighten-value-span');\n        if (stValPan) {\n            stValPan.innerHTML = value.toString() + '&#176';\n        }\n        var obj = extend({}, this.activeObj, null, true);\n        this.notify('freehand-draw', { prop: 'setCenterSelPoints' });\n        this.transform.straighten = value;\n        this.straightenPoint = { x: this.activeObj.activePoint.startX + (this.activeObj.activePoint.width / 2),\n            y: this.activeObj.activePoint.startY + (this.activeObj.activePoint.height / 2) };\n        this.straightenBaseImageCanvas();\n        for (var i = 0, len = this.objColl.length; i < len; i++) {\n            var shape = this.objColl[i].shape;\n            if (shape !== 'line' && shape !== 'arrow' && shape !== 'path') {\n                this.objColl[i].rotatedAngle += ((this.transform.straighten - this.prevStraightenedDegree) * (Math.PI / 180));\n                this.notify('selection', { prop: 'updPtCollForShpRot', onPropertyChange: false, value: { obj: this.objColl[i] } });\n            }\n        }\n        if (this.transform.degree % 90 === 0 && this.transform.degree % 180 !== 0) {\n            if (this.transform.straighten === 0) {\n                this.transform.straighten = 360;\n            }\n            this.notify('draw', { prop: 'performPointZoom', onPropertyChange: false,\n                value: { x: this.activeObj.activePoint.startX + (this.activeObj.activePoint.width / 2),\n                    y: this.activeObj.activePoint.startY + (this.activeObj.activePoint.height / 2), type: 'zoomIn', isResize: true } });\n            this.notify('draw', { prop: 'performPointZoom', onPropertyChange: false,\n                value: { x: this.activeObj.activePoint.startX + (this.activeObj.activePoint.width / 2),\n                    y: this.activeObj.activePoint.startY + (this.activeObj.activePoint.height / 2), type: 'zoomOut', isResize: true } });\n            if (this.transform.straighten === 360) {\n                this.transform.straighten = 0;\n            }\n        }\n        else {\n            this.notify('draw', { prop: 'render-image', value: { isMouseWheel: true, isPreventClearRect: null, isFrame: null, isStraighten: true } });\n        }\n        this.notify('draw', { prop: 'drawObject', onPropertyChange: false,\n            value: { canvas: 'duplicate', obj: obj } });\n        this.notify('draw', { prop: 'zoomToSel', value: { activeObj: obj, isToolbar: true } });\n        this.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n        this.prevStraightenedDegree = this.transform.straighten;\n    };\n    /**\n     * Straightens base image.\n     *\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.straightenBaseImageCanvas = function () {\n        if (this.isImageLoaded) {\n            var flipState = this.getStraightenFlipState();\n            var straighten = flipState === 'horizontal' || flipState === 'vertical' ?\n                -this.transform.straighten : this.transform.straighten;\n            var ctx = this.baseImgCanvas.getContext('2d');\n            if (ctx.canvas.width !== this.lowerContext.canvas.width &&\n                ctx.canvas.height !== this.lowerContext.canvas.height) {\n                var obj_6 = { width: 0, height: 0 };\n                this.notify('crop', { prop: 'calcRatio', onPropertyChange: false,\n                    value: { obj: obj_6, dimension: { width: ctx.canvas.width, height: ctx.canvas.height } } });\n            }\n            var dimension = void 0;\n            // eslint-disable-next-line prefer-const\n            dimension = this.getRotatedCanvasDim(this.baseImg.width, this.baseImg.height, this.transform.straighten);\n            this.img.srcWidth = ctx.canvas.width = dimension.width;\n            this.img.srcHeight = ctx.canvas.height = dimension.height;\n            var x = ctx.canvas.width / 2;\n            var y = ctx.canvas.height / 2;\n            ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n            ctx.translate(x, y);\n            ctx.rotate(straighten * Math.PI / 180);\n            ctx.drawImage(this.baseImg, -this.baseImg.width / 2, -this.baseImg.height / 2, this.baseImg.width, this.baseImg.height);\n            ctx.setTransform(1, 0, 0, 1, 0, 0);\n            var obj = { width: 0, height: 0 };\n            this.notify('crop', { prop: 'calcRatio', onPropertyChange: false, value: { obj: obj, dimension: { width: ctx.canvas.width, height: ctx.canvas.height } } });\n        }\n    };\n    /**\n     * Returns rotated canvas dimension.\n     *\n     * @param { number } width - Specifies the width of the canvas.\n     * @param { number } height - Specifies the height of the canvas.\n     * @param { number } angle - Specifies the angle of rotation in degrees.\n     * @hidden\n     * @returns {void} .\n     */\n    ImageEditor.prototype.getRotatedCanvasDim = function (width, height, angle) {\n        var angleRad = angle * Math.PI / 180;\n        var cosAngle = Math.cos(angleRad);\n        var sinAngle = Math.sin(angleRad);\n        var minX = Math.min(0, width * cosAngle, height * Math.cos(Math.PI / 2 - angleRad), width * cosAngle + height * Math.cos(Math.PI / 2 - angleRad));\n        var maxX = Math.max(0, width * cosAngle, height * Math.cos(Math.PI / 2 - angleRad), width * cosAngle + height * Math.cos(Math.PI / 2 - angleRad));\n        var minY = Math.min(0, width * sinAngle, height * Math.sin(Math.PI / 2 - angleRad), width * sinAngle + height * Math.sin(Math.PI / 2 - angleRad));\n        var maxY = Math.max(0, width * sinAngle, height * Math.sin(Math.PI / 2 - angleRad), width * sinAngle + height * Math.sin(Math.PI / 2 - angleRad));\n        return { width: Math.ceil(maxX - minX), height: Math.ceil(maxY - minY) };\n    };\n    /**\n     * Apply Shape order.\n     *\n     * @param { string } id - Specifies the id of the shape to change the order.\n     * @param { string } value - Specifies the order of the shapes.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateShapeOrder = function (id, value) {\n        var shapeObj = this.getObjFromId(id);\n        if ((shapeObj.shape && (shapeObj.shape !== 'path' ||\n            (shapeObj.shape === 'path' && shapeObj.pointColl.length > 0))) ||\n            (shapeObj && shapeObj['id'] && shapeObj['id'].indexOf('pen') > -1)) {\n            var obj = { shapeSettingsObj: {} };\n            this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n            var shapeSettings = obj['shapeSettingsObj'];\n            if (shapeObj.shape) {\n                this.notify('shape', { prop: 'pushActItemIntoObj' });\n            }\n            var prevCropObj = extend({}, this.cropObj, {}, true);\n            var object = { currObj: {} };\n            this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var prevObj = object['currObj'];\n            prevObj.objColl = extend([], this.objColl, [], true);\n            prevObj.pointColl = extend([], this.pointColl, [], true);\n            prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            if (shapeObj.shape) {\n                this.objColl.pop();\n            }\n            this.notify('shape', { prop: 'z-order', onPropertyChange: false, value: { obj: shapeObj, value: value } });\n            if (shapeObj.shape) {\n                this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: null, fillColor: null,\n                        strokeWidth: shapeObj.strokeSettings.strokeWidth } });\n                this.objColl.push(shapeObj);\n            }\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            if (shapeObj.shape) {\n                this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n                this.activeObj.order = shapeObj.order;\n            }\n            var shapeChangedArgs = { action: 'stroke-width', previousShapeSettings: extend({}, shapeSettings, {}, true),\n                currentShapeSettings: extend({}, shapeSettings, {}, true) };\n            shapeChangedArgs.currentShapeSettings.strokeWidth = this.activeObj.strokeSettings.strokeWidth;\n        }\n        else if (this.activeObj.shape && (this.activeObj.shape === 'path' &&\n            this.activeObj.pointColl.length === 0)) {\n            this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: null, fillColor: null,\n                    strokeWidth: this.activeObj.strokeSettings.strokeWidth } });\n        }\n    };\n    ImageEditor.prototype.getStraightenFlipState = function () {\n        var flipState = '';\n        if (this.rotateFlipColl.length > 0) {\n            for (var i = 0, len = this.rotateFlipColl.length; i < len; i++) {\n                var curFlip = this.rotateFlipColl[i];\n                if (curFlip === 'horizontal') {\n                    flipState += 'horizontal';\n                }\n                else if (curFlip === 'vertical') {\n                    flipState += 'vertical';\n                }\n                if (flipState === 'horizontalvertical' || flipState === 'verticalhorizontal') {\n                    flipState = '';\n                }\n            }\n        }\n        return flipState;\n    };\n    ImageEditor.prototype.initializeZoomSettings = function () {\n        this.theme = isNullOrUndefined(this.theme) ? 'Bootstrap5' : this.theme;\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        if (isNullOrUndefined(this.zoomSettings.zoomTrigger) || this.zoomSettings.zoomTrigger === 0) {\n            this.zoomSettings.zoomTrigger = (ZoomTrigger.MouseWheel | ZoomTrigger.Pinch | ZoomTrigger.Toolbar | ZoomTrigger.Commands);\n        }\n        if (isNullOrUndefined(this.selectionSettings.strokeColor)) {\n            this.selectionSettings.strokeColor = this.themeColl[this.theme]['primaryColor'];\n        }\n        if (isNullOrUndefined(this.selectionSettings.fillColor)) {\n            this.selectionSettings.fillColor = this.themeColl[this.theme]['secondaryColor'];\n        }\n    };\n    ImageEditor.prototype.initializeThemeColl = function () {\n        this.themeColl = {\n            Bootstrap5: { primaryColor: '#0d6efd', secondaryColor: '#fff' },\n            Bootstrap5Dark: { primaryColor: '#0d6efd', secondaryColor: '#fff' },\n            Tailwind: { primaryColor: '#4f46e5', secondaryColor: '#fff' },\n            TailwindDark: { primaryColor: '#22d3ee', secondaryColor: '#fff' },\n            Fluent: { primaryColor: '#0078d4', secondaryColor: '#fff' },\n            FluentDark: { primaryColor: '#0078d4', secondaryColor: '#fff' },\n            Bootstrap4: { primaryColor: '#007bff', secondaryColor: '#fff' },\n            Bootstrap: { primaryColor: '#317ab9', secondaryColor: '#fff' },\n            BootstrapDark: { primaryColor: '#317ab9', secondaryColor: '#fff' },\n            Material: { primaryColor: '#e3165b', secondaryColor: '#fff' },\n            MaterialDark: { primaryColor: '#00b0ff', secondaryColor: '#fff' },\n            Fabric: { primaryColor: '#0078d6', secondaryColor: '#fff' },\n            FabricDark: { primaryColor: '#0074cc', secondaryColor: '#fff' },\n            Highcontrast: { primaryColor: '#000000', secondaryColor: '#fff' },\n            Material3: { primaryColor: '#6750a4', secondaryColor: '#fff' },\n            Material3Dark: { primaryColor: '#d0bcff', secondaryColor: '#fff' },\n            Fluent2: { primaryColor: '#0f6cbd', secondaryColor: '#fff' },\n            Fluent2Dark: { primaryColor: '#115ea3', secondaryColor: '#fff' },\n            Fluent2Highcontrast: { primaryColor: '#1aebff', secondaryColor: '#fff' },\n            'Bootstrap5.3': { primaryColor: '#0d6efd', secondaryColor: '#fff' },\n            'Bootstrap5.3Dark': { primaryColor: '#0d6efd', secondaryColor: '#fff' }\n        };\n    };\n    /**\n     * Draw a redaction on an image.\n     *\n     * @param {RedactType} type  Optional. Specifies the type of redaction to be drawn on the image such as blur or pixelate. If not specified, the redaction drawing is initiated with the default blur value.\n     * @param {number} x  Optional. Specifies x-coordinate of redaction. If not specified, the redaction drawing is initiated with the first parameter.\n     * @param {number} y  Optional. Specifies y-coordinate of redaction. If not specified it draws redaction from the center point of the image.\n     * @param {number} width  Optional. Specifies the width of the redaction. The default value is 100.\n     * @param {number} height  Optional. Specifies the height of the redaction. The default value is 50.\n     * @param {number} value  Optional. Specifies the blur value for blur-type redaction or the pixel size for pixelate-type redaction. Defaults to 20 since the default redaction is blur.\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.drawRedact = function (type, x, y, width, height, value) {\n        var isRedact = false;\n        var isPointsInRange = this.allowShape(x, y);\n        if (!this.disabled && this.isImageLoaded && (isPointsInRange || (isNullOrUndefined(x) && isNullOrUndefined(y)))) {\n            isRedact = true;\n            this.notify('shape', {\n                prop: 'drawRedact', onPropertyChange: false, value: {\n                    x: x, y: y, width: width, height: height, type: type, value: value\n                }\n            });\n            this.notify('draw', { prop: 'redrawDownScale' });\n        }\n        return isRedact;\n    };\n    var ImageEditor_1;\n    __decorate([\n        Property('')\n    ], ImageEditor.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageEditor.prototype, \"disabled\", void 0);\n    __decorate([\n        Property('100%')\n    ], ImageEditor.prototype, \"height\", void 0);\n    __decorate([\n        Property('Bootstrap5')\n    ], ImageEditor.prototype, \"theme\", void 0);\n    __decorate([\n        Property()\n    ], ImageEditor.prototype, \"toolbar\", void 0);\n    __decorate([\n        Property()\n    ], ImageEditor.prototype, \"toolbarTemplate\", void 0);\n    __decorate([\n        Property('100%')\n    ], ImageEditor.prototype, \"width\", void 0);\n    __decorate([\n        Property(true)\n    ], ImageEditor.prototype, \"allowUndoRedo\", void 0);\n    __decorate([\n        Property(true)\n    ], ImageEditor.prototype, \"showQuickAccessToolbar\", void 0);\n    __decorate([\n        Property()\n    ], ImageEditor.prototype, \"quickAccessToolbarTemplate\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageEditor.prototype, \"isReadOnly\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageEditor.prototype, \"enableRtl\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageEditor.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Complex({}, FinetuneSettings)\n    ], ImageEditor.prototype, \"finetuneSettings\", void 0);\n    __decorate([\n        Complex({}, ZoomSettings)\n    ], ImageEditor.prototype, \"zoomSettings\", void 0);\n    __decorate([\n        Complex({}, SelectionSettings)\n    ], ImageEditor.prototype, \"selectionSettings\", void 0);\n    __decorate([\n        Complex({}, FontFamily)\n    ], ImageEditor.prototype, \"fontFamily\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"beforeSave\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"zooming\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"panning\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"cropping\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"rotating\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"flipping\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"shapeChanging\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"selectionChanging\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"fileOpened\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"saved\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"toolbarCreated\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"toolbarUpdating\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"toolbarItemClicked\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"imageFiltering\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"finetuneValueChanging\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"click\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"shapeChange\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"quickAccessToolbarOpen\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"quickAccessToolbarItemClick\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"frameChange\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"editComplete\", void 0);\n    ImageEditor = ImageEditor_1 = __decorate([\n        NotifyPropertyChanges\n    ], ImageEditor);\n    return ImageEditor;\n}(Component));\nexport { ImageEditor };\n","/**\n * An enum representing the file types supported by the image editor.\n *\n * @enum {string}\n */\nexport var FileType;\n(function (FileType) {\n    /** The PNG file type. */\n    FileType[\"Png\"] = \"Png\";\n    /** The JPEG file type. */\n    FileType[\"Jpeg\"] = \"Jpeg\";\n    /** The SVG file type. */\n    FileType[\"Svg\"] = \"Svg\";\n})(FileType || (FileType = {}));\n/**\n * An enumeration representing the direction of an image editor operation.\n *\n * @enum {string}\n */\nexport var Direction;\n(function (Direction) {\n    /** The horizontal direction. */\n    Direction[\"Horizontal\"] = \"Horizontal\";\n    /** The vertical direction. */\n    Direction[\"Vertical\"] = \"Vertical\";\n})(Direction || (Direction = {}));\n/**\n * An enumeration representing the type of shape to be added in the image editor.\n *\n * @enum {string}\n */\nexport var ShapeType;\n(function (ShapeType) {\n    /** A rectangle shape. */\n    ShapeType[\"Rectangle\"] = \"Rectangle\";\n    /** An ellipse shape. */\n    ShapeType[\"Ellipse\"] = \"Ellipse\";\n    /** A line shape. */\n    ShapeType[\"Line\"] = \"Line\";\n    /** An arrow shape. */\n    ShapeType[\"Arrow\"] = \"Arrow\";\n    /** A path shape. */\n    ShapeType[\"Path\"] = \"Path\";\n    /** A text shape. */\n    ShapeType[\"Text\"] = \"Text\";\n    /** A freehand drawing shape. */\n    ShapeType[\"FreehandDraw\"] = \"FreehandDraw\";\n    /** An Image shape. */\n    ShapeType[\"Image\"] = \"Image\";\n})(ShapeType || (ShapeType = {}));\n/**\n * An enumeration representing the different ways to trigger zooming in the image editor.\n *\n * @aspNumberEnum\n */\nexport var ZoomTrigger;\n(function (ZoomTrigger) {\n    /** Zooming triggered by mouse wheel. */\n    ZoomTrigger[ZoomTrigger[\"MouseWheel\"] = 1] = \"MouseWheel\";\n    /** Zooming triggered by pinch gesture. */\n    ZoomTrigger[ZoomTrigger[\"Pinch\"] = 2] = \"Pinch\";\n    /** Zooming triggered by command keys. */\n    ZoomTrigger[ZoomTrigger[\"Commands\"] = 4] = \"Commands\";\n    /** Zooming triggered by toolbar button click. */\n    ZoomTrigger[ZoomTrigger[\"Toolbar\"] = 8] = \"Toolbar\";\n})(ZoomTrigger || (ZoomTrigger = {}));\n/**\n * * An enum representing the available themes in the image editor.\n */\nexport var Theme;\n(function (Theme) {\n    /** The Bootstrap 5 theme. */\n    Theme[\"Bootstrap5\"] = \"Bootstrap5\";\n    /** The dark variant of the Bootstrap 5 theme. */\n    Theme[\"Bootstrap5Dark\"] = \"Bootstrap5Dark\";\n    /** The Tailwind CSS theme. */\n    Theme[\"Tailwind\"] = \"Tailwind\";\n    /** The dark variant of the Tailwind CSS theme. */\n    Theme[\"TailwindDark\"] = \"TailwindDark\";\n    /** The Fluent UI theme. */\n    Theme[\"Fluent\"] = \"Fluent\";\n    /** The dark variant of the Fluent UI theme. */\n    Theme[\"FluentDark\"] = \"FluentDark\";\n    /** The Bootstrap 4 theme. */\n    Theme[\"Bootstrap4\"] = \"Bootstrap4\";\n    /** The Bootstrap theme. */\n    Theme[\"Bootstrap\"] = \"Bootstrap\";\n    /** The dark variant of the Bootstrap theme. */\n    Theme[\"BootstrapDark\"] = \"BootstrapDark\";\n    /** The Material Design theme. */\n    Theme[\"Material\"] = \"Material\";\n    /** The dark variant of the Material Design theme. */\n    Theme[\"MaterialDark\"] = \"MaterialDark\";\n    /** The Fabric theme. */\n    Theme[\"Fabric\"] = \"Fabric\";\n    /** The dark variant of the Fabric theme. */\n    Theme[\"FabricDark\"] = \"FabricDark\";\n    /** The high contrast theme. */\n    Theme[\"Highcontrast\"] = \"Highcontrast\";\n    /** The Fluent 2.0 UI theme. */\n    Theme[\"Fluent2\"] = \"Fluent2\";\n    /** The dark variant of the Fluent 2.0 UI theme. */\n    Theme[\"Fluent2Dark\"] = \"Fluent2Dark\";\n})(Theme || (Theme = {}));\n/**\n * An enum representing the available toolbar commands in the image editor.\n */\nexport var ImageEditorCommand;\n(function (ImageEditorCommand) {\n    ImageEditorCommand[\"Crop\"] = \"Crop\";\n    ImageEditorCommand[\"Transform\"] = \"Transform\";\n    ImageEditorCommand[\"Annotate\"] = \"Annotate\";\n    ImageEditorCommand[\"ZoomIn\"] = \"ZoomIn\";\n    ImageEditorCommand[\"ZoomOut\"] = \"ZoomOut\";\n    ImageEditorCommand[\"Open\"] = \"Open\";\n    ImageEditorCommand[\"Reset\"] = \"Reset\";\n    ImageEditorCommand[\"Save\"] = \"Save\";\n    ImageEditorCommand[\"Pan\"] = \"Pan\";\n    ImageEditorCommand[\"Move\"] = \"Move\";\n    ImageEditorCommand[\"Pen\"] = \"Pen\";\n    ImageEditorCommand[\"Line\"] = \"Line\";\n    ImageEditorCommand[\"Arrow\"] = \"Arrow\";\n    ImageEditorCommand[\"Path\"] = \"Path\";\n    ImageEditorCommand[\"Rectangle\"] = \"Rectangle\";\n    ImageEditorCommand[\"Image\"] = \"Image\";\n    ImageEditorCommand[\"Ellipse\"] = \"Ellipse\";\n    ImageEditorCommand[\"Text\"] = \"Text\";\n    ImageEditorCommand[\"CustomSelection\"] = \"CustomSelection\";\n    ImageEditorCommand[\"CircleSelection\"] = \"CircleSelection\";\n    ImageEditorCommand[\"SquareSelection\"] = \"SquareSelection\";\n    ImageEditorCommand[\"RatioSelection\"] = \"RatioSelection\";\n    ImageEditorCommand[\"RotateLeft\"] = \"RotateLeft\";\n    ImageEditorCommand[\"RotateRight\"] = \"RotateRight\";\n    ImageEditorCommand[\"FlipHorizontal\"] = \"FlipHorizontal\";\n    ImageEditorCommand[\"FlipVertical\"] = \"FlipVertical\";\n    ImageEditorCommand[\"Undo\"] = \"Undo\";\n    ImageEditorCommand[\"Redo\"] = \"Redo\";\n    ImageEditorCommand[\"None\"] = \"None\";\n    ImageEditorCommand[\"Mat\"] = \"Mat\";\n    ImageEditorCommand[\"Bevel\"] = \"Bevel\";\n    ImageEditorCommand[\"Inset\"] = \"Inset\";\n    ImageEditorCommand[\"Hook\"] = \"Hook\";\n    ImageEditorCommand[\"Finetune\"] = \"Finetune\";\n    ImageEditorCommand[\"Filter\"] = \"Filter\";\n    ImageEditorCommand[\"Frame\"] = \"Frame\";\n    ImageEditorCommand[\"Resize\"] = \"Resize\";\n    ImageEditorCommand[\"HorizontalFlip\"] = \"HorizontalFlip\";\n    ImageEditorCommand[\"VerticalFlip\"] = \"VerticalFlip\";\n    ImageEditorCommand[\"Brightness\"] = \"Brightness\";\n    ImageEditorCommand[\"Contrast\"] = \"Contrast\";\n    ImageEditorCommand[\"Hue\"] = \"Hue\";\n    ImageEditorCommand[\"Saturation\"] = \"Saturation\";\n    ImageEditorCommand[\"Opacity\"] = \"Opacity\";\n    ImageEditorCommand[\"Blur\"] = \"Blur\";\n    ImageEditorCommand[\"Exposure\"] = \"Exposure\";\n    ImageEditorCommand[\"Default\"] = \"Default\";\n    ImageEditorCommand[\"Chrome\"] = \"Chrome\";\n    ImageEditorCommand[\"Cold\"] = \"Cold\";\n    ImageEditorCommand[\"Warm\"] = \"Warm\";\n    ImageEditorCommand[\"Grayscale\"] = \"Grayscale\";\n    ImageEditorCommand[\"Sepia\"] = \"Sepia\";\n    ImageEditorCommand[\"Invert\"] = \"Invert\";\n    ImageEditorCommand[\"Straightening\"] = \"Straightening\";\n})(ImageEditorCommand || (ImageEditorCommand = {}));\n/**\n * An enumeration of available image filter options.\n *\n * @remarks\n * These options can be used with the `applyImageFilter` method of the image editor control to apply filters to an image.\n */\nexport var ImageFilterOption;\n(function (ImageFilterOption) {\n    /** Default filter */\n    ImageFilterOption[\"Default\"] = \"Default\";\n    /** Chrome filter */\n    ImageFilterOption[\"Chrome\"] = \"Chrome\";\n    /** Cold filter */\n    ImageFilterOption[\"Cold\"] = \"Cold\";\n    /** Warm filter */\n    ImageFilterOption[\"Warm\"] = \"Warm\";\n    /** Grayscale filter */\n    ImageFilterOption[\"Grayscale\"] = \"Grayscale\";\n    /** Sepia filter */\n    ImageFilterOption[\"Sepia\"] = \"Sepia\";\n    /** Invert filter */\n    ImageFilterOption[\"Invert\"] = \"Invert\";\n})(ImageFilterOption || (ImageFilterOption = {}));\n/**\n * An enumeration of available image finetune options.\n *\n * @remarks\n * These options can be used with the `finetuneImage` method of the image editor control to apply finetuning to an image.\n */\nexport var ImageFinetuneOption;\n(function (ImageFinetuneOption) {\n    /** Adjust the brightness of the image */\n    ImageFinetuneOption[\"Brightness\"] = \"Brightness\";\n    /** Adjust the contrast of the image */\n    ImageFinetuneOption[\"Contrast\"] = \"Contrast\";\n    /** Adjust the hue of the image */\n    ImageFinetuneOption[\"Hue\"] = \"Hue\";\n    /** Adjust the saturation of the image */\n    ImageFinetuneOption[\"Saturation\"] = \"Saturation\";\n    /** Adjust the exposure of the image */\n    ImageFinetuneOption[\"Exposure\"] = \"Exposure\";\n    /** Adjust the opacity of the image */\n    ImageFinetuneOption[\"Opacity\"] = \"Opacity\";\n    /** Adjust the blur of the image */\n    ImageFinetuneOption[\"Blur\"] = \"Blur\";\n})(ImageFinetuneOption || (ImageFinetuneOption = {}));\n/**\n * Specifies the type of arrowhead should be drawn.\n *\n */\nexport var ArrowheadType;\n(function (ArrowheadType) {\n    /** Indicates no arrowhead should be drawn. */\n    ArrowheadType[\"None\"] = \"None\";\n    /** Indicates a normal triangle-shaped arrowhead should be drawn. */\n    ArrowheadType[\"Arrow\"] = \"Arrow\";\n    /** Indicates a solid triangle-shaped arrowhead should be drawn. */\n    ArrowheadType[\"SolidArrow\"] = \"SolidArrow\";\n    /** Indicates a circular-shaped arrowhead should be drawn. */\n    ArrowheadType[\"Circle\"] = \"Circle\";\n    /** Indicates a solid circular-shaped arrowhead should be drawn. */\n    ArrowheadType[\"SolidCircle\"] = \"SolidCircle\";\n    /** Indicates a square-shaped arrowhead should be drawn. */\n    ArrowheadType[\"Square\"] = \"Square\";\n    /** Indicates a solid square-shaped arrowhead should be drawn. */\n    ArrowheadType[\"SolidSquare\"] = \"SolidSquare\";\n    /** Indicates a bar shaped arrowhead should be drawn. */\n    ArrowheadType[\"Bar\"] = \"Bar\";\n})(ArrowheadType || (ArrowheadType = {}));\n/**\n * An enumeration of available frame options.\n *\n * @remarks\n * These options can be used with the `drawFrame` method of the image editor control to draw frames on an image.\n */\nexport var FrameType;\n(function (FrameType) {\n    /** Represents a no frame. */\n    FrameType[\"None\"] = \"None\";\n    /** Represents a mat frame. */\n    FrameType[\"Mat\"] = \"Mat\";\n    /** Represents a bevel frame. */\n    FrameType[\"Bevel\"] = \"Bevel\";\n    /** Represents a line frame. */\n    FrameType[\"Line\"] = \"Line\";\n    /** Represents an inset frame. */\n    FrameType[\"Inset\"] = \"Inset\";\n    /** Represents a hook frame. */\n    FrameType[\"Hook\"] = \"Hook\";\n})(FrameType || (FrameType = {}));\n/**\n * An enumeration of available line options.\n *\n * @remarks\n * These options can be used with the `drawFrame` method of the image editor control to draw frames on an image.\n */\nexport var FrameLineStyle;\n(function (FrameLineStyle) {\n    /** Represents a solid line. */\n    FrameLineStyle[\"Solid\"] = \"Solid\";\n    /** Represents a dashed line. */\n    FrameLineStyle[\"Dashed\"] = \"Dashed\";\n    /** Represents a dotted line. */\n    FrameLineStyle[\"Dotted\"] = \"Dotted\";\n})(FrameLineStyle || (FrameLineStyle = {}));\n/**\n * An enumeration representing the type of redaction to be added in the image editor.\n *\n * @enum {string}\n */\nexport var RedactType;\n(function (RedactType) {\n    /** Represents a blur redaction. */\n    RedactType[\"Blur\"] = \"Blur\";\n    /** Represents a pixelate redaction. */\n    RedactType[\"Pixelate\"] = \"Pixelate\";\n})(RedactType || (RedactType = {}));\n","import { extend, Browser, detach, select } from '@syncfusion/ej2-base';\nimport { EventHandler, getComponent, isNullOrUndefined, L10n } from '@syncfusion/ej2-base';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { ColorPicker, Uploader, Slider, TextBox } from '@syncfusion/ej2-inputs';\nimport { ZoomTrigger, ShapeType } from '../index';\nimport { Dialog, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\nvar ToolbarModule = /** @class */ (function () {\n    function ToolbarModule(parent) {\n        this.defToolbarItems = [];\n        this.toolbarHeight = 46;\n        this.currToolbar = '';\n        this.preventZoomBtn = false;\n        this.currentToolbar = 'main';\n        this.selFhdColor = '#42a5f5';\n        this.preventEnableDisableUr = false;\n        this.isAspectRatio = true;\n        this.isFrameToolbar = false;\n        this.presetColors = {\n            'custom': ['#000000', '#f44336', '#e91e63', '#9c27b0', '#673ab7', '#2196f3',\n                '#03a9f4', '#00bcd4', '#009688', '#ffeb3b', '#ffffff', '#ffebee', '#fce4ec', '#f3e5f5', '#ede7f6', '#e3f2fd',\n                '#e1f5fe', '#e0f7fa', '#e0f2f1', '#fffde7', '#f2f2f2', '#ffcdd2', '#f8bbd0', '#e1bee7', '#d1c4e9', '#bbdefb',\n                '#b3e5fc', '#b2ebf2', '#b2dfdb', '#fff9c4', '#e6e6e6', '#ef9a9a', '#f48fb1', '#ce93d8', '#b39ddb', '#90caf9',\n                '#81d4fa', '#80deea', '#80cbc4', '#fff59d', '#cccccc', '#e57373', '#f06292', '#ba68c8', '#9575cd', '#64b5f6',\n                '#4fc3f7', '#4dd0e1', '#4db6ac', '#fff176', '#b3b3b3', '#ef5350', '#ec407a', '#ab47bc', '#7e57c2', '#42a5f5',\n                '#29b6f6', '#26c6da', '#26a69a', '#ffee58', '#999999', '#e53935', '#d81b60', '#8e24aa', '#5e35b1', '#1e88e5',\n                '#039be5', '#00acc1', '#00897b', '#fdd835', '#808080', '#d32f2f', '#c2185b', '#7b1fa2', '#512da8', '#1976d2',\n                '#0288d1', '#0097a7', '#00796b', '#fbc02d', '#666666', '#c62828', '#ad1457', '#6a1b9a', '#4527a0', '#1565c0',\n                '#0277bd', '#00838f', '#00695c', '#f9a825', '#4d4d4d', '#b71c1c', '#880e4f', '#4a148c', '#311b92', '#0d47a1',\n                '#01579b', '#006064', '#004d40', '#f57f17']\n        };\n        this.isSlider = false;\n        this.currentQuality = 1;\n        this.imageQuality = 'highest';\n        this.parent = parent;\n        this.addEventListener();\n        this.initLocale();\n    }\n    ToolbarModule.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    ToolbarModule.prototype.addEventListener = function () {\n        this.parent.on('toolbar', this.toolbar, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    ToolbarModule.prototype.removeEventListener = function () {\n        this.parent.off('toolbar', this.toolbar);\n        this.parent.off('destroyed', this.destroy);\n    };\n    ToolbarModule.prototype.initLocale = function () {\n        this.defaultLocale = {\n            Crop: 'Crop',\n            ZoomIn: 'Zoom In',\n            ZoomOut: 'Zoom Out',\n            Undo: 'Undo',\n            Redo: 'Redo',\n            Transform: 'Transform',\n            Annotation: 'Annotation',\n            Finetune: 'Finetune',\n            Brightness: 'Brightness',\n            Contrast: 'Contrast',\n            Hue: 'Hue',\n            Saturation: 'Saturation',\n            Opacity: 'Opacity',\n            Blur: 'Blur',\n            Sharpen: 'Sharpen',\n            Exposure: 'Exposure',\n            Filter: 'Filter',\n            Default: 'Default',\n            Chrome: 'Chrome',\n            Cold: 'Cold',\n            Warm: 'Warm',\n            Grayscale: 'Grayscale',\n            BlackAndWhite: 'Black and White',\n            Sepia: 'Sepia',\n            Invert: 'Invert',\n            Text: 'Add Text',\n            Pen: 'Pen',\n            Reset: 'Reset',\n            Save: 'Save',\n            Select: 'Select',\n            RotateLeft: 'Rotate Left',\n            RotateRight: 'Rotate Right',\n            HorizontalFlip: 'Horizontal Flip',\n            VerticalFlip: 'Vertical Flip',\n            OK: 'Apply',\n            Cancel: 'Discard',\n            FillColor: 'Fill Color',\n            StrokeColor: 'Stroke Color',\n            StrokeWidth: 'Stroke Width',\n            FontFamily: 'Font Family',\n            FontStyle: 'Font Style',\n            FontSize: 'Font Size',\n            FontColor: 'Font Color',\n            Pan: 'Pan',\n            Move: 'Move',\n            Load: 'Load',\n            Custom: 'Custom',\n            Square: 'Square',\n            Circle: 'Circle',\n            Ellipse: 'Ellipse',\n            Rectangle: 'Rectangle',\n            Line: 'Line',\n            Arrow: 'Arrow',\n            Path: 'Path',\n            Bold: 'Bold',\n            Italic: 'Italic',\n            BoldItalic: 'Bold Italic',\n            XSmall: 'X-Small',\n            Small: 'Small',\n            Medium: 'Medium',\n            Large: 'Large',\n            XLarge: 'X-Large',\n            ABC: 'ABC',\n            Browse: 'Browse',\n            Duplicate: 'Duplicate',\n            Remove: 'Remove',\n            EditText: 'Edit Text',\n            Start: 'Start',\n            End: 'End',\n            Bar: 'Bar',\n            ArrowSolid: 'Arrow Solid',\n            CircleSolid: 'Circle Solid',\n            SquareSolid: 'Square Solid',\n            None: 'None',\n            CropAndTransform: 'Crop and Transform',\n            CropSelection: 'Crop Selection',\n            Image: 'Add Image',\n            Transparency: 'Transparency',\n            Height: 'Height',\n            Width: 'Width',\n            AspectRatio: 'Maintain aspect ratio',\n            W: 'W',\n            H: 'H',\n            DragText: 'Drag and drop your image here or',\n            DropText: 'Drop your image here or',\n            BrowseText: 'Browse here...',\n            SupportText: 'Supports:',\n            Frame: 'Frame',\n            Mat: 'Mat',\n            Bevel: 'Bevel',\n            Inset: 'Inset',\n            Hook: 'Hook',\n            Color: 'Color',\n            Size: 'Size',\n            Offset: 'Offset',\n            Radius: 'Radius',\n            Amount: 'Amount',\n            Resize: 'Resize',\n            0: '0%',\n            20: '20%',\n            40: '40%',\n            60: '60%',\n            80: '80%',\n            100: '100%',\n            1: '1',\n            2: '2',\n            3: '3',\n            4: '4',\n            5: '5',\n            Border: 'Border',\n            Solid: 'Solid',\n            Dashed: 'Dashed',\n            Dotted: 'Dotted',\n            GradientColor: 'Gradient Color',\n            ConfirmDialogHeader: 'Confirm Save Changes',\n            ConfirmDialogContent: 'Do you want to save the changes you made to the image?',\n            AlertDialogHeader: 'Unsupported file',\n            AlertDialogContent: 'The selected file is unsupported.',\n            Yes: 'Yes',\n            No: 'No',\n            ImageErrorDialogHeader: 'Image Selection Error',\n            ImageErrorDialogContent: 'Please select only one image to open.',\n            Straighten: 'Straighten',\n            NoOutline: 'No outline',\n            DlgOK: 'OK',\n            SaveAs: 'Save As',\n            ImageName: 'Image name',\n            Format: 'Format',\n            Quality: 'Quality',\n            Download: 'Download',\n            Close: 'Close',\n            ImageSize: 'Image Size',\n            QualityInfo: 'The image quality option is only available for JPEG format',\n            Good: 'Good',\n            Great: 'Great',\n            Highest: 'Highest',\n            BringForward: 'Bring Forward',\n            SendBackward: 'Send Backward',\n            SendToBack: 'Send to Back',\n            BringToFront: 'Bring to Front',\n            ZOrder: 'Z-Order',\n            Redact: 'Redact',\n            Pixelate: 'Pixelate',\n            BorderRadius: 'Border Radius',\n            TextOutlineColor: 'Outline Color',\n            TextOutlineWidth: 'Outline Width',\n            PixelSize: 'Pixel Size',\n            And: 'and'\n        };\n        this.l10n = new L10n('image-editor', this.defaultLocale, this.parent.locale);\n    };\n    ToolbarModule.prototype.toolbar = function (args) {\n        var parent = this.parent;\n        this.updatePrivateVariables();\n        switch (args.prop) {\n            case 'create-toolbar':\n                this.createToolbar();\n                break;\n            case 'create-contextual-toolbar':\n                this.createContextualToolbar();\n                break;\n            case 'update-toolbar-items':\n                this.updateToolbarItems();\n                break;\n            case 'refresh-toolbar':\n                this.refreshToolbar(args.value['type'], args.value['isApplyBtn'], args.value['isCropping'], args.value['isZooming'], args.value['cType']);\n                break;\n            case 'renderQAT':\n                this.renderQAT(args.value['isPenEdit']);\n                break;\n            case 'enable-disable-btns':\n                this.enableDisableTbrBtn();\n                break;\n            case 'init-main-toolbar':\n                this.initMainToolbar(args.value['isApplyBtn'], args.value['isDevice'], args.value['isOkBtn'], args.value['isResize'], args.value['isFrame'], args.value['isMainToolbar']);\n                break;\n            case 'create-bottom-toolbar':\n                this.createBottomToolbar();\n                break;\n            case 'refresh-main-toolbar':\n                this.refreshMainToolbar();\n                break;\n            case 'create-qa-toolbar':\n                this.createQuickAccessToolbar();\n                break;\n            case 'destroy-qa-toolbar':\n                this.destroyQuickAccessToolbar();\n                break;\n            case 'zoom-up-handler':\n                this.zoomBtnMouseUpHandler();\n                break;\n            case 'refresh-dropdown-btn':\n                this.refreshDropDownBtn(args.value['isDisabled']);\n                break;\n            case 'close-contextual-toolbar':\n                this.closeContextualToolbar();\n                break;\n            case 'destroy-bottom-toolbar':\n                this.destroyBottomToolbar();\n                break;\n            case 'destroy-top-toolbar':\n                this.destroyTopToolbar();\n                break;\n            case 'destroySubComponents':\n                this.destroySubComponents();\n                break;\n            case 'setLocale':\n                this.l10n.setLocale(args.value['locale']);\n                break;\n            case 'setPreventZoomBtn':\n                this.preventZoomBtn = args.value['isPrevent'];\n                break;\n            case 'getToolbarHeight':\n                args.value['obj']['toolbarHeight'] = this.toolbarHeight;\n                break;\n            case 'setToolbarHeight':\n                if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.length > 0 && parent.toolbar.indexOf('Open') > -1)) {\n                    this.toolbarHeight = args.value['height'];\n                }\n                break;\n            case 'setCurrentToolbar':\n                this.currentToolbar = args.value['type'];\n                break;\n            case 'setSelectedFreehandColor':\n                this.selFhdColor = args.value['color'];\n                break;\n            case 'setInitialAdjustmentValue':\n                parent.initialAdjustmentValue = args.value['value'];\n                break;\n            case 'getCanvasFilter':\n                args.value['obj']['canvasFilter'] = parent.canvasFilter;\n                break;\n            case 'getDefToolbarItems':\n                args.value['obj']['defToolbarItems'] = this.defToolbarItems;\n                break;\n            case 'getPenStroke':\n                this.getPenStroke(args.value['value']);\n                break;\n            case 'performDefToolbarClickAction':\n                this.performDefTbrClick(args.value['type'], args.value['isContextualToolbar'], args.value['isDisabledAdjustment'], args.value['isDisabledFilter'], args.value['isFilterFinetune']);\n                break;\n            case 'setTempFilterProperties':\n                parent.setTempFilterProperties();\n                break;\n            case 'refreshSlider':\n                this.refreshSlider();\n                break;\n            case 'getCurrAdjustmentValue':\n                parent.getCurrAdjustmentValue(args.value['type']);\n                break;\n            case 'setCurrAdjustmentValue':\n                parent.setCurrAdjustmentValue(args.value['type'], args.value['value']);\n                break;\n            case 'refreshShapeDrawing':\n                this.refreshShapeDrawing();\n                break;\n            case 'setEnableDisableUndoRedo':\n                this.preventEnableDisableUr = args.value['isPrevent'];\n                break;\n            case 'reset':\n                this.reset();\n                break;\n            case 'getLocaleText':\n                args.value['obj']['value'] = this.l10n.getConstant(args.value['obj']['key']);\n                break;\n            case 'initResizeToolbar':\n                this.initResizeToolbar();\n                break;\n            case 'getFrameToolbar':\n                args.value['obj']['bool'] = this.isFrameToolbar;\n                break;\n            case 'resizeClick':\n                this.resizeClick();\n                break;\n            case 'frameToolbarClick':\n                this.frameToolbarClick();\n                break;\n            case 'performCropTransformClick':\n                this.performCropTransformClick(args.value['shape'], args.value['isTransform']);\n                break;\n            case 'duplicateShape':\n                this.duplicateShape(args.value['isPreventUndoRedo'], true);\n                break;\n            case 'editText':\n                this.editText();\n                break;\n            case 'setInitialSize':\n                this.initialSize = Number(args.value['value']);\n                break;\n            case 'widthPress':\n                this.widthPress(args.value['e']);\n                break;\n            case 'heightPress':\n                this.heightPress(args.value['e']);\n                break;\n            case 'widthAspectRatio':\n                this.widthAspectRatio(args.value['e']);\n                break;\n            case 'heightAspectRatio':\n                this.heightAspectRatio(args.value['e']);\n                break;\n        }\n    };\n    ToolbarModule.prototype.updatePrivateVariables = function () {\n        var parent = this.parent;\n        this.inMemoryCanvas = parent.inMemoryCanvas;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n        if (parent.upperCanvas) {\n            this.upperContext = parent.upperCanvas.getContext('2d');\n        }\n        if (this.inMemoryCanvas) {\n            this.inMemoryContext = this.inMemoryCanvas.getContext('2d');\n        }\n    };\n    ToolbarModule.prototype.reset = function () {\n        var parent = this.parent;\n        this.toolbarHeight = 46;\n        parent.prevCurrSelectionPoint = null;\n        this.zoomBtnHold = null;\n        this.currToolbar = '';\n        parent.cxtTbarHeight = null;\n        this.currentToolbar = 'main';\n        this.selFhdColor = '#42a5f5';\n        parent.currentFilter = '';\n        this.preventZoomBtn = parent.isCropToolbar = this.preventEnableDisableUr = this.isFrameToolbar = false;\n        parent.initialAdjustmentValue = parent.canvasFilter =\n            'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n                'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n        parent.tempStraighten = 0;\n        parent.isStraightening = false;\n    };\n    ToolbarModule.prototype.destroyTopToolbar = function () {\n        var parent = this.parent;\n        var toolbar = document.getElementById(parent.element.id + '_toolbar');\n        if (this.isToolbar() && toolbar && toolbar.classList.contains('e-control')) {\n            getComponent(toolbar, 'toolbar').destroy();\n        }\n    };\n    ToolbarModule.prototype.destroyBottomToolbar = function () {\n        var parent = this.parent;\n        var toolbar = document.getElementById(parent.element.id + '_bottomToolbar');\n        if (toolbar && toolbar.classList.contains('e-control')) {\n            getComponent(toolbar, 'toolbar').destroy();\n        }\n    };\n    ToolbarModule.prototype.isToolbar = function () {\n        var parent = this.parent;\n        return (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.length > 0)\n            || !isNullOrUndefined(parent.toolbarTemplate));\n    };\n    ToolbarModule.prototype.createToolbar = function () {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.length > 0)) {\n            parent.element.appendChild(parent.createElement('div', {\n                id: id + '_toolbarArea', className: 'e-toolbar-area'\n            }));\n            var toolbarItems = { cssClass: 'e-image-upload', align: 'Left', type: 'Input',\n                tooltipText: this.l10n.getConstant('Browse'), template: new Uploader({ allowedExtensions: '.jpg, .jpeg, .png,.svg', multiple: false }) };\n            if (isNullOrUndefined(this.defToolbarItems)) {\n                this.defToolbarItems = [];\n            }\n            this.defToolbarItems.push(toolbarItems);\n            var toolbarArea = document.getElementById(id + '_toolbarArea');\n            var toolbar_1 = parent.createElement('div', { id: id + '_toolbar' });\n            toolbarArea.appendChild(toolbar_1);\n            var uploadItems = [\n                {\n                    cssClass: 'e-image-upload',\n                    align: 'Left', type: 'Input',\n                    tooltipText: this.l10n.getConstant('Browse'),\n                    template: new Uploader({\n                        allowedExtensions: '.jpg, .jpeg, .png,.svg',\n                        multiple: false,\n                        selected: function () {\n                            var toolbar = document.getElementById(id + '_toolbar');\n                            var bToolbar = document.getElementById(id + '_bottomToolbar');\n                            if (!parent.disabled) {\n                                if (Browser.isDevice) {\n                                    if (_this.defToolbarItems.length > 0 && toolbar) {\n                                        getComponent(toolbar, 'toolbar').destroy();\n                                    }\n                                    if (bToolbar) {\n                                        getComponent(bToolbar, 'toolbar').destroy();\n                                    }\n                                    _this.initMainToolbar(false, Browser.isDevice, null);\n                                    _this.createBottomToolbar();\n                                }\n                                else {\n                                    if (_this.defToolbarItems.length > 0 && toolbar) {\n                                        getComponent(toolbar, 'toolbar').destroy();\n                                    }\n                                    _this.initMainToolbar(false, false, null);\n                                }\n                            }\n                        }\n                    })\n                }\n            ];\n            var toolbarObj = new Toolbar({ items: uploadItems, width: '100%',\n                created: function () {\n                    parent.trigger('toolbarCreated', { toolbarType: 'main' });\n                },\n                clicked: this.defToolbarClicked.bind(this) });\n            toolbarObj.appendTo('#' + id + '_toolbar');\n            this.createLeftToolbarControls();\n            var mToolbar = document.getElementById(id + '_toolbar');\n            if (toolbar_1) {\n                this.toolbarHeight = mToolbar.clientHeight;\n                if (parent.toolbar && parent.toolbar.length > 0 && parent.toolbar.indexOf('Open') === -1) {\n                    var toolabr = getComponent(document.getElementById(parent.element.id + '_toolbar'), 'toolbar');\n                    if (toolabr) {\n                        toolabr.destroy();\n                        document.getElementById(parent.element.id + '_toolbar').innerHTML = '';\n                    }\n                }\n            }\n        }\n        else {\n            this.toolbarHeight = 0;\n        }\n    };\n    ToolbarModule.prototype.createContextualToolbar = function () {\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.length > 0)) {\n            parent.element.appendChild(parent.createElement('div', { id: id + '_contextualToolbarArea',\n                className: 'e-contextual-toolbar-wrapper e-hide', attrs: { style: 'position: absolute;' }\n            }));\n            var toolbarArea = document.getElementById(id + '_contextualToolbarArea');\n            var toolbar_2 = parent.createElement('div', { id: id + '_contextualToolbar' });\n            toolbarArea.appendChild(toolbar_2);\n        }\n    };\n    ToolbarModule.prototype.createBottomToolbar = function () {\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (parent.element.querySelector('#' + id + '_bottomToolbarArea')) {\n            parent.element.querySelector('#' + id + '_bottomToolbarArea').remove();\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.length > 0)) {\n            parent.element.appendChild(parent.createElement('div', {\n                id: id + '_bottomToolbarArea', className: 'e-bottom-toolbar'\n            }));\n            if (!parent.toolbarTemplate) {\n                var toolbarArea = document.getElementById(id + '_bottomToolbarArea');\n                var toolbarElem = parent.createElement('div', {\n                    id: id + '_bottomToolbar'\n                });\n                toolbarArea.appendChild(toolbarElem);\n            }\n            this.initBottomToolbar();\n        }\n    };\n    ToolbarModule.prototype.createQuickAccessToolbar = function () {\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (parent.showQuickAccessToolbar) {\n            var toolbarItems = { cssClass: 'e-image-upload', align: 'Left', type: 'Input',\n                tooltipText: this.l10n.getConstant('Browse'), template: new Uploader({ allowedExtensions: '.jpg, .jpeg, .png,.svg', multiple: false }) };\n            if (isNullOrUndefined(this.defToolbarItems)) {\n                this.defToolbarItems = [];\n            }\n            this.defToolbarItems.push(toolbarItems);\n            var toolbarArea = document.getElementById(id + '_quickAccessToolbarArea');\n            var toolbar_3 = parent.createElement('div', {\n                id: id + '_quickAccessToolbar'\n            });\n            toolbarArea.appendChild(toolbar_3);\n            var toolbarObj = new Toolbar({ clicked: this.defToolbarClicked.bind(this) });\n            toolbarObj.appendTo('#' + id + '_quickAccessToolbar');\n        }\n    };\n    ToolbarModule.prototype.initMainToolbar = function (isApplyOption, isDevice, isOkBtn, isResize, isFrame, isMainToolbar, isRedact) {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (this.isToolbar()) {\n            var leftItem = this.getLeftToolbarItem(isOkBtn, isResize);\n            var rightItem = this.getRightToolbarItem(isOkBtn, isMainToolbar, isRedact);\n            var mainItem = this.getMainToolbarItem(isApplyOption, isFrame, isRedact);\n            var zoomItem = this.getZoomToolbarItem();\n            if (isDevice) {\n                if (isFrame || isRedact) {\n                    this.defToolbarItems = mainItem;\n                }\n                else {\n                    this.defToolbarItems = leftItem.concat(rightItem);\n                }\n            }\n            else {\n                this.defToolbarItems = leftItem.concat(mainItem, rightItem, zoomItem);\n            }\n            var args = { toolbarType: 'main', toolbarItems: this.defToolbarItems };\n            parent.trigger('toolbarUpdating', args);\n            this.defToolbarItems = args.toolbarItems;\n            if (this.defToolbarItems.length > 0) {\n                var toolbarObj = new Toolbar({\n                    width: '100%',\n                    items: this.defToolbarItems,\n                    clicked: this.defToolbarClicked.bind(this),\n                    created: function () {\n                        if (!isDevice) {\n                            _this.renderAnnotationBtn();\n                        }\n                        _this.wireZoomBtnEvents();\n                        parent.trigger('toolbarCreated', { toolbarType: 'main' });\n                    }\n                });\n                if ((isDevice && isFrame) || (isDevice && isRedact)) {\n                    toolbarObj.appendTo('#' + id + '_bottomToolbar');\n                }\n                else {\n                    toolbarObj.appendTo('#' + id + '_toolbar');\n                }\n                this.createLeftToolbarControls();\n                this.enableDisableTbrBtn();\n                if (this.isToolbar() && document.getElementById(id + '_toolbar')) {\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    var toolbar_4 = getComponent(id + '_toolbar', 'toolbar');\n                    toolbar_4.refreshOverflow();\n                }\n            }\n        }\n    };\n    ToolbarModule.prototype.initBottomToolbar = function () {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.length > 0)) {\n            var items = this.getMainToolbarItem();\n            var args = { toolbarType: 'bottom-toolbar', toolbarItems: items };\n            parent.trigger('toolbarUpdating', args);\n            items = args.toolbarItems;\n            var toolbarObj = new Toolbar({ items: items, width: '100%',\n                created: function () {\n                    _this.renderAnnotationBtn();\n                    _this.renderCropBtn();\n                    _this.renderTransformBtn();\n                    parent.trigger('toolbarCreated', { toolbarType: 'main' });\n                },\n                clicked: this.defToolbarClicked.bind(this)\n            });\n            toolbarObj.appendTo('#' + id + '_bottomToolbar');\n            if (this.defToolbarItems.length > 0 && document.getElementById(id + '_bottomToolbar')) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                var toolbar_5 = getComponent(id + '_bottomToolbar', 'toolbar');\n                toolbar_5.refreshOverflow();\n            }\n        }\n    };\n    ToolbarModule.prototype.getLeftToolbarItem = function (isOkBtn, isResize) {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var toolbarItems = [];\n        if (!isOkBtn || isResize) {\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Open') > -1)) {\n                toolbarItems.push({ id: id + '_upload', cssClass: 'e-image-upload', align: 'Left', type: 'Input', template: new Uploader({ allowedExtensions: '.jpg, .jpeg, .png,.svg', multiple: false }) });\n                toolbarItems.push({ visible: false, cssClass: 'e-image-position e-btn e-flat', tooltipText: this.l10n.getConstant('Browse'), align: 'Left' });\n            }\n            else if (Browser.isDevice && (parent.toolbar && parent.toolbar.indexOf('Open') === -1)) {\n                toolbarItems.push({ visible: false, id: id + '_upload', cssClass: 'e-image-upload', align: 'Left', type: 'Input', template: new Uploader({ allowedExtensions: '.jpg, .jpeg, .png,.svg', multiple: false }) });\n                toolbarItems.push({ visible: false, cssClass: 'e-image-position e-btn e-flat', tooltipText: this.l10n.getConstant('Browse'), align: 'Left' });\n            }\n        }\n        if (parent.allowUndoRedo && !isResize) {\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Undo') > -1)) {\n                toolbarItems.push({ id: id + '_undo', prefixIcon: 'e-icons e-undo', cssClass: 'top-icon e-undo',\n                    tooltipText: this.l10n.getConstant('Undo'), align: 'Left' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Redo') > -1)) {\n                toolbarItems.push({ id: id + '_redo', prefixIcon: 'e-icons e-redo', cssClass: 'top-icon e-redo',\n                    tooltipText: this.l10n.getConstant('Redo'), align: 'Left' });\n            }\n        }\n        if (!this.preventZoomBtn && (parent.zoomSettings.zoomTrigger & ZoomTrigger.Toolbar) === ZoomTrigger.Toolbar && !isResize) {\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('ZoomOut') > -1)) {\n                toolbarItems.push({ id: id + '_zoomOut', prefixIcon: 'e-icons e-zoom-out', cssClass: 'top-icon e-dec-zoom',\n                    tooltipText: this.l10n.getConstant('ZoomOut'), align: 'Left' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('ZoomIn') > -1)) {\n                toolbarItems.push({ id: id + '_zoomIn', prefixIcon: 'e-icons e-zoom-in', cssClass: 'top-icon e-inc-zoom',\n                    tooltipText: this.l10n.getConstant('ZoomIn'), align: 'Left' });\n            }\n        }\n        var tempToolbarItems = this.processToolbar('left');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getRightToolbarItem = function (isOkBtn, isMainToolbar, isRedact) {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var toolbarItems = [];\n        if (isOkBtn || isRedact) {\n            toolbarItems.push({ id: id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right', tabIndex: 0 });\n            toolbarItems.push({ id: id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        if ((isMainToolbar || !Browser.isDevice) && (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Reset') > -1))) {\n            toolbarItems.push({ id: id + '_reset', prefixIcon: 'e-icons e-btn-reset', cssClass: 'top-icon e-img-reset',\n                tooltipText: this.l10n.getConstant('Reset'), align: 'Right' });\n        }\n        if (!isOkBtn) {\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Save') > -1)) {\n                toolbarItems.push({ id: id + '_save', prefixIcon: 'e-icons e-btn-save', cssClass: 'e-caret-hide top-icon e-save',\n                    tooltipText: this.l10n.getConstant('Save'), align: 'Right' });\n            }\n        }\n        var tempToolbarItems = this.processToolbar('right');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getMainToolbarItem = function (isApplyOption, isFrame, isRedact) {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var toolbarItems = [];\n        if (isFrame) {\n            if (isNullOrUndefined(parent.toolbar) || (!isNullOrUndefined(parent.toolbar) && parent.toolbar.indexOf('None') > -1) || parent.toolbar.indexOf('Frame') > -1) {\n                toolbarItems.push({ id: id + '_none', prefixIcon: 'e-icons e-frame-none', cssClass: 'top-icon e-frame-none',\n                    tooltipText: this.l10n.getConstant('None'), align: 'Center' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (!isNullOrUndefined(parent.toolbar) && parent.toolbar.indexOf('Mat') > -1) || parent.toolbar.indexOf('Frame') > -1) {\n                toolbarItems.push({ id: id + '_mat', prefixIcon: 'e-icons e-frame-mat', cssClass: 'top-icon e-frame-mat',\n                    tooltipText: this.l10n.getConstant('Mat'), align: 'Center' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (!isNullOrUndefined(parent.toolbar) && parent.toolbar.indexOf('Bevel') > -1) || parent.toolbar.indexOf('Frame') > -1) {\n                toolbarItems.push({ id: id + '_bevel', prefixIcon: 'e-icons e-frame-bevel', cssClass: 'top-icon e-frame-bevel',\n                    tooltipText: this.l10n.getConstant('Bevel'), align: 'Center' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (!isNullOrUndefined(parent.toolbar) && parent.toolbar.indexOf('Line') > -1) || parent.toolbar.indexOf('Frame') > -1) {\n                toolbarItems.push({ id: id + '_line', prefixIcon: 'e-icons e-frame-line', cssClass: 'top-icon e-frame-line',\n                    tooltipText: this.l10n.getConstant('Line'), align: 'Center' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (!isNullOrUndefined(parent.toolbar) && parent.toolbar.indexOf('Inset') > -1) || parent.toolbar.indexOf('Frame') > -1) {\n                toolbarItems.push({ id: id + '_inset', prefixIcon: 'e-icons e-frame-inset', cssClass: 'top-icon e-frame-inset',\n                    tooltipText: this.l10n.getConstant('Inset'), align: 'Center' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (!isNullOrUndefined(parent.toolbar) && parent.toolbar.indexOf('Hook') > -1) || parent.toolbar.indexOf('Frame') > -1) {\n                toolbarItems.push({ id: id + '_hook', prefixIcon: 'e-icons e-frame-hook', cssClass: 'top-icon e-frame-hook',\n                    tooltipText: this.l10n.getConstant('Hook'), align: 'Center' });\n            }\n        }\n        else if (isRedact) {\n            toolbarItems.push({ id: id + '_redactBlur', prefixIcon: 'e-icons e-tint', cssClass: 'top-icon e-opacity',\n                tooltipText: this.l10n.getConstant('Blur'), align: 'Center' });\n            toolbarItems.push({ id: id + '_pixelate', prefixIcon: 'e-icons e-opacity', cssClass: 'top-icon e-opacity',\n                tooltipText: this.l10n.getConstant('Pixelate'), align: 'Center' });\n            toolbarItems.push({ id: id + '_duplicate', prefixIcon: 'e-icons e-order', cssClass: 'top-icon e-order',\n                tooltipText: this.l10n.getConstant('Duplicate'), align: 'Center' });\n            toolbarItems.push({ id: id + '_remove', prefixIcon: 'e-icons e-trash', cssClass: 'top-icon e-trash',\n                tooltipText: this.l10n.getConstant('Remove'), align: 'Center' });\n        }\n        else {\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Crop') > -1)) {\n                toolbarItems.push({ id: id + '_cropTransform', prefixIcon: 'e-icons e-crop', cssClass: 'top-icon e-crop',\n                    tooltipText: this.l10n.getConstant('CropAndTransform'), align: 'Center' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Annotate') > -1)) {\n                toolbarItems.push({ id: id + '_annotation', tooltipText: this.l10n.getConstant('Annotation'), align: 'Center',\n                    template: '<button id=\"' + id + '_annotationBtn\"></button>' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Finetune') > -1)) {\n                toolbarItems.push({ id: id + '_adjustment', prefixIcon: 'e-icons e-adjustment', cssClass: 'top-icon e-adjustment',\n                    tooltipText: this.l10n.getConstant('Finetune'), align: 'Center' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Filter') > -1)) {\n                toolbarItems.push({ id: id + '_filter', prefixIcon: 'e-icons e-filters', cssClass: 'top-icon e-filters',\n                    tooltipText: this.l10n.getConstant('Filter'), align: 'Center' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (!isNullOrUndefined(parent.toolbar) && parent.toolbar.indexOf('Frame') > -1)) {\n                toolbarItems.push({ id: id + '_frame', prefixIcon: 'e-icons e-border-frame', cssClass: 'top-icon e-border-frame',\n                    tooltipText: this.l10n.getConstant('Frame'), align: 'Center' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (!isNullOrUndefined(parent.toolbar) && parent.toolbar.indexOf('Resize') > -1)) {\n                toolbarItems.push({ id: id + '_resize', prefixIcon: 'e-icons e-resize', cssClass: 'top-icon e-resize',\n                    tooltipText: this.l10n.getConstant('Resize'), align: 'Center' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (!isNullOrUndefined(parent.toolbar) && parent.toolbar.indexOf('Redact') > -1)) {\n                toolbarItems.push({ id: id + '_redact', prefixIcon: 'e-icons e-redact', cssClass: 'top-icon e-opacity',\n                    tooltipText: this.l10n.getConstant('Redact'), align: 'Center' });\n            }\n        }\n        var tempToolbarItems = this.processToolbar('center');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (isApplyOption) {\n            toolbarItems.push({ id: id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right', tabIndex: 0 });\n            toolbarItems.push({ id: id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getZoomToolbarItem = function () {\n        var toolbarItems = [];\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.updateContextualToolbar = function (type, cType, isSelect) {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var toolbarArea = parent.element.querySelector('#' + id + '_toolbarArea');\n        var contextualToolbarArea = parent.element.querySelector('#' + id + '_contextualToolbarArea');\n        if (!contextualToolbarArea) {\n            return;\n        }\n        contextualToolbarArea.classList.remove('e-hide');\n        contextualToolbarArea.style.left = toolbarArea.offsetLeft + 'px';\n        if (type === 'filter') {\n            var toolbar_6 = document.getElementById(id + '_toolbar');\n            if (toolbar_6 && this.defToolbarItems.length > 0) {\n                getComponent(toolbar_6, 'toolbar').destroy();\n            }\n            if (Browser.isDevice) {\n                this.initMainToolbar(false, true, true);\n            }\n            else {\n                this.initMainToolbar(true, null, null);\n            }\n            this.refreshSlider();\n            this.initFilterToolbarItem();\n        }\n        else {\n            var ctxToolbar = document.querySelector('#' + id + '_contextualToolbar');\n            if (ctxToolbar.classList.contains('e-control')) {\n                getComponent(ctxToolbar, 'toolbar').destroy();\n            }\n            this.refreshSlider();\n            if (type === 'frame') {\n                this.initFrameToolbarItem();\n            }\n            else {\n                this.renderSlider(cType, isSelect);\n            }\n        }\n        if (parent.toolbarTemplate) {\n            this.toolbarHeight = parent.element.querySelector('#' + id + '_toolbarArea').clientHeight;\n        }\n        else if (parent.element.querySelector('#' + id + '_toolbar')) {\n            this.toolbarHeight = parent.element.querySelector('#' + id + '_toolbar').clientHeight;\n        }\n        parent.toolbarHeight = this.toolbarHeight;\n        if (Browser.isDevice) {\n            var cHt = contextualToolbarArea.offsetHeight + 1;\n            var cusWrapper = parent.element.querySelector('#' + id + '_customizeWrapper');\n            if (this.isFrameToolbar && cusWrapper) {\n                cHt = cusWrapper.offsetHeight + 2;\n            }\n            var ht = parent.element.querySelector('#' + id + '_canvasWrapper').offsetHeight;\n            contextualToolbarArea.style.top = this.toolbarHeight + 1 + ht - cHt + 'px';\n            if (cType === 'straighten') {\n                parent.isStraightening = true;\n                var ctxToolbar = parent.element.querySelector('#' + id + '_contextualToolbarArea');\n                if (ctxToolbar.style.position === 'absolute') {\n                    ctxToolbar.style.position = '';\n                    parent.element.insertBefore(ctxToolbar, parent.element.querySelector('#' + id + '_bottomToolbarArea'));\n                    parent.update();\n                    if (isSelect) {\n                        parent.notify('draw', { prop: 'select', onPropertyChange: false,\n                            value: { type: this.getCropTextContent(document.getElementById(id + '_cropBtn')).toLowerCase(),\n                                startX: null, startY: null, width: null, height: null } });\n                    }\n                }\n            }\n        }\n        else {\n            contextualToolbarArea.style.top = this.toolbarHeight + 1 + 'px';\n        }\n    };\n    ToolbarModule.prototype.processToolbar = function (position) {\n        var parent = this.parent;\n        var toolbarItems = [];\n        if (parent.toolbar) {\n            for (var i = 0, len = parent.toolbar.length; i < len; i++) {\n                if (typeof (parent.toolbar[i]) === 'object') {\n                    if (isNullOrUndefined(parent.toolbar[i].align)) {\n                        if (position === 'left') {\n                            toolbarItems.push(parent.toolbar[i]);\n                        }\n                    }\n                    else if (parent.toolbar[i].align.toLowerCase() === position) {\n                        toolbarItems.push(parent.toolbar[i]);\n                    }\n                }\n            }\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.processSubToolbar = function (items) {\n        var toolbarItems = [];\n        if (items) {\n            for (var i = 0, len = items.length; i < len; i++) {\n                if (typeof (items[i]) === 'object') {\n                    items[i].align = 'Center';\n                    toolbarItems.push(items[i]);\n                }\n            }\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.wireZoomBtnEvents = function () {\n        var zoomIn = document.querySelector('#' + this.parent.element.id + '_zoomIn');\n        var zoomOut = document.querySelector('#' + this.parent.element.id + '_zoomOut');\n        if (zoomIn) {\n            zoomIn.addEventListener('mousedown', this.zoomInBtnMouseDownHandler.bind(this));\n            zoomIn.addEventListener('mouseup', this.zoomBtnMouseUpHandler.bind(this));\n            zoomIn.addEventListener('click', this.zoomInBtnClickHandler.bind(this));\n        }\n        if (zoomOut) {\n            zoomOut.addEventListener('mousedown', this.zoomOutBtnMouseDownHandler.bind(this));\n            zoomOut.addEventListener('mouseup', this.zoomBtnMouseUpHandler.bind(this));\n            zoomOut.addEventListener('click', this.zoomOutBtnClickHandler.bind(this));\n        }\n    };\n    ToolbarModule.prototype.widthPress = function (e) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        if (e.keyCode === 109) {\n            e.preventDefault();\n            return;\n        }\n    };\n    ToolbarModule.prototype.heightPress = function (e) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        if (e.keyCode === 109) {\n            e.preventDefault();\n            return;\n        }\n    };\n    ToolbarModule.prototype.widthAspectRatio = function (e) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        if (e.keyCode === 109 || e.keyCode === 9) {\n            return;\n        }\n        var parent = this.parent;\n        var id = parent.element.id;\n        var aspectRatioHeight = parent.element.querySelector('#' + id + '_resizeHeight');\n        var aspectRatioWidth = parent.element.querySelector('#' + id + '_resizeWidth');\n        var icon = parent.element.querySelector('#' + id + '_aspectratio');\n        var originalWidth = parent.img.destWidth;\n        var originalHeight = parent.img.destHeight;\n        var aspectRatioHeightValue = parseFloat(aspectRatioHeight.value);\n        var val = aspectRatioHeightValue / (originalHeight / originalWidth);\n        var width = val % 1 >= 0.5 || val % 1 <= -0.5 ? Math.round(val) : (val < 0) ? Math.ceil(val) : Math.floor(val);\n        var widthNumeric = getComponent(aspectRatioWidth, 'numerictextbox');\n        var heightNumeric = getComponent(aspectRatioWidth, 'numerictextbox');\n        if (icon) {\n            if (width != null && !isNaN(width)) {\n                if (isNullOrUndefined((widthNumeric).value)) {\n                    (widthNumeric).placeholder = width + ' px';\n                    aspectRatioWidth.placeholder = width.toString() + ' px';\n                }\n                else {\n                    (widthNumeric).value = width;\n                    aspectRatioWidth.value = width.toString() + ' px';\n                }\n            }\n            else {\n                if (isNullOrUndefined((widthNumeric).value)) {\n                    (widthNumeric).placeholder = '0 px';\n                    aspectRatioWidth.placeholder = '0 px';\n                    if (isNullOrUndefined(heightNumeric.value) && !isNullOrUndefined(heightNumeric.placeholder)) {\n                        (widthNumeric).placeholder = \"\" + parent.img.srcWidth;\n                        aspectRatioWidth.placeholder = \"\" + parent.img.srcWidth;\n                    }\n                }\n                else {\n                    (widthNumeric).value = 0;\n                    aspectRatioWidth.value = '0 px';\n                }\n            }\n        }\n    };\n    ToolbarModule.prototype.heightAspectRatio = function (e) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        if (e.keyCode === 109 || e.keyCode === 9) {\n            return;\n        }\n        var parent = this.parent;\n        var id = parent.element.id;\n        var aspectRatioHeight = parent.element.querySelector('#' + id + '_resizeHeight');\n        var aspectRatioWidth = parent.element.querySelector('#' + id + '_resizeWidth');\n        var icon = parent.element.querySelector('#' + id + '_aspectratio');\n        var originalWidth = parent.img.destWidth;\n        var originalHeight = parent.img.destHeight;\n        var aspectRatioWidthValue = parseFloat(aspectRatioWidth.value);\n        var value = aspectRatioWidthValue / (originalWidth / originalHeight);\n        var ht = value % 1 >= 0.5 || value % 1 <= -0.5 ? Math.round(value) : (value < 0) ? Math.ceil(value) : Math.floor(value);\n        var heightNumeric = getComponent(aspectRatioHeight, 'numerictextbox');\n        var widthNumeric = getComponent(aspectRatioWidth, 'numerictextbox');\n        if (icon) {\n            if (!isNaN(ht)) {\n                if (isNullOrUndefined((heightNumeric).value)) {\n                    (heightNumeric).placeholder = ht + ' px';\n                    aspectRatioHeight.placeholder = ht.toString() + ' px';\n                }\n                else {\n                    (heightNumeric).value = ht;\n                    aspectRatioHeight.value = ht.toString() + ' px';\n                }\n            }\n            else {\n                if (isNullOrUndefined((heightNumeric).value)) {\n                    (heightNumeric).placeholder = '0 px';\n                    aspectRatioHeight.placeholder = '0 px';\n                    if (isNullOrUndefined(widthNumeric.value) && !isNullOrUndefined(widthNumeric.placeholder)) {\n                        (heightNumeric).placeholder = \"\" + parent.img.srcHeight;\n                        aspectRatioHeight.placeholder = \"\" + parent.img.srcHeight;\n                    }\n                }\n                else {\n                    (heightNumeric).value = 0;\n                    aspectRatioHeight.value = '0 px';\n                }\n            }\n        }\n    };\n    ToolbarModule.prototype.getResizeToolbarItem = function () {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var isResize = parent.aspectWidth && parent.aspectHeight ? true : false;\n        var width = this.parent.transform.degree % 90 === 0 && this.parent.transform.degree % 180 !== 0 ?\n            Math.ceil(this.parent.img.srcHeight).toString() : Math.ceil(this.parent.img.srcWidth).toString();\n        var height = this.parent.transform.degree % 90 === 0 && this.parent.transform.degree % 180 !== 0 ?\n            Math.ceil(this.parent.img.srcWidth).toString() : Math.ceil(this.parent.img.srcHeight).toString();\n        var toolbarItems = [];\n        var spanWidth = document.createElement('span');\n        spanWidth.innerHTML = this.l10n.getConstant('W');\n        toolbarItems.push({ id: id + '_width', cssClass: 'e-ie-resize-width', template: spanWidth, align: 'Center' });\n        toolbarItems.push({ id: id + '_resizeWidth', prefixIcon: 'e-icons e-anti-clock-wise',\n            tooltipText: this.l10n.getConstant('Width'), align: 'Center', type: 'Input', template: new NumericTextBox({ width: 75, htmlAttributes: { maxLength: '4' },\n                showSpinButton: false, value: isResize ? parent.aspectWidth : null,\n                placeholder: isResize ? null : width, format: '###.## px' })\n        });\n        var spanHeight = document.createElement('span');\n        spanHeight.innerHTML = this.l10n.getConstant('H');\n        toolbarItems.push({ id: id + '_height', cssClass: 'e-ie-resize-height', template: spanHeight, align: 'Center' });\n        toolbarItems.push({ id: id + '_resizeHeight', prefixIcon: 'e-icons e-clock-wise',\n            tooltipText: this.l10n.getConstant('Height'), align: 'Center', type: 'Input', template: new NumericTextBox({ width: 75, htmlAttributes: { maxLength: '4' },\n                showSpinButton: false, value: isResize ? parent.aspectHeight : null,\n                placeholder: isResize ? null : height, format: '###.## px' })\n        });\n        if (!this.isAspectRatio) {\n            toolbarItems.push({ id: id + '_aspectratio', prefixIcon: 'e-icons e-lock', align: 'Center',\n                tooltipText: this.l10n.getConstant('AspectRatio'), type: 'Button', tabIndex: 0 });\n            this.isAspectRatio = true;\n        }\n        else {\n            toolbarItems.push({ id: id + '_nonaspectratio', prefixIcon: 'e-icons e-unlock', align: 'Center', tooltipText: this.l10n.getConstant('AspectRatio'), type: 'Button' });\n            this.isAspectRatio = false;\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right', tabIndex: 0 });\n            toolbarItems.push({ id: id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.initResizeToolbar = function () {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        var leftItem = this.getLeftToolbarItem(false, true);\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getResizeToolbarItem();\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var args = { toolbarType: 'resize', toolbarItems: this.defToolbarItems };\n        parent.trigger('toolbarUpdating', args);\n        this.defToolbarItems = args.toolbarItems;\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.wireResizeBtnEvents();\n                parent.trigger('toolbarCreated', { toolbarType: 'shapes' });\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(id + '_bottomToolbar')))) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(id + '_toolbar')))) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + id + '_toolbar');\n        }\n        parent.isResize = false;\n        this.enableDisableTbrBtn();\n        parent.isResize = true;\n        parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n    };\n    ToolbarModule.prototype.wireResizeBtnEvents = function () {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var aspectRatioHeight = parent.element.querySelector('#' + id + '_resizeHeight');\n        var aspectRatioWidth = parent.element.querySelector('#' + id + '_resizeWidth');\n        if (!isNullOrUndefined(aspectRatioHeight)) {\n            aspectRatioHeight.addEventListener('keydown', this.widthPress.bind(this));\n            aspectRatioWidth.addEventListener('keyup', this.heightAspectRatio.bind(this));\n        }\n        if (!isNullOrUndefined(aspectRatioWidth)) {\n            aspectRatioWidth.addEventListener('keydown', this.heightPress.bind(this));\n            aspectRatioHeight.addEventListener('keyup', this.widthAspectRatio.bind(this));\n        }\n    };\n    ToolbarModule.prototype.enableDisableTbrBtn = function () {\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (!this.preventEnableDisableUr) {\n            var object = { appliedUndoRedoColl: [] };\n            parent.notify('undo-redo', { prop: 'getAppliedUndoRedoColl', value: { obj: object } });\n            var undoRedoObj = { undoRedoStep: null };\n            parent.notify('undo-redo', { prop: 'getUndoRedoStep', value: { obj: undoRedoObj } });\n            var undo = parent.element.querySelector('#' + id + '_undo');\n            if (undo && undoRedoObj['undoRedoStep'] === 0) {\n                undo.classList.add('e-disabled');\n                undo.parentElement.classList.add('e-overlay');\n            }\n            else if (undo && undoRedoObj['undoRedoStep'] > 0) {\n                undo.classList.remove('e-disabled');\n                undo.parentElement.classList.remove('e-overlay');\n            }\n            var redo = parent.element.querySelector('#' + id + '_redo');\n            if (redo && (undoRedoObj['undoRedoStep'] === object['appliedUndoRedoColl'].length)) {\n                redo.classList.add('e-disabled');\n                redo.parentElement.classList.add('e-overlay');\n            }\n            else if (redo && (undoRedoObj['undoRedoStep'] === 0 && object['appliedUndoRedoColl'].length > 0)) {\n                redo.classList.remove('e-disabled');\n                redo.parentElement.classList.remove('e-overlay');\n            }\n            else if (redo && undoRedoObj['undoRedoStep'] > 0) {\n                redo.classList.remove('e-disabled');\n                redo.parentElement.classList.remove('e-overlay');\n            }\n        }\n        var zoomIn = document.querySelector('#' + id + '_zoomIn');\n        if (zoomIn && parent.zoomSettings.zoomFactor >= parent.zoomSettings.maxZoomFactor) {\n            zoomIn.classList.add('e-disabled');\n            zoomIn.parentElement.classList.add('e-overlay');\n        }\n        else if (zoomIn) {\n            zoomIn.classList.remove('e-disabled');\n            zoomIn.parentElement.classList.remove('e-overlay');\n        }\n        var zoomOut = document.querySelector('#' + id + '_zoomOut');\n        if (zoomOut && parent.zoomSettings.zoomFactor <= parent.zoomSettings.minZoomFactor) {\n            zoomOut.classList.add('e-disabled');\n            zoomOut.parentElement.classList.add('e-overlay');\n        }\n        else if (zoomOut) {\n            zoomOut.classList.remove('e-disabled');\n            zoomOut.parentElement.classList.remove('e-overlay');\n        }\n        var frame = document.querySelector('#' + id + '_frame');\n        if (frame && ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop)) {\n            frame.classList.add('e-overlay');\n        }\n        else if (frame) {\n            frame.classList.remove('e-overlay');\n        }\n        var ratio = document.querySelector('#' + id + '_aspectratio');\n        if (ratio && ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop)) {\n            ratio.classList.add('e-overlay');\n        }\n        else if (ratio) {\n            ratio.classList.remove('e-overlay');\n        }\n    };\n    ToolbarModule.prototype.createLeftToolbarControls = function () {\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (this.defToolbarItems !== undefined && this.defToolbarItems.length > 0 &&\n            (document.getElementById(id + '_toolbar'))) {\n            var uploadDiv = document.getElementById(id + '_toolbar')\n                .querySelector('.e-image-upload');\n            if (uploadDiv) {\n                var uploadElem = uploadDiv.getElementsByTagName('input')[0];\n                var uploadBtnElem = uploadDiv.getElementsByTagName('button')[0];\n                uploadBtnElem.className = 'e-tbar-btn e-tbtn-txt top-icon';\n                uploadBtnElem.innerHTML = '';\n                uploadBtnElem.title = this.l10n.getConstant('Browse');\n                uploadBtnElem.appendChild(parent.createElement('span', {\n                    className: 'e-btn-icon e-icons e-upload-icon e-icon-left'\n                }));\n                uploadElem.onchange = this.fileSelect.bind(this, uploadElem);\n            }\n        }\n    };\n    ToolbarModule.prototype.fileSelect = function (inputElement, args) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var type = inputElement.files[0].type.split('/')[1];\n        var filesTypes = ['png', 'jpg', 'jpeg', 'svg', 'svg+xml'];\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        this.fileName = inputElement.files[0].name.split('.')[0];\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        this.parent.notify('toolbar', { prop: 'setInitialSize', value: { value: inputElement.files[0].size } });\n        if (filesTypes.indexOf(type) > -1) {\n            this.parent.notify('draw', { prop: 'fileSelect', value: { inputElement: inputElement, args: args } });\n        }\n        else {\n            this.parent.showDialogPopup();\n        }\n    };\n    ToolbarModule.prototype.triggerTbarClickEvent = function (args) {\n        var clickEvent = { item: args.item, originalEvent: args.event };\n        this.parent.trigger('toolbarItemClicked', clickEvent);\n    };\n    ToolbarModule.prototype.renderAnnotationBtn = function (isContextualToolbar) {\n        var _this = this;\n        var parent = this.parent;\n        var isCustomized = false;\n        var items = [];\n        var id = parent.element.id;\n        var defItems = ['Ellipse', 'Arrow', 'Line', 'Rectangle', 'Pen', 'Path', 'Text', 'Image'];\n        if (parent.toolbar) {\n            for (var i = 0; i < defItems.length; i++) {\n                if (parent.toolbar.indexOf(defItems[i]) !== -1) {\n                    isCustomized = true;\n                    break;\n                }\n            }\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Pen') > -1)) {\n            items.push({ text: this.l10n.getConstant('Pen'), id: 'pen', iconCss: 'e-icons e-free-pen' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Line') > -1)) {\n            items.push({ text: this.l10n.getConstant('Line'), id: 'line', iconCss: 'e-icons e-line' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Rectangle') > -1)) {\n            items.push({ text: this.l10n.getConstant('Rectangle'), id: 'rectangle', iconCss: 'e-icons e-rectangle' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Ellipse') > -1)) {\n            items.push({ text: this.l10n.getConstant('Ellipse'), id: 'ellipse', iconCss: 'e-icons e-circle' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Arrow') > -1)) {\n            items.push({ text: this.l10n.getConstant('Arrow'), id: 'arrow', iconCss: 'e-icons e-arrow-right-up' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Path') > -1)) {\n            items.push({ text: this.l10n.getConstant('Path'), id: 'path', iconCss: 'e-icons e-critical-path' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Text') > -1)) {\n            items.push({ text: this.l10n.getConstant('Text'), id: 'text', iconCss: 'e-icons e-add-text' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Image') > -1)) {\n            items.push({ text: this.l10n.getConstant('Image'), id: 'image', iconCss: 'e-icons e-image' });\n        }\n        var obj = { freehandDrawSelectedId: null };\n        parent.notify('freehand-draw', { prop: 'getFreehandDrawSelectedId', onPropertyChange: false, value: { obj: obj } });\n        var toolbarId = Browser.isDevice ? '#' + id + '_bottomToolbar ' + '#' + id : '#' + id;\n        this.enableDisableCloneBtn(toolbarId, obj);\n        var iconCss = isContextualToolbar ? this.getCurrentShapeIcon(parent.activeObj.shape) : 'e-annotation';\n        var drpDownBtn = new DropDownButton({ items: items, iconCss: 'e-icons ' + iconCss,\n            cssClass: 'e-image-popup',\n            open: function (args) {\n                if (parent.currObjType.isFiltered || parent.currObjType.isRedact) {\n                    parent.okBtn();\n                    parent.element.querySelector('#' + id + '_annotationBtn').click();\n                }\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                if (parent.activeObj.shape) {\n                    document.getElementById(parent.activeObj.shape).classList.add('e-selected');\n                }\n                else if (parent.togglePen) {\n                    document.getElementById('pen').classList.add('e-selected');\n                }\n            },\n            select: function (args) {\n                parent.noPushUndo = false;\n                _this.triggerTbarClickEvent(args);\n                parent.okBtn();\n                var isCropSelection = false;\n                var splitWords;\n                if (parent.activeObj.shape !== undefined) {\n                    splitWords = parent.activeObj.shape.split('-');\n                }\n                if (splitWords === undefined && parent.currObjType.isCustomCrop) {\n                    isCropSelection = true;\n                }\n                else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                    isCropSelection = true;\n                }\n                parent.currObjType.isCustomCrop = false;\n                if (isCropSelection || parent.togglePan) {\n                    parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                    _this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                    _this.refreshToolbar('main');\n                }\n                var obj = { currentFreehandDrawIndex: null };\n                parent.notify('freehand-draw', { prop: 'getCurrentFreehandDrawIndex', value: { obj: obj } });\n                var prevObj = { shapeSettingsObj: {} };\n                var shapeSettings;\n                var shapeChangingArgs;\n                var shapes = ['ellipse', 'rectangle', 'text', 'image'];\n                var allowOutofBound;\n                drpDownBtn.iconCss = 'e-icons ' + _this.getCurrentShapeIcon(args.item.id);\n                parent.notify('draw', { prop: 'updateTempObjColl' });\n                parent.notify('draw', { prop: 'updateTempPointColl' });\n                var penStrokeWidthObj = { penStrokeWidth: 2 };\n                switch (args.item.id) {\n                    case 'pen':\n                        parent.notify('freehand-draw', { prop: 'getPenStrokeWidth', onPropertyChange: false, value: { obj: penStrokeWidthObj } });\n                        parent.notify('draw', { prop: 'setTempStrokeWidth', value: { strokeWidth: penStrokeWidthObj['penStrokeWidth'] } });\n                        parent.drawingShape = null;\n                        parent.notify('draw', { prop: 'setTempFreehandCounter', value: { tempFreehandCounter: parent.freehandCounter } });\n                        parent.notify('draw', { prop: 'setTempCurrentFreehandDrawIndex', value: { tempCurrentFreehandDrawIndex: obj['currentFreehandDrawIndex'] } });\n                        _this.currentToolbar = 'pen';\n                        parent.freeHandDraw(true);\n                        parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: prevObj } });\n                        shapeSettings = prevObj['shapeSettingsObj'];\n                        parent.notify('freehand-draw', { prop: 'getPenStrokeWidth', onPropertyChange: false, value: { obj: penStrokeWidthObj } });\n                        shapeSettings.strokeWidth = penStrokeWidthObj['penStrokeWidth'];\n                        shapeSettings.type = ShapeType.FreehandDraw;\n                        shapeChangingArgs = { cancel: false, action: 'insert', previousShapeSettings: shapeSettings,\n                            currentShapeSettings: shapeSettings };\n                        parent.notify('freehand-draw', { prop: 'triggerShapeChanging', value: { shapeChangingArgs: shapeChangingArgs } });\n                        break;\n                    case 'text':\n                        _this.currentToolbar = 'text';\n                        parent.drawingShape = args.item.id;\n                        _this.currentToolbar = 'text';\n                        _this.setInitialShapeSettings(args);\n                        parent.notify('selection', { prop: 'annotate', value: { shape: args.item.id } });\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'text',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        break;\n                    case 'image':\n                        parent.drawingShape = null;\n                        _this.currentToolbar = 'shapes';\n                        parent.element.querySelector('#' + id + '_fileUpload').click();\n                        break;\n                    case 'ellipse':\n                    case 'arrow':\n                    case 'line':\n                    case 'rectangle':\n                    case 'path':\n                        parent.drawingShape = args.item.id;\n                        _this.currentToolbar = 'shapes';\n                        _this.setInitialShapeSettings(args);\n                        parent.notify('selection', { prop: 'annotate', value: { shape: args.item.id } });\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: prevObj } });\n                        shapeSettings = prevObj['shapeSettingsObj'];\n                        allowOutofBound = shapes.indexOf(_this.parent.activeObj.shape) !== -1 ? false : true;\n                        shapeChangingArgs = { cancel: false, action: 'insert', previousShapeSettings: shapeSettings,\n                            currentShapeSettings: shapeSettings, allowShapeOverflow: allowOutofBound };\n                        parent.trigger('shapeChanging', shapeChangingArgs);\n                        parent.editCompleteArgs = shapeChangingArgs;\n                        parent.notify('shape', { prop: 'updateShapeChangeEventArgs', value: { shapeSettings: shapeChangingArgs.currentShapeSettings } });\n                        break;\n                }\n                _this.updateToolbarItems();\n                var tempTogglePen = parent.togglePen;\n                if (args.item.id === 'pen') {\n                    parent.togglePen = false;\n                }\n                parent.notify('draw', { prop: 'redrawDownScale' });\n                parent.togglePen = tempTogglePen;\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + id + '_annotationBtn');\n    };\n    ToolbarModule.prototype.enableDisableCloneBtn = function (toolbarId, obj) {\n        var parent = this.parent;\n        var isDummyTextClick = false;\n        if (parent.activeObj.shape && parent.activeObj.shape === 'text' &&\n            parent.activeObj.textSettings.fontSize === 11 && Math.floor(parent.activeObj.activePoint.width) === 55 &&\n            Math.floor(parent.activeObj.activePoint.height) === 11) {\n            isDummyTextClick = true;\n        }\n        var duplicateElement = document.querySelector(toolbarId + '_duplicate');\n        var removeElement = document.querySelector(toolbarId + '_remove');\n        var editTextElement = document.querySelector(toolbarId + '_editText');\n        var zOrderElement = document.querySelector(toolbarId + '_zOrderBtn');\n        if (isDummyTextClick || (parent.activeObj.activePoint.width === 0 && parent.activeObj.activePoint.height === 0) &&\n            (isNullOrUndefined(parent.activeObj.pointColl) || (parent.activeObj.pointColl\n                && parent.activeObj.pointColl.length === 0)) &&\n            isNullOrUndefined(obj['freehandDrawSelectedId'])) {\n            if (duplicateElement) {\n                duplicateElement.classList.add('e-overlay');\n            }\n            if (removeElement) {\n                removeElement.classList.add('e-overlay');\n            }\n            if (editTextElement) {\n                editTextElement.classList.add('e-overlay');\n            }\n            if (zOrderElement) {\n                zOrderElement.classList.add('e-overlay');\n            }\n        }\n        else {\n            if (duplicateElement) {\n                duplicateElement.classList.remove('e-overlay');\n            }\n            if (removeElement) {\n                removeElement.classList.remove('e-overlay');\n            }\n            if (editTextElement) {\n                editTextElement.classList.remove('e-overlay');\n            }\n            if (zOrderElement) {\n                zOrderElement.classList.remove('e-overlay');\n            }\n        }\n        if (zOrderElement && (parent.shapeColl.length === 0 || (obj['freehandDrawSelectedId'] && parent.shapeColl.length === 1))) {\n            zOrderElement.classList.add('e-overlay');\n        }\n    };\n    ToolbarModule.prototype.renderStraightenSlider = function () {\n        var parent = this.parent;\n        var id = parent.element.id;\n        if ((isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Straightening') > -1)) &&\n            parent.element.querySelector('#' + id + '_straightenSlider')) {\n            var slider = this.createSlider(-45, 45, parent.cropObj.straighten, 'straighten');\n            slider.appendTo('#' + id + '_straightenSlider');\n            var sliderHandle = slider.element.querySelector('.e-handle');\n            if (sliderHandle && !Browser.isDevice) {\n                sliderHandle.addEventListener('mousedown', function (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                });\n                sliderHandle.addEventListener('touchstart', function (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                });\n            }\n        }\n    };\n    ToolbarModule.prototype.renderCropBtn = function (shapeString) {\n        var _this = this;\n        var parent = this.parent;\n        var items = [];\n        var isCustomized = false;\n        var defItems = ['CustomSelection', 'CircleSelection', 'SquareSelection', 'RatioSelection'];\n        if (parent.toolbar) {\n            for (var i = 0; i < defItems.length; i++) {\n                if (parent.toolbar.indexOf(defItems[i]) !== -1) {\n                    isCustomized = true;\n                    break;\n                }\n            }\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('CustomSelection') > -1)) {\n            items.push({ text: this.l10n.getConstant('Custom'), id: 'custom', iconCss: 'e-icons e-custom' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('CircleSelection') > -1)) {\n            items.push({ text: this.l10n.getConstant('Circle'), id: 'circle', iconCss: 'e-icons e-circle' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('SquareSelection') > -1)) {\n            items.push({ text: this.l10n.getConstant('Square'), id: 'square', iconCss: 'e-icons e-square' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('RatioSelection') > -1)) {\n            items.push({ text: '2:3', id: '2:3', iconCss: 'e-icons e-custom-f' });\n            items.push({ text: '3:2', id: '3:2', iconCss: 'e-icons e-custom-a' });\n            items.push({ text: '3:4', id: '3:4', iconCss: 'e-icons e-custom-g' });\n            items.push({ text: '4:3', id: '4:3', iconCss: 'e-icons e-custom-b' });\n            items.push({ text: '4:5', id: '4:5', iconCss: 'e-icons e-custom-h' });\n            items.push({ text: '5:4', id: '5:4', iconCss: 'e-icons e-custom-c' });\n            items.push({ text: '5:7', id: '5:7', iconCss: 'e-icons e-custom-i' });\n            items.push({ text: '7:5', id: '7:5', iconCss: 'e-icons e-custom-d' });\n            items.push({ text: '9:16', id: '9:16', iconCss: 'e-icons e-custom-j' });\n            items.push({ text: '16:9', id: '16:9', iconCss: 'e-icons e-custom-e' });\n        }\n        var iconCss;\n        var shape;\n        if (shapeString) {\n            iconCss = this.getCurrentShapeIcon(shapeString);\n            shape = shapeString;\n        }\n        else if (parent.activeObj.shape &&\n            (parent.activeObj.activePoint.width !== 0 || parent.activeObj.activePoint.height !== 0) ||\n            (parent.activeObj.shape === 'path' && parent.activeObj.pointColl.length > 0)) {\n            iconCss = this.getCurrentShapeIcon(parent.activeObj.shape);\n            shape = parent.activeObj.shape;\n        }\n        else if (parent.currSelectionPoint) {\n            iconCss = this.getCurrentShapeIcon(parent.currSelectionPoint.shape);\n            shape = parent.currSelectionPoint.shape;\n        }\n        else {\n            iconCss = items[0].iconCss;\n            shape = items[0].id;\n        }\n        var drpDownBtn = new DropDownButton({\n            open: function (args) {\n                if (parent.togglePan) {\n                    _this.cancelPan();\n                }\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                if (parent.activeObj.shape && parent.activeObj.shape.split('-').length > 1) {\n                    var elem = document.getElementById(parent.activeObj.shape.split('-')[1]);\n                    if (elem) {\n                        elem.classList.add('e-selected');\n                        elem.focus();\n                    }\n                }\n                parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n            },\n            items: items,\n            select: function (args) {\n                _this.triggerTbarClickEvent(args);\n                _this.cropSelect(args);\n                drpDownBtn.iconCss = 'e-icons ' + _this.getCurrentShapeIcon('crop-' + args.item.id);\n                drpDownBtn.content = Browser.isDevice ? null : parent.toPascalCase(args.item.id);\n            },\n            iconCss: 'e-icons ' + iconCss, cssClass: 'e-image-popup e-ie-crop-ddb-popup',\n            content: Browser.isDevice ? null : parent.toPascalCase(shape.replace('crop-', ''))\n        });\n        drpDownBtn.appendTo('#' + parent.element.id + '_cropBtn');\n    };\n    ToolbarModule.prototype.renderTransformBtn = function () {\n        var _this = this;\n        var parent = this.parent;\n        var items = [];\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('RotateLeft') > -1)) {\n            items.push({ text: this.l10n.getConstant('RotateLeft'), id: 'rotateleft', iconCss: 'e-icons e-anti-clock-wise' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('RotateRight') > -1)) {\n            items.push({ text: this.l10n.getConstant('RotateRight'), id: 'rotateright', iconCss: 'e-icons e-clock-wise' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('FlipHorizontal') > -1)) {\n            items.push({ text: this.l10n.getConstant('HorizontalFlip'), id: 'horizontalflip', iconCss: 'e-icons e-horizontal-flip' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('FlipVertical') > -1)) {\n            items.push({ text: this.l10n.getConstant('VerticalFlip'), id: 'verticalflip', iconCss: 'e-icons e-vertical-flip' });\n        }\n        var drpDownBtn = new DropDownButton({\n            open: function (args) {\n                if (Browser.isDevice) {\n                    var elem = args.element.parentElement;\n                    var ht = elem.offsetHeight;\n                    elem.style.display = 'none';\n                    elem.style.top = drpDownBtn.element.getBoundingClientRect().top - ht + 'px';\n                    elem.style.display = 'block';\n                }\n            },\n            items: items,\n            select: function (args) {\n                _this.triggerTbarClickEvent(args);\n                parent.transformSelect.bind(_this);\n            },\n            iconCss: 'e-icons e-transform', cssClass: 'e-image-popup'\n        });\n        drpDownBtn.appendTo('#' + parent.element.id + '_transformBtn');\n    };\n    ToolbarModule.prototype.saveDialogPopup = function () {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        var quality = ['Good', 'Great', 'Highest'];\n        parent.element.appendChild(parent.createElement('div', { id: id + '_saveDialog' }));\n        var dialogContent = parent.createElement('div', {\n            id: id + '_dialogContent', attrs: { style: 'display: flex;' }\n        });\n        var dialogImgContent = dialogContent.appendChild(parent.createElement('div', {\n            id: id + '_dialogImgContent', className: 'e-ie-dlg-img-content'\n        }));\n        dialogImgContent.appendChild(parent.createElement('canvas', {\n            id: id + '_imgPic', className: 'e-ie-img-dlg-canvas'\n        }));\n        var imageNameContainer = dialogImgContent.appendChild(parent.createElement('div', {\n            id: id + '_imageNameContainer', className: 'e-ie-img-size'\n        }));\n        imageNameContainer.appendChild(parent.createElement('span', {\n            id: id + '_imageNameLabel', className: 'e-ie-quality-info'\n        }));\n        var dialogRightContent = dialogContent.appendChild(parent.createElement('div', {\n            id: id + '_dialogRightContent', className: 'e-ie-dlg-right-content'\n        }));\n        var imageNameDiv = dialogRightContent.appendChild(parent.createElement('div', {\n            id: id + '_namediv', className: 'e-ie-img-save-name'\n        }));\n        imageNameDiv.appendChild(parent.createElement('span', {\n            id: id + '_labelImgname', className: 'e-ie-img-label-name', innerHTML: this.l10n.getConstant('ImageName')\n        }));\n        imageNameDiv.appendChild(parent.createElement('input', {\n            id: id + '_imgNametext', className: 'e-ie-img-input', attrs: { type: 'text' }\n        }));\n        var formatNameDiv = dialogRightContent.appendChild(parent.createElement('div', {\n            id: id + '_imgNamediv', className: 'e-ie-img-save-dlg'\n        }));\n        formatNameDiv.appendChild(parent.createElement('span', {\n            id: id + '_labelname', className: 'e-ie-img-label-name', innerHTML: this.l10n.getConstant('Format')\n        }));\n        formatNameDiv.appendChild(parent.createElement('button', {\n            id: id + '_saveDropdownbtn', attrs: { tabindex: '1' }\n        }));\n        var qualityNameDiv = dialogRightContent.appendChild(parent.createElement('div', {\n            id: id + '_imgQualitydiv', className: 'e-ie-img-quality-name'\n        }));\n        var qualityDiv = parent.createElement('div', {\n            id: id + '_qualityContainer'\n        });\n        qualityDiv.appendChild(parent.createElement('span', {\n            id: id + '_qualityLabel', className: 'e-ie-img-quality-label',\n            innerHTML: this.l10n.getConstant('Quality')\n        }));\n        qualityDiv.appendChild(parent.createElement('span', {\n            id: id + '_qualityInfo', className: 'e-circle-info e-icons e-ie-quality-span',\n            attrs: { title: this.l10n.getConstant('QualityInfo') }\n        }));\n        var qualityValueElem = qualityDiv.appendChild(parent.createElement('div', {\n            id: id + '_imgsizeSpan',\n            className: 'e-ie-img-size-value-span'\n        }));\n        qualityValueElem.appendChild(parent.createElement('span', {\n            id: id + '_imgsizeValueSpan', className: ''\n        }));\n        qualityNameDiv.appendChild(qualityDiv);\n        var qualityOptionDiv = parent.createElement('div', {\n            id: id + '_qualityOptionContainer', className: 'e-ie-quality-option-container'\n        });\n        var buttonGroup = qualityNameDiv.appendChild(parent.createElement('div', {\n            id: id + '_qualityButtonGroup', className: 'e-btn-group'\n        }));\n        // eslint-disable-next-line @typescript-eslint/tslint/config\n        quality.forEach(function (option) {\n            var input = document.createElement('input');\n            input.type = 'radio';\n            input.id = id + '_' + option.toLowerCase();\n            input.name = 'quality';\n            input.value = option.toLowerCase();\n            var label = document.createElement('label');\n            label.className = 'e-btn';\n            label.htmlFor = option.toLowerCase();\n            label.textContent = _this.l10n.getConstant(option);\n            buttonGroup.appendChild(input);\n            buttonGroup.appendChild(label);\n        });\n        qualityOptionDiv.appendChild(buttonGroup);\n        qualityOptionDiv.appendChild(parent.createElement('div', {\n            id: id + '_qualitySlider', className: 'e-ie-img-quality-slider'\n        }));\n        qualityOptionDiv.appendChild(parent.createElement('button', { id: id + '_qualitybuttonIcon', className: 'e-ie-img-icon-button', attrs: { type: 'button' } }));\n        qualityNameDiv.appendChild(qualityOptionDiv);\n        if (Browser.isDevice) {\n            dialogRightContent.appendChild(parent.createElement('span', {\n                id: id + '_qualitySize', className: 'e-ie-img-quality-size'\n            }));\n        }\n        parent.element.querySelector('#' + id + '_saveDialog').style.display = 'block';\n        parent.element.appendChild(dialogContent);\n        var dialog = new Dialog({\n            target: parent.element,\n            header: this.l10n.getConstant('SaveAs'),\n            closeOnEscape: true, content: document.getElementById(id + '_dialogContent'),\n            width: Browser.isDevice ? '345px' : '570px', isModal: true, animationSettings: { effect: 'Zoom' }, beforeOpen: this.onBeforeopen(),\n            close: this.saveDialogClosed.bind(this, id),\n            cssClass: 'e-ie-save-dialog',\n            buttons: [\n                {\n                    'click': function () {\n                        dialog.hide();\n                    },\n                    buttonModel: {\n                        content: this.l10n.getConstant('Close'), cssClass: 'e-save-cancel-btn'\n                    }\n                },\n                {\n                    'click': function () {\n                        _this.download();\n                        dialog.hide();\n                        _this.isSlider = false;\n                    },\n                    buttonModel: {\n                        isPrimary: true, content: this.l10n.getConstant('Download'), cssClass: 'e-flat e-save-download-btn'\n                    }\n                }\n            ]\n        });\n        dialog.appendTo('#' + id + '_saveDialog');\n    };\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    ToolbarModule.prototype.saveDialogClosed = function (id) {\n        if (getComponent(document.getElementById(id + '_saveDropdownbtn'), 'dropdownbutton')) {\n            getComponent(document.getElementById(id + '_saveDropdownbtn'), 'dropdownbutton').destroy();\n        }\n        this.isSlider = false;\n        if (document.querySelector('#' + id + '_qualityButtonGroup') &&\n            document.querySelector('#' + id + '_qualitySlider')) {\n            document.querySelector('#' + id + '_qualityButtonGroup').remove();\n            document.querySelector('#' + id + '_qualitySlider').remove();\n            document.querySelector('#' + id + '_imgsizeValueSpan').remove();\n            document.querySelector('#' + id + '_imageNameLabel').remove();\n            document.querySelector('#' + id + '_imgsizeSpan').remove();\n        }\n        document.getElementById(id + '_dialogContent').remove();\n        getComponent(document.getElementById(id + '_saveDialog'), 'dialog').destroy();\n        document.getElementById(id + '_saveDialog').remove();\n    };\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    ToolbarModule.prototype.onBeforeopen = function () {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        var obj = { canvas: null };\n        var items = [\n            { id: 'jpeg', text: 'JPEG' },\n            { id: 'png', text: 'PNG' },\n            { id: 'svg', text: 'SVG' }\n        ];\n        var inputObj = new TextBox({\n            placeholder: this.l10n.getConstant('ImageName')\n        });\n        inputObj.appendTo('#' + id + '_imgNametext');\n        var qualityContainer = document.getElementById(id + '_imgQualitydiv');\n        var slider = document.getElementById(id + '_qualitySlider');\n        var qualityBtnGrp = document.querySelector('#' + id + '_qualityButtonGroup');\n        var qualityBtnIcon = document.querySelector('#' + id + '_qualitybuttonIcon');\n        var qualitySliderValue = document.querySelector('#' + id + '_imgsizeSpan');\n        var imageNameLabel;\n        if (Browser.isDevice) {\n            imageNameLabel = document.getElementById(id + '_qualitySize');\n        }\n        else {\n            imageNameLabel = document.getElementById(id + '_imageNameLabel');\n        }\n        var fileObj = { fileName: '', fileType: '' };\n        parent.notify('draw', { prop: 'getFileName', onPropertyChange: false, value: { obj: fileObj } });\n        this.fileType = fileObj['fileType'] ? fileObj['fileType'] : 'JPEG';\n        parent.notify('export', { prop: 'exportToCanvas', value: { object: obj } });\n        var tempCanvas = obj['canvas'];\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var canvas = document.getElementById(id + '_imgPic');\n        canvas.width = tempCanvas.width;\n        canvas.height = tempCanvas.height;\n        var buttonIcon = new Button({ iconCss: 'e-icons e-settings' });\n        buttonIcon.appendTo('#' + id + '_qualitybuttonIcon');\n        var ddbElem = document.getElementById(id + '_saveDropdownbtn');\n        if (ddbElem) {\n            var spanElem_1 = document.createElement('span');\n            spanElem_1.innerHTML = this.fileType.toUpperCase();\n            if (ddbElem) {\n                ddbElem.appendChild(spanElem_1);\n            }\n            var drpDownBtn_1 = new DropDownButton({\n                items: items,\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = drpDownBtn_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    var activeBtn = spanElem_1.innerHTML;\n                    if (activeBtn !== '') {\n                        args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                    }\n                },\n                select: function (args) {\n                    qualitySliderValue.style.display = 'none';\n                    _this.fileType = spanElem_1.innerHTML = args.item.text;\n                    if (args.item.id !== 'jpeg') {\n                        qualityContainer.style.display = 'none';\n                        imageNameLabel.style.display = 'block';\n                        _this.updateImageSize(1, obj['canvas'], _this.fileType);\n                        if (slider) {\n                            if (_this.isSlider) {\n                                getComponent(slider, 'slider').destroy();\n                            }\n                            slider.style.display = 'none';\n                        }\n                        _this.isSlider = false;\n                    }\n                    else {\n                        qualityContainer.style.display = 'block';\n                        removeClass([qualityBtnGrp], 'e-hide');\n                        slider.style.display = 'none';\n                        imageNameLabel.style.display = 'block';\n                        _this.updateImageSize(isNullOrUndefined(_this.currentQuality) ? 1 : _this.currentQuality, obj['canvas'], _this.fileType);\n                        document.getElementById(id + '_' + _this.imageQuality).checked = true;\n                    }\n                }\n            });\n            drpDownBtn_1.appendTo('#' + id + '_saveDropdownbtn');\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var imgName = document.getElementById(id + '_imgNametext');\n            imgName.value = this.fileName ? this.fileName : fileObj['fileName'];\n            if (fileObj['fileType'] && fileObj['fileType'].toUpperCase() !== 'JPEG') {\n                qualityContainer.style.display = 'none';\n                qualitySliderValue.style.display = 'none';\n            }\n            if (Browser.isDevice) {\n                document.getElementById(id + '_dialogImgContent').style.display = 'none';\n                document.getElementById(id + '_dialogRightContent').style.width = '100%';\n                this.updateImageSize(1, obj['canvas'], this.fileType);\n            }\n            else {\n                this.updateImageSize(1, obj['canvas'], this.fileType);\n            }\n        }\n        document.getElementById(id + '_' + this.imageQuality).checked = true;\n        qualityBtnGrp.addEventListener('click', this.qualityBtnClickHandler.bind(this));\n        qualityBtnIcon.addEventListener('click', this.qualityBtnClickHandler.bind(this));\n    };\n    ToolbarModule.prototype.qualityBtnClickHandler = function (event) {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        var target = event.target;\n        var fileObj = { fileName: '' };\n        var obj = { canvas: null };\n        var compressionValues = {\n            'Good': 0.8,\n            'Great': 0.9,\n            'Highest': 1\n        };\n        var qualityBtnGrp = document.querySelector('#' + id + '_qualityButtonGroup');\n        var qualitySlider = document.querySelector('#' + id + '_qualitySlider');\n        var qualityOption = document.querySelector('#' + id + '_qualityOptionContainer');\n        var qualitySliderValueDiv = document.querySelector('#' + id + '_imgsizeSpan');\n        var qualitySliderValueSpan = document.querySelector('#' + id + '_imgsizeValueSpan');\n        parent.notify('draw', { prop: 'getFileName', onPropertyChange: false, value: { obj: fileObj } });\n        parent.notify('export', { prop: 'exportToCanvas', value: { object: obj } });\n        if (event.currentTarget.id === id + '_qualitybuttonIcon' && !this.isSlider) {\n            addClass([qualityBtnGrp], 'e-hide');\n            qualitySlider.style.display = 'block';\n            qualitySliderValueDiv.style.display = 'inline-block';\n            qualityOption.style.display = 'flex';\n            var sliderObj = new Slider({\n                tooltip: { placement: 'Before', isVisible: true, format: 'P0', showOn: 'Focus' },\n                min: 0.01, max: 1, step: 0.01, value: this.currentQuality,\n                type: 'MinRange',\n                width: Browser.isDevice ? '80%' : '190px',\n                created: function () {\n                    _this.updateImageSize(_this.currentQuality, obj['canvas'], 'jpeg');\n                    qualitySliderValueSpan.innerHTML = (Math.round(_this.currentQuality * 100)).toString();\n                },\n                changed: function (args) {\n                    _this.currentQuality = args.value;\n                    qualitySliderValueSpan.innerHTML = (Math.round(_this.currentQuality * 100)).toString();\n                    parent.notify('export', { prop: 'setImageQuality', value: { value: args.value } });\n                    _this.updateImageSize(args.value, obj['canvas'], 'jpeg');\n                }\n            });\n            sliderObj.appendTo('#' + id + '_qualitySlider');\n            sliderObj.element.parentElement.classList.add('e-ie-quality-slider');\n            this.isSlider = true;\n        }\n        else if (event.currentTarget.id === id + '_qualitybuttonIcon' && this.isSlider) {\n            getComponent(qualitySlider, 'slider').destroy();\n            qualitySlider.style.display = 'none';\n            qualitySliderValueDiv.style.display = 'none';\n            removeClass([qualityBtnGrp], 'e-hide');\n            qualityOption.style.display = 'block';\n            this.isSlider = false;\n            // eslint-disable-next-line no-prototype-builtins\n        }\n        else if (compressionValues.hasOwnProperty(target.textContent) && !this.isSlider) {\n            event.target.previousElementSibling.checked = true;\n            this.currentQuality = compressionValues[target.textContent];\n            this.imageQuality = target.textContent.toLowerCase();\n            this.updateImageSize(compressionValues[target.textContent], obj['canvas'], 'jpeg');\n        }\n    };\n    ToolbarModule.prototype.updateImageSize = function (quality, tempCanvas, fileType) {\n        var fileSize;\n        var parent = this.parent;\n        var id = parent.element.id;\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var canvas = document.getElementById(id + '_imgPic');\n        var ctx = canvas.getContext('2d');\n        var imageNameLabel;\n        if (Browser.isDevice) {\n            imageNameLabel = document.getElementById(id + '_qualitySize');\n        }\n        else {\n            imageNameLabel = document.getElementById(id + '_imageNameLabel');\n        }\n        if (fileType.toLowerCase() === 'jpeg') {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            tempCanvas.toBlob((function (blob) {\n                fileSize = Math.floor(blob.size / 1024);\n                if (fileSize > 1000) {\n                    var megabytes = fileSize / 1024;\n                    imageNameLabel.innerHTML = this.l10n.getConstant('ImageSize') + ': ' + megabytes.toFixed(2) + ' MB';\n                    fileSize = +megabytes.toFixed(2);\n                }\n                else {\n                    imageNameLabel.innerHTML = this.l10n.getConstant('ImageSize') + ': ' + fileSize.toFixed(2) + ' KB';\n                    fileSize = +fileSize.toFixed(2);\n                }\n                if (Browser.isDevice) {\n                    canvas.style.display = 'none';\n                }\n                else {\n                    var compressedImage_1 = new Image();\n                    compressedImage_1.src = URL.createObjectURL(blob);\n                    // eslint-disable-next-line @typescript-eslint/tslint/config\n                    compressedImage_1.onload = function () {\n                        ctx.drawImage(compressedImage_1, 0, 0);\n                        URL.revokeObjectURL(compressedImage_1.src);\n                    };\n                }\n                this.fileSize = fileSize;\n            }).bind(this), 'image/jpeg', quality);\n        }\n        else if (!isNullOrUndefined(fileType) && fileType.toLowerCase() === 'png') {\n            ctx.drawImage(tempCanvas, 0, 0);\n            tempCanvas.toBlob((function (blob) {\n                fileSize = Math.floor(blob.size / 1024);\n                if (fileSize > 1000) {\n                    var megabytes = fileSize / 1024;\n                    imageNameLabel.innerHTML = this.l10n.getConstant('ImageSize') + ': ' + megabytes.toFixed(2) + ' MB';\n                    fileSize = +megabytes.toFixed(2);\n                }\n                else {\n                    imageNameLabel.innerHTML = this.l10n.getConstant('ImageSize') + ': ' + fileSize.toFixed(2) + ' KB';\n                    fileSize = +fileSize.toFixed(2);\n                }\n                if (Browser.isDevice) {\n                    canvas.style.display = 'none';\n                }\n                this.fileSize = fileSize;\n            }).bind(this), 'image/png', 1);\n        }\n        else if (!isNullOrUndefined(fileType) && fileType.toLowerCase() === 'svg') {\n            ctx.drawImage(tempCanvas, 0, 0);\n            var svgDataUrl = tempCanvas.toDataURL('image/svg+xml');\n            var base64Data = svgDataUrl.split(',')[1];\n            var binaryStringLength = base64Data.length;\n            var rawByteSize = binaryStringLength;\n            var fileSize_1 = Math.floor(rawByteSize / 1024); // KB\n            if (fileSize_1 > 1000) {\n                var megabytes = fileSize_1 / 1024; // Convert to MB\n                imageNameLabel.innerHTML = this.l10n.getConstant('ImageSize') + ': ' + megabytes.toFixed(2) + ' MB';\n                fileSize_1 = +megabytes.toFixed(2);\n            }\n            else {\n                imageNameLabel.innerHTML = this.l10n.getConstant('ImageSize') + ': ' + fileSize_1.toFixed(2) + ' KB';\n                fileSize_1 = +fileSize_1.toFixed(2);\n            }\n            if (Browser.isDevice) {\n                canvas.style.display = 'none';\n            }\n            this.fileSize = fileSize_1;\n        }\n        else {\n            if (Browser.isDevice) {\n                canvas.style.display = 'none';\n            }\n            else {\n                ctx.drawImage(tempCanvas, 0, 0);\n                if (this.initialSize > 1000) {\n                    var megabytes = this.initialSize / 1048576;\n                    imageNameLabel.innerHTML = this.l10n.getConstant('ImageSize') + ': ' + megabytes.toFixed(2) + ' MB';\n                }\n                else {\n                    imageNameLabel.innerHTML = this.l10n.getConstant('ImageSize') + ': ' + this.initialSize.toFixed(2) + ' KB';\n                }\n            }\n        }\n    };\n    ToolbarModule.prototype.download = function () {\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (this.fileType === 'JPEG' && this.isSlider) {\n            var value = getComponent(document.getElementById(id + '_qualitySlider'), 'slider').value;\n            parent.notify('export', { prop: 'setImageQuality', value: { value: value } });\n        }\n        else {\n            parent.notify('export', { prop: 'setImageQuality', value: { value: this.currentQuality } });\n        }\n        var fileName = document.getElementById(id + '_imgNametext').value;\n        parent.export(this.fileType, fileName);\n    };\n    ToolbarModule.prototype.getCropTransformToolbarItem = function () {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var toolbarItems = [];\n        toolbarItems.push({ id: id + '_crop', tooltipText: this.l10n.getConstant('CropSelection'), align: 'Center',\n            template: '<button id=\"' + id + '_cropBtn\"></button>'\n        });\n        toolbarItems.push({ align: 'Center', type: 'Separator' });\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && (parent.toolbar.indexOf('Transform') > -1 || parent.toolbar.indexOf('RotateLeft') > -1))) {\n            toolbarItems.push({ id: id + '_rotateLeft', prefixIcon: 'e-icons e-anti-clock-wise', tooltipText: this.l10n.getConstant('RotateLeft'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && (parent.toolbar.indexOf('Transform') > -1 || parent.toolbar.indexOf('RotateRight') > -1))) {\n            toolbarItems.push({ id: id + '_rotateRight', prefixIcon: 'e-icons e-clock-wise', tooltipText: this.l10n.getConstant('RotateRight'), align: 'Center' });\n        }\n        if (toolbarItems.length > 2) {\n            toolbarItems.push({ align: 'Center', type: 'Separator' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && (parent.toolbar.indexOf('Transform') > -1 || parent.toolbar.indexOf('HorizontalFlip') > -1))) {\n            toolbarItems.push({ id: id + '_horizontalFlip', prefixIcon: 'e-icons e-horizontal-flip', tooltipText: this.l10n.getConstant('HorizontalFlip'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && (parent.toolbar.indexOf('Transform') > -1 || parent.toolbar.indexOf('VerticalFlip') > -1))) {\n            toolbarItems.push({ id: id + '_verticalFlip', prefixIcon: 'e-icons e-vertical-flip', tooltipText: this.l10n.getConstant('VerticalFlip'), align: 'Center' });\n        }\n        if ((isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Straightening') > -1)) && !Browser.isDevice) {\n            toolbarItems.push({ align: 'Center', type: 'Separator' });\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && (parent.toolbar.indexOf('Straighten') > -1 || parent.toolbar.indexOf('Straighten') > -1))) {\n                var spanWidth = document.createElement('span');\n                spanWidth.innerHTML = this.l10n.getConstant('Straighten');\n                toolbarItems.push({ id: id + '_straightenSpan', cssClass: 'e-ie-straighten-span', template: spanWidth, align: 'Center' });\n                toolbarItems.push({ id: id + '_straighten',\n                    cssClass: 'top-icon e-straighten', tooltipText: this.l10n.getConstant('Straighten'), align: 'Center', type: 'Input',\n                    template: '<div id=\"' + id + '_straightenSlider\"></div>' });\n                var straightenSpan = document.createElement('span');\n                straightenSpan.innerHTML = parent.transform.straighten.toString() + '&#176';\n                toolbarItems.push({ id: id + '_straightenSpan', cssClass: 'e-ie-straighten-value-span',\n                    template: straightenSpan, align: 'Center' });\n            }\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right', tabIndex: 0 });\n            toolbarItems.push({ id: id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getShapesToolbarItem = function (items) {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var toolbarItems = [];\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar)) {\n            toolbarItems.push({ id: id + '_annotation', tooltipText: this.l10n.getConstant('Annotation'), align: 'Center',\n                template: '<button id=\"' + id + '_annotationBtn\"></button>' });\n        }\n        if (items.indexOf('fillColor') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: id + '_fillcolor',\n                cssClass: 'top-icon e-fill', tooltipText: this.l10n.getConstant('FillColor'), align: 'Center', type: 'Input',\n                template: '<button id=\"' + id + '_fillColorBtn\"></button>' });\n        }\n        if (items.indexOf('strokeColor') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: id + '_strokecolor',\n                cssClass: 'top-icon e-stroke', tooltipText: this.l10n.getConstant('StrokeColor'), align: 'Center', type: 'Input',\n                template: '<button id=\"' + id + '_borderColorBtn\"></button>' });\n        }\n        if (items.indexOf('strokeWidth') > -1) {\n            toolbarItems.push({ id: id + '_strokeWidth', cssClass: 'top-icon e-size', tooltipText: this.l10n.getConstant('StrokeWidth'), align: 'Center',\n                type: 'Input', template: '<button id=\"' + id + '_borderWidthBtn\"></button>' });\n        }\n        if (items.indexOf('start') > -1) {\n            toolbarItems.push({ id: id + '_start', cssClass: 'top-icon e-size', tooltipText: this.l10n.getConstant('Start'), align: 'Center',\n                type: 'Input', template: '<button id=\"' + id + '_startBtn\"></button>' });\n        }\n        if (items.indexOf('borderRadius') > -1) {\n            toolbarItems.push({ id: id + '_rectangleRadius', cssClass: 'top-icon e-size', tooltipText: this.l10n.getConstant('BorderRadius'), align: 'Center',\n                type: 'Input', template: '<button id=\"' + id + '_rectangleRadiusBtn\"></button>' });\n        }\n        if (items.indexOf('end') > -1) {\n            toolbarItems.push({ id: id + '_end', cssClass: 'top-icon e-size', tooltipText: this.l10n.getConstant('End'), align: 'Center',\n                type: 'Input', template: '<button id=\"' + id + '_endBtn\"></button>' });\n        }\n        if (items.indexOf('flip') > -1) {\n            toolbarItems.push({ id: id + '_rotLeft', prefixIcon: 'e-anti-clock-wise',\n                tooltipText: this.l10n.getConstant('RotateLeft'), align: 'Center' });\n            toolbarItems.push({ id: id + '_rotRight', prefixIcon: 'e-clock-wise',\n                tooltipText: this.l10n.getConstant('RotateRight'), align: 'Center' });\n            toolbarItems.push({ id: id + '_hFlip', prefixIcon: 'e-horizontal-flip',\n                tooltipText: this.l10n.getConstant('HorizontalFlip'), align: 'Center' });\n            toolbarItems.push({ id: id + '_vFlip', prefixIcon: 'e-vertical-flip',\n                tooltipText: this.l10n.getConstant('VerticalFlip'), align: 'Center' });\n        }\n        if (items.indexOf('transparency') > -1) {\n            toolbarItems.push({ align: 'Center', type: 'Separator' });\n            toolbarItems.push({ id: id + '_transparency', prefixIcon: 'e-opacity',\n                tooltipText: this.l10n.getConstant('Opacity'), align: 'Center' });\n        }\n        toolbarItems.push({ align: 'Center', type: 'Separator' });\n        if (items.indexOf('z-order') > -1) {\n            toolbarItems.push({ id: id + '_zOrder', cssClass: 'top-icon e-list-unordered-3', tooltipText: this.l10n.getConstant('ZOrder'), align: 'Center',\n                type: 'Input', template: '<button id=\"' + id + '_zOrderBtn\"></button>' });\n        }\n        if (items.indexOf('duplicate') > -1) {\n            toolbarItems.push({ id: id + '_duplicate', prefixIcon: 'e-icons e-order', cssClass: 'top-icon e-order',\n                tooltipText: this.l10n.getConstant('Duplicate'), align: 'Center' });\n        }\n        if (items.indexOf('remove') > -1) {\n            toolbarItems.push({ id: id + '_remove', prefixIcon: 'e-icons e-trash', cssClass: 'top-icon e-trash',\n                tooltipText: this.l10n.getConstant('Remove'), align: 'Center' });\n        }\n        if (items.indexOf('text') > -1) {\n            toolbarItems.push({ id: id + '_editText', prefixIcon: 'e-icons e-annotation-edit', cssClass: 'top-icon e-annotation-edit',\n                tooltipText: this.l10n.getConstant('EditText'), align: 'Center' });\n        }\n        var tempToolbarItems = this.processSubToolbar(items);\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            var obj = { shape: null };\n            parent.notify('selection', { prop: 'getCurrentDrawingShape', value: { obj: obj } });\n            if (obj['shape'] !== 'path') {\n                toolbarItems.push({ id: id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                    tooltipText: this.l10n.getConstant('OK'), align: 'Right', tabIndex: 0 });\n                toolbarItems.push({ id: id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                    tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n            }\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.initCropTransformToolbar = function (shape, isTransform) {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        var leftItem = this.getLeftToolbarItem();\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getCropTransformToolbarItem();\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var args = { toolbarType: 'crop-transform', toolbarItems: this.defToolbarItems };\n        parent.trigger('toolbarUpdating', args);\n        this.defToolbarItems = args.toolbarItems;\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.renderCropBtn(shape);\n                _this.renderStraightenSlider();\n                _this.wireZoomBtnEvents();\n                parent.trigger('toolbarCreated', { toolbarType: 'shapes' });\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n                if (document.getElementById(id + '_cropBtn') && isNullOrUndefined(isTransform)) {\n                    if (!Browser.isDevice) {\n                        parent.notify('draw', { prop: 'select', onPropertyChange: false,\n                            value: { type: _this.getCropTextContent(document.getElementById(id + '_cropBtn')).toLowerCase(),\n                                startX: null, startY: null, width: null, height: null } });\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + id + '_toolbar');\n        }\n        var slider = parent.element.querySelector('#' + id + '_straightenSlider');\n        if ((isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Straightening') > -1))\n            && slider && slider.parentElement.clientHeight > this.toolbarHeight) {\n            this.toolbarHeight = parent.toolbarHeight = slider.parentElement.clientHeight;\n        }\n        this.enableDisableTbrBtn();\n        parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n    };\n    ToolbarModule.prototype.getCropTextContent = function (elem) {\n        if (elem) {\n            var classToContentMap = { 'e-custom': 'Custom', 'e-circle': 'Circle',\n                'e-square': 'Square', 'e-custom-a': '3:2', 'e-custom-b': '4:3', 'e-custom-c': '5:4', 'e-custom-d': '7:5',\n                'e-custom-e': '16:9', 'e-custom-f': '2:3', 'e-custom-g': '3:4', 'e-custom-h': '4:5', 'e-custom-i': '5:7',\n                'e-custom-j': '9:16'\n            };\n            var classList = elem.children[0].classList;\n            for (var className in classToContentMap) {\n                if (classList.contains(className)) {\n                    return classToContentMap[className];\n                }\n            }\n        }\n        return '';\n    };\n    ToolbarModule.prototype.getCurrentShapeIcon = function (shape) {\n        // eslint-disable-next-line @typescript-eslint/tslint/config\n        var shapeIcons = {\n            rectangle: 'e-rectangle',\n            ellipse: 'e-circle',\n            line: 'e-line',\n            arrow: 'e-arrow-right-up',\n            path: 'e-critical-path',\n            text: 'e-add-text',\n            image: 'e-image',\n            pen: 'e-free-pen',\n            'crop-custom': 'e-custom',\n            'crop-circle': 'e-circle',\n            'crop-square': 'e-square',\n            'crop-3:2': 'e-custom-a',\n            'crop-4:3': 'e-custom-b',\n            'crop-5:4': 'e-custom-c',\n            'crop-7:5': 'e-custom-d',\n            'crop-16:9': 'e-custom-e',\n            'crop-2:3': 'e-custom-f',\n            'crop-3:4': 'e-custom-g',\n            'crop-4:5': 'e-custom-h',\n            'crop-5:7': 'e-custom-i',\n            'crop-9:16': 'e-custom-j'\n        };\n        return shapeIcons[shape] ? shapeIcons[shape] : (shape && shape.indexOf('crop-') !== -1) ? 'e-custom' : 'e-free-pen';\n    };\n    ToolbarModule.prototype.initShapesToolbarItem = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        var leftItem = this.getLeftToolbarItem();\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getShapesToolbarItem(items);\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var args = { toolbarType: parent.activeObj.shape ? parent.activeObj.shape : 'shapes',\n            toolbarItems: this.defToolbarItems };\n        parent.trigger('toolbarUpdating', args);\n        if (this.isToolbarString(args.toolbarItems)) {\n            items = args.toolbarItems;\n            this.excludeItems(args.toolbarItems);\n        }\n        else {\n            this.defToolbarItems = args.toolbarItems;\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.renderAnnotationBtn(true);\n                _this.createRectangleRadius(items);\n                _this.createShapeColor(items);\n                _this.createShapeBtn(items);\n                _this.createZOrderBtn(items);\n                if (parent.activeObj.shape === 'arrow') {\n                    // eslint-disable-next-line @typescript-eslint/tslint/config\n                    if (items.some(function (item) { return item.toLowerCase().indexOf('start') > -1; })) {\n                        _this.createStartBtn();\n                    }\n                    // eslint-disable-next-line @typescript-eslint/tslint/config\n                    if (items.some(function (item) { return item.toLowerCase().indexOf('end') > -1; })) {\n                        _this.createEndBtn();\n                    }\n                }\n                _this.wireZoomBtnEvents();\n                parent.trigger('toolbarCreated', { toolbarType: 'shapes' });\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + id + '_toolbar');\n        }\n        this.enableDisableTbrBtn();\n    };\n    ToolbarModule.prototype.createRectangleRadius = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (items.indexOf('borderRadius') > -1) {\n            var strokeWidthItems = [\n                { id: '1', text: this.l10n.getConstant('0') },\n                { id: '2', text: this.l10n.getConstant('20') },\n                { id: '3', text: this.l10n.getConstant('40') },\n                { id: '4', text: this.l10n.getConstant('60') },\n                { id: '5', text: this.l10n.getConstant('80') },\n                { id: '6', text: this.l10n.getConstant('100') }\n            ];\n            var strokeWidthBtn = document.getElementById(id + '_rectangleRadiusBtn');\n            var spanElem_2 = document.createElement('span');\n            spanElem_2.innerHTML = this.l10n.getConstant(parent.frameObj.radius.toString());\n            spanElem_2.className = 'e-shape-rectangle-radius';\n            strokeWidthBtn.appendChild(spanElem_2);\n            // Initialize the DropDownButton component.\n            var drpDownBtn_2 = new DropDownButton({ items: strokeWidthItems,\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        var parentElem = args.element.parentElement;\n                        parentElem.style.top = drpDownBtn_2.element.getBoundingClientRect().top -\n                            parentElem.offsetHeight + 'px';\n                    }\n                    var activeBtn = drpDownBtn_2.element.childNodes[0].textContent;\n                    if (activeBtn !== '') {\n                        args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                    }\n                },\n                select: function (args) {\n                    _this.triggerTbarClickEvent(args);\n                    spanElem_2.textContent = args.item.text;\n                    parent.updateStrokeWidth(args.item.id, 'radius');\n                    if (Browser.isDevice) {\n                        if (document.getElementById(id + '_bottomToolbar')) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_7 = getComponent(id + '_bottomToolbar', 'toolbar');\n                            toolbar_7.refreshOverflow();\n                        }\n                    }\n                    else {\n                        if (document.getElementById(id + '_toolbar')) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_8 = getComponent(id + '_toolbar', 'toolbar');\n                            toolbar_8.refreshOverflow();\n                        }\n                    }\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                }\n            });\n            // Render initialized DropDownButton.\n            drpDownBtn_2.appendTo('#' + id + '_rectangleRadiusBtn');\n        }\n    };\n    ToolbarModule.prototype.beforeModeSwitch = function (args, inst) {\n        this.popupLeft = args.element.offsetParent.style.left;\n        if (args.mode === 'Picker') {\n            inst.showButtons = true;\n            inst.dataBind();\n            args.element.querySelector('.e-apply').title = this.l10n.getConstant('Apply');\n            args.element.querySelector('.e-cancel').title = this.l10n.getConstant('Cancel');\n            args.element.querySelector('.e-mode-switch-btn').title = this.l10n.getConstant('StandardColors');\n        }\n        else {\n            inst.showButtons = false;\n            inst.dataBind();\n            args.element.querySelector('.e-mode-switch-btn').title = this.l10n.getConstant('MoreColors');\n        }\n    };\n    ToolbarModule.prototype.createShapeColor = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (items.indexOf('fillColor') > -1) {\n            parent.element.querySelector('.e-template.e-fill').appendChild(parent.createElement('input', {\n                id: id + '_shape_fill'\n            }));\n            var fillColor_1 = new ColorPicker({\n                modeSwitcher: true, noColor: true, value: '', inline: true,\n                showButtons: false, mode: 'Palette', cssClass: 'e-shape-fill-color',\n                beforeModeSwitch: function (args) { return _this.beforeModeSwitch(args, fillColor_1); },\n                presetColors: {\n                    'custom': ['', '#f44336', '#e91e63', '#9c27b0', '#673ab7', '#2196f3',\n                        '#03a9f4', '#00bcd4', '#009688', '#ffeb3b', '#ffffff', '#ffebee', '#fce4ec', '#f3e5f5', '#ede7f6', '#e3f2fd',\n                        '#e1f5fe', '#e0f7fa', '#e0f2f1', '#fffde7', '#f2f2f2', '#ffcdd2', '#f8bbd0', '#e1bee7', '#d1c4e9', '#bbdefb',\n                        '#b3e5fc', '#b2ebf2', '#b2dfdb', '#fff9c4', '#e6e6e6', '#ef9a9a', '#f48fb1', '#ce93d8', '#b39ddb', '#90caf9',\n                        '#81d4fa', '#80deea', '#80cbc4', '#fff59d', '#cccccc', '#e57373', '#f06292', '#ba68c8', '#9575cd', '#64b5f6',\n                        '#4fc3f7', '#4dd0e1', '#4db6ac', '#fff176', '#b3b3b3', '#ef5350', '#ec407a', '#ab47bc', '#7e57c2', '#42a5f5',\n                        '#29b6f6', '#26c6da', '#26a69a', '#ffee58', '#999999', '#e53935', '#d81b60', '#8e24aa', '#5e35b1', '#1e88e5',\n                        '#039be5', '#00acc1', '#00897b', '#fdd835', '#808080', '#d32f2f', '#c2185b', '#7b1fa2', '#512da8', '#1976d2',\n                        '#0288d1', '#0097a7', '#00796b', '#fbc02d', '#666666', '#c62828', '#ad1457', '#6a1b9a', '#4527a0', '#1565c0',\n                        '#0277bd', '#00838f', '#00695c', '#f9a825', '#4d4d4d', '#b71c1c', '#880e4f', '#4a148c', '#311b92', '#0d47a1',\n                        '#01579b', '#006064', '#004d40', '#f57f17']\n                },\n                beforeTileRender: function (args) {\n                    if (args.value === '') {\n                        args.element.classList.add('e-nocolor-item');\n                    }\n                },\n                change: function (args) {\n                    parent.updateFillColor(args.value);\n                    if (args.currentValue.rgba === '') {\n                        fillDDB_1.element.children[0].classList.add('e-nocolor-item');\n                    }\n                    else {\n                        fillDDB_1.element.children[0].classList.remove('e-nocolor-item');\n                        fillDDB_1.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    }\n                    fillDDB_1.toggle();\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                },\n                onModeSwitch: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.parentElement.style.left = _this.popupLeft;\n                        args.element.parentElement.parentElement.style.top = (fillDDB_1.element.getBoundingClientRect().top - args.element.parentElement.parentElement.offsetHeight) + 'px';\n                    }\n                },\n                beforeClose: function () {\n                    fillDDB_1.toggle();\n                }\n            }, '#' + id + '_shape_fill');\n            var fillDDB_1 = new DropDownButton({\n                open: function (args) {\n                    var parenElem = args.element.parentElement;\n                    if (Browser.isDevice) {\n                        parenElem.style.top = fillDDB_1.element.getBoundingClientRect().top -\n                            parenElem.offsetHeight + 'px';\n                        if (window.innerWidth <= 520) {\n                            parenElem.style.left = parent.element.offsetLeft + 'px';\n                        }\n                    }\n                },\n                target: '.e-shape-fill-color',\n                iconCss: 'e-dropdownbtn-preview',\n                cssClass: 'e-ie-ddb-popup'\n            }, '#' + id + '_fillColorBtn');\n            fillColor_1.inline = true;\n            fillColor_1.value = fillColor_1.getValue(fillColor_1.value, 'rgba');\n            parent.element.querySelector('.e-fill.e-template .e-dropdownbtn-preview').classList.add('e-nocolor-item');\n        }\n        if (items.indexOf('strokeColor') > -1) {\n            parent.element.querySelector('.e-template.e-stroke').appendChild(parent.createElement('input', {\n                id: id + '_shape_stroke'\n            }));\n            var strokeColor_1 = new ColorPicker({\n                modeSwitcher: true, noColor: false, value: '#fff', inline: true,\n                showButtons: false, mode: 'Palette', cssClass: 'e-shape-stroke-color',\n                beforeModeSwitch: function (args) {\n                    _this.popupLeft = args.element.offsetParent.style.left;\n                    strokeColor_1.value = parent.activeObj.strokeSettings.strokeColor !== '#fff' ? parent.activeObj.strokeSettings.strokeColor : '#008000ff';\n                    _this.beforeModeSwitch(args, strokeColor_1);\n                },\n                presetColors: this.presetColors,\n                change: function (args) {\n                    parent.updateStrokeColor(args.value);\n                    strokeDDB_1.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    strokeDDB_1.toggle();\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                },\n                onModeSwitch: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.parentElement.style.left = _this.popupLeft;\n                        args.element.parentElement.parentElement.style.top = (strokeDDB_1.element.getBoundingClientRect().top - args.element.parentElement.parentElement.offsetHeight) + 'px';\n                    }\n                },\n                beforeClose: function () {\n                    strokeDDB_1.toggle();\n                }\n            }, '#' + id + '_shape_stroke');\n            var strokeDDB_1 = new DropDownButton({\n                open: function (args) {\n                    var parenElem = args.element.parentElement;\n                    if (Browser.isDevice) {\n                        parenElem.style.top = strokeDDB_1.element.getBoundingClientRect().top -\n                            parenElem.offsetHeight + 'px';\n                        if (window.innerWidth <= 520) {\n                            parenElem.style.left = parent.element.offsetLeft + 'px';\n                        }\n                    }\n                },\n                target: '.e-shape-stroke-color',\n                iconCss: 'e-dropdownbtn-preview',\n                cssClass: 'e-ie-ddb-popup'\n            }, '#' + id + '_borderColorBtn');\n            strokeColor_1.inline = true;\n            strokeColor_1.value = strokeColor_1.getValue(strokeColor_1.value, 'rgba');\n            parent.element.querySelector('.e-stroke.e-template .e-dropdownbtn-preview').style.background = '#fff';\n        }\n    };\n    ToolbarModule.prototype.createShapeBtn = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (items.indexOf('strokeWidth') > -1) {\n            var strokeWidthItems = [\n                { id: '1', text: this.l10n.getConstant('XSmall') },\n                { id: '2', text: this.l10n.getConstant('Small') },\n                { id: '3', text: this.l10n.getConstant('Medium') },\n                { id: '4', text: this.l10n.getConstant('Large') },\n                { id: '5', text: this.l10n.getConstant('XLarge') }\n            ];\n            if (parent.activeObj.shape && (parent.activeObj.shape === 'rectangle' || parent.activeObj.shape === 'ellipse')) {\n                strokeWidthItems = [\n                    { id: '1', text: this.l10n.getConstant('NoOutline') },\n                    { id: '2', text: this.l10n.getConstant('XSmall') },\n                    { id: '3', text: this.l10n.getConstant('Small') },\n                    { id: '4', text: this.l10n.getConstant('Medium') },\n                    { id: '5', text: this.l10n.getConstant('Large') },\n                    { id: '6', text: this.l10n.getConstant('XLarge') }\n                ];\n            }\n            var strokeWidthBtn = document.getElementById(id + '_borderWidthBtn');\n            var spanElem_3 = document.createElement('span');\n            spanElem_3.innerHTML = this.l10n.getConstant('XSmall');\n            spanElem_3.className = 'e-shape-stroke-width';\n            strokeWidthBtn.appendChild(spanElem_3);\n            // Initialize the DropDownButton component.\n            var drpDownBtn_3 = new DropDownButton({ items: strokeWidthItems,\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = drpDownBtn_3.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    var activeBtn = spanElem_3.innerHTML;\n                    if (activeBtn !== '') {\n                        args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                    }\n                },\n                select: function (args) {\n                    _this.triggerTbarClickEvent(args);\n                    spanElem_3.textContent = args.item.text;\n                    parent.updateStrokeWidth(args.item.id, 'width', parent.activeObj.shape);\n                    if (Browser.isDevice) {\n                        if (document.getElementById(id + '_bottomToolbar')) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_9 = getComponent(id + '_bottomToolbar', 'toolbar');\n                            toolbar_9.refreshOverflow();\n                        }\n                    }\n                    else {\n                        if (document.getElementById(id + '_toolbar')) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_10 = getComponent(id + '_toolbar', 'toolbar');\n                            toolbar_10.refreshOverflow();\n                        }\n                    }\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                }\n            });\n            // Render initialized DropDownButton.\n            drpDownBtn_3.appendTo('#' + id + '_borderWidthBtn');\n        }\n    };\n    ToolbarModule.prototype.createZOrderBtn = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (items.indexOf('z-order') > -1) {\n            var zOrderItems = [\n                { text: this.l10n.getConstant('BringForward'), id: 'bringForward', iconCss: 'e-icons e-bring-forward' },\n                { text: this.l10n.getConstant('SendBackward'), id: 'sendBackward', iconCss: 'e-icons e-send-backward' },\n                { text: this.l10n.getConstant('BringToFront'), id: 'bringToFront', iconCss: 'e-icons e-bring-to-front' },\n                { text: this.l10n.getConstant('SendToBack'), id: 'sendToBack', iconCss: 'e-icons e-send-to-back' }\n            ];\n            // Initialize the DropDownButton component.\n            var drpDownBtn_4 = new DropDownButton({ items: zOrderItems, iconCss: 'e-icons e-layers',\n                beforeOpen: function (args) {\n                    if (document.getElementById(parent.element.id + '_zOrderBtn').classList.contains('e-disabled')) {\n                        args.cancel = true;\n                    }\n                    var indexObj = { freehandSelectedIndex: -1 };\n                    parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n                    var orderObj = { order: null };\n                    parent.notify('shape', { prop: 'getHighestOrder', onPropertyChange: false, value: { obj: orderObj } });\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    var order = parent.activeObj.order ? parent.activeObj.order : parent.getObjFromId(parent.pointColl[indexObj['freehandSelectedIndex']].id).order;\n                    if (order && order >= orderObj['order']) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        args.items[0].disabled = true;\n                        args.items[2].disabled = true;\n                    }\n                    else {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        args.items[0].disabled = false;\n                        args.items[2].disabled = false;\n                    }\n                    parent.notify('shape', { prop: 'getLowestOrder', onPropertyChange: false, value: { obj: orderObj } });\n                    if (order && order <= orderObj['order']) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        args.items[1].disabled = true;\n                        args.items[3].disabled = true;\n                    }\n                    else {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        args.items[1].disabled = false;\n                        args.items[3].disabled = false;\n                    }\n                },\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = drpDownBtn_4.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                },\n                select: function (args) {\n                    _this.triggerTbarClickEvent(args);\n                    var obj = { freehandDrawSelectedId: null };\n                    parent.notify('freehand-draw', { prop: 'getFreehandDrawSelectedId', onPropertyChange: false, value: { obj: obj } });\n                    var shapeId = obj['freehandDrawSelectedId'] ? obj['freehandDrawSelectedId'] : parent.activeObj.currIndex;\n                    parent.updateShapeOrder(shapeId, args.item.id);\n                    if (Browser.isDevice) {\n                        if (document.getElementById(id + '_bottomToolbar')) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_11 = getComponent(id + '_bottomToolbar', 'toolbar');\n                            toolbar_11.refreshOverflow();\n                        }\n                    }\n                    else {\n                        if (document.getElementById(id + '_toolbar')) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_12 = getComponent(id + '_toolbar', 'toolbar');\n                            toolbar_12.refreshOverflow();\n                        }\n                    }\n                    if (shapeId.indexOf('shape') > -1) {\n                        parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                    }\n                    else if (shapeId.indexOf('pen') > -1) {\n                        parent.notify('undo-redo', { prop: 'updateUndoRedoStack', value: { isPenDraw: true } });\n                    }\n                }\n            });\n            // Render initialized DropDownButton.\n            drpDownBtn_4.appendTo('#' + id + '_zOrderBtn');\n        }\n    };\n    ToolbarModule.prototype.createStartBtn = function () {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('None') },\n            { id: '2', text: this.l10n.getConstant('Bar') },\n            { id: '3', text: this.l10n.getConstant('Arrow') },\n            { id: '4', text: this.l10n.getConstant('ArrowSolid') },\n            { id: '5', text: this.l10n.getConstant('Circle') },\n            { id: '6', text: this.l10n.getConstant('CircleSolid') },\n            { id: '7', text: this.l10n.getConstant('Square') },\n            { id: '8', text: this.l10n.getConstant('SquareSolid') }\n        ];\n        var strokeWidthBtn = document.getElementById(id + '_startBtn');\n        var spanElem = document.createElement('span');\n        if (isNullOrUndefined(parent.activeObj.start)) {\n            parent.activeObj.start = 'none';\n        }\n        spanElem.innerHTML = parent.pascalToSplitWords(parent.activeObj.start);\n        spanElem.className = 'e-shape-start';\n        strokeWidthBtn.appendChild(spanElem);\n        // Initialize the DropDownButton component.\n        var drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n            open: function (args) {\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                var activeBtn = spanElem.innerHTML;\n                if (activeBtn !== '') {\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                }\n            },\n            select: function (args) {\n                var idToValue = { '1': 'none', '2': 'bar', '3': 'arrow', '4': 'arrowSolid',\n                    '5': 'circle', '6': 'circleSolid', '7': 'square', '8': 'squareSolid' };\n                parent.notify('selection', { prop: 'setArrowShape', value: { type: 'initial', shape: idToValue[\"\" + args.item.id] } });\n                _this.triggerTbarClickEvent(args);\n                spanElem.textContent = args.item.text;\n                parent.updateArrow('startArrow', args.item.id);\n                parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + id + '_startBtn');\n    };\n    ToolbarModule.prototype.createEndBtn = function () {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('None') },\n            { id: '2', text: this.l10n.getConstant('Bar') },\n            { id: '3', text: this.l10n.getConstant('Arrow') },\n            { id: '4', text: this.l10n.getConstant('ArrowSolid') },\n            { id: '5', text: this.l10n.getConstant('Circle') },\n            { id: '6', text: this.l10n.getConstant('CircleSolid') },\n            { id: '7', text: this.l10n.getConstant('Square') },\n            { id: '8', text: this.l10n.getConstant('SquareSolid') }\n        ];\n        var strokeEndBtn = document.getElementById(id + '_endBtn');\n        var spanElem = document.createElement('span');\n        if (isNullOrUndefined(parent.activeObj.end)) {\n            parent.activeObj.end = 'arrowSolid';\n        }\n        spanElem.innerHTML = parent.pascalToSplitWords(parent.activeObj.end);\n        spanElem.className = 'e-shape-end';\n        strokeEndBtn.appendChild(spanElem);\n        // Initialize the DropDownButton component.\n        var drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n            open: function (args) {\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                var activeBtn = spanElem.innerHTML;\n                if (activeBtn !== '') {\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                }\n            },\n            select: function (args) {\n                var idToValue = { '1': 'none', '2': 'bar', '3': 'arrow', '4': 'arrowSolid',\n                    '5': 'circle', '6': 'circleSolid', '7': 'square', '8': 'squareSolid' };\n                parent.notify('selection', { prop: 'setArrowShape', value: { type: 'final', shape: idToValue[\"\" + args.item.id] } });\n                _this.triggerTbarClickEvent(args);\n                spanElem.textContent = args.item.text;\n                parent.updateArrow('endArrow', args.item.id);\n                parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + id + '_endBtn');\n    };\n    ToolbarModule.prototype.getTextToolbarItem = function (items) {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var toolbarItems = [];\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar)) {\n            toolbarItems.push({ id: id + '_annotation', tooltipText: this.l10n.getConstant('Annotation'), align: 'Center',\n                template: '<button id=\"' + id + '_annotationBtn\"></button>' });\n        }\n        if (items.indexOf('fontFamily') > -1) {\n            toolbarItems.push({ id: id + '_fontFamily', cssClass: 'top-icon e-img-font-family',\n                tooltipText: this.l10n.getConstant('FontFamily'), align: 'Center',\n                template: '<button id=\"' + id + '_fontFamilyBtn\"></button>' });\n        }\n        if (items.indexOf('fontSize') > -1) {\n            toolbarItems.push({ id: id + '_fontSize', cssClass: 'top-icon e-img-font-size',\n                tooltipText: this.l10n.getConstant('FontSize'), align: 'Center',\n                template: '<button id=\"' + id + '_fontSizeBtn\"></button>' });\n        }\n        if (items.indexOf('fontColor') > -1) {\n            toolbarItems.push({ cssClass: 'top-icon e-text-font-color', id: id + '_text_strokecolor',\n                tooltipText: this.l10n.getConstant('FontColor'), align: 'Center',\n                type: 'Input', template: '<button id=\"' + id + '_fontColorBtn\"></button>' });\n        }\n        if (items.indexOf('strokeColor') > -1) {\n            toolbarItems.push({ cssClass: 'top-icon e-stroke-text-font-color', id: id + '_stroke_text_color',\n                tooltipText: this.l10n.getConstant('TextOutlineColor'), align: 'Center',\n                type: 'Input', template: '<button id=\"' + id + '_strokeTextColorBtn\"></button>' });\n        }\n        if (items.indexOf('fillColor') > -1) {\n            toolbarItems.push({ cssClass: 'top-icon e-text-background-color', id: id + '_text_backgroundcolor',\n                tooltipText: this.l10n.getConstant('FillColor'), align: 'Center',\n                type: 'Input', template: '<button id=\"' + id + '_bgColorBtn\"></button>'\n            });\n        }\n        if (items.indexOf('bold') > -1) {\n            toolbarItems.push({ id: id + '_bold', prefixIcon: 'e-icons e-bold', cssClass: 'top-icon e-bold',\n                tooltipText: this.l10n.getConstant('Bold'), align: 'Center' });\n        }\n        if (items.indexOf('italic') > -1) {\n            toolbarItems.push({ id: id + '_italic', prefixIcon: 'e-icons e-italic', cssClass: 'top-icon e-italic',\n                tooltipText: this.l10n.getConstant('Italic'), align: 'Center' });\n        }\n        if (items.indexOf('strokeWidth') > -1) {\n            toolbarItems.push({ id: id + '_strokeWidth', cssClass: 'top-icon e-size', tooltipText: this.l10n.getConstant('TextOutlineWidth'), align: 'Center',\n                type: 'Input', template: '<button id=\"' + id + '_borderWidthBtn\"></button>' });\n        }\n        if (items.indexOf('transparency') > -1) {\n            toolbarItems.push({ id: id + '_transparency', prefixIcon: 'e-opacity',\n                tooltipText: this.l10n.getConstant('Opacity'), align: 'Center' });\n        }\n        toolbarItems.push({ align: 'Center', type: 'Separator' });\n        if (items.indexOf('z-order') > -1) {\n            toolbarItems.push({ id: id + '_zOrder', cssClass: 'top-icon e-list-unordered-3', tooltipText: this.l10n.getConstant('ZOrder'), align: 'Center',\n                type: 'Input', template: '<button id=\"' + id + '_zOrderBtn\"></button>' });\n        }\n        if (items.indexOf('duplicate') > -1) {\n            toolbarItems.push({ id: id + '_duplicate', prefixIcon: 'e-icons e-order', cssClass: 'top-icon e-order',\n                tooltipText: this.l10n.getConstant('Duplicate'), align: 'Center', disabled: (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block') ? true : false });\n        }\n        if (items.indexOf('remove') > -1) {\n            toolbarItems.push({ id: id + '_remove', prefixIcon: 'e-icons e-trash', cssClass: 'top-icon e-trash',\n                tooltipText: this.l10n.getConstant('Remove'), align: 'Center', disabled: (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block') ? true : false });\n        }\n        if (items.indexOf('text') > -1) {\n            toolbarItems.push({ id: id + '_editText', prefixIcon: 'e-icons e-annotation-edit', cssClass: 'top-icon e-annotation-edit',\n                tooltipText: this.l10n.getConstant('EditText'), align: 'Center', disabled: (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block') ? true : false });\n        }\n        var tempToolbarItems = this.processSubToolbar(items);\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right', tabIndex: 0 });\n            toolbarItems.push({ id: id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getFontFamilyItems = function () {\n        var parent = this.parent;\n        var items = [];\n        if (parent.fontFamily && parent.fontFamily.items && parent.fontFamily.items.length > 0) {\n            items = parent.fontFamily.items;\n        }\n        else {\n            if (Browser.isDevice) {\n                items = [{ id: 'arial', text: 'ABC' }, { id: 'calibri', text: 'ABC' }, { id: 'georgia', text: 'ABC' },\n                    { id: 'roboto', text: 'ABC' }, { id: 'tahoma', text: 'ABC' }];\n            }\n            else {\n                items = [{ id: 'arial', text: 'Arial' }, { id: 'calibri', text: 'Calibri' }, { id: 'georgia', text: 'Georgia' },\n                    { id: 'roboto', text: 'Roboto' }, { id: 'tahoma', text: 'Tahoma' }];\n            }\n        }\n        return items;\n    };\n    ToolbarModule.prototype.initTextToolbarItem = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        var leftItem = this.getLeftToolbarItem();\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getTextToolbarItem(items);\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var args = { toolbarType: 'text', toolbarItems: this.defToolbarItems };\n        parent.trigger('toolbarUpdating', args);\n        if (this.isToolbarString(args.toolbarItems)) {\n            items = args.toolbarItems;\n            this.excludeItems(args.toolbarItems);\n        }\n        else {\n            this.defToolbarItems = args.toolbarItems;\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.renderAnnotationBtn(true);\n                _this.createTextColor(items);\n                _this.createStrokeTextColor(items);\n                _this.createShapeBtn(items);\n                _this.createBackgroundColor(items);\n                _this.createTextBtn(items);\n                _this.createZOrderBtn(items);\n                _this.wireZoomBtnEvents();\n                parent.trigger('toolbarCreated', { toolbarType: 'text' });\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + id + '_toolbar');\n        }\n        this.enableDisableTbrBtn();\n    };\n    ToolbarModule.prototype.createTextColor = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (items.indexOf('fontColor') > -1 && parent.element.querySelector('.e-template.e-text-font-color')) {\n            parent.element.querySelector('.e-template.e-text-font-color').appendChild(parent.createElement('input', {\n                id: id + '_text_font'\n            }));\n            var fontColor_1 = new ColorPicker({\n                modeSwitcher: true, noColor: false, value: '#fff', inline: true,\n                showButtons: false, mode: 'Palette', cssClass: 'e-text-fontt-color',\n                beforeModeSwitch: function (args) {\n                    _this.popupLeft = args.element.offsetParent.style.left;\n                    fontColor_1.value = parent.activeObj.strokeSettings.strokeColor !== '#fff' ? parent.activeObj.strokeSettings.strokeColor : '#008000ff';\n                    _this.beforeModeSwitch(args, fontColor_1);\n                },\n                presetColors: this.presetColors,\n                change: function (args) {\n                    parent.updateFontColor(args.value, 'Text');\n                    strokeDDB_2.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    strokeDDB_2.toggle();\n                    if (parent.activeObj.activePoint.width !== 0 || parent.activeObj.activePoint.height !== 0) {\n                        parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                    }\n                },\n                onModeSwitch: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.parentElement.style.left = _this.popupLeft;\n                        args.element.parentElement.parentElement.style.top = (strokeDDB_2.element.getBoundingClientRect().top - args.element.parentElement.parentElement.offsetHeight) + 'px';\n                    }\n                },\n                beforeClose: function () {\n                    strokeDDB_2.toggle();\n                }\n            }, '#' + id + '_text_font');\n            var strokeDDB_2 = new DropDownButton({\n                open: function (args) {\n                    var parenElem = args.element.parentElement;\n                    if (Browser.isDevice) {\n                        parenElem.style.top = strokeDDB_2.element.getBoundingClientRect().top -\n                            parenElem.offsetHeight + 'px';\n                        if (window.innerWidth <= 520) {\n                            parenElem.style.left = parent.element.offsetLeft + 'px';\n                        }\n                    }\n                },\n                target: '.e-text-fontt-color',\n                iconCss: 'e-dropdownbtn-preview',\n                cssClass: 'e-ie-ddb-popup'\n            }, '#' + id + '_fontColorBtn');\n            fontColor_1.inline = true;\n            fontColor_1.value = fontColor_1.getValue(fontColor_1.value, 'rgba');\n            parent.element.querySelector('.e-text-font-color.e-template .e-dropdownbtn-preview').style.background\n                = '#fff';\n        }\n    };\n    ToolbarModule.prototype.createBackgroundColor = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (items.indexOf('fillColor') > -1 && parent.element.querySelector('.e-template.e-text-background-color')) {\n            parent.element.querySelector('.e-template.e-text-background-color').appendChild(parent.createElement('input', {\n                id: id + '_text_bgColor'\n            }));\n            var backgroundColor_1 = new ColorPicker({\n                modeSwitcher: true, noColor: true, value: '', inline: true,\n                showButtons: false, mode: 'Palette', cssClass: 'e-text-fontt-color',\n                beforeModeSwitch: function (args) {\n                    _this.popupLeft = args.element.offsetParent.style.left;\n                    _this.beforeModeSwitch(args, backgroundColor_1);\n                },\n                presetColors: {\n                    'custom': ['', '#f44336', '#e91e63', '#9c27b0', '#673ab7', '#2196f3',\n                        '#03a9f4', '#00bcd4', '#009688', '#ffeb3b', '#ffffff', '#ffebee', '#fce4ec', '#f3e5f5', '#ede7f6', '#e3f2fd',\n                        '#e1f5fe', '#e0f7fa', '#e0f2f1', '#fffde7', '#f2f2f2', '#ffcdd2', '#f8bbd0', '#e1bee7', '#d1c4e9', '#bbdefb',\n                        '#b3e5fc', '#b2ebf2', '#b2dfdb', '#fff9c4', '#e6e6e6', '#ef9a9a', '#f48fb1', '#ce93d8', '#b39ddb', '#90caf9',\n                        '#81d4fa', '#80deea', '#80cbc4', '#fff59d', '#cccccc', '#e57373', '#f06292', '#ba68c8', '#9575cd', '#64b5f6',\n                        '#4fc3f7', '#4dd0e1', '#4db6ac', '#fff176', '#b3b3b3', '#ef5350', '#ec407a', '#ab47bc', '#7e57c2', '#42a5f5',\n                        '#29b6f6', '#26c6da', '#26a69a', '#ffee58', '#999999', '#e53935', '#d81b60', '#8e24aa', '#5e35b1', '#1e88e5',\n                        '#039be5', '#00acc1', '#00897b', '#fdd835', '#808080', '#d32f2f', '#c2185b', '#7b1fa2', '#512da8', '#1976d2',\n                        '#0288d1', '#0097a7', '#00796b', '#fbc02d', '#666666', '#c62828', '#ad1457', '#6a1b9a', '#4527a0', '#1565c0',\n                        '#0277bd', '#00838f', '#00695c', '#f9a825', '#4d4d4d', '#b71c1c', '#880e4f', '#4a148c', '#311b92', '#0d47a1',\n                        '#01579b', '#006064', '#004d40', '#f57f17']\n                },\n                beforeTileRender: function (args) {\n                    if (args.value === '') {\n                        args.element.classList.add('e-nocolor-item');\n                    }\n                },\n                change: function (args) {\n                    parent.updateFontColor(args.value, 'Background');\n                    if (args.currentValue.rgba === '') {\n                        strokeDDB_3.element.children[0].classList.add('e-nocolor-item');\n                    }\n                    else {\n                        strokeDDB_3.element.children[0].classList.remove('e-nocolor-item');\n                        strokeDDB_3.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    }\n                    strokeDDB_3.toggle();\n                    if (parent.activeObj.activePoint.width !== 0 || parent.activeObj.activePoint.height !== 0) {\n                        parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                    }\n                },\n                onModeSwitch: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.parentElement.style.left = _this.popupLeft;\n                        args.element.parentElement.parentElement.style.top = (strokeDDB_3.element.getBoundingClientRect().top - args.element.parentElement.parentElement.offsetHeight) + 'px';\n                    }\n                },\n                beforeClose: function () {\n                    strokeDDB_3.toggle();\n                }\n            }, '#' + id + '_text_bgColor');\n            var strokeDDB_3 = new DropDownButton({\n                open: function (args) {\n                    var parenElem = args.element.parentElement;\n                    if (Browser.isDevice) {\n                        parenElem.style.top = strokeDDB_3.element.getBoundingClientRect().top -\n                            parenElem.offsetHeight + 'px';\n                        if (window.innerWidth <= 520) {\n                            parenElem.style.left = parent.element.offsetLeft + 'px';\n                        }\n                    }\n                },\n                target: '.e-text-fontt-color',\n                iconCss: 'e-dropdownbtn-preview',\n                cssClass: 'e-ie-ddb-popup'\n            }, '#' + id + '_bgColorBtn');\n            backgroundColor_1.inline = true;\n            backgroundColor_1.value = backgroundColor_1.getValue(backgroundColor_1.value, 'rgba');\n            parent.element.querySelector('.e-text-background-color.e-template .e-dropdownbtn-preview').style.background\n                = '#fff';\n        }\n    };\n    ToolbarModule.prototype.createStrokeTextColor = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (items.indexOf('strokeColor') > -1 && parent.element.querySelector('.e-template.e-stroke-text-font-color')) {\n            parent.element.querySelector('.e-template.e-stroke-text-font-color').appendChild(parent.createElement('input', {\n                id: id + '_stroke_text'\n            }));\n            var fontColor_2 = new ColorPicker({\n                modeSwitcher: true, noColor: true, value: '', inline: true,\n                showButtons: false, mode: 'Palette', cssClass: 'e-text-fontt-color',\n                beforeModeSwitch: function (args) {\n                    _this.popupLeft = args.element.offsetParent.style.left;\n                    _this.beforeModeSwitch(args, fontColor_2);\n                },\n                presetColors: {\n                    'custom': ['', '#f44336', '#e91e63', '#9c27b0', '#673ab7', '#2196f3',\n                        '#03a9f4', '#00bcd4', '#009688', '#ffeb3b', '#ffffff', '#ffebee', '#fce4ec', '#f3e5f5', '#ede7f6', '#e3f2fd',\n                        '#e1f5fe', '#e0f7fa', '#e0f2f1', '#fffde7', '#f2f2f2', '#ffcdd2', '#f8bbd0', '#e1bee7', '#d1c4e9', '#bbdefb',\n                        '#b3e5fc', '#b2ebf2', '#b2dfdb', '#fff9c4', '#e6e6e6', '#ef9a9a', '#f48fb1', '#ce93d8', '#b39ddb', '#90caf9',\n                        '#81d4fa', '#80deea', '#80cbc4', '#fff59d', '#cccccc', '#e57373', '#f06292', '#ba68c8', '#9575cd', '#64b5f6',\n                        '#4fc3f7', '#4dd0e1', '#4db6ac', '#fff176', '#b3b3b3', '#ef5350', '#ec407a', '#ab47bc', '#7e57c2', '#42a5f5',\n                        '#29b6f6', '#26c6da', '#26a69a', '#ffee58', '#999999', '#e53935', '#d81b60', '#8e24aa', '#5e35b1', '#1e88e5',\n                        '#039be5', '#00acc1', '#00897b', '#fdd835', '#808080', '#d32f2f', '#c2185b', '#7b1fa2', '#512da8', '#1976d2',\n                        '#0288d1', '#0097a7', '#00796b', '#fbc02d', '#666666', '#c62828', '#ad1457', '#6a1b9a', '#4527a0', '#1565c0',\n                        '#0277bd', '#00838f', '#00695c', '#f9a825', '#4d4d4d', '#b71c1c', '#880e4f', '#4a148c', '#311b92', '#0d47a1',\n                        '#01579b', '#006064', '#004d40', '#f57f17']\n                },\n                beforeTileRender: function (args) {\n                    if (args.value === '') {\n                        args.element.classList.add('e-nocolor-item');\n                    }\n                },\n                change: function (args) {\n                    parent.updateStrokeTextColor(args.value);\n                    if (args.currentValue.rgba === '') {\n                        strokeDDB_4.element.children[0].classList.add('e-nocolor-item');\n                    }\n                    else {\n                        strokeDDB_4.element.children[0].classList.remove('e-nocolor-item');\n                        strokeDDB_4.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    }\n                    strokeDDB_4.toggle();\n                    if (parent.activeObj.activePoint.width !== 0 || parent.activeObj.activePoint.height !== 0) {\n                        parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                    }\n                },\n                onModeSwitch: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.parentElement.style.left = _this.popupLeft;\n                        args.element.parentElement.parentElement.style.top = (strokeDDB_4.element.getBoundingClientRect().top - args.element.parentElement.parentElement.offsetHeight) + 'px';\n                    }\n                },\n                beforeClose: function () {\n                    strokeDDB_4.toggle();\n                }\n            }, '#' + id + '_stroke_text');\n            var strokeDDB_4 = new DropDownButton({\n                open: function (args) {\n                    var parenElem = args.element.parentElement;\n                    if (Browser.isDevice) {\n                        parenElem.style.top = strokeDDB_4.element.getBoundingClientRect().top -\n                            parenElem.offsetHeight + 'px';\n                        if (window.innerWidth <= 520) {\n                            parenElem.style.left = parent.element.offsetLeft + 'px';\n                        }\n                    }\n                },\n                target: '.e-text-fontt-color',\n                iconCss: 'e-dropdownbtn-preview',\n                cssClass: 'e-ie-ddb-popup'\n            }, '#' + id + '_strokeTextColorBtn');\n            fontColor_2.inline = true;\n            fontColor_2.value = fontColor_2.getValue(fontColor_2.value, 'rgba');\n            parent.element.querySelector('.e-stroke-text-font-color.e-template .e-dropdownbtn-preview').style.background\n                = '#fff';\n        }\n    };\n    ToolbarModule.prototype.createTextBtn = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (items.indexOf('fontFamily') > -1) {\n            var fontNameBtn = document.getElementById(id + '_fontFamilyBtn');\n            var spanElem_4 = document.createElement('span');\n            if (Browser.isDevice) {\n                spanElem_4.innerHTML = 'ABC';\n                spanElem_4.setAttribute('style', 'font-family: ' + parent.fontFamily.default.toLowerCase() + '\\'');\n            }\n            else {\n                spanElem_4.innerHTML = parent.fontFamily.default;\n            }\n            spanElem_4.className = 'e-text-font-family';\n            if (fontNameBtn) {\n                fontNameBtn.appendChild(spanElem_4);\n            }\n            var fontFamilyBtn_1 = new DropDownButton({ items: this.getFontFamilyItems(),\n                cssClass: 'e-font-family',\n                createPopupOnClick: true,\n                beforeItemRender: function (args) {\n                    args.element.setAttribute('style', 'font-family:' + args.element.id);\n                },\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = fontFamilyBtn_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    var fontFamily;\n                    if (parent.textArea.style.display === 'block' || parent.textArea.style.display === 'inline-block') {\n                        fontFamily = parent.textArea.style.fontFamily;\n                    }\n                    else {\n                        fontFamily = parent.activeObj.textSettings.fontFamily;\n                    }\n                    var elem = args.element.querySelector('[id *= ' + '\"' + fontFamily.toLowerCase() + '\"' + ']');\n                    if (elem) {\n                        elem.classList.add('e-selected-btn');\n                    }\n                },\n                select: function (args) {\n                    _this.triggerTbarClickEvent(args);\n                    spanElem_4.textContent = args.item.text;\n                    if (Browser.isDevice) {\n                        spanElem_4.setAttribute('style', 'font-family:' + args.item.id);\n                    }\n                    parent.updateFontFamily(args.item.id);\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                    var toolbar = document.getElementById(parent.element.id + '_toolbar');\n                    if (toolbar && toolbar.classList.contains('e-control')) {\n                        getComponent(toolbar, 'toolbar').refreshOverflow();\n                    }\n                }\n            });\n            fontFamilyBtn_1.appendTo('#' + id + '_fontFamilyBtn');\n        }\n        if (items.indexOf('fontSize') > -1) {\n            var fontSizeBtnElem = document.getElementById(id + '_fontSizeBtn');\n            var fontSizeSpanElem_1 = document.createElement('span');\n            var fontSizes = parent.getFontSizes();\n            fontSizeSpanElem_1.innerHTML = fontSizes[0].text;\n            fontSizeSpanElem_1.className = 'e-text-font-size';\n            fontSizeBtnElem.appendChild(fontSizeSpanElem_1);\n            var fontSizeBtn_1 = new DropDownButton({\n                cssClass: 'e-font-size',\n                items: fontSizes,\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = fontSizeBtn_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    var activeBtn = fontSizeSpanElem_1.innerHTML;\n                    args.element.querySelector('[aria-label *= ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                },\n                select: function (args) {\n                    _this.triggerTbarClickEvent(args);\n                    fontSizeSpanElem_1.textContent = args.item.text;\n                    parent.updateFontSize(args.item.text);\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                }\n            });\n            fontSizeBtn_1.appendTo('#' + id + '_fontSizeBtn');\n        }\n    };\n    ToolbarModule.prototype.refreshToolbar = function (type, isApplyBtn, isCropping, isZooming, cType, shape, isTransform) {\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (!parent.isImageLoaded || parent.isCropToolbar) {\n            return;\n        }\n        var args = {};\n        var aspectIcon;\n        var nonAspectIcon;\n        if (type !== 'filter' && type !== 'color') {\n            var toolbarElement = document.getElementById(id + '_toolbar');\n            var cusWrapper = document.getElementById(id + '_customizeWrapper');\n            var bottomToolbar = document.getElementById(id + '_bottomToolbar');\n            if (cusWrapper && (getComponent(cusWrapper, 'toolbar')) && this.defToolbarItems.length > 0) {\n                getComponent(cusWrapper, 'toolbar').destroy();\n                cusWrapper.innerHTML = '';\n            }\n            if (toolbarElement && toolbarElement.classList.contains('e-control') && this.defToolbarItems.length > 0) {\n                getComponent(toolbarElement, 'toolbar').destroy();\n                toolbarElement.innerHTML = '';\n            }\n            if (toolbarElement && (this.defToolbarItems.length > 0 || parent.toolbar && parent.toolbar.length > 0 && parent.toolbar.indexOf('Open') === -1)) {\n                var toolbar_13 = getComponent(toolbarElement, 'toolbar');\n                if (!isNullOrUndefined(toolbar_13)) {\n                    toolbar_13.destroy();\n                    document.getElementById(parent.element.id + '_toolbar').innerHTML = '';\n                }\n            }\n            if (bottomToolbar && this.defToolbarItems.length > 0) {\n                if (bottomToolbar.className.indexOf('e-control') > -1) {\n                    getComponent(bottomToolbar, 'toolbar').destroy();\n                    bottomToolbar.innerHTML = '';\n                }\n            }\n        }\n        this.refreshSlider();\n        if (document.querySelector('.e-slider-tooltip')) {\n            document.querySelector('.e-slider-tooltip').remove();\n        }\n        this.isFrameToolbar = parent.isCropTab = false;\n        switch (type) {\n            case 'main':\n                if (Browser.isDevice) {\n                    if (isCropping) {\n                        this.initMainToolbar(false, true, true, false, false, true);\n                    }\n                    else {\n                        this.initMainToolbar(false, true, null, false, false, true);\n                    }\n                }\n                else if (!Browser.isDevice || isZooming) {\n                    if (isZooming) {\n                        this.initMainToolbar(isApplyBtn, Browser.isDevice, null);\n                    }\n                    else {\n                        this.initMainToolbar(isApplyBtn, Browser.isDevice, null);\n                    }\n                }\n                if (Browser.isDevice) {\n                    this.initBottomToolbar();\n                }\n                break;\n            case 'shapes':\n                parent.noPushUndo = true;\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true);\n                }\n                if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'path') {\n                    args.toolbarItems = ['strokeColor', 'strokeWidth', 'z-order', 'duplicate', 'remove'];\n                }\n                else if (parent.activeObj.shape === 'arrow') {\n                    args.toolbarItems = ['strokeColor', 'strokeWidth', 'start', 'end', 'z-order', 'duplicate', 'remove'];\n                }\n                else if (parent.activeObj.shape === 'image') {\n                    args.toolbarItems = ['flip', 'z-order', 'duplicate', 'remove', 'transparency'];\n                }\n                else if (parent.activeObj.shape === 'rectangle') {\n                    args.toolbarItems = ['fillColor', 'strokeColor', 'strokeWidth', 'borderRadius', 'z-order', 'duplicate', 'remove'];\n                }\n                else {\n                    args.toolbarItems = ['fillColor', 'strokeColor', 'strokeWidth', 'z-order', 'duplicate', 'remove'];\n                }\n                this.initShapesToolbarItem(args.toolbarItems);\n                if (parent.activeObj.shape === 'image') {\n                    var actObj = extend({}, parent.activeObj, {}, true);\n                    parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    parent.activeObj = actObj;\n                    parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj,\n                            isCropRatio: null, points: null, isPreventDrag: true } });\n                    this.renderQAT(false);\n                }\n                break;\n            case 'text':\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true);\n                }\n                args.toolbarItems = ['fontFamily', 'fontSize', 'fontColor', 'fillColor', 'strokeColor', 'strokeWidth', 'bold', 'italic', 'z-order', 'duplicate', 'remove', 'text'];\n                this.initTextToolbarItem(args.toolbarItems);\n                break;\n            case 'pen':\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true);\n                }\n                args.toolbarItems = ['strokeColor', 'strokeWidth', 'z-order', 'remove', 'transparency'];\n                this.initPenToolbarItem(args.toolbarItems);\n                break;\n            case 'adjustment':\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true);\n                }\n                this.initAdjustmentToolbarItem();\n                break;\n            case 'filter':\n                this.updateContextualToolbar(type);\n                break;\n            case 'resize':\n                if (parent.isCircleCrop || (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle')) {\n                    parent.aspectHeight = parent.aspectWidth;\n                    this.isAspectRatio = false;\n                }\n                this.initResizeToolbar();\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true, true);\n                }\n                aspectIcon = parent.element.querySelector('#' + id + '_aspectratio');\n                nonAspectIcon = parent.element.querySelector('#' + id + '_nonaspectratio');\n                if (parent.aspectWidth && parent.aspectHeight) {\n                    if (nonAspectIcon) {\n                        parent.notify('transform', { prop: 'resize', value: { width: parent.aspectWidth, height: parent.aspectHeight, isAspectRatio: false } });\n                    }\n                    else if (aspectIcon) {\n                        parent.notify('transform', { prop: 'resize', value: { width: parent.aspectWidth, height: null, isAspectRatio: true } });\n                    }\n                }\n                break;\n            case 'color':\n                this.updateContextualToolbar(type, cType);\n                break;\n            case 'croptransform':\n                if (isNullOrUndefined(isTransform)) {\n                    parent.allowDownScale = false;\n                    parent.isCropTab = true;\n                }\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true);\n                }\n                if (isNullOrUndefined(isTransform)) {\n                    parent.updateCropTransformItems();\n                }\n                this.initCropTransformToolbar(shape, isTransform);\n                if (Browser.isDevice && this.isToolbar()) {\n                    this.updateContextualToolbar('color', 'straighten', true);\n                }\n                if (parent.isMaskImage) {\n                    this.refreshToolbar('main');\n                }\n                break;\n            case 'frame':\n                this.isFrameToolbar = true;\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true);\n                    this.initMainToolbar(false, true, true, false, true);\n                }\n                else {\n                    this.initMainToolbar(true, null, null, false, true);\n                }\n                // eslint-disable-next-line no-case-declarations\n                var frameElem = parent.element.querySelector('#' + id + '_' + parent.frameObj.type);\n                if (frameElem) {\n                    frameElem.classList.add('e-selected-btn');\n                }\n                if (parent.frameObj.type !== 'none') {\n                    this.updateContextualToolbar(type, cType);\n                }\n                parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                break;\n            case 'redact':\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true);\n                    this.initMainToolbar(false, true, true, null, null, null, true);\n                }\n                else {\n                    this.initMainToolbar(isApplyBtn, Browser.isDevice, null, null, null, null, true);\n                }\n                this.enableDisableTbrBtn();\n                if (parent.activeObj.redactType === 'blur') {\n                    var redactBlurElement = parent.element.querySelector('#' + id + '_' + 'redactBlur');\n                    if (redactBlurElement) {\n                        redactBlurElement.classList.add('e-selected-btn');\n                    }\n                }\n                else {\n                    var pixelateElement = parent.element.querySelector('#' + id + '_' + 'pixelate');\n                    if (pixelateElement) {\n                        pixelateElement.classList.add('e-selected-btn');\n                    }\n                }\n                this.redactSlider(parent.activeObj.redactType);\n                break;\n        }\n        this.refreshDropDownBtn(isCropping);\n        this.updateKBDNavigation(type);\n        this.currToolbar = type;\n    };\n    ToolbarModule.prototype.updateRedactObj = function () {\n        var parent = this.parent;\n        var objColl = extend([], parent.objColl, [], true);\n        parent.objColl = [];\n        var activeObj = extend({}, parent.activeObj, {}, true);\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n        parent.objColl = objColl;\n        for (var i = 0; i < parent.objColl.length; i++) {\n            var obj = parent.objColl[i];\n            if (obj.shape === 'redact') {\n                obj.redactImage = parent.createElement('canvas');\n                obj.redactImage.width = obj.activePoint.width;\n                obj.redactImage.height = obj.activePoint.height;\n                obj.redactImage.getContext('2d').drawImage(parent.lowerCanvas, obj.activePoint.startX, obj.activePoint.startY, obj.activePoint.width, obj.activePoint.height, 0, 0, obj.redactImage.width, obj.redactImage.height);\n            }\n        }\n        parent.isCropTab = false;\n        parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n        parent.isCropTab = true;\n        if (activeObj) {\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: activeObj,\n                    isCropRatio: null, points: null, isPreventDrag: true } });\n        }\n    };\n    ToolbarModule.prototype.updateKBDNavigation = function (type) {\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (!parent.isKBDNavigation || this.currToolbar === type) {\n            return;\n        }\n        if (this.isToolbar()) {\n            var tbar = parent.element.querySelectorAll('#' + id + '_toolbar')[0];\n            var tbarInitialChild = void 0;\n            var tbarInitialBtn_1;\n            if (tbar) {\n                tbarInitialChild = tbar.querySelector('.e-toolbar-center');\n                if (!tbarInitialChild || !tbarInitialChild.children[0]) {\n                    return;\n                }\n                tbarInitialBtn_1 = tbarInitialChild.children[0].querySelector('.e-btn');\n                var tempElem = tbarInitialChild.children[1];\n                if (tempElem) {\n                    tempElem = tempElem.children[0];\n                }\n                if (tempElem) {\n                    tempElem = tempElem.children[0];\n                }\n                if (type === 'resize' && tempElem) {\n                    tbarInitialBtn_1 = tempElem;\n                }\n                if (type === 'filter') {\n                    var defaultFilter_1 = document.querySelector('#' + id + '_defaultCanvas');\n                    if (defaultFilter_1) {\n                        setTimeout(function () { return defaultFilter_1.focus(); }, 50);\n                    }\n                }\n                if (tbarInitialBtn_1) {\n                    if (type === 'main') {\n                        setTimeout(function () { return tbarInitialBtn_1.focus(); }, 50);\n                    }\n                    else {\n                        tbarInitialBtn_1.focus();\n                    }\n                }\n            }\n        }\n    };\n    ToolbarModule.prototype.performCropTransformClick = function (shape, isTransform) {\n        var parent = this.parent;\n        if (isNullOrUndefined(isTransform)) {\n            parent.notify('draw', { prop: 'setTempStraightenZoomDeg' });\n            parent.tempStraighten = parent.transform.straighten;\n            if (parent.currObjType.isFiltered || parent.currObjType.isRedact) {\n                parent.okBtn();\n            }\n            parent.isStraightening = true;\n        }\n        this.refreshToolbar('croptransform', null, null, null, null, shape, isTransform);\n        if (isNullOrUndefined(isTransform)) {\n            parent.notify('draw', { prop: 'setDestForStraighten' });\n            parent.notify('draw', { prop: 'setTempDestForStraighten' });\n        }\n    };\n    ToolbarModule.prototype.getAdjustmentToolbarItem = function () {\n        var toolbarItems = [];\n        var parent = this.parent;\n        var isCustomized = false;\n        var id = parent.element.id;\n        var defItems = ['Brightness', 'Contrast', 'Hue', 'Saturation', 'Exposure', 'Opacity', 'Blur'];\n        if (parent.toolbar) {\n            for (var i = 0; i < defItems.length; i++) {\n                if (parent.toolbar.indexOf(defItems[i]) !== -1) {\n                    isCustomized = true;\n                    break;\n                }\n            }\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Brightness') > -1)) {\n            toolbarItems.push({ id: id + '_brightness', prefixIcon: 'e-icons e-brightness', cssClass: 'top-icon e-brightness',\n                tooltipText: this.l10n.getConstant('Brightness'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Contrast') > -1)) {\n            toolbarItems.push({ id: id + '_contrast', prefixIcon: 'e-icons e-contrast', cssClass: 'top-icon e-contrast',\n                tooltipText: this.l10n.getConstant('Contrast'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Hue') > -1)) {\n            toolbarItems.push({ id: id + '_hue', prefixIcon: 'e-icons e-fade', cssClass: 'top-icon e-fade',\n                tooltipText: this.l10n.getConstant('Hue'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Saturation') > -1)) {\n            toolbarItems.push({ id: id + '_saturation', prefixIcon: 'e-icons e-saturation', cssClass: 'top-icon e-saturation',\n                tooltipText: this.l10n.getConstant('Saturation'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Exposure') > -1)) {\n            toolbarItems.push({ id: id + '_exposure', prefixIcon: 'e-icons e-grain', cssClass: 'top-icon e-grain',\n                tooltipText: this.l10n.getConstant('Exposure'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Opacity') > -1)) {\n            toolbarItems.push({ id: id + '_opacity', prefixIcon: 'e-icons e-opacity', cssClass: 'top-icon e-opacity',\n                tooltipText: this.l10n.getConstant('Opacity'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Blur') > -1)) {\n            toolbarItems.push({ id: id + '_blur', prefixIcon: 'e-icons e-tint', cssClass: 'top-icon e-tint',\n                tooltipText: this.l10n.getConstant('Blur'), align: 'Center' });\n        }\n        var tempToolbarItems = this.processToolbar('center');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right', tabIndex: 0 });\n            toolbarItems.push({ id: id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getFrameToolbarItem = function () {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var toolbarItems = [];\n        toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: id + '_frameColor',\n            cssClass: 'top-icon e-stroke', tooltipText: this.l10n.getConstant('Color'), align: 'Center', type: 'Input',\n            template: '<span>' + this.l10n.getConstant('Color') + '</span><button id=\"' + id + '_frameColorBtn\"></button>' });\n        toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: id + '_frameGradient',\n            cssClass: 'top-icon e-frame-stroke', tooltipText: this.l10n.getConstant('GradientColor'), align: 'Center', type: 'Input',\n            template: '<span>' + this.l10n.getConstant('GradientColor') + '</span><button id=\"' + id + '_frameGradientColorBtn\"></button>' });\n        toolbarItems.push({ id: id + '_frameSize', cssClass: 'top-icon e-size', tooltipText: this.l10n.getConstant('Size'), align: 'Center',\n            type: 'Input', template: '<span>' + this.l10n.getConstant('Size') + '</span><button id=\"' + id + '_frameSizeBtn\"></button>' });\n        if (parent.frameObj.type === 'line' || parent.frameObj.type === 'inset' || parent.frameObj.type === 'hook') {\n            toolbarItems.push({ id: id + '_frameInset', cssClass: 'top-icon e-size', tooltipText: this.l10n.getConstant('Inset'), align: 'Center',\n                type: 'Input', template: '<span>' + this.l10n.getConstant('Inset') + '</span><button id=\"' + id + '_frameInsetBtn\"></button>' });\n        }\n        if (parent.frameObj.type === 'line' || parent.frameObj.type === 'inset') {\n            toolbarItems.push({ id: id + '_frameOffset', cssClass: 'top-icon e-size', tooltipText: this.l10n.getConstant('Offset'), align: 'Center',\n                type: 'Input', template: '<span>' + this.l10n.getConstant('Offset') + '</span><button id=\"' + id + '_frameOffsetBtn\"></button>' });\n        }\n        if (parent.frameObj.type === 'line') {\n            toolbarItems.push({ id: id + '_frameRadius', cssClass: 'top-icon e-size', tooltipText: this.l10n.getConstant('Radius'), align: 'Center',\n                type: 'Input', template: '<span>' + this.l10n.getConstant('Radius') + '</span><button id=\"' + id + '_frameRadiusBtn\"></button>' });\n            toolbarItems.push({ id: id + '_frameAmount', cssClass: 'top-icon e-size', tooltipText: this.l10n.getConstant('Amount'), align: 'Center',\n                type: 'Input', template: '<span>' + this.l10n.getConstant('Amount') + '</span><button id=\"' + id + '_frameAmountBtn\"></button>' });\n            toolbarItems.push({ id: id + '_frameBorder', cssClass: 'top-icon e-size', tooltipText: this.l10n.getConstant('Border'), align: 'Center',\n                type: 'Input', template: '<span>' + this.l10n.getConstant('Border') + '</span><button id=\"' + id + '_frameBorderBtn\"></button>' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getFilterToolbarItem = function () {\n        var toolbarItems = [];\n        var parent = this.parent;\n        var isCustomized = false;\n        var id = parent.element.id;\n        var defItems = ['Default', 'Chrome', 'Cold', 'Warm', 'Grayscale', 'Sepia', 'Invert'];\n        if (parent.toolbar) {\n            for (var i = 0; i < defItems.length; i++) {\n                if (parent.toolbar.indexOf(defItems[i]) !== -1) {\n                    isCustomized = true;\n                    break;\n                }\n            }\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Default') > -1)) {\n            toolbarItems.push({ id: id + '_default', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Default'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + id + '_defaultCanvas' + ' tabindex=0></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Default') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Chrome') > -1)) {\n            toolbarItems.push({ id: id + '_chrome', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Chrome'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + id + '_chromeCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Chrome') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Cold') > -1)) {\n            toolbarItems.push({ id: id + '_cold', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Cold'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + id + '_coldCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Cold') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Warm') > -1)) {\n            toolbarItems.push({ id: id + '_warm', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Warm'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + id + '_warmCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Warm') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Grayscale') > -1)) {\n            toolbarItems.push({ id: id + '_grayscale', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Grayscale'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + id + '_grayscaleCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Grayscale') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Sepia') > -1)) {\n            toolbarItems.push({ id: id + '_sepia', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Sepia'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + id + '_sepiaCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Sepia') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Invert') > -1)) {\n            toolbarItems.push({ id: id + '_invert', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Invert'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + id + '_invertCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Invert') + '</span></div></div>' });\n        }\n        var tempToolbarItems = this.processToolbar('center');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getPenToolbarItem = function (items) {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var toolbarItems = [];\n        if (isNullOrUndefined(parent.toolbar) || parent.toolbar) {\n            toolbarItems.push({ id: id + '_annotation', tooltipText: this.l10n.getConstant('Annotation'), align: 'Center',\n                template: '<button id=\"' + id + '_annotationBtn\"></button>' });\n        }\n        if (items.indexOf('strokeColor') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: id + '_pen_strokecolor',\n                cssClass: 'top-icon e-pen-stroke-color',\n                tooltipText: this.l10n.getConstant('StrokeColor'), align: 'Center', type: 'Input',\n                template: '<button id=\"' + id + '_penColorBtn\"></button>' });\n        }\n        if (items.indexOf('strokeWidth') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: id + '_pen_strokewidth',\n                cssClass: 'top-icon e-size',\n                tooltipText: this.l10n.getConstant('StrokeWidth'),\n                align: 'Center', type: 'Input', template: '<button id=\"' + id + '_penStrokeWidth\"></button>' });\n        }\n        toolbarItems.push({ align: 'Center', type: 'Separator' });\n        if (items.indexOf('z-order') > -1) {\n            toolbarItems.push({ id: id + '_zOrder', cssClass: 'top-icon e-list-unordered-3', tooltipText: this.l10n.getConstant('ZOrder'), align: 'Center',\n                type: 'Input', template: '<button id=\"' + id + '_zOrderBtn\"></button>' });\n        }\n        if (items.indexOf('remove') > -1) {\n            toolbarItems.push({ id: id + '_remove', prefixIcon: 'e-icons e-trash', cssClass: 'top-icon e-trash',\n                tooltipText: this.l10n.getConstant('Remove'), align: 'Center' });\n        }\n        var tempToolbarItems = this.processSubToolbar(items);\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right', tabIndex: 0 });\n            toolbarItems.push({ id: id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.initPenToolbarItem = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        var leftItem = this.getLeftToolbarItem();\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getPenToolbarItem(items);\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var args = { toolbarType: 'pen', toolbarItems: this.defToolbarItems };\n        parent.trigger('toolbarUpdating', args);\n        if (this.isToolbarString(args.toolbarItems)) {\n            items = args.toolbarItems;\n            this.excludeItems(args.toolbarItems);\n        }\n        else {\n            this.defToolbarItems = args.toolbarItems;\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.renderAnnotationBtn(true);\n                _this.createPenColor(items);\n                _this.createPenBtn(items);\n                _this.createZOrderBtn(items);\n                _this.wireZoomBtnEvents();\n                parent.trigger('toolbarCreated', { toolbarType: 'pen' });\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + id + '_toolbar');\n        }\n        this.enableDisableTbrBtn();\n    };\n    ToolbarModule.prototype.createPenColor = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (items.indexOf('strokeColor') > -1) {\n            parent.element.querySelector('.e-template.e-pen-stroke-color').appendChild(parent.createElement('input', {\n                id: id + '_pen_stroke'\n            }));\n            var presentVal = parent.activeObj.strokeSettings.strokeColor;\n            var penColor = new ColorPicker({\n                modeSwitcher: false, value: '#fff',\n                showButtons: false, mode: 'Palette', cssClass: 'e-pen-color',\n                change: function (args) {\n                    parent.updatePenStrokeColor(args.currentValue.hex);\n                    _this.selFhdColor = args.currentValue.hex;\n                    strokeDDB_5.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    strokeDDB_5.toggle();\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoStack', value: { isPenDraw: true } });\n                }\n            }, '#' + id + '_pen_stroke');\n            var strokeDDB_5 = new DropDownButton({\n                open: function (args) {\n                    var parentElem = args.element.parentElement;\n                    if (Browser.isDevice) {\n                        parentElem.style.top = strokeDDB_5.element.getBoundingClientRect().top -\n                            parentElem.offsetHeight + 'px';\n                        if (window.innerWidth <= 520) {\n                            parentElem.style.left = parent.element.offsetLeft + 'px';\n                        }\n                    }\n                },\n                target: '.e-pen-color',\n                iconCss: 'e-dropdownbtn-preview',\n                cssClass: 'e-ie-ddb-popup'\n            }, '#' + id + '_penColorBtn');\n            penColor.inline = true;\n            penColor.value = penColor.getValue(parent.activeObj.strokeSettings.strokeColor, 'rgba');\n            if (penColor.value === 'null') {\n                penColor.value = presentVal;\n            }\n            var obj = { tempFreeHandDrawEditingStyles: null };\n            parent.notify('freehand-draw', { prop: 'getTempFreeHandDrawEditingStyles', value: { obj: obj } });\n            var indexObj = { freehandSelectedIndex: null };\n            parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n            if (!isNullOrUndefined(indexObj['freehandSelectedIndex']) && indexObj['freehandSelectedIndex'] > -1) {\n                parent.element.querySelector('.e-pen-stroke-color.e-template .e-dropdownbtn-preview').style.background\n                    = this.selFhdColor === '#42a5f5' ? obj['tempFreeHandDrawEditingStyles'].strokeColor :\n                        parent.pointColl[indexObj['freehandSelectedIndex']].strokeColor;\n            }\n            else {\n                parent.element.querySelector('.e-pen-stroke-color.e-template .e-dropdownbtn-preview').style.background\n                    = penColor.value;\n            }\n        }\n    };\n    ToolbarModule.prototype.createPenBtn = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('XSmall') },\n            { id: '2', text: this.l10n.getConstant('Small') },\n            { id: '3', text: this.l10n.getConstant('Medium') },\n            { id: '4', text: this.l10n.getConstant('Large') },\n            { id: '5', text: this.l10n.getConstant('XLarge') }\n        ];\n        if (items.indexOf('strokeWidth') > -1) {\n            var strokeWidthBtn = document.getElementById(id + '_penStrokeWidth');\n            var spanElem_5 = document.createElement('span');\n            var indexObj = { freehandSelectedIndex: null };\n            parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n            if (!isNullOrUndefined(indexObj['freehandSelectedIndex']) && indexObj['freehandSelectedIndex'] > -1) {\n                spanElem_5.innerHTML = this.getPenStroke(parent.pointColl[indexObj['freehandSelectedIndex']].strokeWidth);\n            }\n            else {\n                var obj = { penStrokeWidth: 2 };\n                parent.notify('freehand-draw', { prop: 'getPenStrokeWidth', onPropertyChange: false, value: { obj: obj } });\n                if (obj['penStrokeWidth']) {\n                    spanElem_5.innerHTML = this.getPenStroke(obj['penStrokeWidth']);\n                }\n                else {\n                    spanElem_5.innerHTML = this.l10n.getConstant('Small');\n                }\n            }\n            spanElem_5.className = 'e-pen-stroke-width';\n            strokeWidthBtn.appendChild(spanElem_5);\n            var drpDownBtn_5 = new DropDownButton({ items: strokeWidthItems,\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = drpDownBtn_5.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    var activeBtn = spanElem_5.innerHTML;\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                },\n                select: function (args) {\n                    _this.triggerTbarClickEvent(args);\n                    spanElem_5.textContent = args.item.text;\n                    parent.updatePenStrokeWidth(args.item.id);\n                    if (Browser.isDevice) {\n                        if (document.getElementById(id + '_bottomToolbar')) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_14 = getComponent(id + '_bottomToolbar', 'toolbar');\n                            toolbar_14.refreshOverflow();\n                        }\n                    }\n                    else {\n                        if (document.getElementById(id + '_toolbar')) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_15 = getComponent(id + '_toolbar', 'toolbar');\n                            toolbar_15.refreshOverflow();\n                        }\n                    }\n                    var widthObj = { penStrokeWidth: null };\n                    parent.notify('freehand-draw', { prop: 'getPenStrokeWidth', onPropertyChange: false, value: { obj: widthObj } });\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoStack', value: { isPenDraw: true } });\n                    parent.notify('freehand-draw', { prop: 'setPenStrokeWidth', onPropertyChange: false, value: { value: widthObj['penStrokeWidth'] } });\n                }\n            });\n            // Render initialized DropDownButton.\n            drpDownBtn_5.appendTo('#' + id + '_penStrokeWidth');\n        }\n    };\n    ToolbarModule.prototype.getPenStroke = function (value) {\n        var textContent = '';\n        var valueToTextContent = {\n            1: this.l10n.getConstant('XSmall'),\n            2: this.l10n.getConstant('Small'),\n            3: this.l10n.getConstant('Medium'),\n            4: this.l10n.getConstant('Large'),\n            5: this.l10n.getConstant('XLarge')\n        };\n        if (value >= 1 && value <= 5) {\n            textContent = valueToTextContent[value];\n        }\n        return textContent;\n    };\n    ToolbarModule.prototype.initAdjustmentToolbarItem = function () {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        var leftItem = this.getLeftToolbarItem(null);\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getAdjustmentToolbarItem();\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var args = { toolbarType: 'finetune', toolbarItems: this.defToolbarItems };\n        parent.trigger('toolbarUpdating', args);\n        this.defToolbarItems = args.toolbarItems;\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.wireZoomBtnEvents();\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + id + '_toolbar');\n        }\n        this.enableDisableTbrBtn();\n    };\n    ToolbarModule.prototype.initFrameToolbarItem = function () {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        var canvasWrapper = document.querySelector('#' + id + '_contextualToolbarArea');\n        var frameWrapper = document.querySelector('#' + id + '_frameWrapper');\n        if (frameWrapper) {\n            frameWrapper.style.display = 'block';\n        }\n        else {\n            frameWrapper = canvasWrapper.appendChild(parent.createElement('div', {\n                id: id + '_frameWrapper', className: 'e-frame-wrapper', styles: 'position: relative'\n            }));\n        }\n        frameWrapper.appendChild(parent.createElement('div', {\n            id: id + '_customizeWrapper',\n            styles: 'position: absolute'\n        }));\n        var mainItem = this.getFrameToolbarItem();\n        var args = { toolbarType: 'frame', toolbarItems: mainItem };\n        parent.trigger('toolbarUpdating', args);\n        mainItem = args.toolbarItems;\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: mainItem,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.createFrameColor();\n                _this.createFrameSize();\n                var frameType = parent.frameObj.type;\n                if (frameType === 'line') {\n                    _this.createFrameRadius();\n                }\n                if (frameType === 'line' || frameType === 'inset' || frameType === 'hook') {\n                    _this.createFrameInset();\n                }\n                if (frameType === 'line' || frameType === 'inset') {\n                    _this.createFrameOffset();\n                }\n                if (frameType === 'line') {\n                    _this.createFrameAmount();\n                    _this.createFrameBorder();\n                }\n                _this.createFrameGradientColor();\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n                parent.element.querySelector('#' + id + '_' + frameType).focus();\n            }\n        });\n        toolbar.appendTo('#' + id + '_customizeWrapper');\n    };\n    ToolbarModule.prototype.createFrameGradientColor = function () {\n        var parent = this.parent;\n        var prevFrameSettings;\n        var obj = { frameChangeEventArgs: null };\n        var id = parent.element.id;\n        parent.element.querySelector('.e-template.e-frame-stroke').appendChild(parent.createElement('input', {\n            id: id + '_frame_gradient_fill'\n        }));\n        var fillColor = new ColorPicker({\n            modeSwitcher: false, noColor: true, value: parent.frameObj.gradientColor,\n            showButtons: false, mode: 'Palette', cssClass: 'e-frame-gradient-fill-color',\n            change: function (args) {\n                prevFrameSettings = { type: parent.toPascalCase(parent.frameObj.type), color: parent.frameObj.color,\n                    gradientColor: parent.frameObj.gradientColor, size: parent.frameObj.size, inset: parent.frameObj.inset,\n                    offset: parent.frameObj.offset, borderRadius: parent.frameObj.radius,\n                    frameLineStyle: parent.toPascalCase(parent.frameObj.border), lineCount: parent.frameObj.amount };\n                var temp = parent.frameObj.gradientColor;\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                parent.frameObj.gradientColor = args.currentValue.hex;\n                parent.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: prevFrameSettings, obj: obj } });\n                if (obj['frameChangeEventArgs'] && !obj['frameChangeEventArgs'].cancel) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                            operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                            previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                            previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                            previousFilter: null, isCircleCrop: null\n                        } });\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    parent.notify('draw', { prop: 'redrawDownScale' });\n                    if (args.currentValue.rgba === '') {\n                        fillDDB.element.children[0].classList.add('e-nocolor-item');\n                    }\n                    else {\n                        fillDDB.element.children[0].classList.remove('e-nocolor-item');\n                        fillDDB.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    }\n                    parent.curFrameObjEvent = { previousFrameSetting: obj['frameChangeEventArgs'].previousFrameSetting,\n                        currentFrameSetting: obj['frameChangeEventArgs'].currentFrameSetting };\n                    parent.isFrameBtnClick = true;\n                }\n                else {\n                    parent.frameObj.gradientColor = temp;\n                }\n                fillDDB.toggle();\n            }\n        }, '#' + id + '_frame_gradient_fill');\n        var fillDDB = new DropDownButton({\n            open: function (args) {\n                if (Browser.isDevice) {\n                    var parentElem = args.element.parentElement;\n                    parentElem.style.top = fillDDB.element.getBoundingClientRect().top -\n                        parentElem.offsetHeight + 'px';\n                    if (window.innerWidth <= 520) {\n                        parentElem.style.left = parent.element.offsetLeft + 'px';\n                    }\n                }\n            },\n            target: '.e-frame-gradient-fill-color',\n            iconCss: 'e-dropdownbtn-preview',\n            cssClass: 'e-ie-ddb-popup'\n        }, '#' + id + '_frameGradientColorBtn');\n        fillColor.inline = true;\n        if (parent.frameObj.gradientColor === '') {\n            parent.element.querySelector('.e-frame-stroke.e-template .e-dropdownbtn-preview').classList.add('e-nocolor-item');\n        }\n        else {\n            parent.element.querySelector('.e-frame-stroke.e-template .e-dropdownbtn-preview').style.background\n                = parent.frameObj.gradientColor;\n        }\n    };\n    ToolbarModule.prototype.createFrameColor = function () {\n        var parent = this.parent;\n        var prevFrameSettings;\n        var obj = { frameChangeEventArgs: null };\n        var id = parent.element.id;\n        parent.element.querySelector('.e-template.e-stroke').appendChild(parent.createElement('input', {\n            id: id + '_frame_fill'\n        }));\n        var fillColor = new ColorPicker({\n            modeSwitcher: false, value: parent.frameObj.color,\n            showButtons: false, mode: 'Palette', cssClass: 'e-frame-fill-color',\n            change: function (args) {\n                prevFrameSettings = { type: parent.toPascalCase(parent.frameObj.type), color: parent.frameObj.color,\n                    gradientColor: parent.frameObj.gradientColor, size: parent.frameObj.size, inset: parent.frameObj.inset,\n                    offset: parent.frameObj.offset, borderRadius: parent.frameObj.radius,\n                    frameLineStyle: parent.toPascalCase(parent.frameObj.border), lineCount: parent.frameObj.amount };\n                var temp = parent.frameObj.color;\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                parent.frameObj.color = args.currentValue.hex;\n                parent.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: prevFrameSettings, obj: obj } });\n                if (obj['frameChangeEventArgs'] && !obj['frameChangeEventArgs'].cancel) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                            operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                            previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                            previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                            previousFilter: null, isCircleCrop: null\n                        } });\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    parent.notify('draw', { prop: 'redrawDownScale' });\n                    if (args.currentValue.rgba === '') {\n                        fillDDB.element.children[0].classList.add('e-nocolor-item');\n                    }\n                    else {\n                        fillDDB.element.children[0].classList.remove('e-nocolor-item');\n                        fillDDB.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    }\n                    parent.curFrameObjEvent = { previousFrameSetting: obj['frameChangeEventArgs'].previousFrameSetting,\n                        currentFrameSetting: obj['frameChangeEventArgs'].currentFrameSetting };\n                    parent.isFrameBtnClick = true;\n                }\n                else {\n                    parent.frameObj.color = temp;\n                }\n                fillDDB.toggle();\n            }\n        }, '#' + id + '_frame_fill');\n        var fillDDB = new DropDownButton({\n            open: function (args) {\n                if (Browser.isDevice) {\n                    var parentElem = args.element.parentElement;\n                    parentElem.style.top = fillDDB.element.getBoundingClientRect().top -\n                        parentElem.offsetHeight + 'px';\n                    if (window.innerWidth <= 520) {\n                        parentElem.style.left = parent.element.offsetLeft + 'px';\n                    }\n                }\n            },\n            target: '.e-frame-fill-color',\n            iconCss: 'e-dropdownbtn-preview',\n            cssClass: 'e-ie-ddb-popup'\n        }, '#' + id + '_frameColorBtn');\n        fillColor.inline = true;\n        parent.element.querySelector('.e-stroke.e-template .e-dropdownbtn-preview').style.background = parent.frameObj.color;\n    };\n    ToolbarModule.prototype.createFrameSize = function () {\n        var _this = this;\n        var parent = this.parent;\n        var prevFrameSettings;\n        var obj = { frameChangeEventArgs: null };\n        var id = parent.element.id;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('20') },\n            { id: '2', text: this.l10n.getConstant('40') },\n            { id: '3', text: this.l10n.getConstant('60') },\n            { id: '4', text: this.l10n.getConstant('80') },\n            { id: '5', text: this.l10n.getConstant('100') }\n        ];\n        var strokeWidthBtn = document.getElementById(id + '_frameSizeBtn');\n        var spanElem = document.createElement('span');\n        spanElem.innerHTML = this.l10n.getConstant(parent.frameObj.size.toString());\n        spanElem.className = 'e-frame-stroke-width';\n        strokeWidthBtn.appendChild(spanElem);\n        // Initialize the DropDownButton component.\n        var drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n            open: function (args) {\n                if (Browser.isDevice) {\n                    var parentElem = args.element.parentElement;\n                    parentElem.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        parentElem.offsetHeight + 'px';\n                }\n                var activeBtn = drpDownBtn.element.childNodes[0].textContent;\n                if (activeBtn !== '') {\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                }\n            },\n            select: function (args) {\n                _this.triggerTbarClickEvent(args);\n                prevFrameSettings = { type: parent.toPascalCase(parent.frameObj.type), color: parent.frameObj.color,\n                    gradientColor: parent.frameObj.gradientColor, size: parent.frameObj.size, inset: parent.frameObj.inset,\n                    offset: parent.frameObj.offset, borderRadius: parent.frameObj.radius,\n                    frameLineStyle: parent.toPascalCase(parent.frameObj.border), lineCount: parent.frameObj.amount };\n                var temp = parent.frameObj.size;\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                parent.frameObj.size = parseInt(args.item.text, 10);\n                parent.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: prevFrameSettings, obj: obj } });\n                if (obj['frameChangeEventArgs'] && !obj['frameChangeEventArgs'].cancel) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                            operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                            previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                            previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                            previousFilter: null, isCircleCrop: null\n                        } });\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    parent.notify('draw', { prop: 'redrawDownScale' });\n                    drpDownBtn.content = args.item.text;\n                    parent.curFrameObjEvent = { previousFrameSetting: obj['frameChangeEventArgs'].previousFrameSetting,\n                        currentFrameSetting: obj['frameChangeEventArgs'].currentFrameSetting };\n                    parent.isFrameBtnClick = true;\n                }\n                else {\n                    parent.frameObj.size = temp;\n                }\n                if (Browser.isDevice) {\n                    if (document.getElementById(id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_16 = getComponent(id + '_bottomToolbar', 'toolbar');\n                        toolbar_16.refreshOverflow();\n                    }\n                }\n                else {\n                    if (document.getElementById(id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_17 = getComponent(id + '_toolbar', 'toolbar');\n                        toolbar_17.refreshOverflow();\n                    }\n                }\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + id + '_frameSizeBtn');\n    };\n    ToolbarModule.prototype.createFrameInset = function () {\n        var _this = this;\n        var parent = this.parent;\n        var prevFrameSettings;\n        var obj = { frameChangeEventArgs: null };\n        var id = parent.element.id;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('20') },\n            { id: '2', text: this.l10n.getConstant('40') },\n            { id: '3', text: this.l10n.getConstant('60') },\n            { id: '4', text: this.l10n.getConstant('80') },\n            { id: '5', text: this.l10n.getConstant('100') }\n        ];\n        var strokeWidthBtn = document.getElementById(id + '_frameInsetBtn');\n        var spanElem = document.createElement('span');\n        spanElem.innerHTML = this.l10n.getConstant(parent.frameObj.inset.toString());\n        spanElem.className = 'e-frame-inset';\n        strokeWidthBtn.appendChild(spanElem);\n        // Initialize the DropDownButton component.\n        var drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n            open: function (args) {\n                if (Browser.isDevice) {\n                    var parentElem = args.element.parentElement;\n                    parentElem.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        parentElem.offsetHeight + 'px';\n                }\n                var activeBtn = drpDownBtn.element.childNodes[0].textContent;\n                if (activeBtn !== '') {\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                }\n            },\n            select: function (args) {\n                _this.triggerTbarClickEvent(args);\n                prevFrameSettings = { type: parent.toPascalCase(parent.frameObj.type), color: parent.frameObj.color,\n                    gradientColor: parent.frameObj.gradientColor, size: parent.frameObj.size, inset: parent.frameObj.inset,\n                    offset: parent.frameObj.offset, borderRadius: parent.frameObj.radius,\n                    frameLineStyle: parent.toPascalCase(parent.frameObj.border), lineCount: parent.frameObj.amount };\n                var temp = parent.frameObj.inset;\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                parent.frameObj.inset = parseInt(args.item.text, 10);\n                parent.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: prevFrameSettings, obj: obj } });\n                if (obj['frameChangeEventArgs'] && !obj['frameChangeEventArgs'].cancel) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                            operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                            previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                            previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                            previousFilter: null, isCircleCrop: null\n                        } });\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    parent.notify('draw', { prop: 'redrawDownScale' });\n                    drpDownBtn.content = args.item.text;\n                    parent.curFrameObjEvent = { previousFrameSetting: obj['frameChangeEventArgs'].previousFrameSetting,\n                        currentFrameSetting: obj['frameChangeEventArgs'].currentFrameSetting };\n                    parent.isFrameBtnClick = true;\n                }\n                else {\n                    parent.frameObj.inset = temp;\n                }\n                if (Browser.isDevice) {\n                    if (document.getElementById(id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_18 = getComponent(id + '_bottomToolbar', 'toolbar');\n                        toolbar_18.refreshOverflow();\n                    }\n                }\n                else {\n                    if (document.getElementById(id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_19 = getComponent(id + '_toolbar', 'toolbar');\n                        toolbar_19.refreshOverflow();\n                    }\n                }\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + id + '_frameInsetBtn');\n    };\n    ToolbarModule.prototype.createFrameOffset = function () {\n        var _this = this;\n        var parent = this.parent;\n        var prevFrameSettings;\n        var obj = { frameChangeEventArgs: null };\n        var id = parent.element.id;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('20') },\n            { id: '2', text: this.l10n.getConstant('40') },\n            { id: '3', text: this.l10n.getConstant('60') },\n            { id: '4', text: this.l10n.getConstant('80') },\n            { id: '5', text: this.l10n.getConstant('100') }\n        ];\n        var strokeWidthBtn = document.getElementById(id + '_frameOffsetBtn');\n        var spanElem = document.createElement('span');\n        spanElem.innerHTML = this.l10n.getConstant(parent.frameObj.offset.toString());\n        spanElem.className = 'e-frame-offset';\n        strokeWidthBtn.appendChild(spanElem);\n        // Initialize the DropDownButton component.\n        var drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n            open: function (args) {\n                if (Browser.isDevice) {\n                    var parentElem = args.element.parentElement;\n                    parentElem.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        parentElem.offsetHeight + 'px';\n                }\n                var activeBtn = drpDownBtn.element.childNodes[0].textContent;\n                if (activeBtn !== '') {\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                }\n            },\n            select: function (args) {\n                _this.triggerTbarClickEvent(args);\n                prevFrameSettings = { type: parent.toPascalCase(parent.frameObj.type), color: parent.frameObj.color,\n                    gradientColor: parent.frameObj.gradientColor, size: parent.frameObj.size, inset: parent.frameObj.inset,\n                    offset: parent.frameObj.offset, borderRadius: parent.frameObj.radius,\n                    lineCount: parent.frameObj.amount, frameLineStyle: parent.toPascalCase(parent.frameObj.border) };\n                var temp = parent.frameObj.offset;\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                parent.frameObj.offset = parseInt(args.item.text, 10);\n                parent.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: prevFrameSettings, obj: obj } });\n                if (obj['frameChangeEventArgs'] && !obj['frameChangeEventArgs'].cancel) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                            operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                            previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                            previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                            previousFilter: null, isCircleCrop: null\n                        } });\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    parent.notify('draw', { prop: 'redrawDownScale' });\n                    drpDownBtn.content = args.item.text;\n                    parent.curFrameObjEvent = { previousFrameSetting: obj['frameChangeEventArgs'].previousFrameSetting,\n                        currentFrameSetting: obj['frameChangeEventArgs'].currentFrameSetting };\n                    parent.isFrameBtnClick = true;\n                }\n                else {\n                    parent.frameObj.offset = temp;\n                }\n                if (Browser.isDevice) {\n                    if (document.getElementById(id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_20 = getComponent(id + '_bottomToolbar', 'toolbar');\n                        toolbar_20.refreshOverflow();\n                    }\n                }\n                else {\n                    if (document.getElementById(id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_21 = getComponent(id + '_toolbar', 'toolbar');\n                        toolbar_21.refreshOverflow();\n                    }\n                }\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + id + '_frameOffsetBtn');\n    };\n    ToolbarModule.prototype.createFrameRadius = function () {\n        var _this = this;\n        var parent = this.parent;\n        var prevFrameSettings;\n        var obj = { frameChangeEventArgs: null };\n        var id = parent.element.id;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('0') },\n            { id: '2', text: this.l10n.getConstant('20') },\n            { id: '3', text: this.l10n.getConstant('40') },\n            { id: '4', text: this.l10n.getConstant('60') },\n            { id: '5', text: this.l10n.getConstant('80') },\n            { id: '6', text: this.l10n.getConstant('100') }\n        ];\n        var strokeWidthBtn = document.getElementById(id + '_frameRadiusBtn');\n        var spanElem = document.createElement('span');\n        spanElem.innerHTML = this.l10n.getConstant(parent.frameObj.radius.toString());\n        spanElem.className = 'e-frame-radius';\n        strokeWidthBtn.appendChild(spanElem);\n        // Initialize the DropDownButton component.\n        var drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n            open: function (args) {\n                if (Browser.isDevice) {\n                    var parentElem = args.element.parentElement;\n                    parentElem.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        parentElem.offsetHeight + 'px';\n                }\n                var activeBtn = drpDownBtn.element.childNodes[0].textContent;\n                if (activeBtn !== '') {\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                }\n            },\n            select: function (args) {\n                _this.triggerTbarClickEvent(args);\n                prevFrameSettings = { type: parent.toPascalCase(parent.frameObj.type), color: parent.frameObj.color,\n                    gradientColor: parent.frameObj.gradientColor, size: parent.frameObj.size, inset: parent.frameObj.inset,\n                    offset: parent.frameObj.offset, borderRadius: parent.frameObj.radius,\n                    frameLineStyle: parent.toPascalCase(parent.frameObj.border),\n                    lineCount: parent.frameObj.amount };\n                var temp = parent.frameObj.radius;\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                parent.frameObj.radius = parseInt(args.item.text, 10);\n                parent.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: prevFrameSettings, obj: obj } });\n                if (obj['frameChangeEventArgs'] && !obj['frameChangeEventArgs'].cancel) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                            operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                            previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                            previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                            previousFilter: null, isCircleCrop: null\n                        } });\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    parent.notify('draw', { prop: 'redrawDownScale' });\n                    drpDownBtn.content = args.item.text;\n                    parent.curFrameObjEvent = { previousFrameSetting: obj['frameChangeEventArgs'].previousFrameSetting,\n                        currentFrameSetting: obj['frameChangeEventArgs'].currentFrameSetting };\n                    parent.isFrameBtnClick = true;\n                }\n                else {\n                    parent.frameObj.radius = temp;\n                }\n                if (Browser.isDevice) {\n                    if (document.getElementById(id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_22 = getComponent(id + '_bottomToolbar', 'toolbar');\n                        toolbar_22.refreshOverflow();\n                    }\n                }\n                else {\n                    if (document.getElementById(id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_23 = getComponent(id + '_toolbar', 'toolbar');\n                        toolbar_23.refreshOverflow();\n                    }\n                }\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + id + '_frameRadiusBtn');\n    };\n    ToolbarModule.prototype.createFrameAmount = function () {\n        var _this = this;\n        var parent = this.parent;\n        var prevFrameSettings;\n        var obj = { frameChangeEventArgs: null };\n        var id = parent.element.id;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('1') },\n            { id: '2', text: this.l10n.getConstant('2') },\n            { id: '3', text: this.l10n.getConstant('3') },\n            { id: '4', text: this.l10n.getConstant('4') },\n            { id: '5', text: this.l10n.getConstant('5') }\n        ];\n        var strokeWidthBtn = document.getElementById(id + '_frameAmountBtn');\n        var spanElem = document.createElement('span');\n        spanElem.innerHTML = this.l10n.getConstant(parent.frameObj.amount.toString());\n        spanElem.className = 'e-frame-amount';\n        strokeWidthBtn.appendChild(spanElem);\n        // Initialize the DropDownButton component.\n        var drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n            open: function (args) {\n                if (Browser.isDevice) {\n                    var parentElem = args.element.parentElement;\n                    parentElem.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        parentElem.offsetHeight + 'px';\n                }\n                var activeBtn = drpDownBtn.element.childNodes[0].textContent;\n                if (activeBtn !== '') {\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                }\n            },\n            select: function (args) {\n                _this.triggerTbarClickEvent(args);\n                prevFrameSettings = { type: parent.toPascalCase(parent.frameObj.type), color: parent.frameObj.color,\n                    gradientColor: parent.frameObj.gradientColor, size: parent.frameObj.size, inset: parent.frameObj.inset,\n                    offset: parent.frameObj.offset, borderRadius: parent.frameObj.radius,\n                    lineCount: parent.frameObj.amount, frameLineStyle: parent.toPascalCase(parent.frameObj.border) };\n                var temp = parent.frameObj.amount;\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                parent.frameObj.amount = parseInt(args.item.text, 10);\n                parent.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: prevFrameSettings, obj: obj } });\n                if (obj['frameChangeEventArgs'] && !obj['frameChangeEventArgs'].cancel) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                            operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                            previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                            previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                            previousFilter: null, isCircleCrop: null\n                        } });\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    parent.notify('draw', { prop: 'redrawDownScale' });\n                    drpDownBtn.content = args.item.text;\n                    parent.curFrameObjEvent = { previousFrameSetting: obj['frameChangeEventArgs'].previousFrameSetting, currentFrameSetting: obj['frameChangeEventArgs'].currentFrameSetting };\n                    parent.isFrameBtnClick = true;\n                }\n                else {\n                    parent.frameObj.amount = temp;\n                }\n                if (Browser.isDevice) {\n                    if (document.getElementById(id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_24 = getComponent(id + '_bottomToolbar', 'toolbar');\n                        toolbar_24.refreshOverflow();\n                    }\n                }\n                else {\n                    if (document.getElementById(id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_25 = getComponent(id + '_toolbar', 'toolbar');\n                        toolbar_25.refreshOverflow();\n                    }\n                }\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + id + '_frameAmountBtn');\n    };\n    ToolbarModule.prototype.createFrameBorder = function () {\n        var _this = this;\n        var parent = this.parent;\n        var prevFrameSettings;\n        var obj = { frameChangeEventArgs: null };\n        var id = parent.element.id;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('Solid') },\n            { id: '2', text: this.l10n.getConstant('Dashed') },\n            { id: '3', text: this.l10n.getConstant('Dotted') }\n        ];\n        var strokeWidthBtn = document.getElementById(id + '_frameBorderBtn');\n        var spanElem = document.createElement('span');\n        spanElem.innerHTML = this.l10n.getConstant(parent.toPascalCase(parent.frameObj.border));\n        spanElem.className = 'e-frame-border';\n        strokeWidthBtn.appendChild(spanElem);\n        // Initialize the DropDownButton component.\n        var drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n            open: function (args) {\n                if (Browser.isDevice) {\n                    var parentElem = args.element.parentElement;\n                    parentElem.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        parentElem.offsetHeight + 'px';\n                }\n                var activeBtn = drpDownBtn.element.childNodes[0].textContent;\n                if (activeBtn !== '') {\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                }\n            },\n            select: function (args) {\n                _this.triggerTbarClickEvent(args);\n                prevFrameSettings = { lineCount: parent.frameObj.amount, color: parent.frameObj.color, borderRadius: parent.frameObj.radius,\n                    gradientColor: parent.frameObj.gradientColor, size: parent.frameObj.size, inset: parent.frameObj.inset,\n                    offset: parent.frameObj.offset, frameLineStyle: parent.toPascalCase(parent.frameObj.border),\n                    type: parent.toPascalCase(parent.frameObj.type) };\n                var temp = parent.frameObj.border;\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                parent.frameObj.border = args.item.text.toLowerCase();\n                parent.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: prevFrameSettings, obj: obj } });\n                if (obj['frameChangeEventArgs'] && !obj['frameChangeEventArgs'].cancel) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                            operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                            previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                            previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                            previousFilter: null, isCircleCrop: null\n                        } });\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    parent.notify('draw', { prop: 'redrawDownScale' });\n                    drpDownBtn.content = args.item.text;\n                    parent.curFrameObjEvent = { previousFrameSetting: obj['frameChangeEventArgs'].previousFrameSetting, currentFrameSetting: obj['frameChangeEventArgs'].currentFrameSetting };\n                    parent.isFrameBtnClick = true;\n                }\n                else {\n                    parent.frameObj.border = temp;\n                }\n                if (Browser.isDevice) {\n                    if (document.getElementById(id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_26 = getComponent(id + '_bottomToolbar', 'toolbar');\n                        toolbar_26.refreshOverflow();\n                    }\n                }\n                else {\n                    if (document.getElementById(id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_27 = getComponent(id + '_toolbar', 'toolbar');\n                        toolbar_27.refreshOverflow();\n                    }\n                }\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + id + '_frameBorderBtn');\n    };\n    ToolbarModule.prototype.initFilterToolbarItem = function () {\n        var _this = this;\n        var parent = this.parent;\n        var id = parent.element.id;\n        var mainItem = this.getFilterToolbarItem();\n        var args = { toolbarType: 'filter', toolbarItems: mainItem };\n        parent.trigger('toolbarUpdating', args);\n        mainItem = args.toolbarItems;\n        if (document.querySelector('#' + id + '_contextualToolbar').classList.contains('e-control')) {\n            getComponent(document.getElementById(id + '_contextualToolbar'), 'toolbar').destroy();\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: mainItem,\n            clicked: this.contextualToolbarClicked.bind(this),\n            created: function () {\n                _this.updatePrivateVariables();\n                _this.createCanvasFilter();\n                if (parent.currentFilter === '') {\n                    parent.currentFilter = id + '_default';\n                }\n                var hdrWrapper = document.querySelector('#' + id + '_headWrapper');\n                if (hdrWrapper) {\n                    hdrWrapper.style.display = 'none';\n                }\n                var filterElem = document.getElementById(parent.currentFilter + 'Canvas');\n                if (filterElem) {\n                    filterElem.parentElement.parentElement.classList.add('e-selected');\n                }\n                _this.enableDisableTbrBtn();\n                toolbar.refreshOverflow();\n            }\n        });\n        toolbar.appendTo('#' + id + '_contextualToolbar');\n    };\n    ToolbarModule.prototype.drawDashedLine = function (ctx) {\n        ctx.beginPath();\n        ctx.setLineDash([5]);\n        ctx.rect(10, 10, 280, 130);\n        ctx.stroke();\n        ctx.closePath();\n    };\n    ToolbarModule.prototype.createCanvasFilter = function () {\n        var parent = this.parent;\n        showSpinner(parent.element);\n        parent.element.style.opacity = '0.5';\n        var imageData = parent.getCurrentCanvasData();\n        this.inMemoryCanvas.width = imageData.width;\n        this.inMemoryCanvas.height = imageData.height;\n        this.inMemoryContext.putImageData(imageData, 0, 0);\n        this.updateFilterCanvas('_defaultCanvas', 'default');\n        this.updateFilterCanvas('_chromeCanvas', 'chrome');\n        this.updateFilterCanvas('_coldCanvas', 'cold');\n        this.updateFilterCanvas('_warmCanvas', 'warm');\n        this.updateFilterCanvas('_grayscaleCanvas', 'grayscale');\n        this.updateFilterCanvas('_sepiaCanvas', 'sepia');\n        this.updateFilterCanvas('_invertCanvas', 'invert');\n        hideSpinner(parent.element);\n        parent.element.style.opacity = '1';\n        parent.initialAdjustmentValue = this.lowerContext.filter;\n    };\n    ToolbarModule.prototype.updateFilterCanvas = function (selector, type) {\n        var parent = this.parent;\n        var filter = parent.element.querySelector('#' + parent.element.id + selector);\n        if (filter) {\n            var ctx = filter.getContext('2d');\n            ctx = filter.getContext('2d');\n            filter.style.width = '100px';\n            filter.style.height = '100px';\n            parent.notify('filter', { prop: 'updateAdj', value: { type: type, value: null, isPreview: true, ctx: ctx } });\n            ctx.drawImage(this.inMemoryCanvas, 0, 0, 300, 150);\n            if (parent.isSafari) {\n                parent.notify('filter', { prop: 'apply-filter', onPropertyChange: false, value: { context: ctx } });\n            }\n        }\n    };\n    ToolbarModule.prototype.getQuickAccessToolbarItem = function (isPenEdit) {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var args = { cancel: false, toolbarItems: [] };\n        var toolbarItems = [];\n        if (isNullOrUndefined(isPenEdit)) {\n            if (parent.activeObj.shape === 'image') {\n                toolbarItems.push('Flip');\n            }\n            if (parent.activeObj.shape !== 'redact') {\n                toolbarItems.push('BringToFront');\n            }\n            toolbarItems.push('Clone');\n            toolbarItems.push('Delete');\n            if (parent.activeObj.shape === 'text') {\n                toolbarItems.push('EditText');\n            }\n            args.shape = parent.toPascalCase(parent.activeObj.shape);\n        }\n        else if (isPenEdit) {\n            toolbarItems.push('BringToFront');\n            toolbarItems.push('Delete');\n            args.shape = 'Freehand draw';\n        }\n        args.toolbarItems = extend([], toolbarItems, null, true);\n        parent.trigger('quickAccessToolbarOpen', args);\n        var orgToolbarItems = [];\n        if (args.cancel) {\n            orgToolbarItems = [];\n        }\n        else {\n            for (var i = 0; i < args.toolbarItems.length; i++) {\n                switch (args.toolbarItems[i]) {\n                    case 'BringToFront':\n                        orgToolbarItems.push({ id: id + '_bringToFront', prefixIcon: 'e-icons e-bring-to-front',\n                            tooltipText: this.l10n.getConstant('BringToFront'), align: 'Left' });\n                        break;\n                    case 'Clone':\n                        orgToolbarItems.push({ id: id + '_duplicate', prefixIcon: 'e-icons e-order', cssClass: 'top-icon e-order',\n                            tooltipText: this.l10n.getConstant('Duplicate'), align: 'Left' });\n                        break;\n                    case 'Delete':\n                        orgToolbarItems.push({ id: id + '_remove', prefixIcon: 'e-icons e-trash', cssClass: 'top-icon e-trash',\n                            tooltipText: this.l10n.getConstant('Remove'), align: 'Left' });\n                        break;\n                    case 'EditText':\n                        orgToolbarItems.push({ id: id + '_editText', prefixIcon: 'e-icons e-annotation-edit', cssClass: 'top-icon e-annotation-edit',\n                            tooltipText: this.l10n.getConstant('EditText'), align: 'Left' });\n                        break;\n                    case 'Flip':\n                        orgToolbarItems.push({ id: id + '_hFlip', prefixIcon: 'e-icons e-horizontal-flip',\n                            tooltipText: this.l10n.getConstant('HorizontalFlip'), align: 'Left' });\n                        orgToolbarItems.push({ id: id + '_vFlip', prefixIcon: 'e-icons e-vertical-flip',\n                            tooltipText: this.l10n.getConstant('VerticalFlip'), align: 'Left' });\n                        break;\n                    default:\n                        orgToolbarItems.push(args.toolbarItems[i]);\n                        break;\n                }\n            }\n        }\n        return orgToolbarItems;\n    };\n    ToolbarModule.prototype.renderQAT = function (isPenEdit) {\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (parent.activeObj && parent.showQuickAccessToolbar) {\n            var qtArea = document.getElementById(id + '_quickAccessToolbarArea');\n            if (qtArea) {\n                this.destroyQuickAccessToolbar();\n                qtArea.style.display = 'block';\n            }\n            var items = this.getQuickAccessToolbarItem(isPenEdit);\n            if (items.length === 0) {\n                return;\n            }\n            if (isNullOrUndefined(parent.quickAccessToolbarTemplate)) {\n                var toolbarObj = new Toolbar({\n                    items: items,\n                    clicked: this.quickAccessToolbarClicked.bind(this)\n                });\n                toolbarObj.appendTo('#' + id + '_quickAccessToolbar');\n            }\n            var height = this.toolbarHeight && this.toolbarHeight !== 0 ? this.toolbarHeight : qtArea.clientHeight;\n            var wrapperElement = parent.element.querySelector('#' + id + '_headWrapper');\n            if (isNullOrUndefined(isPenEdit) && (parent.activeObj.activePoint.width !== 0 ||\n                parent.activeObj.activePoint.height !== 0 ||\n                (parent.activeObj.shape && parent.activeObj.shape === 'path' && parent.activeObj.pointColl.length > 0))) {\n                var orderObj = { order: null };\n                parent.notify('shape', { prop: 'getHighestOrder', onPropertyChange: false, value: { obj: orderObj } });\n                if (parent.activeObj.order > orderObj['order'] && document.getElementById(parent.element.id + '_bringToFront')) {\n                    document.getElementById(parent.element.id + '_bringToFront').classList.add('e-overlay');\n                }\n                else {\n                    if (document.getElementById(parent.element.id + '_bringToFront')) {\n                        document.getElementById(parent.element.id + '_bringToFront').classList.remove('e-overlay');\n                    }\n                }\n                qtArea.style.width = 'auto';\n                parent.activeObj.activePoint.width = Math.abs(parent.activeObj.activePoint.width);\n                parent.activeObj.activePoint.height = Math.abs(parent.activeObj.activePoint.height);\n                var x = parent.activeObj.activePoint.startX < parent.activeObj.activePoint.endX ?\n                    parent.activeObj.activePoint.startX : parent.activeObj.activePoint.endX;\n                var y = parent.activeObj.activePoint.startY < parent.activeObj.activePoint.endY ?\n                    parent.activeObj.activePoint.startY : parent.activeObj.activePoint.endY;\n                var width = parent.activeObj.activePoint.width;\n                if (parent.activeObj.rotatedAngle !== 0 && parent.activeObj.shape !== 'arrow') {\n                    var object = { activePoint: null };\n                    parent.notify('shape', { prop: 'getSquarePointForRotatedShape', onPropertyChange: false,\n                        value: { obj: parent.activeObj, object: object } });\n                    var point = object['activePoint'];\n                    x = point.startX;\n                    y = point.startY;\n                    width = point.width;\n                }\n                else if (parent.activeObj.shape === 'path') {\n                    var path = parent.getSquarePointForPath(parent.activeObj);\n                    x = path.startX;\n                    y = path.startY;\n                    width = path.width;\n                }\n                qtArea.style.left = (x + (width / 2)) - (items.length * 25) + 'px';\n                if (parseFloat(qtArea.style.left) + (qtArea.clientWidth / 2) !== x + (width / 2)) {\n                    var diff = (x + (width / 2)) - (parseFloat(qtArea.style.left) + (qtArea.clientWidth / 2));\n                    qtArea.style.left = parseFloat(qtArea.style.left) + diff + 'px';\n                }\n                if (wrapperElement) {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    height = wrapperElement.offsetHeight + height;\n                }\n                if (y - (height + (height / 1.5)) < parent.img.destTop) {\n                    qtArea.style.top = parent.img.destTop + 'px';\n                    if (wrapperElement) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        qtArea.style.top = (parent.img.destTop < 0 ? 0 : parent.img.destTop) + wrapperElement.offsetHeight + 'px';\n                    }\n                }\n                else {\n                    height = this.toolbarHeight;\n                    qtArea.style.top = y - (height + (height / 1.5)) + 'px';\n                }\n            }\n            else if (isPenEdit) {\n                var indexObj = { freehandSelectedIndex: -1 };\n                parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n                var orderObj = { order: null };\n                parent.notify('shape', { prop: 'getHighestOrder', onPropertyChange: false, value: { obj: orderObj } });\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                if (parent.getObjFromId(parent.pointColl[indexObj['freehandSelectedIndex']].id).order >= orderObj['order'] && document.getElementById(parent.element.id + '_bringToFront')) {\n                    document.getElementById(parent.element.id + '_bringToFront').classList.add('e-overlay');\n                }\n                else {\n                    if (document.getElementById(parent.element.id + '_bringToFront')) {\n                        document.getElementById(parent.element.id + '_bringToFront').classList.remove('e-overlay');\n                    }\n                }\n                var obj = { activePoint: null };\n                parent.notify('freehand-draw', { prop: 'getSqPtFD',\n                    value: { idx: indexObj['freehandSelectedIndex'], obj: obj } });\n                var point = obj['activePoint'];\n                qtArea.style.width = 'auto';\n                qtArea.style.left = (point.startX + (point.width / 2)) - (items.length * 24) + 'px';\n                if (point.startY - (height + (height / 1.5)) < parent.img.destTop) {\n                    qtArea.style.top = parent.img.destTop + 'px';\n                }\n                else {\n                    qtArea.style.top = point.startY - (height + (height / 1.5)) + 'px';\n                }\n            }\n            else {\n                qtArea.style.display = 'none';\n            }\n            if (parseFloat(qtArea.style.top) < 0) {\n                qtArea.style.top = '0px';\n            }\n        }\n    };\n    ToolbarModule.prototype.refreshDropDownBtn = function (isDisabled) {\n        if (isNullOrUndefined(isDisabled)) {\n            return;\n        }\n        var parent = this.parent;\n        var id = parent.element.id;\n        var annotation = document.querySelector('#' + id + '_annotationBtn');\n        if (annotation) {\n            if (isDisabled) {\n                annotation.classList.add('e-disabled');\n                annotation.parentElement.classList.add('e-overlay');\n            }\n            else {\n                annotation.classList.remove('e-disabled');\n                annotation.parentElement.classList.remove('e-overlay');\n            }\n            getComponent(annotation, 'dropdown-btn').disabled = isDisabled;\n        }\n        var transform = document.querySelector('#' + id + '_transformBtn');\n        if (transform) {\n            if (isDisabled) {\n                transform.classList.add('e-disabled');\n                transform.parentElement.classList.add('e-overlay');\n            }\n            else {\n                transform.classList.remove('e-disabled');\n                transform.parentElement.classList.remove('e-overlay');\n            }\n            getComponent(transform, 'dropdown-btn').disabled = isDisabled;\n        }\n        var adjustment = document.querySelector('#' + id + '_adjustment');\n        if (adjustment) {\n            if (isDisabled) {\n                adjustment.classList.add('e-disabled');\n                adjustment.parentElement.classList.add('e-overlay');\n            }\n            else {\n                adjustment.classList.remove('e-disabled');\n                adjustment.parentElement.classList.remove('e-overlay');\n            }\n            getComponent(adjustment, 'btn').disabled = isDisabled;\n        }\n        var filter = document.querySelector('#' + id + '_filter');\n        if (filter) {\n            if (isDisabled) {\n                filter.classList.add('e-disabled');\n                filter.parentElement.classList.add('e-overlay');\n            }\n            else {\n                filter.classList.remove('e-disabled');\n                filter.parentElement.classList.remove('e-overlay');\n            }\n            getComponent(filter, 'btn').disabled = isDisabled;\n        }\n    };\n    ToolbarModule.prototype.cropSelect = function (args) {\n        var parent = this.parent;\n        parent.isCropTab = true;\n        if (isNullOrUndefined(parent.transform.cropZoomFactor)) {\n            parent.transform.cropZoomFactor = parent.transform.zoomFactor;\n            parent.notify('draw', { prop: 'setTempZoomFactor', onPropertyChange: false, value: { tempZoomFactor: parent.transform.zoomFactor } });\n        }\n        parent.transform.zoomFactor = parent.transform.cropZoomFactor;\n        var text = args.item.id;\n        this.currentToolbar = 'crop';\n        parent.currSelectionPoint = null;\n        parent.notify('draw', { prop: 'setIsCropSelect', value: { bool: true } });\n        var obj = { prevObj: null };\n        parent.notify('crop', { prop: 'getPreviousCropCurrentObj', value: { obj: obj } });\n        parent.notify('draw', { prop: 'select', onPropertyChange: false,\n            value: { type: text, startX: null, startY: null, width: null, height: null } });\n        parent.notify('crop', { prop: 'setPreviousCropCurrentObj', value: { obj: obj['prevObj'] } });\n        this.enableDisableTbrBtn();\n        parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n    };\n    ToolbarModule.prototype.quickAccessToolbarClicked = function (args, isContextualToolbar) {\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (args.item) {\n            var isPreventUndoRedo = null;\n            var obj = { prevActObj: null };\n            var object = { tempObj: null };\n            parent.notify('draw', { prop: 'getPrevActObj', onPropertyChange: false, value: { obj: obj } });\n            parent.notify('selection', { prop: 'getTempActObj', onPropertyChange: false, value: { obj: object } });\n            object['tempObj']['activePoint']['height'] = Math.abs(object['tempObj']['activePoint']['height']);\n            var pathObject = { isNewPath: null };\n            var ctx = void 0;\n            parent.notify('draw', { prop: 'getNewPath', value: { obj: pathObject } });\n            var type = args.item.id.replace(id + '_', '').toLowerCase();\n            var left = void 0;\n            var right = void 0;\n            var indexObj = { freehandSelectedIndex: null };\n            var shapeId = void 0;\n            var isDisabled = void 0;\n            var orderObj = { order: null };\n            switch (type) {\n                case 'duplicate':\n                    if (!parent.element.querySelector('#' + id + '_duplicate').classList.contains('e-overlay')) {\n                        this.refreshSlider();\n                        if (!pathObject['isNewPath'] && JSON.stringify(object['tempObj']) === JSON.stringify(parent.activeObj)) {\n                            isPreventUndoRedo = true;\n                        }\n                        this.duplicateShape(isPreventUndoRedo);\n                    }\n                    break;\n                case 'remove':\n                    if (!parent.element.querySelector('#' + id + '_remove').classList.contains('e-overlay')) {\n                        parent.noPushUndo = false;\n                        this.refreshSlider();\n                        parent.notify('selection', { prop: 'deleteItem', onPropertyChange: false });\n                    }\n                    break;\n                case 'edittext':\n                    if (!parent.element.querySelector('#' + id + '_editText').classList.contains('e-overlay')) {\n                        this.editText();\n                    }\n                    break;\n                case 'rotleft':\n                case 'rotright':\n                    left = parent.element.querySelector('#' + id + '_rotLeft');\n                    right = parent.element.querySelector('#' + id + '_rotRight');\n                    if ((left && !left.classList.contains('e-disabled')) ||\n                        (right && !right.classList.contains('e-disabled'))) {\n                        parent.rotateImage(args.item.id.replace(id + '_', '').toLowerCase());\n                    }\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                    break;\n                case 'hflip':\n                    if (!parent.element.querySelector('#' + id + '_hFlip').classList.contains('e-disabled')) {\n                        ctx = parent.activeObj.imageCanvas.getContext('2d');\n                        parent.horizontalFlip(ctx);\n                    }\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                    break;\n                case 'vflip':\n                    if (!parent.element.querySelector('#' + id + '_vFlip').classList.contains('e-disabled')) {\n                        ctx = parent.activeObj.imageCanvas.getContext('2d');\n                        parent.verticalFlip(ctx);\n                    }\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                    break;\n                case 'bringtofront':\n                    if (!parent.element.querySelector('#' + id + '_bringToFront').classList.contains('e-overlay')) {\n                        parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n                        shapeId = indexObj['freehandSelectedIndex'] !== null ? parent.pointColl[indexObj['freehandSelectedIndex']].id :\n                            parent.activeObj.currIndex;\n                        parent.updateShapeOrder(shapeId, type);\n                        isDisabled = false;\n                        parent.notify('shape', { prop: 'getHighestOrder', onPropertyChange: false, value: { obj: orderObj } });\n                        if (shapeId.indexOf('pen') > -1) {\n                            parent.notify('shape', { prop: 'updateShapeColl', onPropertyChange: false });\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var order = parent.getObjFromId(shapeId).order;\n                            isDisabled = order >= orderObj['order'] ? true : false;\n                        }\n                        else {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var order = parent.getObjFromId(shapeId).order;\n                            isDisabled = order > orderObj['order'] ? true : false;\n                        }\n                        if (isDisabled) {\n                            document.getElementById(parent.element.id + '_bringToFront').classList.add('e-overlay');\n                        }\n                        else {\n                            document.getElementById(parent.element.id + '_bringToFront').classList.remove('e-overlay');\n                        }\n                        parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                    }\n                    break;\n            }\n            if (type === 'duplicate' || type === 'remove') {\n                parent.notify('draw', { prop: 'redrawDownScale' });\n            }\n        }\n        if (isNullOrUndefined(isContextualToolbar)) {\n            parent.trigger('quickAccessToolbarItemClick', args);\n        }\n    };\n    ToolbarModule.prototype.editText = function () {\n        var parent = this.parent;\n        var points = { x: parent.activeObj.activePoint.startX, y: parent.activeObj.activePoint.startY };\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.notify('selection', { prop: 'setTempActObj', onPropertyChange: false,\n            value: { obj: extend({}, parent.activeObj, {}, true) } });\n        parent.notify('selection', { prop: 'setInitialTextEdit', onPropertyChange: false,\n            value: { bool: true } });\n        parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false,\n            value: { prevActObj: extend({}, parent.activeObj, {}, true) } });\n        if (parent.activeObj.rotatedAngle !== 0) {\n            var object = { x: points.x, y: points.y };\n            parent.notify('shape', { prop: 'getTextBoxPosition', onPropertyChange: false,\n                value: { obj: parent.activeObj, object: object } });\n            points.x = object['x'];\n            points.y = object['y'];\n            var object1 = { x: points.x, y: points.y };\n            parent.notify('shape', { prop: 'setFlipState', onPropertyChange: false,\n                value: { x: points.x, y: points.y, obj: parent.activeObj, object: object1 } });\n            points.x = object1['x'];\n            points.y = object1['y'];\n        }\n        var tempActiveObj = extend({}, parent.activeObj, {}, true);\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        this.lowerContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n        parent.notify('draw', { prop: 'redrawDownScale' });\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n        parent.activeObj = tempActiveObj;\n        parent.notify('shape', { prop: 'renderTextArea', onPropertyChange: false,\n            value: { x: points.x, y: points.y, actObj: parent.activeObj } });\n        if (isNullOrUndefined(parent.activeObj.currIndex)) {\n            parent.notify('draw', { prop: 'setShapeTextInsert', onPropertyChange: false, value: { bool: true } });\n        }\n        if (document.getElementById(parent.element.id + '_quickAccessToolbarArea')) {\n            document.getElementById(parent.element.id + '_quickAccessToolbarArea').style.display = 'none';\n        }\n    };\n    ToolbarModule.prototype.duplicateShape = function (isPreventUndoRedo, isPublicMethod) {\n        var parent = this.parent;\n        var tempObj = { activePoint: { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 },\n            flipObjColl: [], triangle: [], triangleRatio: [] };\n        parent.notify('selection', { prop: 'setTempActObj', onPropertyChange: false,\n            value: { obj: tempObj } });\n        var obj = { prevActObj: null };\n        parent.notify('draw', { prop: 'getPrevActObj', onPropertyChange: false, value: { obj: obj } });\n        var pathObject = { isNewPath: null };\n        parent.notify('draw', { prop: 'getNewPath', value: { obj: pathObject } });\n        var objColl;\n        var duplicateObj = extend({}, parent.activeObj, {}, true);\n        var orderObj = { order: null };\n        parent.notify('shape', { prop: 'getHighestOrder', onPropertyChange: false, value: { obj: orderObj } });\n        if (duplicateObj.order) {\n            parent.notify('shape', { prop: 'updateShapeColl', onPropertyChange: false });\n            duplicateObj.order = orderObj['order'] > duplicateObj.order ? orderObj['order'] + 1 : duplicateObj.order + 1;\n        }\n        else {\n            parent.noPushUndo = true;\n            parent.okBtn();\n            parent.noPushUndo = false;\n            parent.selectShape(duplicateObj.currIndex);\n            duplicateObj.order = orderObj['order'] > duplicateObj.order ? orderObj['order'] + 1 : duplicateObj.order + 1;\n        }\n        if (duplicateObj.shape === 'image') {\n            objColl = extend([], parent.objColl, [], true);\n            parent.notify('undo-redo', { prop: 'updateUrObj', onPropertyChange: false, value: { objColl: objColl } });\n        }\n        if (isNullOrUndefined(parent.activeObj.currIndex)) {\n            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: isPreventUndoRedo } });\n        }\n        else if (obj['prevActObj'] || isPublicMethod) {\n            parent.activeObj.currIndex = null;\n            duplicateObj.currIndex = null;\n            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: isPreventUndoRedo } });\n        }\n        else {\n            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n        }\n        var noPushUndo = parent.noPushUndo;\n        parent.noPushUndo = false;\n        parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n        parent.noPushUndo = noPushUndo;\n        objColl = extend([], parent.objColl, [], true);\n        duplicateObj.activePoint.startX += 10;\n        duplicateObj.activePoint.startY -= 10;\n        duplicateObj.activePoint.endX += 10;\n        duplicateObj.activePoint.endY -= 10;\n        if (duplicateObj.shape === 'path') {\n            for (var i = 0; i < duplicateObj.pointColl.length; i++) {\n                duplicateObj.pointColl[i].x += 10;\n                duplicateObj.pointColl[i].y -= 10;\n            }\n        }\n        else if (duplicateObj.shape === 'image') {\n            duplicateObj.imageCanvas = parent.createElement('canvas');\n        }\n        var shapeIDObj = { id: 'shape_' + (parent.objColl.length + 1) };\n        parent.notify('shape', { prop: 'getNewShapeId', onPropertyChange: false, value: { obj: shapeIDObj } });\n        duplicateObj.currIndex = shapeIDObj['id'];\n        parent.activeObj = extend({}, duplicateObj, {}, true);\n        if (parent.activeObj.shape === 'image') {\n            var activePoint = extend({}, duplicateObj.activePoint, {}, true);\n            var dimObj = { width: 0, height: 0 };\n            parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n                value: { width: parent.activeObj.imageElement.width, height: parent.activeObj.imageElement.height,\n                    obj: dimObj, isImgShape: null } });\n            parent.activeObj.activePoint.width = dimObj['width'];\n            parent.activeObj.activePoint.height = dimObj['height'];\n            if (parent.activeObj.isHorImageFlip && parent.activeObj.isVerImageFlip) {\n                parent.activeObj.isHorImageFlip = parent.activeObj.isVerImageFlip = false;\n                parent.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n                    value: { ctx: duplicateObj.imageCanvas.getContext('2d'), isImgAnnotation: true, isHFlip: true, isVFlip: true } });\n                parent.activeObj.isHorImageFlip = parent.activeObj.isVerImageFlip = true;\n            }\n            else if (parent.activeObj.isHorImageFlip) {\n                parent.activeObj.isHorImageFlip = false;\n                parent.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n                    value: { ctx: duplicateObj.imageCanvas.getContext('2d'), isImgAnnotation: true, isHFlip: true, isVFlip: null } });\n                parent.activeObj.isHorImageFlip = true;\n            }\n            else if (parent.activeObj.isVerImageFlip) {\n                parent.activeObj.isVerImageFlip = false;\n                parent.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n                    value: { ctx: duplicateObj.imageCanvas.getContext('2d'), isImgAnnotation: true, isHFlip: null, isVFlip: true } });\n                parent.activeObj.isVerImageFlip = true;\n            }\n            else {\n                parent.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n                    value: { ctx: duplicateObj.imageCanvas.getContext('2d'), isImgAnnotation: true, isHFlip: null, isVFlip: null } });\n            }\n            parent.activeObj.activePoint = activePoint;\n        }\n        if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow') {\n            parent.notify('shape', { prop: 'setPointCollForLineArrow', onPropertyChange: false,\n                value: { obj: parent.activeObj } });\n        }\n        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj,\n                isCropRatio: null, points: null, isPreventDrag: true } });\n        parent.notify('undo-redo', { prop: 'updateUrObj', onPropertyChange: false, value: { objColl: objColl } });\n        parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n        parent.noPushUndo = false;\n        parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n        parent.noPushUndo = true;\n        parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false,\n            value: { obj: parent.objColl[parent.objColl.length - 1] } });\n        var id = parent.element.id;\n        var toolbarId = Browser.isDevice ? '#' + id + '_bottomToolbar ' + '#' + id : '#' + id;\n        var object = { freehandDrawSelectedId: null };\n        parent.notify('freehand-draw', { prop: 'getFreehandDrawSelectedId', onPropertyChange: false, value: { obj: object } });\n        this.enableDisableCloneBtn(toolbarId, object);\n        this.renderQAT();\n        if (parent.activeObj.shape && parent.activeObj.shape === 'redact') {\n            this.redactSlider(parent.activeObj.redactType);\n        }\n    };\n    ToolbarModule.prototype.defToolbarClicked = function (args) {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var isContextualToolbar = false;\n        var isFilterFinetune = false;\n        if (!this.isFrameToolbar && parent.element.querySelector('.e-contextual-toolbar-wrapper')) {\n            if (!parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.contains('e-hide')) {\n                isContextualToolbar = isFilterFinetune = true;\n            }\n            var straightenObj = { bool: parent.isStraightening };\n            if (!Browser.isDevice || (Browser.isDevice && !straightenObj['bool'])) {\n                parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n            }\n        }\n        if (args.item) {\n            var type = args.item.id.replace(id + '_', '').toLowerCase();\n            if (type === 'duplicate' || type === 'remove' || type === 'edittext' ||\n                type === 'hflip' || type === 'vflip' || type === 'rotleft' || type === 'rotright') {\n                this.quickAccessToolbarClicked(args, true);\n                parent.trigger('toolbarItemClicked', args);\n            }\n            else {\n                var isDisabledFilter = false;\n                var isDisabledAdjustment = false;\n                var adjustment = document.querySelector('#' + id + '_adjustment');\n                if (adjustment && adjustment.classList.contains('e-disabled')) {\n                    isDisabledAdjustment = true;\n                }\n                var filter = document.querySelector('#' + id + '_filter');\n                if (filter && filter.classList.contains('e-disabled')) {\n                    isDisabledFilter = true;\n                }\n                this.enableDisableTbrBtn();\n                this.performDefTbrClick(type, isContextualToolbar, isDisabledAdjustment, isDisabledFilter, isFilterFinetune);\n                parent.trigger('toolbarItemClicked', args);\n                if (parent.isStraightening) {\n                    parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n                }\n                var validTypes = ['undo', 'redo', 'cancel', 'aspectratio', 'nonaspectratio',\n                    'save', 'duplicate', 'filter', 'frame', 'none', 'mat', 'bevel', 'line', 'inset', 'hook', 'resize',\n                    'remove'];\n                if (validTypes.indexOf(type) !== -1) {\n                    parent.notify('draw', { prop: 'redrawDownScale' });\n                }\n            }\n        }\n    };\n    ToolbarModule.prototype.performDefTbrClick = function (type, isContextualToolbar, isDisabledAdjustment, isDisabledFilter, isFilterFinetune) {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var zoomIn = parent.element.querySelector('#' + id + '_zoomIn');\n        var aspectRatioHeight = parent.element.querySelector('#' + id + '_resizeHeight');\n        var aspectRatioWidth = parent.element.querySelector('#' + id + '_resizeWidth');\n        var isCropSelection = false;\n        var panBtn;\n        var splitWords;\n        var actionType;\n        var actionArgs;\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords === undefined && parent.currObjType.isCustomCrop) {\n            isCropSelection = true;\n        }\n        else if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (!parent.disabled) {\n            switch (type) {\n                case 'pan':\n                    parent.currObjType.isCustomCrop = parent.currObjType.isFiltered = false;\n                    parent.currObjType.isRedact = false;\n                    if (parent.currObjType.isUndoAction) {\n                        parent.notify('undo-redo', { prop: 'refreshUrc', value: { bool: null } });\n                    }\n                    if (isCropSelection) {\n                        parent.currObjType.isCustomCrop = false;\n                        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                        this.refreshToolbar('main');\n                    }\n                    if (parent.togglePan) {\n                        this.cancelPan();\n                        parent.notify('transform', { prop: 'setDisablePan', onPropertyChange: false, value: { bool: true } });\n                        if (this.currentToolbar === 'pen') {\n                            parent.freeHandDraw(true);\n                        }\n                    }\n                    else {\n                        panBtn = parent.element.querySelector('.e-img-pan .e-btn');\n                        if (panBtn) {\n                            panBtn.classList.add('e-selected-btn');\n                        }\n                        parent.pan(true);\n                        parent.notify('transform', { prop: 'setDisablePan', onPropertyChange: false, value: { bool: false } });\n                    }\n                    if (zoomIn && parent.zoomSettings.zoomFactor >= parent.zoomSettings.maxZoomFactor) {\n                        zoomIn.classList.add('e-disabled');\n                        zoomIn.parentElement.classList.add('e-overlay');\n                    }\n                    else if (zoomIn) {\n                        zoomIn.classList.remove('e-disabled');\n                        zoomIn.parentElement.classList.remove('e-overlay');\n                    }\n                    this.refreshToolbar('main');\n                    break;\n                case 'cancel':\n                    if (parent.currObjType.isRedact) {\n                        parent.currObjType.isRedact = false;\n                    }\n                    if (this.isFrameToolbar && parent.element.querySelector('.e-contextual-toolbar-wrapper') && !parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.contains('e-hide')) {\n                        parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                    }\n                    parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: isContextualToolbar, isFinalCancel: true } });\n                    break;\n                case 'ok':\n                    if (Browser.isDevice && this.isFrameToolbar && parent.element.querySelector('.e-contextual-toolbar-wrapper') && !parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.contains('e-hide')) {\n                        parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                    }\n                    parent.okBtn(null, true);\n                    parent.drawingShape = null;\n                    this.refreshDropDownBtn(false);\n                    this.currentToolbar = 'main';\n                    parent.isStraightening = false;\n                    parent.notify('draw', { prop: 'resetTempObjColl' });\n                    parent.notify('draw', { prop: 'resetTempPointColl' });\n                    break;\n                case 'crop':\n                    parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n                    if (Browser.isDevice) {\n                        this.updateContextualToolbar('color', 'straighten');\n                    }\n                    break;\n                case 'reset':\n                    parent.reset();\n                    this.imageHeight = null;\n                    this.imageWidth = null;\n                    parent.aspectHeight = null;\n                    parent.aspectWidth = null;\n                    this.isAspectRatio = true;\n                    this.currentToolbar = 'main';\n                    break;\n                case 'undo':\n                    parent.noPushUndo = false;\n                    if (parent.togglePen || parent.drawingShape) {\n                        parent.okBtn();\n                        parent.drawingShape = null;\n                    }\n                    parent.notify('undo-redo', { prop: 'call-undo' });\n                    break;\n                case 'redo':\n                    parent.noPushUndo = false;\n                    if (parent.togglePen || parent.drawingShape) {\n                        parent.okBtn();\n                        parent.drawingShape = null;\n                    }\n                    parent.notify('undo-redo', { prop: 'call-redo' });\n                    break;\n                case 'aspectratio':\n                    if (!parent.isCircleCrop && (isNullOrUndefined(parent.currSelectionPoint)) ||\n                        (parent.currSelectionPoint && parent.currSelectionPoint.shape !== 'crop-circle')) {\n                        if (getComponent(aspectRatioWidth, 'numerictextbox').value) {\n                            parent.aspectWidth = getComponent(aspectRatioWidth, 'numerictextbox').value;\n                            parent.aspectHeight = getComponent(aspectRatioHeight, 'numerictextbox').value;\n                            parent.notify('transform', { prop: 'resize', value: { width: parent.aspectWidth, height: null, isAspectRatio: true } });\n                        }\n                        else if (getComponent(aspectRatioHeight, 'numerictextbox').value) {\n                            parent.aspectWidth = parseFloat(getComponent(aspectRatioWidth, 'numerictextbox').placeholder);\n                            parent.aspectHeight = getComponent(aspectRatioHeight, 'numerictextbox').value;\n                            parent.notify('transform', { prop: 'resize', value: { width: parent.aspectWidth, height: parent.aspectHeight, isAspectRatio: true } });\n                        }\n                        parent.resizeSrc = { startX: parent.img.srcLeft, startY: parent.img.srcTop, width: parent.img.srcWidth,\n                            height: parent.img.srcHeight };\n                        this.refreshToolbar('resize');\n                    }\n                    break;\n                case 'nonaspectratio':\n                    if (getComponent(aspectRatioWidth, 'numerictextbox').value ||\n                        getComponent(aspectRatioHeight, 'numerictextbox').value) {\n                        parent.aspectWidth = getComponent(aspectRatioWidth, 'numerictextbox').value ?\n                            getComponent(aspectRatioWidth, 'numerictextbox').value :\n                            parseFloat(getComponent(aspectRatioWidth, 'numerictextbox').placeholder);\n                        parent.aspectHeight = getComponent(aspectRatioHeight, 'numerictextbox').value ?\n                            getComponent(aspectRatioHeight, 'numerictextbox').value :\n                            parseFloat(getComponent(aspectRatioHeight, 'numerictextbox').placeholder);\n                        parent.notify('transform', { prop: 'resize', value: { width: parent.aspectWidth, height: parent.aspectHeight, isAspectRatio: false } });\n                    }\n                    parent.resizeSrc = { startX: parent.img.srcLeft, startY: parent.img.srcTop, width: parent.img.srcWidth,\n                        height: parent.img.srcHeight };\n                    this.refreshToolbar('resize');\n                    break;\n                case 'resize':\n                    if (parent.currObjType.isFiltered || parent.currObjType.isRedact) {\n                        parent.okBtn();\n                    }\n                    this.resizeClick();\n                    break;\n                case 'adjustment':\n                    if (!isDisabledAdjustment) {\n                        if (parent.currObjType.isFiltered || parent.currObjType.isRedact) {\n                            parent.okBtn();\n                        }\n                        this.refreshToolbar('adjustment');\n                        parent.setTempFilterProperties();\n                        parent.notify('draw', { prop: 'updateFinetune' });\n                        parent.notify('filter', { prop: 'setTempAdjVal' });\n                        this.openSlider('brightness');\n                    }\n                    break;\n                case 'brightness':\n                case 'contrast':\n                case 'hue':\n                case 'saturation':\n                case 'opacity':\n                case 'blur':\n                case 'exposure':\n                    this.openSlider(type);\n                    break;\n                case 'filter':\n                    if (!isDisabledFilter) {\n                        showSpinner(parent.element);\n                        this.refreshToolbar('filter');\n                        parent.setTempFilterProperties();\n                        hideSpinner(parent.element);\n                    }\n                    break;\n                case 'default':\n                case 'chrome':\n                case 'cold':\n                case 'warm':\n                case 'grayscale':\n                case 'blackandwhite':\n                case 'sepia':\n                case 'invert':\n                case 'sharpen':\n                    parent.currObjType.isFiltered = true;\n                    parent.notify('filter', { prop: 'applyImageFilter', value: { option: type } });\n                    break;\n                case 'upload':\n                    if (isFilterFinetune) {\n                        parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.remove('e-hide');\n                    }\n                    break;\n                case 'bold':\n                    parent.notify('selection', { prop: 'setInitialTextEdit', value: { bool: false } });\n                    if (parent.activeObj.textSettings.bold && parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'italic' } });\n                    }\n                    else if (parent.activeObj.textSettings.bold && !parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'default' } });\n                    }\n                    else if (!parent.activeObj.textSettings.bold && parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'bolditalic' } });\n                    }\n                    else if (!parent.activeObj.textSettings.bold && !parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'bold' } });\n                    }\n                    if (parent.element.querySelector('#' + id + '_bold').classList.contains('e-selected-btn')) {\n                        parent.element.querySelector('#' + id + '_bold').classList.remove('e-selected-btn');\n                    }\n                    else {\n                        parent.element.querySelector('#' + id + '_bold').classList.add('e-selected-btn');\n                    }\n                    if (parent.activeObj.activePoint.width !== 0 || parent.activeObj.activePoint.height !== 0) {\n                        parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                    }\n                    break;\n                case 'italic':\n                    parent.notify('selection', { prop: 'setInitialTextEdit', value: { bool: false } });\n                    if (parent.activeObj.textSettings.bold && parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'bold' } });\n                    }\n                    else if (parent.activeObj.textSettings.bold && !parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'bolditalic' } });\n                    }\n                    else if (!parent.activeObj.textSettings.bold && parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'default' } });\n                    }\n                    else if (!parent.activeObj.textSettings.bold && !parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'italic' } });\n                    }\n                    if (parent.element.querySelector('#' + id + '_italic').classList.contains('e-selected-btn')) {\n                        parent.element.querySelector('#' + id + '_italic').classList.remove('e-selected-btn');\n                    }\n                    else {\n                        parent.element.querySelector('#' + id + '_italic').classList.add('e-selected-btn');\n                    }\n                    if (parent.activeObj.activePoint.width !== 0 || parent.activeObj.activePoint.height !== 0) {\n                        parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                    }\n                    break;\n                case 'croptransform':\n                    this.performCropTransformClick();\n                    break;\n                case 'rotateleft':\n                case 'rotateright':\n                case 'horizontalflip':\n                case 'verticalflip':\n                    parent.transformSelect(type);\n                    this.updateRedactObj();\n                    if (type === 'rotateleft' || type === 'rotateright') {\n                        parent.notify('draw', { prop: 'resetStraightenDestPoints' });\n                        parent.notify('draw', { prop: 'setDestForStraighten' });\n                    }\n                    parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n                    if (Browser.isDevice) {\n                        this.updateContextualToolbar('color', 'straighten');\n                    }\n                    actionType = type === 'rotateleft' || type === 'rotateright' ?\n                        'rotate' : 'flip';\n                    actionArgs = { action: actionType, actionEventArgs: parent.editCompleteArgs };\n                    parent.triggerEditCompleteEvent(actionArgs);\n                    break;\n                case 'save':\n                    parent.noPushUndo = false;\n                    parent.okBtn();\n                    parent.drawingShape = null;\n                    this.saveDialogPopup();\n                    break;\n                case 'transparency':\n                    this.updateContextualToolbar('transparency', 'transparency');\n                    break;\n                case 'frame':\n                    this.frameToolbarClick();\n                    break;\n                case 'none':\n                case 'mat':\n                case 'bevel':\n                case 'line':\n                case 'inset':\n                case 'hook':\n                    this.unselectFrameBtn();\n                    if (parent.element.querySelector('#' + id + '_' + type)) {\n                        parent.element.querySelector('#' + id + '_' + type).classList.add('e-selected-btn');\n                    }\n                    parent.frameObj.type = type;\n                    parent.frameObj.size = 20;\n                    parent.frameObj.inset = 20;\n                    parent.frameObj.radius = 0;\n                    parent.frameObj.amount = 1;\n                    if (type === 'inset') {\n                        parent.frameObj.offset = 60;\n                    }\n                    else {\n                        parent.frameObj.offset = 20;\n                    }\n                    this.refreshToolbar('frame');\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    parent.isFrameBtnClick = true;\n                    parent.curFrameObjEvent = { previousFrameSetting: parent.tempFrameObj, currentFrameSetting: parent.frameObj };\n                    parent.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: parent.tempFrameObj, obj: { frameChangeEventArgs: null } } });\n                    break;\n                case 'redact':\n                    parent.currObjType.isRedact = true;\n                    parent.drawingShape = 'redact';\n                    if (isNullOrUndefined(parent.activeObj.redactBlur)) {\n                        parent.activeObj.redactBlur = 20;\n                    }\n                    if (isNullOrUndefined(parent.activeObj.redactPixelate)) {\n                        parent.activeObj.redactPixelate = 20;\n                    }\n                    parent.notify('selection', { prop: 'annotate', value: { shape: 'redact' } });\n                    this.refreshToolbar('redact');\n                    this.redactSlider(parent.activeObj.redactType);\n                    break;\n                case 'pixelate':\n                    parent.currObjType.isRedact = true;\n                    parent.drawingShape = 'redact';\n                    parent.notify('selection', { prop: 'annotate', value: { shape: 'redact' } });\n                    if (parent.activeObj.redactType === 'blur') {\n                        this.updateRedactType('pixelate');\n                    }\n                    parent.notify('shape', { prop: 'setRedactType', onPropertyChange: false,\n                        value: { redactType: 'pixelate' } });\n                    if (parent.activeObj.redactType === 'pixelate') {\n                        var pixelateBtn = parent.element.querySelector('#' + id + '_' + 'pixelate');\n                        var redactBlurBtn = parent.element.querySelector('#' + id + '_' + 'redactBlur');\n                        if (pixelateBtn) {\n                            pixelateBtn.classList.add('e-selected-btn');\n                        }\n                        if (redactBlurBtn && redactBlurBtn.classList.contains('e-selected-btn')) {\n                            redactBlurBtn.classList.remove('e-selected-btn');\n                        }\n                    }\n                    else {\n                        var redactBlurBtn = parent.element.querySelector('#' + id + '_' + 'redactBlur');\n                        if (redactBlurBtn) {\n                            redactBlurBtn.classList.add('e-selected-btn');\n                        }\n                    }\n                    this.redactSlider(parent.activeObj.redactType);\n                    if (parent.activeObj.activePoint.width !== 0 || parent.activeObj.activePoint.height !== 0) {\n                        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                            value: { operation: 'shapeTransform', previousObj: null, previousObjColl: null,\n                                previousPointColl: null, previousSelPointColl: null,\n                                previousCropObj: null, previousText: null,\n                                currentText: null, previousFilter: null, isCircleCrop: null } });\n                    }\n                    break;\n                case 'redactblur':\n                    parent.currObjType.isRedact = true;\n                    parent.drawingShape = 'redact';\n                    parent.notify('selection', { prop: 'annotate', value: { shape: 'redact' } });\n                    parent.notify('shape', { prop: 'setRedactType', onPropertyChange: false,\n                        value: { redactType: 'blur' } });\n                    if (parent.activeObj.redactType === 'pixelate') {\n                        this.updateRedactType('blur');\n                    }\n                    parent.notify('shape', { prop: 'setRedactType', onPropertyChange: false, value: { redactType: 'blur' } });\n                    if (parent.activeObj.redactType === 'blur') {\n                        var redactBlurBtn = parent.element.querySelector('#' + id + '_' + 'redactBlur');\n                        var pixelateBtn = parent.element.querySelector('#' + id + '_' + 'pixelate');\n                        if (redactBlurBtn) {\n                            redactBlurBtn.classList.add('e-selected-btn');\n                        }\n                        if (pixelateBtn && pixelateBtn.classList.contains('e-selected-btn')) {\n                            pixelateBtn.classList.remove('e-selected-btn');\n                        }\n                    }\n                    else {\n                        var pixelateBtn = parent.element.querySelector('#' + id + '_' + 'pixelate');\n                        if (pixelateBtn) {\n                            pixelateBtn.classList.add('e-selected-btn');\n                        }\n                    }\n                    this.redactSlider(parent.activeObj.redactType);\n                    if (parent.activeObj.activePoint.width !== 0 || parent.activeObj.activePoint.height !== 0) {\n                        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                            value: { operation: 'shapeTransform', previousObj: null, previousObjColl: null,\n                                previousPointColl: null, previousSelPointColl: null,\n                                previousCropObj: null, previousText: null,\n                                currentText: null, previousFilter: null, isCircleCrop: null } });\n                    }\n                    break;\n            }\n        }\n    };\n    ToolbarModule.prototype.updateRedactType = function (value) {\n        var parent = this.parent;\n        parent.activeObj.redactType = value;\n        parent.notify('shape', { prop: 'setRedactType', value: { type: value } });\n        this.parent.objColl.push(parent.activeObj);\n        parent.notify('selection', { prop: 'redrawShape', value: { obj: parent.objColl[parent.objColl.length - 1] } });\n    };\n    ToolbarModule.prototype.frameToolbarClick = function () {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var frame = document.querySelector('#' + id + '_frame');\n        var zoom;\n        var frameObj;\n        var tempFrameObj;\n        parent.notify('draw', { prop: 'updateCropSelection', onPropertyChange: false });\n        if (parent.currObjType.isFiltered || parent.currObjType.isRedact) {\n            parent.okBtn();\n        }\n        if (frame && !frame.classList.contains('e-overlay')) {\n            zoom = parent.transform.zoomFactor;\n            parent.frameDestPoints = extend({}, parent.img, {}, true);\n            if (isNullOrUndefined(parent.cxtTbarHeight)) {\n                frameObj = extend({}, parent.frameObj, {}, true);\n                tempFrameObj = extend({}, parent.tempFrameObj, {}, true);\n                this.callFrameToolbar();\n                parent.frameObj.type = 'mat';\n                this.callFrameToolbar();\n                parent.cxtTbarHeight = parent.element.querySelector('#' + id + '_customizeWrapper').scrollHeight;\n                parent.frameObj = frameObj;\n                parent.tempFrameObj = tempFrameObj;\n            }\n            this.zoomToFrameRange();\n            parent.tempFrameZoomLevel = zoom;\n            if (Browser.isDevice) {\n                parent.img.destTop -= (parent.cxtTbarHeight / 2);\n            }\n            else {\n                parent.img.destTop += (parent.cxtTbarHeight / 2);\n            }\n            this.callFrameToolbar();\n            parent.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: parent.frameObj, obj: { frameChangeEventArgs: null } } });\n        }\n    };\n    ToolbarModule.prototype.zoomToFrameRange = function () {\n        var parent = this.parent;\n        this.isFrameToolbar = false;\n        parent.notify('transform', { prop: 'resetZoom', onPropertyChange: false });\n        var isSmaller = true;\n        while (isSmaller) {\n            if (this.toolbarHeight + parent.img.destTop >= (this.toolbarHeight + parent.cxtTbarHeight)) {\n                isSmaller = false;\n                break;\n            }\n            parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: -.1, zoomPoint: null, isResize: true } });\n        }\n        this.isFrameToolbar = true;\n    };\n    ToolbarModule.prototype.resizeClick = function () {\n        var parent = this.parent;\n        parent.notify('draw', { prop: 'updateCropSelection', onPropertyChange: false });\n        parent.upperCanvas.style.cursor = 'default';\n        parent.notify('transform', { prop: 'updateResize', value: { bool: false } });\n        if (this.isAspectRatio) {\n            this.isAspectRatio = false;\n        }\n        else {\n            this.isAspectRatio = true;\n        }\n        parent.isResize = true;\n        this.refreshToolbar('resize');\n    };\n    ToolbarModule.prototype.callFrameToolbar = function () {\n        var parent = this.parent;\n        extend(parent.tempFrameObj, parent.frameObj);\n        var undoRedoObj = { appliedUndoRedoColl: [] };\n        parent.notify('undo-redo', { prop: 'getAppliedUndoRedoColl', value: { obj: undoRedoObj } });\n        if (undoRedoObj['appliedUndoRedoColl']['length'] === 0) {\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                    operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                    previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                    previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                    previousFilter: null, isCircleCrop: null\n                } });\n        }\n        this.refreshToolbar('frame');\n    };\n    ToolbarModule.prototype.contextualToolbarClicked = function (args) {\n        var parent = this.parent;\n        var selEle = parent.element.querySelector('.e-contextual-toolbar-wrapper .e-toolbar-item.e-selected');\n        if (selEle) {\n            selEle.classList.remove('e-selected');\n        }\n        var type = args.item.id.replace(parent.element.id, '').split('_')[1];\n        var imageFiltering = { filter: parent.toPascalCase(type), cancel: false };\n        parent.trigger('imageFiltering', imageFiltering);\n        parent.editCompleteArgs = imageFiltering;\n        if (imageFiltering.cancel) {\n            return;\n        }\n        document.getElementById(args.item.id + 'Canvas').parentElement.parentElement.classList.add('e-selected');\n        parent.currObjType.isFiltered = true;\n        parent.notify('filter', { prop: 'applyImageFilter', value: { option: type.toLowerCase() } });\n        parent.notify('draw', { prop: 'redrawDownScale' });\n        parent.currentFilter = args.item.id;\n        this.enableDisableTbrBtn();\n        parent.isFilterCanvasClick = true;\n        parent.curFilterObjEvent = imageFiltering;\n    };\n    ToolbarModule.prototype.refreshShapeDrawing = function () {\n        var parent = this.parent;\n        var object = { shape: '' };\n        parent.notify('selection', { prop: 'getCurrentDrawingShape', onPropertyChange: false, value: { obj: object } });\n        if (object['shape'] !== '') {\n            parent.notify('selection', { prop: 'setCurrentDrawingShape', onPropertyChange: false, value: { value: '' } });\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.refreshToolbar('main', false);\n        }\n    };\n    ToolbarModule.prototype.zoomInBtnClickHandler = function (e) {\n        if (e) {\n            var parent_1 = this.parent;\n            if ((parent_1.zoomSettings.zoomTrigger & ZoomTrigger.Toolbar) === ZoomTrigger.Toolbar) {\n                parent_1.noPushUndo = false;\n                if (parent_1.currObjType.isFiltered) {\n                    parent_1.okBtn();\n                }\n                var drawingShape = parent_1.drawingShape;\n                if (parent_1.drawingShape) {\n                    var id = parent_1.activeObj.currIndex;\n                    parent_1.noPushUndo = true;\n                    parent_1.okBtn();\n                    parent_1.noPushUndo = false;\n                    parent_1.drawingShape = null;\n                    if (id) {\n                        parent_1.selectShape(id);\n                    }\n                }\n                this.refreshShapeDrawing();\n                if (Browser.isDevice && e.type === 'touchstart') {\n                    if (!e.returnValue) {\n                        return;\n                    }\n                    e.preventDefault();\n                }\n                var zoomIn = document.querySelector('#' + parent_1.element.id + '_zoomIn');\n                EventHandler.trigger(zoomIn, 'click');\n                var obj = { bool: false };\n                parent_1.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n                if (obj['bool']) {\n                    parent_1.notify('freehand-draw', { prop: 'applyFhd', onPropertyChange: false });\n                    this.destroyQuickAccessToolbar();\n                }\n                parent_1.isZoomBtnClick = true;\n                this.applyPreviewFilter();\n                parent_1.currObjType.isFiltered = false;\n                parent_1.currObjType.isRedact = false;\n                if (parent_1.togglePen) {\n                    parent_1.currObjType.isZoomed = true;\n                    parent_1.freeHandDraw(false);\n                    parent_1.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                }\n                parent_1.notify('draw', { prop: 'resetCurrentSelectionPoint' });\n                parent_1.drawingShape = drawingShape;\n                parent_1.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                    value: { zoomFactor: .1, zoomPoint: null, isResize: null } });\n                parent_1.notify('draw', { prop: 'redrawDownScale' });\n                if (parent_1.isCropTab || parent_1.activeObj.shape) {\n                    parent_1.notify('draw', { prop: 'setStraightenActObj', value: { activeObj: null } });\n                    parent_1.notify('freehand-draw', { prop: 'resetStraightenPoint' });\n                }\n                if (parent_1.isStraightening) {\n                    parent_1.notify('draw', { prop: 'resetStraightenDestPoints' });\n                    parent_1.notify('draw', { prop: 'setDestForStraighten' });\n                }\n                var actionArgs = { action: 'zoom-in',\n                    actionEventArgs: parent_1.editCompleteArgs };\n                parent_1.triggerEditCompleteEvent(actionArgs);\n                if (Browser.isDevice) {\n                    zoomIn.focus();\n                }\n            }\n        }\n    };\n    ToolbarModule.prototype.zoomOutBtnClickHandler = function (e) {\n        if (e) {\n            var parent_2 = this.parent;\n            if ((parent_2.zoomSettings.zoomTrigger & ZoomTrigger.Toolbar) === ZoomTrigger.Toolbar) {\n                parent_2.noPushUndo = false;\n                if (parent_2.currObjType.isFiltered) {\n                    parent_2.okBtn();\n                }\n                var drawingShape = parent_2.drawingShape;\n                if (parent_2.drawingShape) {\n                    var id = parent_2.activeObj.currIndex;\n                    parent_2.noPushUndo = true;\n                    parent_2.okBtn();\n                    parent_2.noPushUndo = false;\n                    parent_2.drawingShape = null;\n                    if (id) {\n                        parent_2.selectShape(id);\n                    }\n                }\n                this.refreshShapeDrawing();\n                if (Browser.isDevice && e.type === 'touchstart') {\n                    if (!e.returnValue) {\n                        return;\n                    }\n                    e.preventDefault();\n                }\n                var zoomOut = document.querySelector('#' + parent_2.element.id + '_zoomOut');\n                EventHandler.trigger(zoomOut, 'click');\n                var obj = { bool: false };\n                parent_2.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n                if (obj['bool']) {\n                    parent_2.notify('freehand-draw', { prop: 'applyFhd', onPropertyChange: false });\n                    this.destroyQuickAccessToolbar();\n                }\n                parent_2.isZoomBtnClick = true;\n                this.applyPreviewFilter();\n                parent_2.currObjType.isFiltered = false;\n                parent_2.currObjType.isRedact = false;\n                if (parent_2.togglePen) {\n                    parent_2.currObjType.isZoomed = true;\n                    parent_2.freeHandDraw(false);\n                    parent_2.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                }\n                parent_2.notify('draw', { prop: 'resetCurrentSelectionPoint' });\n                parent_2.drawingShape = drawingShape;\n                parent_2.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                    value: { zoomFactor: -.1, zoomPoint: null, isResize: null } });\n                parent_2.notify('draw', { prop: 'redrawDownScale' });\n                if (parent_2.isCropTab || parent_2.activeObj.shape) {\n                    parent_2.notify('draw', { prop: 'setStraightenActObj', value: { activeObj: null } });\n                    parent_2.notify('freehand-draw', { prop: 'resetStraightenPoint' });\n                }\n                if (parent_2.isStraightening) {\n                    parent_2.notify('draw', { prop: 'resetStraightenDestPoints' });\n                    parent_2.notify('draw', { prop: 'setDestForStraighten' });\n                }\n                var actionArgs = { action: 'zoom-out',\n                    actionEventArgs: parent_2.editCompleteArgs };\n                parent_2.triggerEditCompleteEvent(actionArgs);\n                if (Browser.isDevice) {\n                    zoomOut.focus();\n                }\n            }\n        }\n    };\n    ToolbarModule.prototype.zoomInBtnMouseDownHandler = function (e) {\n        e.preventDefault();\n        this.zoomBtnHold = setInterval(this.zoomInBtnClickHandler.bind(this), 250);\n    };\n    ToolbarModule.prototype.zoomOutBtnMouseDownHandler = function (e) {\n        e.preventDefault();\n        this.zoomBtnHold = setInterval(this.zoomOutBtnClickHandler.bind(this), 250);\n    };\n    ToolbarModule.prototype.zoomBtnMouseUpHandler = function () {\n        clearInterval(this.zoomBtnHold);\n        this.zoomBtnHold = 0;\n    };\n    ToolbarModule.prototype.closeContextualToolbar = function () {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var isContextualToolbar = false;\n        var straightenObj = { bool: parent.isStraightening };\n        if (!Browser.isDevice || (Browser.isDevice && !straightenObj['bool'])) {\n            if ((parent.element.querySelector('#' + id + '_contextualToolbar') &&\n                !parent.element.querySelector('#' + id + '_contextualToolbar').parentElement.classList.contains('e-hide')) ||\n                (parent.element.querySelector('#' + id + '_headWrapper')\n                    && !parent.element.querySelector('#' + id + '_headWrapper').parentElement.classList.contains('e-hide'))) {\n                parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                parent.okBtn();\n                this.refreshMainToolbar();\n                isContextualToolbar = true;\n            }\n        }\n        return isContextualToolbar;\n    };\n    ToolbarModule.prototype.destroyQuickAccessToolbar = function () {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var quickToolbar = document.getElementById(id + '_quickAccessToolbar');\n        if (quickToolbar && quickToolbar.classList.contains('e-control')) {\n            getComponent(quickToolbar, 'toolbar').destroy();\n        }\n        var qatArea = document.getElementById(id + '_quickAccessToolbarArea');\n        if (qatArea) {\n            qatArea.style.display = 'none';\n        }\n    };\n    ToolbarModule.prototype.renderSlider = function (type, isSelect) {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var canvasWrapper = document.querySelector('#' + id + '_contextualToolbarArea');\n        var hdrWrapper = document.querySelector('#' + id + '_headWrapper');\n        var labelWrapper = document.querySelector('#' + id + '_labelWrapper');\n        if (hdrWrapper) {\n            hdrWrapper.remove();\n            labelWrapper.remove();\n        }\n        hdrWrapper = canvasWrapper.appendChild(parent.createElement('div', {\n            id: id + '_headWrapper',\n            styles: 'position: relative'\n        }));\n        if (type === 'transparency') {\n            labelWrapper = hdrWrapper.appendChild(parent.createElement('label', {\n                id: id + '_labelWrapper',\n                className: 'e-ie-finetune-slider-label',\n                styles: Browser.isDevice ? 'position: absolute; top: 31%; left: calc(50% - 150px); font-size: 15px; text-transform: capitalize; font-weight: 400;'\n                    : 'position: absolute; top: 31%; left: calc(50% - 220px); font-size: 15px; text-transform: capitalize; font-weight: 400;'\n            }));\n        }\n        else {\n            labelWrapper = hdrWrapper.appendChild(parent.createElement('label', {\n                id: id + '_labelWrapper',\n                className: 'e-ie-finetune-slider-label',\n                styles: Browser.isDevice ? ('position: absolute; top: 31%; left: calc(50% - 160px); font-size: 15px; text-transform: capitalize; font-weight: 400;')\n                    : 'position: absolute; top: 25%; left: calc(50% - 226px); font-size: 15px; text-transform: capitalize; font-weight: 400;'\n            }));\n        }\n        labelWrapper.textContent = this.l10n.getConstant(parent.toPascalCase(type === 'transparency' ? 'opacity' : type));\n        var sliderWrapper = hdrWrapper.appendChild(parent.createElement('div', {\n            id: id + '_sliderWrapper',\n            className: 'e-ie-finetune-slider-wrap',\n            styles: 'position: absolute'\n        }));\n        var value = parent.getCurrAdjustmentValue(type);\n        if (isSelect && type === 'straighten' && Browser.isDevice) {\n            value = parent.cropObj.straighten;\n        }\n        var min;\n        var max;\n        var slider;\n        if (type === 'brightness' || type === 'contrast' || type === 'saturation' || type === 'exposure') {\n            if (parent.finetuneSettings) {\n                if (type === 'brightness' && parent.finetuneSettings.brightness) {\n                    min = parent.finetuneSettings.brightness.min;\n                    max = parent.finetuneSettings.brightness.max;\n                }\n                else if (type === 'contrast' && parent.finetuneSettings.contrast) {\n                    min = parent.finetuneSettings.contrast.min;\n                    max = parent.finetuneSettings.contrast.max;\n                }\n                else if (type === 'saturation' && parent.finetuneSettings.saturation) {\n                    min = parent.finetuneSettings.saturation.min;\n                    max = parent.finetuneSettings.saturation.max;\n                }\n                else if (type === 'exposure' && parent.finetuneSettings.exposure) {\n                    min = parent.finetuneSettings.exposure.min;\n                    max = parent.finetuneSettings.exposure.max;\n                }\n                else {\n                    min = -100;\n                    max = 100;\n                }\n            }\n            else {\n                min = -100;\n                max = 100;\n            }\n            slider = this.createSlider(min, max, value, type);\n        }\n        else if (type === 'hue' || type === 'blur' || type === 'opacity') {\n            if (parent.finetuneSettings) {\n                if (type === 'hue' && parent.finetuneSettings.hue) {\n                    min = parent.finetuneSettings.hue.min;\n                    max = parent.finetuneSettings.hue.max;\n                }\n                else if (type === 'blur' && parent.finetuneSettings.blur) {\n                    min = parent.finetuneSettings.blur.min;\n                    max = parent.finetuneSettings.blur.max;\n                }\n                else if (type === 'opacity' && parent.finetuneSettings.opacity) {\n                    min = parent.finetuneSettings.opacity.min;\n                    max = parent.finetuneSettings.opacity.max;\n                }\n                else {\n                    min = 0;\n                    max = 100;\n                }\n            }\n            else {\n                min = 0;\n                max = 100;\n            }\n            slider = this.createSlider(min, max, value, type);\n        }\n        else if (type === 'transparency') {\n            min = 0;\n            max = 100;\n            slider = this.createSlider(min, max, value, type);\n        }\n        else if (type === 'straighten') {\n            min = -45;\n            max = 45;\n            slider = this.createSlider(min, max, value, type);\n        }\n        slider.appendTo('#' + id + '_sliderWrapper');\n        sliderWrapper.style.left = (parseFloat(canvasWrapper.style.width) - parseFloat(slider.width)) / 2 + 'px';\n        if (type === 'straighten' && Browser.isDevice) {\n            var sLabelWrapper = hdrWrapper.appendChild(parent.createElement('label', {\n                id: id + '_sLabelWrapper',\n                className: 'e-ie-straighten-value-span e-ie-finetune-value-span',\n                styles: 'position: absolute; top: 31%; margin-left: 20px; font-size: 15px; text-transform: capitalize; font-weight: 400;'\n            }));\n            sLabelWrapper.innerHTML = parent.transform.straighten.toString() + '&#176';\n            sliderWrapper.parentElement.classList.add('e-straighten-slider');\n        }\n        if (type !== 'straighten') {\n            hdrWrapper.appendChild(parent.createElement('label', {\n                id: id + '_finetuneSpan',\n                className: 'e-ie-finetune-value-span',\n                styles: Browser.isDevice ? ('position: absolute; top: 25%; margin-left: 20px; font-size: 15px; text-transform: capitalize; font-weight: 400;') :\n                    'position: absolute; top: 25%; left: calc(50% + 190px); font-size: 15px; text-transform: capitalize; font-weight: 400;'\n            }));\n            sliderWrapper.parentElement.classList.add('e-finetune-slider');\n            if (type === 'transparency' && Browser.isDevice) {\n                sliderWrapper.parentElement.classList.add('e-ie-device-transparency-slider');\n            }\n            this.updateFinetuneSpan(type);\n        }\n    };\n    ToolbarModule.prototype.createSlider = function (min, max, value, type) {\n        var _this = this;\n        var parent = this.parent;\n        var step = type === 'straighten' ? 3 : 1;\n        return new Slider({\n            value: value, type: 'MinRange', min: min, max: max,\n            step: step, width: Browser.isDevice ? '180px' : (type === 'straighten' ? '200px' : '300px'),\n            cssClass: 'e-slider',\n            change: function (args) {\n                parent.notify('selection', { prop: 'setSliderActive', onPropertyChange: false, value: { bool: true } });\n                if (type === 'transparency') {\n                    if (parent.activeObj.shape) {\n                        if (isNullOrUndefined(parent.activeObj.imageRatio)) {\n                            parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n                        }\n                        parent.notify('shape', { prop: 'pushActItemIntoObj' });\n                        var prevCropObj = extend({}, parent.cropObj, {}, true);\n                        var object = { currObj: {} };\n                        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                        var prevObj = object['currObj'];\n                        prevObj.objColl = extend([], parent.objColl, [], true);\n                        prevObj.pointColl = extend([], parent.pointColl, [], true);\n                        prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n                        var selPointCollObj = { selPointColl: null };\n                        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                            value: { obj: selPointCollObj } });\n                        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n                        parent.objColl.pop();\n                        parent.activeObj.opacity = args.value / 100;\n                        _this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n                        parent.objColl.push(parent.activeObj);\n                        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                            value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                                previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                                previousCropObj: prevCropObj, previousText: null,\n                                currentText: null, previousFilter: null, isCircleCrop: null } });\n                        parent.notify('selection', { prop: 'redrawShape', value: { obj: parent.objColl[parent.objColl.length - 1] } });\n                        _this.updateFinetuneSpan(type);\n                    }\n                }\n                else if (type === 'straighten') {\n                    parent.setStraighten(args.value);\n                }\n                else {\n                    if (parent.transform.zoomFactor && parent.transform.zoomFactor < 0) {\n                        parent.isFinetuning = true;\n                    }\n                    parent.notify('selection', { prop: 'setSliding', value: { bool: true } });\n                    parent.setCurrAdjustmentValue(type, args.value);\n                    _this.updateFinetuneSpan(type);\n                    _this.enableDisableTbrBtn();\n                    parent.isFinetuning = false;\n                }\n            },\n            changed: function () {\n                if (type !== 'transparency' && type !== 'straighten') {\n                    parent.notify('selection', { prop: 'setSliding', value: { bool: false } });\n                    parent.notify('draw', { prop: 'redrawDownScale' });\n                }\n                parent.notify('selection', { prop: 'setSliderActive', onPropertyChange: false, value: { bool: false } });\n                if (type === 'transparency') {\n                    setTimeout(function () {\n                        parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                        parent.element.querySelector('#' + parent.element.id + '_transparency').click();\n                    }, 50);\n                }\n            }\n        });\n    };\n    ToolbarModule.prototype.updateFinetuneSpan = function (type) {\n        var parent = this.parent;\n        var ftValPan = parent.element.querySelector('.e-ie-finetune-value-span');\n        if (ftValPan) {\n            var adjObj = { adjustmentLevel: null };\n            parent.notify('filter', { prop: 'getAdjustmentLevel', onPropertyChange: false, value: { obj: adjObj } });\n            ftValPan.innerHTML = Math.round(adjObj['adjustmentLevel'][type]).toString();\n        }\n    };\n    ToolbarModule.prototype.applyPreviewFilter = function () {\n        var parent = this.parent;\n        if (document.querySelector('#' + parent.element.id + '_sliderWrapper') ||\n            parent.currObjType.isFiltered) {\n            parent.initialAdjustmentValue = this.lowerContext.filter;\n            parent.canvasFilter = this.lowerContext.filter;\n            parent.currObjType.isFiltered = false;\n        }\n    };\n    ToolbarModule.prototype.unselectBtn = function () {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var selectors = [\n            '#' + id + '_brightness',\n            '#' + id + '_contrast',\n            '#' + id + '_hue',\n            '#' + id + '_saturation',\n            '#' + id + '_opacity',\n            '#' + id + '_blur',\n            '#' + id + '_exposure'\n        ];\n        for (var _i = 0, selectors_1 = selectors; _i < selectors_1.length; _i++) {\n            var selector = selectors_1[_i];\n            var element = document.querySelector(selector);\n            if (element && element.classList.contains('e-selected-btn')) {\n                element.classList.remove('e-selected-btn');\n                break;\n            }\n        }\n    };\n    ToolbarModule.prototype.openSlider = function (type) {\n        this.unselectBtn();\n        this.parent.currObjType.isFiltered = true;\n        this.refreshToolbar('color', null, null, null, type);\n        document.getElementById(this.parent.element.id + '_' + type).classList.add('e-selected-btn');\n    };\n    ToolbarModule.prototype.refreshSlider = function () {\n        var id = this.parent.element.id;\n        var sliderWrapper = document.querySelector('#' + id + '_sliderWrapper');\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var slider = document.querySelector('.e-slider');\n        var hdrWrapper = document.querySelector('#' + id + '_headWrapper');\n        if (hdrWrapper) {\n            hdrWrapper.style.display = 'none';\n        }\n        if (sliderWrapper && slider) {\n            slider.ej2_instances[0].destroy();\n            sliderWrapper.remove();\n        }\n    };\n    ToolbarModule.prototype.unselectFrameBtn = function () {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var selectors = [\n            '#' + id + '_none',\n            '#' + id + '_mat',\n            '#' + id + '_line',\n            '#' + id + '_inset',\n            '#' + id + '_bevel',\n            '#' + id + '_hook'\n        ];\n        for (var _i = 0, selectors_2 = selectors; _i < selectors_2.length; _i++) {\n            var selector = selectors_2[_i];\n            var element = document.querySelector(selector);\n            if (element.classList.contains('e-selected-btn')) {\n                element.classList.remove('e-selected-btn');\n                break;\n            }\n        }\n    };\n    ToolbarModule.prototype.updateToolbarItems = function () {\n        var parent = this.parent;\n        var id = parent.element.id;\n        if (!parent.isImageLoaded) {\n            return;\n        }\n        if (this.isToolbar()) {\n            var selFillElem = parent.element.querySelector('.e-fill.e-template .e-dropdownbtn-preview');\n            var selStrokeElem = parent.element.querySelector('.e-stroke.e-template .e-dropdownbtn-preview');\n            var selTextStrokeElem = parent.element.querySelector('.e-text-font-color.e-template .e-dropdownbtn-preview');\n            var selStrokeTextColorElem = parent.element.querySelector('.e-stroke-text-font-color.e-template .e-dropdownbtn-preview');\n            var selTextBGElem = parent.element.querySelector('.e-text-background-color.e-template .e-dropdownbtn-preview');\n            var selPenStrokeElem = parent.element.querySelector('.e-pen-stroke-color.e-template .e-dropdownbtn-preview');\n            var strokeWidthElem = parent.element.querySelector('.e-shape-stroke-width');\n            var rectangleRadiusElem = parent.element.querySelector('.e-shape-rectangle-radius');\n            var fontFamilyElem = parent.element.querySelector('.e-text-font-family');\n            var fontSizeElem = parent.element.querySelector('.e-text-font-size');\n            var boldBtn = parent.element.querySelector('#' + id + '_bold');\n            var italicBtn = parent.element.querySelector('#' + id + '_italic');\n            if (parent.activeObj.strokeSettings && parent.activeObj.textSettings) {\n                if (isNullOrUndefined(parent.activeObj.strokeSettings.strokeWidth)) {\n                    parent.activeObj.strokeSettings.strokeWidth = 2;\n                }\n                if (isNullOrUndefined(parent.activeObj.strokeSettings.outlineWidth)) {\n                    parent.activeObj.strokeSettings.outlineWidth = 2;\n                }\n                if (selFillElem) {\n                    var value = parent.activeObj.strokeSettings.fillColor;\n                    if (parent.activeObj.strokeSettings.fillColor === '') {\n                        selFillElem.classList.add('e-nocolor-item');\n                    }\n                    else {\n                        selFillElem.classList.remove('e-nocolor-item');\n                        selFillElem.style.background = value;\n                    }\n                    if (document.querySelector('#' + id + '_shape_fill')) {\n                        getComponent(id + '_shape_fill', 'colorpicker').value = value;\n                    }\n                }\n                if (selStrokeElem) {\n                    var value = parent.activeObj.strokeSettings.strokeColor;\n                    selStrokeElem.style.background = value;\n                    if (document.querySelector('#' + id + '_shape_stroke')) {\n                        getComponent(id + '_shape_stroke', 'colorpicker').value = value;\n                    }\n                }\n                if (selTextStrokeElem) {\n                    var value = parent.activeObj.strokeSettings.strokeColor;\n                    selTextStrokeElem.style.background = value;\n                    if (document.querySelector('#' + id + '_text_font')) {\n                        getComponent(id + '_text_font', 'colorpicker').value = value;\n                    }\n                }\n                if (selStrokeTextColorElem) {\n                    var value = parent.activeObj.strokeSettings.outlineColor;\n                    if (!/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6}|[0-9A-Fa-f]{8})$|^[a-zA-Z]+$/.test(parent.activeObj.strokeSettings.outlineColor)) {\n                        selStrokeTextColorElem.classList.add('e-nocolor-item');\n                    }\n                    else {\n                        selStrokeTextColorElem.classList.remove('e-nocolor-item');\n                        selStrokeTextColorElem.style.background = value;\n                    }\n                    if (document.querySelector('#' + id + '_stroke_text')) {\n                        getComponent(id + '_stroke_text', 'colorpicker').value = value;\n                    }\n                }\n                if (selTextBGElem) {\n                    var value = parent.activeObj.strokeSettings.fillColor;\n                    if (parent.activeObj.strokeSettings.fillColor === '' || parent.activeObj.strokeSettings.fillColor === 'transparent') {\n                        selTextBGElem.classList.add('e-nocolor-item');\n                    }\n                    else {\n                        selTextBGElem.classList.remove('e-nocolor-item');\n                        selTextBGElem.style.background = value;\n                    }\n                    if (document.querySelector('#' + id + '_text_bgColor')) {\n                        getComponent(id + '_text_bgColor', 'colorpicker').value = value;\n                    }\n                }\n                if (selPenStrokeElem) {\n                    var value = parent.activeObj.strokeSettings.strokeColor;\n                    selPenStrokeElem.style.background = value;\n                    if (document.querySelector('#' + id + '_pen_stroke')) {\n                        getComponent(id + '_pen_stroke', 'colorpicker').value = value;\n                    }\n                    var obj = { penOpacity: 1 };\n                    parent.notify('freehand-draw', { prop: 'getPenOpacity', onPropertyChange: false, value: { obj: obj } });\n                }\n                if (fontFamilyElem) {\n                    if (Browser.isDevice) {\n                        fontFamilyElem.setAttribute('style', 'font-family:' + parent.activeObj.textSettings.fontFamily.toLowerCase());\n                    }\n                    else {\n                        fontFamilyElem.textContent = parent.activeObj.textSettings.fontFamily;\n                    }\n                }\n                if (fontSizeElem) {\n                    for (var i = 0; i < parent.fontSizeColl.length; i++) {\n                        if (parseInt(parent.fontSizeColl[i].text, 10) >= Math.round(parent.activeObj.textSettings.fontSize)) {\n                            fontSizeElem.textContent = (i + 1).toString();\n                            break;\n                        }\n                    }\n                }\n                if (boldBtn) {\n                    if (parent.activeObj.textSettings.bold) {\n                        boldBtn.classList.add('e-selected-btn');\n                    }\n                    else {\n                        boldBtn.classList.remove('e-selected-btn');\n                    }\n                }\n                if (italicBtn) {\n                    if (parent.activeObj.textSettings.italic) {\n                        italicBtn.classList.add('e-selected-btn');\n                    }\n                    else {\n                        italicBtn.classList.remove('e-selected-btn');\n                    }\n                }\n                if (strokeWidthElem) {\n                    var width = parent.activeObj.shape === 'text' ? parent.activeObj.strokeSettings.outlineWidth : parent.activeObj.strokeSettings.strokeWidth;\n                    var strokeWidth = Math.round(width).toString();\n                    strokeWidthElem.textContent = this.getStrokeWidth(strokeWidth);\n                }\n                if (rectangleRadiusElem) {\n                    var rectRadius = Math.round((parent.activeObj.strokeSettings.radius)).toString();\n                    rectangleRadiusElem.textContent = this.getRectRadius(rectRadius);\n                }\n            }\n        }\n    };\n    ToolbarModule.prototype.getStrokeWidth = function (text) {\n        var strokeWidth;\n        var currentWidth = parseInt(text, 10) / 2;\n        switch (currentWidth) {\n            case 0:\n                strokeWidth = this.l10n.getConstant('NoOutline');\n                break;\n            case 1:\n                strokeWidth = this.l10n.getConstant('XSmall');\n                break;\n            case 2:\n                strokeWidth = this.l10n.getConstant('Small');\n                break;\n            case 3:\n                strokeWidth = this.l10n.getConstant('Medium');\n                break;\n            case 4:\n                strokeWidth = this.l10n.getConstant('Large');\n                break;\n            case 5:\n                strokeWidth = this.l10n.getConstant('XLarge');\n                break;\n        }\n        return strokeWidth;\n    };\n    ToolbarModule.prototype.getRectRadius = function (text) {\n        var rectRadius;\n        var currentWidth = parseInt(text, 10) / 2;\n        switch (currentWidth) {\n            case 0:\n                rectRadius = this.l10n.getConstant('0');\n                break;\n            case 1:\n                rectRadius = this.l10n.getConstant('20');\n                break;\n            case 2:\n                rectRadius = this.l10n.getConstant('40');\n                break;\n            case 3:\n                rectRadius = this.l10n.getConstant('60');\n                break;\n            case 4:\n                rectRadius = this.l10n.getConstant('80');\n                break;\n            case 5:\n                rectRadius = this.l10n.getConstant('100');\n                break;\n        }\n        return rectRadius;\n    };\n    ToolbarModule.prototype.cancelPan = function () {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n        var panBtn = parent.element.querySelector('.e-img-pan .e-btn');\n        if (panBtn) {\n            panBtn.classList.remove('e-selected-btn');\n        }\n        parent.pan(false);\n    };\n    ToolbarModule.prototype.refreshMainToolbar = function () {\n        if (this.currToolbar !== 'main') {\n            this.refreshToolbar('main');\n        }\n    };\n    ToolbarModule.prototype.destroySubComponents = function () {\n        var parent = this.parent;\n        var inputElement = parent.element.querySelectorAll('input.e-control');\n        var btnElement = parent.element.querySelectorAll('button.e-control');\n        for (var i = 0, len = inputElement.length; i < len; i++) {\n            if (inputElement[i].classList.contains('e-color-picker')) {\n                getComponent(inputElement[i], 'color-picker').destroy();\n                detach(select('input#' + inputElement[i].id, parent.element));\n            }\n        }\n        for (var i = 0, len = btnElement.length; i < len; i++) {\n            if (btnElement[i].classList.contains('e-dropdown-btn')) {\n                getComponent(btnElement[i], 'dropdown-btn').destroy();\n                detach(select('button#' + btnElement[i].id, parent.element));\n            }\n            else if (btnElement[i].classList.contains('e-btn')) {\n                getComponent(btnElement[i], 'btn').destroy();\n                detach(select('button#' + btnElement[i].id, parent.element));\n            }\n        }\n    };\n    ToolbarModule.prototype.setInitialShapeSettings = function (args) {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.currObjType.shape = args.item.id;\n        parent.activeObj.shape = parent.currObjType.shape.toLowerCase();\n        parent.currObjType.isDragging = parent.currObjType.isCustomCrop = false;\n        parent.activeObj.shapeDegree = parent.transform.degree;\n        parent.activeObj.shapeFlip = parent.transform.currFlipState;\n        parent.activeObj.textFlip = parent.transform.currFlipState;\n        parent.activeObj.flipObjColl = [];\n        var orderObj = { order: null };\n        parent.notify('shape', { prop: 'getNewOrder', onPropertyChange: false, value: { obj: orderObj } });\n        parent.activeObj.order = orderObj['order'];\n    };\n    ToolbarModule.prototype.isToolbarString = function (items) {\n        var isString = false;\n        for (var i = 0; i < items.length; i++) {\n            if (typeof (items[i]) === 'string') {\n                isString = true;\n                break;\n            }\n        }\n        return isString;\n    };\n    ToolbarModule.prototype.excludeItems = function (items) {\n        var indexArr = [];\n        for (var i = 0; i < items.length; i++) {\n            var index = this.getIndex(items[i]);\n            if (index !== -1) {\n                indexArr.push(index);\n            }\n        }\n        var negativeIndexArr = [];\n        for (var i = 0; i < this.defToolbarItems.length; i++) {\n            if (this.defToolbarItems[i].align === 'Center' && !this.isSameIndex(indexArr, i) &&\n                this.defToolbarItems[i].id !== this.parent.element.id + '_' + 'annotation') {\n                negativeIndexArr.push(i);\n            }\n        }\n        for (var i = negativeIndexArr.length - 1; i >= 0; i--) {\n            this.defToolbarItems.splice(negativeIndexArr[i], 1);\n        }\n    };\n    ToolbarModule.prototype.isSameIndex = function (indexArr, index) {\n        for (var i = 0; i < indexArr.length; i++) {\n            if (indexArr[i] === index) {\n                return true;\n            }\n        }\n        return false;\n    };\n    ToolbarModule.prototype.getIndex = function (item) {\n        var index = -1;\n        var isFontColor = false;\n        if (item === 'rotateLeft') {\n            item = 'rotLeft';\n        }\n        if (item === 'rotateRight') {\n            item = 'rotRight';\n        }\n        if (item === 'horizontalFlip') {\n            item = 'hflip';\n        }\n        if (item === 'verticalFlip') {\n            item = 'vflip';\n        }\n        if (item === 'arrowStart') {\n            item = 'start';\n        }\n        if (item === 'arrowEnd') {\n            item = 'end';\n        }\n        if (item === 'fontColor') {\n            item = 'strokeColor';\n            isFontColor = true;\n        }\n        for (var i = 0; i < this.defToolbarItems.length; i++) {\n            var id = this.defToolbarItems[i].id;\n            if (id && id.toLowerCase().indexOf(item.toLowerCase()) !== -1) {\n                index = i;\n                break;\n            }\n        }\n        if (isFontColor) {\n            item = 'fontColor';\n        }\n        return index;\n    };\n    ToolbarModule.prototype.getModuleName = function () {\n        return 'toolbar-module';\n    };\n    ToolbarModule.prototype.redactSlider = function (type) {\n        var parent = this.parent;\n        var id = parent.element.id;\n        var toolbarArea = parent.element.querySelector('#' + id + '_toolbarArea');\n        var contextualToolbarArea = parent.element.querySelector('#' + id + '_contextualToolbarArea');\n        if (!contextualToolbarArea) {\n            return;\n        }\n        contextualToolbarArea.classList.remove('e-hide');\n        contextualToolbarArea.style.left = toolbarArea.offsetLeft + 'px';\n        var canvasWrapper = document.querySelector('#' + id + '_contextualToolbarArea');\n        var hdrWrapper = document.querySelector('#' + id + '_headWrapper');\n        var labelWrapper = document.querySelector('#' + id + '_labelWrapper');\n        var ctxTbar = document.querySelector('#' + id + '_contextualToolbar');\n        if (hdrWrapper) {\n            hdrWrapper.remove();\n            labelWrapper.remove();\n        }\n        if (ctxTbar) {\n            ctxTbar.remove();\n            this.createContextualToolbar();\n        }\n        hdrWrapper = canvasWrapper.appendChild(parent.createElement('div', {\n            id: id + '_headWrapper',\n            styles: 'position: relative'\n        }));\n        labelWrapper = hdrWrapper.appendChild(parent.createElement('label', {\n            id: id + '_labelWrapper',\n            className: 'e-ie-finetune-slider-label',\n            styles: Browser.isDevice ? ('position: absolute; top: 31%; left: calc(50% - 160px); font-size: 15px; text-transform: capitalize; font-weight: 400;')\n                : 'position: absolute; top: 25%; left: calc(50% - 226px); font-size: 15px; text-transform: capitalize; font-weight: 400;'\n        }));\n        var text = type === 'blur' ? this.l10n.getConstant('Blur') : this.l10n.getConstant('PixelSize');\n        labelWrapper.textContent = text;\n        var sliderWrapper = hdrWrapper.appendChild(parent.createElement('div', {\n            id: id + '_sliderWrapper',\n            className: 'e-ie-finetune-slider-wrap',\n            styles: 'position: absolute'\n        }));\n        hdrWrapper.appendChild(parent.createElement('label', {\n            id: id + '_redactSpan',\n            className: 'e-ie-redact-value-span',\n            styles: Browser.isDevice ? ('position: absolute; top: 30%; margin-left: 20px; font-size: 15px; text-transform: capitalize; font-weight: 400;') :\n                'position: absolute; top: 30%; left: calc(50% + 190px); font-size: 15px; text-transform: capitalize; font-weight: 400;'\n        }));\n        sliderWrapper.parentElement.classList.add('e-finetune-slider');\n        var value = parent.activeObj.redactType === 'blur' ? parent.activeObj.redactBlur :\n            parent.activeObj.redactPixelate;\n        var redactSlider = new Slider({\n            tooltip: { placement: 'Before', isVisible: true, showOn: 'Focus' },\n            min: 10, max: 100, step: 1, value: value,\n            type: 'MinRange',\n            width: Browser.isDevice ? '130px' : '300px',\n            created: function () {\n                parent.element.querySelector('.e-ie-redact-value-span').innerText = value.toString();\n            },\n            change: function (args) {\n                parent.element.querySelector('.e-ie-redact-value-span').innerText = args.value.toString();\n                if (parent.activeObj.redactType === 'blur') {\n                    parent.activeObj.redactBlur = parent.tempRedactBlur = args.value;\n                }\n                else if (parent.activeObj.redactType === 'pixelate') {\n                    parent.activeObj.redactPixelate = parent.tempRedactPixel = args.value;\n                }\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj, isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: null, isPreventSelection: true } });\n            },\n            changed: function () {\n                setTimeout(function () {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoStack', onPropertyChange: false });\n                }, 50);\n            }\n        });\n        redactSlider.appendTo('#' + id + '_sliderWrapper');\n        if (Browser.isDevice) {\n            var cHt = contextualToolbarArea.offsetHeight + 1;\n            var cusWrapper = parent.element.querySelector('#' + id + '_customizeWrapper');\n            if (this.isFrameToolbar && cusWrapper) {\n                cHt = cusWrapper.offsetHeight + 2;\n            }\n            var ht = parent.element.querySelector('#' + id + '_canvasWrapper').offsetHeight;\n            contextualToolbarArea.style.top = this.toolbarHeight + 1 + ht - cHt + 'px';\n        }\n    };\n    return ToolbarModule;\n}());\nexport { ToolbarModule };\n"],"names":["Crop","prototype","destroy","this","parent","isDestroyed","removeEventListener","addEventListener","on","cropping","off","args","updateCropPvtVar","prop","cropCircle","value","setCurrSelPoints","updateRotatePan","crop","calcRatio","getCurrFlipState","prevCropCurrObj","cropDestPoints","tempFlipPanPoint","isNullOrUndefined","x","y","isPreventScaling","adjustStraightenForShapes","resizeWrapper","isTransformCrop","isInitCrop","resetZoom","revertTransform","reset","getModuleName","lowerCanvas","lowerContext","getContext","upperCanvas","upperContext","croppedDegree","startX","startY","width","height","cropImg","isRotateCrop","temp","isNullCrop","resizeIcon","element","querySelector","id","actPoint","activeObj","activePoint","img","isRotated","i","len","rotateFlipColl","length","currentValue","notify","onPropertyChange","transform","degree","updateCropObj","point","destLeft","destTop","destWidth","destHeight","rotateCrop","currFlipState","flipCrop","tempZoomFactor","zoomFactor","ratio","currSelectionPoint","extend","obj","isImgShape","maxDimension","clearRect","srcLeft","srcTop","srcWidth","srcHeight","clientWidth","clientHeight","filter","cropObjColl","straighten","cropFreehandDrawColl","shapeColl","ctx","shape","pen","isPreventApply","context","isCircleCrop","currObjType","isCustomCrop","pan","defaultZoomFactor","type","isInitialRotated","center","_i","_a","objColl","diffX","diffY","cosAngle","sinAngle","diffXUpdated","diffYUpdated","indexOf","rotatedAngle","_b","angle","Math","cos","sin","endX","endY","afterCropActions","object","currObj","cropObj","flipState","tempCurrSelObj","push","preventSelObj","bool","coll","panToSelRangle","canvas","pop","straightenBaseImageCanvas","isMouseWheel","isIntersect","count","zoomPoint","isResize","isRotate","direction","toPascalCase","toString","updateFlipState","shapeFlip","pointColl","freehandCounter","isUndoRedo","setProperties","zoomSettings","previousZoomValue","panY","tempCurrFlipState","isReverseFlip","panPoint","totalPannedPoint","flipColl","tempFlipColl","panX","setTransform","isPreventDestination","isPreventCircleCrop","isRotateZoom","size","imageRatio","shapeDegree","abs","textSettings","fontRatio","fontSize","cropPointCollection","n","ratioX","ratioY","points","l","resetAnnotations","isSetDimension","cropSelPointColl","actObj","destPoint","allowDownScale","isCropTab","baseImgCanvas","currSelPoint","totalPannedInternalPoint","cropPointColl","straightenObj","straightenPoint","destPoints","selPointColl","xDiff","yDiff","currentPannedPoint","cropZoom","isContextualToolbar","isApplyBtn","isCropping","isZooming","cType","document","innerHTML","isReverse","pannedPoint","totalPannedClientPoint","isSave","isFlip","centerX","globalCompositeOperation","beginPath","centerY","radius","arc","PI","closePath","fill","restore","isActiveObj","getCurrCropState","panRegion","disabled","isImageLoaded","isCropToolbar","isUndoAction","transitionArgs","cancel","startPoint","endPoint","preventScaling","trigger","editCompleteArgs","cropEvent","nonAspectIcon","splitWords","split","horTopLine","isCrop","prevCropObj","prevObj","aspectWidth","aspectHeight","Browser","isDevice","updateUndoRedoColl","aspectIcon","currSelPtObj","prevCurrSelectionPoint","operation","previousObj","previousObjColl","previousPointColl","previousSelPointColl","previousCropObj","previousText","currentText","previousFilter","ctxToolbar","elem","style","position","isStraightening","update","adjustmentValue","canvasFilter","dimension","widthRatio","heightRatio","panObj","collection","isRotateFlipCollection","region","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","t","_","label","sent","trys","ops","g","verb","throw","return","Symbol","iterator","v","op","TypeError","call","Draw","draw","updatePrivateVariables","drawObject","updateActiveObject","clearOuterCanvas","setDestPoints","updateCurrTransState","currTransState","renderImage","drawImgToCanvas","updateCanvas","performCancel","updateFlipPan","select","callUpdateCurrTransState","resetPanPoints","setClientTransDim","redrawImgWithObj","setCurrentObj","performPointZoom","open","isInitialLoading","getInitialLoaded","fileSelect","fileName","fileType","isErrorImage","initZoomValue","isShapeTextInserted","tempStrokeSettings","tempTextSettings","tempAdjValue","tempFilter","tempUndoRedoStep","tempFreehandCounter","tempCurrFhdIndex","isCancelAction","rotatedFlipCropSel","prevActObj","zoomCrop","isImageEdited","isNewPath","arrowDimension","moveToSelectionRange","isResizeSelect","applyFrame","drawImage","downScaleImgCanvas","downScale","resetFrameZoom","triggerFrameChange","isImageApply","zoomToSel","straightenActObj","updateImgCanvasPoints","isLinesIntersect","imgCanvasPoints","setDestForStraighten","tempStraightenDestPoints","straightenDestPoints","straightenInitZoom","checkPointPosition","isCropSelect","updateCropSelection","updateCropSelObj","redrawDownScale","updateFinetune","isSelOutsideImg","tempObjColl","tempPointColl","showDialogPopup","imageBackgroundColor","tempStrokeWidth","fontFamily","default","origDim","strokeColor","fillColor","strokeWidth","outlineColor","outlineWidth","text","bold","italic","underline","bar","arrow","arrowSolid","circle","square","allowRedactStraighten","isDownScale","preventStraightening","inMemoryContext","imageData","inMemoryCanvas","getImageData","putImageData","frameObj","isCropRatio","isPreventDrag","saveContext","isPreventSelection","canvasDraw","toLowerCase","setDragLimit","drawCropRatio","strokeSettings","obj_1","isText","obj_2","keyHistory","fillStyle","fillRect","rotateContext","drawOuterSelection","drawShapeObj","undefined","drawCornerCircles","translateX","_c","rotationAngle","translateY","translate","rotate","preventShapeDragOut","min","max","updateWidthHeight","drawCustomSelection","parseInt","imgWidth","imgHeight","updatePoints","diff","adjToCenter","enlargeToImg","adjToStraighten","arr","tempActPoint","isMouseMove","horCircleWidth","verCircleHeight","horBottomLine","verLeftLine","verRightLine","topLeftCircle","topCenterCircle","topRightCircle","centerLeftCircle","centerRightCircle","bottomLeftCircle","bottomCenterCircle","bottomRightCircle","rotationCirclePoint","isCropCircle","tempObj","lineWidth","strokeStyle","themeColl","theme","moveTo","lineTo","stroke","selectionSettings","showCircle","drawRotationArcLine","drawCenterCircles","rotationCircleLine","drawArrowHead","isStartHead","start","end","arrowCircleSolid","arrowCircle","arrowBar","arrowSquareStart","arrowSquareEnd","currentShape","shapeType","horLineWidth","verLineHeight","selectionWidth","selectionHeight","tempFillStyle","drawSquareLines","drawRedact","isRedact","ellipse","shapeCircle","shapeLine","triangleDirection","isShapeDrawing","nextPoint","shapeText","shapeImage","drawSelection","rect","isHorizontalflip","isVerticalflip","flipObjColl","flipStr","isTempCanvas","baseRadius","adjustedRadius","isSafari","drawRoundedRect","roundRect","rectRadius","arcTo","horTopInnerLine","horBottomInnerLine","verLeftInnerLine","verRightInnerLine","tempWidth","save","clip","x1","y1","x2","y2","tempLineWidth","manipulateSaveCtx","strWidth","dx","dy","atan2","isStartArrow","isEndArrow","isEndCircleOrSquare","isStartCircleOrSquare","isStartArrowSolid","isEndArrowSolid","isStartSquare","isEndCircle","isStartSquareSolid","isEndCircleSolid","strokeRect","squareStartIntersectX1","squareStartIntersectY1","endCircleIntersectX1","endCircleIntersectY1","squareEndIntersectX1","squareEndIntersectY1","startCircleIntersectX1","startCircleIntersectY1","circleRadius","a","b","intersect","t2","intersectionX1","intersectionY1","sqrt","isStartCircleSolid","imageCanvas","imgPoint","dimObj","imageElement","globalAlpha","opacity","rotateImage","rows","lineHeight","tempFill","yPoint","baseWidth","textStyle","test","floor","font","rotateText","strokeText","fillText","updateActPoint","tempDegree","tempActiveObj","scale","textFlipDegree","top","isRotatePan","isStraighten","isPreventDimension","setTransformColl","isPreventClearRect","isFrame","isMouseDown","imageOnLoad","src","_this","proxy","baseImg","onload","imgSrc","eventargs","isCropped","isSameDimension","fileOpened","isImageUpdated","hideSpinner","updateBaseImgCanvas","isValidImage","isUndoZoom","display","isOkBtn","isMainToolbar","triggerEditCompleteEvent","action","actionEventArgs","onerror","errorLoading","defaultZoom","srcPoints","isBrightAdjust","frame","straightenZoom","adjustmentLevel","brightness","contrast","hue","saturation","blur","exposure","transparency","sharpen","bw","currentFilter","setAttribute","zoom","isOk","tempFrameZoomLevel","cancelCropSelection","currentObj","isFinalCancel","noPushUndo","JSON","stringify","tempFrameObj","actionArgs","textArea","drawingShape","enableShapeDrawing","isFiltered","cancelItems","togglePan","isFinetuneBtnClick","initialAdjustmentValue","isBrightnessAdjusted","bevelFilter","obj_3","tempAdjustmentLevel","cursor","classList","add","isDisabled","isMaskImage","obj2","isCropSelection","ascpectIcon","currentToolbar","aspectRatioElement","blrAspRatElem","contains","obj1","togglePen","cancelPen","cancelText","cancelShape","cancelSelection","tempPointsColl","isFreehandDrawCustomized","isCancel","appliedColl","currIndex","appliedUndoRedoColl","currentObjColl","iLen","currObjColl","j","jLen","undoRedoObj","undoRedoStep","isDragging","tempStraighten","selPointCollObj","currentPointColl","currentSelPointColl","currentCropObj","tempSelectionObj","isPrevent","cropZoomFactor","drawNewSelection","cropShape","updateSelectionInsert","shapeSettingsObj","getSelectionType","selectionChangingArgs","previousSelectionSettings","currentSelectionSettings","destTop_2","destHeight_2","lowerCanvasHeight_2","_d","lowerCanvasWidth","destLeft_1","destTop_1","destWidth_1","destHeight_1","lowerCanvasWidth_1","lowerCanvasHeight_1","activePoint_1","destLeft_2","destWidth_2","lowerCanvasWidth_2","activePoint_2","lowerCanvasHeight","adjActObj","tempTogglePen","widthObj","penStrokeWidth","isCircleCropped","isObj","color","bgColor","drawCropSelectionImage","isDefaultZoom","isAfterCropAction","clearContext","okBtn","zoomValue","panToPoint","isActObj","drawZoomPanImage","adjustPanning","panToSel","destLeft_3","destTop_3","destWidth_3","destHeight_3","forEach","prevStraightenedDegree","setStraighten","openNewImage","toolbar","showSpinner","defToolbarItems","getElementById","openURL","getFileExtensionFromURL","getImageSizeFromURL","imageSizeMB","toDataURL","imageUrl","callback","ex_1","fetch","method","response","contentLength","headers","get","console","log","message","dlgBtnClick","export","applyDialogOption","dlgCloseBtnClick","isFileChanged","checkToolbarTemplate","inputElem","getComponent","headerObj","key","contentObj","yesObj","noObj","Dialog","header","closeOnEscape","content","target","isModal","animationSettings","effect","close","bind","buttons","click","buttonModel","iconCss","isPrimary","appendTo","restoreOldImage","data","dropArea","url","lastDotIndex","lastIndexOf","slice","inputElement","fileData","filesData","fileExtension","files","rawFile","name","fileExtensionArray","window","URL","createObjectURL","isChangesSaved","toolbarTemplate","maxZoomFactor","isSelectionBiggerThanCanvas","isSelectionOutsideCanvas","isBigger","isOutside","toolbarHeight","isImgAnnotation","isHFlip","isVFlip","tempCanvas","createElement","attrs","isHorImageFlip","isVerImageFlip","isFinetuning","widthSource","heightSource","round","halfWidthRatio","ceil","halfHeightRatio","img2","createImageData","data2","weights","alphaWeights","r","stopY","w0","stopX","xPos","w","weight","drawImgToCtx","preventImg","getFrameColor","gradientColor","gradient","createLinearGradient","addColorStop","newWidth","newHeight","inset","offset","amount","border","valueForty","valueFifty","bevelObj","quadraticCurveTo","arcY2","lineY","arcX2","lineX","arcX1","lineX2","arcY1","lineY2","setLineDash","prevFrameSettings","frameChange","previousFrameSetting","currentFrameSetting","borderRadius","frameLineStyle","lineCount","setFrameObj","currFrameSettings","isToolbar","pow","performDummyZoom","setZoomPan","calcStraightenedPoints","isDestPointSmall","isSmall","this_1","left_1","top_1","width_1","height_1","selectionObj","p1","p2","p3","p4","getImagePoints","isLeftIntersect_1","imgPoints","isRightIntersect","isBottomIntersect","isLeftIntersect","isTopLeftInsideRect","isTopRightInsideRect","isBottomRightInsideRect","isBottomLeftInsideRect","imgPoints_1","isTopIntersect_1","doIntersect","isRightIntersect_1","isBottomIntersect_1","isTopIntersect","isInsideRect","calcTriangleArea","x3","y3","x4","y4","area1","area2","area3","area4","areaRectangle","dim","getRotatedCanvasDim","baseImgWidth","baseImgHeight","radians","c","d","point1","initiation","point2","point3","point4","onSegment","isInside","offscreenCanvas","offscreenCtx","tempRatio","straightenCanvas","straightenCtx","newP1","newP2","newP3","tempHeight","rotatedWidth","rotatedHeight","blur_1","pixelSize","isSaveCtx","redactImage","imageWidth","imageHeight","tempCtx","redactType","redactPixelate","redactBlur","imageSmoothingEnabled","Export","updatePvtVar","exportImg","exportToCanvas","updateSaveContext","imageQuality","drawAnnotation","imgQuality","beforeSave","imageName","beforeSaveEvent","observableSaveArgs","lowerCaseType","toSVGImg","toBlobFn","saved","left","maxWidth","maxHeight","dataUrl","svg","createElementNS","setAttributeNS","appendChild","svgDataUrl","btoa","downloadImg","toBlob","blob","blobUrl","tempCropObj","tempContextFilter","parseFloat","join","tempContext","exportTransformedImage","updateFrame","nonRedact","item","redact","concat","order","drawShape","drawPen","indexObj","index","found","splice","temp_1","indexBool","bgObj","isAnnotation","href","download","documentElement","parentNode","removeChild","flip","exportRotate","exportFlip","setMaxDim","flipHorizontal","flipVertical","Filter","finetuneImage","setFilter","updateFinetunes","setAdjustment","initFilter","setCurrAdjValue","updateAdj","getCurrentObj","tempAdjVal","tempFilVal","applyFilter","getDefaultFilter","fs","finetuneSettings","property","defaultValue","setFilterAdj","isPreview","saturatePercentage","values","getFilterValue","saturate","getSaturationFilterValue","bright","saturatePercent","getDefaultCurrentFilter","setTempFilterValue","tempSplitWords","prevFilter","valueArr","setFilterValue","setSaturationFilterValue","finetuneOption","curFinetuneObjEvent","finetune","dummyObj","tempFlipPanPointObj","zoomObj","imageSource","getValFromPercentage","percentage","val","getValFromLength","parseFilterString","filterString","filterArray","map","match","grayscale","hueRotate","invert","sepia","blurRadius","blurredData","Uint8ClampedArray","nx","ny","factor","length_1","length_2","length_3","gray","rotation","cosA","sinA","matrix","length_4","length_5","lumR","lumG","lumB","shiftW","pos","length_6","FreehandDrawing","updateFhdPvtVar","hoverFhd","freehandDownHandler","freehandUpHandler","isFHDIdx","deleteFhd","freehandRedraw","selectFhd","applyFhd","cancelFhd","updateFHDCurPts","rotateFhdColl","flipFHDColl","panFHDColl","updateFHDColl","zoomFHDColl","applyPenDraw","freeHandDraw","getSqPtFD","fhdHovIdx","pointCounter","currFHDIdx","updateCropPtsForSel","fhdSelID","tempFHDStyles","fhdSelIdx","setCenterSelPoints","prevStraightenObj","straightenPointAngle","triggerShapeChanging","isMasking","selPoints","fhdObj","lastWidth","lastVelocity","time","pointX","pointY","isFreehandDrawing","isFreehandPointMoved","dummyPoints","freehandDownPoint","controlPoint1","controlPoint2","minStrokeWidth","maxStrokeWidth","idx","startDraw","calcCurveCP","shapeSettings","Date","getTime","clientX","clientY","touches","EventHandler","freehandMoveHandler","ShapeType","FreehandDraw","previousShapeSettings","currentShapeSettings","getBoundingClientRect","remove","processPoint","changedTouches","fhCnt","mouseDown","p0","isLastPointTooClose","lastPoint","distanceTo","unshift","shift","dx1","dy1","dx2","dy2","m1","m2","l1","l2","k","cm","tx","ty","tempVelocity","pointVelocity","drawCurve","startWidth","endWidth","t1","t3","u1","u2","widthValue","bezierLength","drawSteps","u3","drawArc","pointX1","pointY1","pointX2","pointY2","pointX3","pointY3","bezierPoint","cp1","cp2","sPoints","selectedPoint","isSelected","isUndoRedoStack","isId","tempSelPointColl","zoomX","zoomY","lowercaseValue","pointsHorizontalFlip","pointsVerticalFlip","isIndex","shapeChangingArgs","getAttribute","discard","selectMaskImage","Selection","selection","setCursor","updateActivePoint","updateCursorStyles","setTextSelection","setActivePoint","clearSelection","calcShapeRatio","performTabAction","setDragDirection","isTouch","setTimeout","isFhdEditing","isFhdPoint","isShapeInserted","redrawShape","setTextBoxStylesToActObj","mouseDownEventHandler","mouseMoveEventHandler","mouseUpEventHandler","canvasMouseDownHandler","canvasMouseMoveHandler","canvasMouseUpHandler","touchStartHandler","keyDownEventHandler","handleScroll","textKeyDown","deleteItem","updatePrevShapeSettings","zoomType","isInitialTextEdited","dragCanvas","isFhdCustomized","touchEndPoint","panDown","dragElement","isObjSelected","adjustActObjForLineArrow","findTarget","getCurrentFlipState","setDragWidth","setDragHeight","currentDrawingShape","getTransRotationPoint","adjustNEPoints","adjustRotationPoints","getResizeDirection","resizedElement","unwireEvent","updPtCollForShpRot","findImageRatio","getNumTextValue","isImageClarity","upgradeImageQuality","triggerShapeChange","applyTransformToImg","findTargetObj","isSliding","isSliderActive","getArrowType","arrowShape","updateNWPoints","updateNPoints","updateNEPoints","updateWPoints","updateEPoints","updateSWPoints","updateSPoints","updateSEPoints","drawMaskCircle","isValueUpdated","getDistance","diffPoint","oldPoint","dragPoint","triangle","triangleRatio","isFirstMove","cursorTargetId","isTouchDblClick","startTouches","tempTouches","currMousePoint","isPreventDragging","timer","mouseWheel","textRow","mouseDownPoint","previousPoint","isPinching","pathAdjustedIndex","touchTime","initialPrevObj","ArrowheadType","None","SolidArrow","isMouseUp","allowUndoRedoPush","applyCurrShape","isKBDNavigation","selMouseUpEvent","getMouseCursor","isApply","frameObject","setCursorForActObj","highestOrder","getHighestOrder","tempShapeColl","isShape","setCursorForFreehandDrawing","setCursorFromObj","isBreak","maskCanvas","setCursorForLineArrow","setCursorForPath","setCursorForRotatedObject","isMove","horTP","horTopLinePointColl","horTP1","verLP","verLeftLinePointColl","verRP","verRightLinePointColl","horBP","horBottomLinePointColl","horBP1","rotCP","rotationCirclePointColl","horTP0","horBP0","getRectanglePoints","horTP_1","horBP_1","verLP_1","verRP_1","adjustCursorStylesForRotatedState","cursorMap","nw-resize","n-resize","ne-resize","w-resize","e-resize","sw-resize","s-resize","se-resize","getResizeElement","resizeMappings","positiveDegree","resizeMappings_1","startDegree","endDegree","resizeElement","isEntered","ptc","freehandSelectedIndex","pt","z1","z2","z3","z4","preventResizing","isShapeDragOut","shapeResizingArgs","allowShapeOverflow","allowOutofBound","shapeMovingArgs","isTextArea","isMouseOutsideImg","cropResize","rotatedDegree","tempEndX","tempEndY","getSquarePointForPath","allowPreventing","path","isObjOutsideImg","selectionResizingArgs","isPreventShaping","eventType","preventDragOut","limitDrag","isStart","isLimiting","wrapperWidth","wrapperHeight","preventDraggingInvertly","preventTextDraggingInvertly","preventInverseResize","getScaleRatio","newScale","gcd","divisor","revertResizing","performSEResize","resizeImg","revertCustomSelection","performNWResize","isCustomSelection","revertPoints","adjustNWPoints","adjustSWPoints","adjustSEPoints","width_2","isTextBox","measureText","rectangle","cx","cy","rotatedC","rotatePoints","newCenter","newBottomRight","newTopLeft","rotatedD","newBottomLeft","newTopRight","rotatedB","rotatedA","setResizedValue","getResizedElement","resizeMappings_2","isLine","updateCursorStylesForLineArrow","updateCursorStylesForPath","textHeight","selectInfo","textWidth","imageEditorClickEventArgs","currentTarget","isPan","isGrabbing","setXYPoints","clickEvent","tempCursor","performEnterAction","isShapeTouch","object_1","cursor_1","isFreehandDraw","isFreehandDrawTouch","isShapeClick","applyObj","isLineArrow","x_1","y_1","cursor_2","tempHoveredIndex","isPenEdit","qbArea","shapeChangedArgs","isPenDraw","canvasCursor","preventDefault","bbox","targetTouches","pageX","offsetLeft","pageY","offsetTop","firstFingerX","firstFingerY","secondFingerX","secondFingerY","zoomTrigger","ZoomTrigger","Pinch","calculateScale","isZoomBtnClick","isZoomOut","parentElement","closest","stopImmediatePropagation","activeObjShape","dummyClick","isCropSelection_1","splitWords_1","elemId","srcElement","id_1","prevCropObj_1","applyCurrActObj","freehandDrawSelectedId","isInitialLine","isAdjusted","setRatio","getCurrentIndex","setTimer","rgbToHex","offsetX","offsetY","tempPanMoveObj","tempPanMove","panMoveObj","panMove","ctrlKey","allowUndoRedo","Commands","isIcon","aspectRatioWidth","upload","isAspectRatio","aspectRatioHeight","placeholder","focusRatioBtn","isKeyBoardCrop","focus","isInsideCanvas","stopPropagation","MouseWheel","wheelDelta","String","fromCharCode","which","scrollHeight","resetCrop","arcRadius","standardSize","originalHeight","originalWidth","scaleWidth","getScale","snippetArray","scaleHeight","snippetArray1","originalValue","prevIndex","cursor_3","cursor_4","shapeEvent","endTouches","startDistance","clearTimeout","smallPoint","largePoint","shapeIDObj","backgroundColor","textShadow","trim","fontWeight","fontStyle","hexR","padLeft","hexG","hexB","hexA","hex","isNaN","Number","padChar","updateFreehandDrawColorChange","object_2","tempFreeHandDrawEditingStyles","radiusX","radiusY","arrowHead","arrowTail","none","circleSolid","squareSolid","rectX","rectY","rectWidth","rectHeight","rectAngle","angleRad","localX","localY","rotatedX","rotatedY","halfWidth","halfHeight","heightString","widthString","widthElement","heightElement","replace","isValue","Shape","uploader","initShapePvtProps","drawEllipse","drawLine","drawArrow","drawPath","drawRectangle","drawText","redrawActObj","updateShapeChangeEventArgs","updSelChangeEventArgs","iterateObjColl","updImgRatioForActObj","redrawObj","redrawText","renderTextArea","setTextBoxWidth","findTextTarget","updateFontStyles","applyFontStyle","updateFontRatio","updateFontSize","pushActItemIntoObj","clearActObj","refreshActiveObj","applyActObj","fileChanged","getShapeSetting","getShapeSettings","getRedactSettings","isPointsInRange","alignRotateFlipColl","selectShape","deleteShape","getMaxText","getLinePoints","setPointCollForShapeRotation","setTextBoxPos","setTextBoxPoints","alignTextAreaIntoCanvas","initializeTextShape","stopPathDrawing","updateArrowRatio","getSquarePointForRotatedShape","updateObj","straightenShapes","straightenShapePoints","straightenPath","straightenFHD","getTextBoxPosition","setFlipState","getNewShapeId","updateZOrder","getSmallestIndex","isIndexInObjColl","drawAnnotations","updateShapeColl","getNewOrder","getLowestOrder","shapeImg","crossorigin","preventFrameAnnotation","initializeShape","arrowStart","arrowEnd","drawShapeText","setDimension","arrowType","Arrow","Circle","SolidCircle","Square","SolidSquare","Bar","lineDraw","RedactType","Blur","setCenterPoints","setPointCollForLineAndArrow","initShapeProps","isPublicMethod","textFlip","prevObjColl","isInitialText","getFontSizes","fontSizeColl","drawShapeTextEvent","fontSizeInd","findIndex","drawShapeImageEvent","isSelect","addLetter","onLoadImgShape","updateTextFromTextArea","renderWidth","renderHeight","shapeId","letter","widthColl","smallestIndex","updatePathRatio","zoomObjColl","preventApply","len_1","updateArrowSize","len_2","straightenPoints","fLen","updateCurrentActiveObjPoint","currActObjIndex","flipLineArrowObj","rotateObjColl","rotateLineArrowObj","prevPoint","lineArrowHorizontalFlip","lineArrowVerticalFlip","currPoint","getRotDegOfShape","zOrderElem","transformTextArea","dupElem","removeElem","editTextElem","shadowColor","shadows","adjustedOutlineWidth","overflow","setTextBoxHeight","tempLeft","tempTop","center_1","width1","height1","width2","textAreaWidth","letterWidth","textAreaTop","whiteSpace","textOverflow","textAreaLeft","noRedact","selectedText","updateImgCanvas","resizeImage","aspectRatio","aspectRatioArray","selectionStart","finish","selectionEnd","substring","panObjColl","len_3","len_4","updateFontStyle","getTextAreaWidth","updateObjColl","dimensions_1","dimensions_2","tempBold","tempItalic","tempRedactBlur","tempRedactPixel","letters","transformOrigin","getRedactObjDetails","redactDetails","blurIntensity","getObjDetails","arrowObj","shapeDetails","getFreehandDrawDetails","obj_4","shapeDetailsColl","RedactDetailsColl","inRange","popForDefaultTransformedState","popForDefaultFlipState","popForDefaultRotateState","rotateRight","rotateleft","horizontal","vertical","isHorizontal","isVertical","isNextHorizontal","isNextVertical","isNextToNextHorizontal","isNextToNextVertical","isNextToNextToNextHorizontal","curr","obj_5","obj_6","maxi","maxStr","maxText","m","getSlope","getIntercept","lesserY","i_1","prev","lesserX","i_2","isSameAxis","slope","reverse","reArrangeObjColl","reUpdateShapeColl","reorderRedact","isOrdered","tempOrder","tempSelPointCollObj","isPrevented","isPenId","tempObjCollIndex","i_3","i_4","i_5","Transform","initTransformPvtVar","flipImage","setDestPointsForFlipState","zoomAction","disableZoomOutBtn","rotatedFlip","drawPannedImage","drawPannImage","performTransformation","updateTransform","rotatePan","setCurrPanRegion","calcMaxDimension","disablePan","currDestPoint","isReverseRotate","prevZoomValue","cropDimension","isPreventSelect","resizeCrop","updateResize","resize","straightenImage","resizedImgAngle","zoomBtnHold","transCurrObj","preventDownScale","previousDegree","currentDegree","rotateEvent","prevEventObjPoint","prevEventSelectionPoint","drawRotatedImage","rotateDegree","updateCurrSelectionPoint","previousDirection","flipEvent","lowercaseDirection","selObj","updateFlipColl","toLocaleLowerCase","dir","verticalFlip","horizontalFlip","lastFourItems","minZoomFactor","powerOften","previousZoomFactor","zoomEventArgs","currentZoomFactor","zoomEvent","zoomFact","drawZoomImgToCanvas","panObj_1","isAdd","rotateZoom","panObj_2","clearInterval","zoomOut","autoEnablePan","setZoomDimension","zmFactor","maxDestLeft","maxDestTop","panEventArgs","panEvent","isPanMethod","tempFlipState","isObjCreated","updatePanPoints","Direction","Horizontal","Vertical","rotatePanActiveObj","initialDestLeft","initialDestTop","intPan","limitPan","getCurrentZoomFactor","absValue","toolbar_1","freehandObj","cxtTbarHeight","ctToolbar","ctWrapper","hdWrapper","canvasWrapper","ctxTbarArea","offsetWidth","offsetHeight","refreshOverflow","canvasMaxWidth","canvasMaxHeight","widthScale","cxtTbar","heightScale","cssMaxWidth","cssMaxHeight","tempActObj","tempDestLeft","tempDestTop","temp1","minimum","resizeSrc","nearestNumber","smallestDifference","minimum_1","num","difference","prevResizeCurrObj","tempwidth","tempheight","tempZoom","sx","sy","currObject","resizeEventArgs","previousWidth","previousHeight","resizeEventHandler","UndoRedo","undoRedo","initializeUrPvtProp","updateUrc","refreshUrc","updateCurrUrc","callUndo","callRedo","undo","redo","updateUrObj","updateUndoRedo","undoDefault","isPreventing","updateUndoRedoStack","tempCurrSelPoint","undoRedoColl","tempUndoRedoColl","refreshToolbar","appliedURColl","prevTransform","getZeroZoomObjPointValue","adjObj","triggerActionCompletedEvent","lastObj","lastPrevObj","chrome","cold","warm","deleteObj","deleteFreehandDrawing","shapeInsert","shapeTransform","freehanddrawCustomized","getUndoRedoAction","imageRotate","freehanddraw","textAreaCustomization","imageHFlip","imageVFlip","updateImage","refreshToolbarActions","applyCurrentChanges","tempCircleCrop","updateFreehandDraw","updateFreehandDrawCustomized","updateDelete","updateTextAreaCustomization","updateText","imageFlip","updateCropTransformItems","endUndoRedo","updateTextBox","allowActiveObj","isUndo","isInitialLoaded","frameDestPoints","cropDimensionObj","getZeroZoomObjColl","getZeroZoomPointColl","tempArrowObj","applyImgTranform","isUpdated","enableTextEditing","extendStatics","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","_super","__extends","__","constructor","create","__decorate","decorators","desc","arguments","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","FinetuneSettings","ChildProperty","Property","ZoomSettings","SelectionSettings","FontFamily","Component","ImageEditor","ImageEditor_1","requiredModules","modules","member","preRender","getUniqueID","navigator","userAgent","initializeThemeColl","render","originalElement","clonedElement","isAngular","cloneNode","replaceChild","setValue","initialize","getPersistData","addOnPersist","onPropertyChanged","newProperties","oldProperties","keys","cssClass","removeClass","addClass","wireEvent","locale","showQuickAccessToolbar","Toolbar","className","toolbarTemplateFn","quickAccessToolbarTemplate","quickAccessToolbarTemplateFn","saveDialog","removeAttribute","quickAccessToolbar","createCanvas","createDropUploader","createSpinner","initializeZoomSettings","Uploader","getElementsByClassName","allowedExtensions","multiple","selected","errType","event","dataTransfer","andObj","okObj","supportObj","keyUpEventHandler","windowResizeHandler","isIos","info","screen","orientation","screenOrientation","boxSizing","dragObj","dropObj","browseObj","dropAreaElement","dropIconElement","dropContentElement","minDropContentElem","textContent","dropAnchorElement","minDropAnchorElem","dropInfoElement","dropUploader","adjustToScreen","notifyResetForAllModules","module","allowShape","applyShapes","includeAnnotations","getData","updateColl","resetChanges","imageSettings","isZoomed","tempToolbarHeight","tempToolbar","initialZoomValue","qtArea","updateImageTransformColl","freehandDraw","isEllipse","editCompleted","isArrow","isPath","isRectangle","isImage","updateShape","setting","tempFontSize","getRedacts","selectRedact","deleteRedact","updateRedact","option","applyImageFilter","filterOption","getImageDimension","isResized","drawFrame","frameType","frameChangeEventArgs","FrameLineStyle","Solid","isStraightened","cloneShape","isPreventUndoRedo","getImageFilter","canUndo","getUndoRedoColl","canRedo","undoRedoIndex","closeOverlayTbar","isEnabled","orderObj","bringToFront","updateShapeOrder","bringForward","sendToBack","sendBackward","clearImage","btoolbar","enableDisableToolbar","disable","prevObj_1","resetToolbar","tempDestPoints","tempSel","tempTransform","template","templateID","toolbarArea","toolbarFn","templateParser","isReact","templateColl","nodeType","qatFn","querySelectorAll","templateCompiler","compile","error","getTextFromId","1","2","3","4","5","6","7","8","getFinetuneOption","ImageFinetuneOption","Brightness","Contrast","Hue","Saturation","Opacity","Exposure","setPenStroke","setInitialZoomState","str","strArr","charAt","toUpperCase","items","isFinalApply","isResizeOkBtn","blrNAspRatElem","selElem","objt","sliderWrap","children","isCroppedEvent","previousElementSibling","getObjFromId","setTempFilterProperties","cropSelectedState","tempAdjustmentValue","getCurrentCanvasData","tempFrame","setCurrAdjustmentValue","finetuneValueChanging","typeToSelectionType","CropCustom","CropSquare","CropCircle","Crop3:2","Crop4:3","Crop5:4","Crop7:5","Crop16:9","Crop2:3","Crop3:4","Crop4:5","Crop5:7","Crop9:16","updateArrow","isObjPushed","collLength","updateFontFamily","itemText","text_1","text_2","updateFontColor","updateStrokeTextColor","updatePenStrokeWidth","updatePenStrokeColor","indexObj_1","updateStrokeWidth","updateStrokeColor","updateFillColor","isPreventURC","duplicateImage","pascalToSplitWords","splitStr","word","getCurrAdjustmentValue","penOpacity","transformSelect","isTransform","stValPan","straightenEventArgs","performStraighten","getStraightenFlipState","minX","maxX","minY","maxY","shapeObj","curFlip","Bootstrap5","primaryColor","secondaryColor","Bootstrap5Dark","Tailwind","TailwindDark","Fluent","FluentDark","Bootstrap4","Bootstrap","BootstrapDark","Material","MaterialDark","Fabric","FabricDark","Highcontrast","Material3","Material3Dark","Fluent2","Fluent2Dark","Fluent2Highcontrast","Bootstrap5.3","Bootstrap5.3Dark","Complex","Event","NotifyPropertyChanges","options","isFilterCanvasClick","isFrameBtnClick","Inject","ToolbarModule","FileType","Theme","ImageEditorCommand","ImageFilterOption","FrameType","initLocale","defaultLocale","ZoomIn","ZoomOut","Undo","Redo","Annotation","Finetune","Sharpen","Default","Chrome","Cold","Warm","Grayscale","BlackAndWhite","Sepia","Invert","Text","Pen","Reset","Save","Select","RotateLeft","RotateRight","HorizontalFlip","VerticalFlip","OK","Cancel","FillColor","StrokeColor","StrokeWidth","FontStyle","FontSize","FontColor","Pan","Move","Load","Custom","Ellipse","Rectangle","Line","Path","Bold","Italic","BoldItalic","XSmall","Small","Medium","Large","XLarge","ABC","Browse","Duplicate","Remove","EditText","Start","End","ArrowSolid","CircleSolid","SquareSolid","CropAndTransform","CropSelection","Image","Transparency","Height","Width","AspectRatio","W","H","DragText","DropText","BrowseText","SupportText","Frame","Mat","Bevel","Inset","Hook","Color","Size","Offset","Radius","Amount","Resize","0","20","40","60","80","100","Border","Dashed","Dotted","GradientColor","ConfirmDialogHeader","ConfirmDialogContent","AlertDialogHeader","AlertDialogContent","Yes","No","ImageErrorDialogHeader","ImageErrorDialogContent","Straighten","NoOutline","DlgOK","SaveAs","ImageName","Format","Quality","Download","Close","ImageSize","QualityInfo","Good","Great","Highest","BringForward","SendBackward","SendToBack","BringToFront","ZOrder","Redact","Pixelate","BorderRadius","TextOutlineColor","TextOutlineWidth","PixelSize","And","l10n","L10n","createToolbar","createContextualToolbar","updateToolbarItems","renderQAT","enableDisableTbrBtn","initMainToolbar","createBottomToolbar","refreshMainToolbar","createQuickAccessToolbar","destroyQuickAccessToolbar","zoomBtnMouseUpHandler","refreshDropDownBtn","closeContextualToolbar","destroyBottomToolbar","destroyTopToolbar","destroySubComponents","setLocale","preventZoomBtn","selFhdColor","getPenStroke","performDefTbrClick","refreshSlider","refreshShapeDrawing","preventEnableDisableUr","getConstant","initResizeToolbar","isFrameToolbar","resizeClick","frameToolbarClick","performCropTransformClick","duplicateShape","editText","initialSize","widthPress","heightPress","widthAspectRatio","heightAspectRatio","currToolbar","mToolbar","toolabr","toolbarItems","align","tooltipText","uploadItems","bToolbar","created","toolbarType","clicked","defToolbarClicked","createLeftToolbarControls","toolbar_2","toolbarElem","initBottomToolbar","toolbar_3","isApplyOption","leftItem","getLeftToolbarItem","rightItem","getRightToolbarItem","mainItem","getMainToolbarItem","zoomItem","getZoomToolbarItem","toolbarObj","renderAnnotationBtn","wireZoomBtnEvents","renderCropBtn","renderTransformBtn","tempToolbarItems","visible","prefixIcon","processToolbar","tabIndex","updateContextualToolbar","contextualToolbarArea","toolbar_6","initFilterToolbarItem","initFrameToolbarItem","renderSlider","cHt","cusWrapper","ht","insertBefore","getCropTextContent","processSubToolbar","zoomIn","zoomInBtnMouseDownHandler","zoomInBtnClickHandler","zoomOutBtnMouseDownHandler","zoomOutBtnClickHandler","keyCode","icon","widthNumeric","heightNumeric","getResizeToolbarItem","spanWidth","spanHeight","NumericTextBox","htmlAttributes","maxLength","showSpinButton","format","wireResizeBtnEvents","uploadElem","uploadDiv","getElementsByTagName","uploadBtnElem","title","onchange","triggerTbarClickEvent","originalEvent","isCustomized","defItems","toolbarId","enableDisableCloneBtn","getCurrentShapeIcon","drpDownBtn","DropDownButton","currentFreehandDrawIndex","penStrokeWidthObj","tempCurrentFreehandDrawIndex","setInitialShapeSettings","isDummyTextClick","duplicateElement","removeElement","editTextElement","zOrderElement","renderStraightenSlider","slider","createSlider","sliderHandle","shapeString","cancelPan","cropSelect","saveDialogPopup","dialogContent","dialogImgContent","dialogRightContent","imageNameDiv","formatNameDiv","qualityNameDiv","tabindex","qualityDiv","qualityOptionDiv","buttonGroup","dialog","input","htmlFor","beforeOpen","onBeforeopen","saveDialogClosed","hide","isSlider","qualityContainer","TextBox","qualityBtnGrp","qualityBtnIcon","qualitySliderValue","imageNameLabel","fileObj","Button","spanElem_1","drpDownBtn_1","ddbElem","activeBtn","updateImageSize","currentQuality","checked","qualityBtnClickHandler","compressionValues","qualitySlider","qualityOption","qualitySliderValueDiv","qualitySliderValueSpan","sliderObj","Slider","tooltip","placement","isVisible","showOn","changed","quality","fileSize","megabytes","compressedImage_1","toFixed","revokeObjectURL","binaryStringLength","fileSize_1","getCropTransformToolbarItem","straightenSpan","getShapesToolbarItem","initCropTransformToolbar","classToContentMap","e-custom","e-circle","e-square","e-custom-a","e-custom-b","e-custom-c","e-custom-d","e-custom-e","e-custom-f","e-custom-g","e-custom-h","e-custom-i","e-custom-j","shapeIcons","line","image","crop-custom","crop-circle","crop-square","crop-3:2","crop-4:3","crop-5:4","crop-7:5","crop-16:9","crop-2:3","crop-3:4","crop-4:5","crop-5:7","crop-9:16","initShapesToolbarItem","isToolbarString","excludeItems","createRectangleRadius","createShapeColor","createShapeBtn","createZOrderBtn","some","createStartBtn","createEndBtn","strokeWidthBtn","spanElem_2","drpDownBtn_2","strokeWidthItems","parentElem","childNodes","beforeModeSwitch","inst","popupLeft","offsetParent","mode","showButtons","dataBind","fillColor_1","fillDDB_1","strokeColor_1","strokeDDB_1","ColorPicker","modeSwitcher","noColor","inline","presetColors","custom","beforeTileRender","change","rgba","toggle","onModeSwitch","beforeClose","parenElem","innerWidth","getValue","background","spanElem_3","drpDownBtn_3","drpDownBtn_4","zOrderItems","spanElem","strokeEndBtn","getTextToolbarItem","getFontFamilyItems","initTextToolbarItem","createTextColor","createStrokeTextColor","createBackgroundColor","createTextBtn","fontColor_1","strokeDDB_2","backgroundColor_1","strokeDDB_3","fontColor_2","strokeDDB_4","spanElem_4","fontFamilyBtn_1","fontSizeBtnElem","fontSizeSpanElem_1","fontSizeBtn_1","fontNameBtn","createPopupOnClick","beforeItemRender","fontSizes","toolbarElement","bottomToolbar","toolbar_13","redactBlurElement","initPenToolbarItem","initAdjustmentToolbarItem","frameElem","pixelateElement","redactSlider","updateKBDNavigation","updateRedactObj","tbarInitialBtn_1","defaultFilter_1","tbarInitialChild","tbar","tempElem","getAdjustmentToolbarItem","getFrameToolbarItem","getFilterToolbarItem","getPenToolbarItem","createPenColor","createPenBtn","penColor","strokeDDB_5","presentVal","spanElem_5","drpDownBtn_5","valueToTextContent","frameWrapper","styles","createFrameColor","createFrameSize","createFrameRadius","createFrameInset","createFrameOffset","createFrameAmount","createFrameBorder","createFrameGradientColor","fillDDB","curFrameObjEvent","contextualToolbarClicked","createCanvasFilter","hdrWrapper","filterElem","drawDashedLine","updateFilterCanvas","selector","getQuickAccessToolbarItem","orgToolbarItems","quickAccessToolbarClicked","wrapperElement","annotation","adjustment","pathObject","right","object1","duplicateObj","isDisabledFilter","isDisabledAdjustment","isFilterFinetune","redactBlurBtn","pixelateBtn","panBtn","openSlider","unselectFrameBtn","updateRedactType","callFrameToolbar","zoomToFrameRange","isSmaller","selEle","imageFiltering","curFilterObjEvent","parent_1","returnValue","applyPreviewFilter","parent_2","setInterval","quickToolbar","qatArea","labelWrapper","sliderWrapper","updateFinetuneSpan","ftValPan","unselectBtn","selectors_1","ej2_instances","selectors_2","selFillElem","selStrokeElem","selTextStrokeElem","selStrokeTextColorElem","selTextBGElem","selPenStrokeElem","strokeWidthElem","rectangleRadiusElem","fontFamilyElem","fontSizeElem","boldBtn","italicBtn","getStrokeWidth","getRectRadius","btnElement","detach","isString","indexArr","getIndex","negativeIndexArr","isSameIndex","isFontColor","ctxTbar","innerText"],"mappings":"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"}